var kH=Object.defineProperty;var WH=(i,e,t)=>e in i?kH(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Sl=(i,e,t)=>WH(i,typeof e!="symbol"?e+"":e,t);function XH(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const a=Object.getOwnPropertyDescriptor(n,r);a&&Object.defineProperty(i,r,a.get?a:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function ho(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var WE={exports:{}},C0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3;function $H(){if(S3)return C0;S3=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:i,type:n,key:s,ref:r!==void 0?r:null,props:a}}return C0.Fragment=e,C0.jsx=t,C0.jsxs=t,C0}var M3;function jH(){return M3||(M3=1,WE.exports=$H()),WE.exports}var Ct=jH(),XE={exports:{}},R0={},$E={exports:{}},jE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E3;function qH(){return E3||(E3=1,function(i){function e(z,ee){var ne=z.length;z.push(ee);e:for(;0<ne;){var de=ne-1>>>1,Y=z[de];if(0<r(Y,ee))z[de]=ee,z[ne]=Y,ne=de;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var ee=z[0],ne=z.pop();if(ne!==ee){z[0]=ne;e:for(var de=0,Y=z.length,fe=Y>>>1;de<fe;){var Re=2*(de+1)-1,Le=z[Re],oe=Re+1,ke=z[oe];if(0>r(Le,ne))oe<Y&&0>r(ke,Le)?(z[de]=ke,z[oe]=ne,de=oe):(z[de]=Le,z[Re]=ne,de=Re);else if(oe<Y&&0>r(ke,ne))z[de]=ke,z[oe]=ne,de=oe;else break e}}return ee}function r(z,ee){var ne=z.sortIndex-ee.sortIndex;return ne!==0?ne:z.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();i.unstable_now=function(){return s.now()-o}}var c=[],f=[],d=1,m=null,v=3,y=!1,_=!1,A=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(z){for(var ee=t(f);ee!==null;){if(ee.callback===null)n(f);else if(ee.startTime<=z)n(f),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=t(f)}}function U(z){if(A=!1,B(z),!_)if(t(c)!==null)_=!0,w||(w=!0,G());else{var ee=t(f);ee!==null&&K(U,ee.startTime-z)}}var w=!1,O=-1,I=5,L=-1;function R(){return S?!0:!(i.unstable_now()-L<I)}function F(){if(S=!1,w){var z=i.unstable_now();L=z;var ee=!0;try{e:{_=!1,A&&(A=!1,E(O),O=-1),y=!0;var ne=v;try{t:{for(B(z),m=t(c);m!==null&&!(m.expirationTime>z&&R());){var de=m.callback;if(typeof de=="function"){m.callback=null,v=m.priorityLevel;var Y=de(m.expirationTime<=z);if(z=i.unstable_now(),typeof Y=="function"){m.callback=Y,B(z),ee=!0;break t}m===t(c)&&n(c),B(z)}else n(c);m=t(c)}if(m!==null)ee=!0;else{var fe=t(f);fe!==null&&K(U,fe.startTime-z),ee=!1}}break e}finally{m=null,v=ne,y=!1}ee=void 0}}finally{ee?G():w=!1}}}var G;if(typeof D=="function")G=function(){D(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=F,G=function(){$.postMessage(null)}}else G=function(){x(F,0)};function K(z,ee){O=x(function(){z(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ne=v;v=ee;try{return z()}finally{v=ne}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=v;v=z;try{return ee()}finally{v=ne}},i.unstable_scheduleCallback=function(z,ee,ne){var de=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ne+Y,z={id:d++,callback:ee,priorityLevel:z,startTime:ne,expirationTime:Y,sortIndex:-1},ne>de?(z.sortIndex=ne,e(f,z),t(c)===null&&z===t(f)&&(A?(E(O),O=-1):A=!0,K(U,ne-de))):(z.sortIndex=Y,e(c,z),_||y||(_=!0,w||(w=!0,G()))),z},i.unstable_shouldYield=R,i.unstable_wrapCallback=function(z){var ee=v;return function(){var ne=v;v=ee;try{return z.apply(this,arguments)}finally{v=ne}}}}(jE)),jE}var A3;function YH(){return A3||(A3=1,$E.exports=qH()),$E.exports}var qE={exports:{}},Vn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T3;function KH(){if(T3)return Vn;T3=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function v(Y){return Y===null||typeof Y!="object"?null:(Y=m&&Y[m]||Y["@@iterator"],typeof Y=="function"?Y:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,A={};function S(Y,fe,Re){this.props=Y,this.context=fe,this.refs=A,this.updater=Re||y}S.prototype.isReactComponent={},S.prototype.setState=function(Y,fe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,fe,"setState")},S.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function x(){}x.prototype=S.prototype;function E(Y,fe,Re){this.props=Y,this.context=fe,this.refs=A,this.updater=Re||y}var D=E.prototype=new x;D.constructor=E,_(D,S.prototype),D.isPureReactComponent=!0;var B=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function O(Y,fe,Re,Le,oe,ke){return Re=ke.ref,{$$typeof:i,type:Y,key:fe,ref:Re!==void 0?Re:null,props:ke}}function I(Y,fe){return O(Y.type,fe,void 0,void 0,void 0,Y.props)}function L(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===i}function R(Y){var fe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Re){return fe[Re]})}var F=/\/+/g;function G(Y,fe){return typeof Y=="object"&&Y!==null&&Y.key!=null?R(""+Y.key):fe.toString(36)}function V(){}function $(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(V,V):(Y.status="pending",Y.then(function(fe){Y.status==="pending"&&(Y.status="fulfilled",Y.value=fe)},function(fe){Y.status==="pending"&&(Y.status="rejected",Y.reason=fe)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function K(Y,fe,Re,Le,oe){var ke=typeof Y;(ke==="undefined"||ke==="boolean")&&(Y=null);var Ge=!1;if(Y===null)Ge=!0;else switch(ke){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(Y.$$typeof){case i:case e:Ge=!0;break;case d:return Ge=Y._init,K(Ge(Y._payload),fe,Re,Le,oe)}}if(Ge)return oe=oe(Y),Ge=Le===""?"."+G(Y,0):Le,B(oe)?(Re="",Ge!=null&&(Re=Ge.replace(F,"$&/")+"/"),K(oe,fe,Re,"",function(Q){return Q})):oe!=null&&(L(oe)&&(oe=I(oe,Re+(oe.key==null||Y&&Y.key===oe.key?"":(""+oe.key).replace(F,"$&/")+"/")+Ge)),fe.push(oe)),1;Ge=0;var Ze=Le===""?".":Le+":";if(B(Y))for(var Ae=0;Ae<Y.length;Ae++)Le=Y[Ae],ke=Ze+G(Le,Ae),Ge+=K(Le,fe,Re,ke,oe);else if(Ae=v(Y),typeof Ae=="function")for(Y=Ae.call(Y),Ae=0;!(Le=Y.next()).done;)Le=Le.value,ke=Ze+G(Le,Ae++),Ge+=K(Le,fe,Re,ke,oe);else if(ke==="object"){if(typeof Y.then=="function")return K($(Y),fe,Re,Le,oe);throw fe=String(Y),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function z(Y,fe,Re){if(Y==null)return Y;var Le=[],oe=0;return K(Y,Le,"","",function(ke){return fe.call(Re,ke,oe++)}),Le}function ee(Y){if(Y._status===-1){var fe=Y._result;fe=fe(),fe.then(function(Re){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Re)},function(Re){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Re)}),Y._status===-1&&(Y._status=0,Y._result=fe)}if(Y._status===1)return Y._result.default;throw Y._result}var ne=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function de(){}return Vn.Children={map:z,forEach:function(Y,fe,Re){z(Y,function(){fe.apply(this,arguments)},Re)},count:function(Y){var fe=0;return z(Y,function(){fe++}),fe},toArray:function(Y){return z(Y,function(fe){return fe})||[]},only:function(Y){if(!L(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Vn.Component=S,Vn.Fragment=t,Vn.Profiler=r,Vn.PureComponent=E,Vn.StrictMode=n,Vn.Suspense=c,Vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Vn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return U.H.useMemoCache(Y)}},Vn.cache=function(Y){return function(){return Y.apply(null,arguments)}},Vn.cloneElement=function(Y,fe,Re){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var Le=_({},Y.props),oe=Y.key,ke=void 0;if(fe!=null)for(Ge in fe.ref!==void 0&&(ke=void 0),fe.key!==void 0&&(oe=""+fe.key),fe)!w.call(fe,Ge)||Ge==="key"||Ge==="__self"||Ge==="__source"||Ge==="ref"&&fe.ref===void 0||(Le[Ge]=fe[Ge]);var Ge=arguments.length-2;if(Ge===1)Le.children=Re;else if(1<Ge){for(var Ze=Array(Ge),Ae=0;Ae<Ge;Ae++)Ze[Ae]=arguments[Ae+2];Le.children=Ze}return O(Y.type,oe,void 0,void 0,ke,Le)},Vn.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},Vn.createElement=function(Y,fe,Re){var Le,oe={},ke=null;if(fe!=null)for(Le in fe.key!==void 0&&(ke=""+fe.key),fe)w.call(fe,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(oe[Le]=fe[Le]);var Ge=arguments.length-2;if(Ge===1)oe.children=Re;else if(1<Ge){for(var Ze=Array(Ge),Ae=0;Ae<Ge;Ae++)Ze[Ae]=arguments[Ae+2];oe.children=Ze}if(Y&&Y.defaultProps)for(Le in Ge=Y.defaultProps,Ge)oe[Le]===void 0&&(oe[Le]=Ge[Le]);return O(Y,ke,void 0,void 0,null,oe)},Vn.createRef=function(){return{current:null}},Vn.forwardRef=function(Y){return{$$typeof:o,render:Y}},Vn.isValidElement=L,Vn.lazy=function(Y){return{$$typeof:d,_payload:{_status:-1,_result:Y},_init:ee}},Vn.memo=function(Y,fe){return{$$typeof:f,type:Y,compare:fe===void 0?null:fe}},Vn.startTransition=function(Y){var fe=U.T,Re={};U.T=Re;try{var Le=Y(),oe=U.S;oe!==null&&oe(Re,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(de,ne)}catch(ke){ne(ke)}finally{U.T=fe}},Vn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Vn.use=function(Y){return U.H.use(Y)},Vn.useActionState=function(Y,fe,Re){return U.H.useActionState(Y,fe,Re)},Vn.useCallback=function(Y,fe){return U.H.useCallback(Y,fe)},Vn.useContext=function(Y){return U.H.useContext(Y)},Vn.useDebugValue=function(){},Vn.useDeferredValue=function(Y,fe){return U.H.useDeferredValue(Y,fe)},Vn.useEffect=function(Y,fe,Re){var Le=U.H;if(typeof Re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Le.useEffect(Y,fe)},Vn.useId=function(){return U.H.useId()},Vn.useImperativeHandle=function(Y,fe,Re){return U.H.useImperativeHandle(Y,fe,Re)},Vn.useInsertionEffect=function(Y,fe){return U.H.useInsertionEffect(Y,fe)},Vn.useLayoutEffect=function(Y,fe){return U.H.useLayoutEffect(Y,fe)},Vn.useMemo=function(Y,fe){return U.H.useMemo(Y,fe)},Vn.useOptimistic=function(Y,fe){return U.H.useOptimistic(Y,fe)},Vn.useReducer=function(Y,fe,Re){return U.H.useReducer(Y,fe,Re)},Vn.useRef=function(Y){return U.H.useRef(Y)},Vn.useState=function(Y){return U.H.useState(Y)},Vn.useSyncExternalStore=function(Y,fe,Re){return U.H.useSyncExternalStore(Y,fe,Re)},Vn.useTransition=function(){return U.H.useTransition()},Vn.version="19.1.0",Vn}var w3;function Xg(){return w3||(w3=1,qE.exports=KH()),qE.exports}var YE={exports:{}},ka={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C3;function JH(){if(C3)return ka;C3=1;var i=Xg();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:c,containerInfo:f,implementation:d}}var s=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ka.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ka.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},ka.flushSync=function(c){var f=s.T,d=n.p;try{if(s.T=null,n.p=2,c)return c()}finally{s.T=f,n.p=d,n.d.f()}},ka.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},ka.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},ka.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,m=o(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:y}):d==="script"&&n.d.X(c,{crossOrigin:m,integrity:v,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ka.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},ka.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,m=o(d,f.crossOrigin);n.d.L(c,d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ka.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=o(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},ka.requestFormReset=function(c){n.d.r(c)},ka.unstable_batchedUpdates=function(c,f){return c(f)},ka.useFormState=function(c,f,d){return s.H.useFormState(c,f,d)},ka.useFormStatus=function(){return s.H.useHostTransitionStatus()},ka.version="19.1.0",ka}var R3;function yN(){if(R3)return YE.exports;R3=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),YE.exports=JH(),YE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D3;function ZH(){if(D3)return R0;D3=1;var i=YH(),e=Xg(),t=yN();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(n(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(n(188));return u!==l?null:l}for(var g=l,b=u;;){var T=g.return;if(T===null)break;var P=T.alternate;if(P===null){if(b=T.return,b!==null){g=b;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===g)return o(T),l;if(P===b)return o(T),u;P=P.sibling}throw Error(n(188))}if(g.return!==b.return)g=T,b=P;else{for(var q=!1,se=T.child;se;){if(se===g){q=!0,g=T,b=P;break}if(se===b){q=!0,b=T,g=P;break}se=se.sibling}if(!q){for(se=P.child;se;){if(se===g){q=!0,g=P,b=T;break}if(se===b){q=!0,b=P,g=T;break}se=se.sibling}if(!q)throw Error(n(189))}}if(g.alternate!==b)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function $(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case U:return"Suspense";case w:return"SuspenseList";case L:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case D:return(l.displayName||"Context")+".Provider";case E:return(l._context.displayName||"Context")+".Consumer";case B:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return u=l.displayName||null,u!==null?u:$(l.type)||"Memo";case I:u=l._payload,l=l._init;try{return $(l(u))}catch{}}return null}var K=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},de=[],Y=-1;function fe(l){return{current:l}}function Re(l){0>Y||(l.current=de[Y],de[Y]=null,Y--)}function Le(l,u){Y++,de[Y]=l.current,l.current=u}var oe=fe(null),ke=fe(null),Ge=fe(null),Ze=fe(null);function Ae(l,u){switch(Le(Ge,u),Le(ke,l),Le(oe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?KR(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=KR(u),l=JR(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Re(oe),Le(oe,l)}function Q(){Re(oe),Re(ke),Re(Ge)}function le(l){l.memoizedState!==null&&Le(Ze,l);var u=oe.current,g=JR(u,l.type);u!==g&&(Le(ke,l),Le(oe,g))}function me(l){ke.current===l&&(Re(oe),Re(ke)),Ze.current===l&&(Re(Ze),M0._currentValue=ne)}var be=Object.prototype.hasOwnProperty,ye=i.unstable_scheduleCallback,j=i.unstable_cancelCallback,ze=i.unstable_shouldYield,Pe=i.unstable_requestPaint,ae=i.unstable_now,Z=i.unstable_getCurrentPriorityLevel,Ie=i.unstable_ImmediatePriority,Se=i.unstable_UserBlockingPriority,We=i.unstable_NormalPriority,ht=i.unstable_LowPriority,te=i.unstable_IdlePriority,k=i.log,ie=i.unstable_setDisableYieldValue,Ee=null,Be=null;function Ue(l){if(typeof k=="function"&&ie(l),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Ee,l)}catch{}}var He=Math.clz32?Math.clz32:Rt,ft=Math.log,Et=Math.LN2;function Rt(l){return l>>>=0,l===0?32:31-(ft(l)/Et|0)|0}var ct=256,pt=4194304;function Nt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ge(l,u,g){var b=l.pendingLanes;if(b===0)return 0;var T=0,P=l.suspendedLanes,q=l.pingedLanes;l=l.warmLanes;var se=b&134217727;return se!==0?(b=se&~P,b!==0?T=Nt(b):(q&=se,q!==0?T=Nt(q):g||(g=se&~l,g!==0&&(T=Nt(g))))):(se=b&~P,se!==0?T=Nt(se):q!==0?T=Nt(q):g||(g=b&~l,g!==0&&(T=Nt(g)))),T===0?0:u!==0&&u!==T&&(u&P)===0&&(P=T&-T,g=u&-u,P>=g||P===32&&(g&4194048)!==0)?u:T}function Ve(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function _t(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Me(){var l=ct;return ct<<=1,(ct&4194048)===0&&(ct=256),l}function qe(){var l=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),l}function mt(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function Pt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function At(l,u,g,b,T,P){var q=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var se=l.entanglements,Te=l.expirationTimes,et=l.hiddenUpdates;for(g=q&~g;0<g;){var yt=31-He(g),Mt=1<<yt;se[yt]=0,Te[yt]=-1;var rt=et[yt];if(rt!==null)for(et[yt]=null,yt=0;yt<rt.length;yt++){var at=rt[yt];at!==null&&(at.lane&=-536870913)}g&=~Mt}b!==0&&gt(l,b,0),P!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=P&~(q&~u))}function gt(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var b=31-He(u);l.entangledLanes|=u,l.entanglements[b]=l.entanglements[b]|1073741824|g&4194090}function Ut(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var b=31-He(g),T=1<<b;T&u|l[b]&u&&(l[b]|=u),g&=~T}}function Xt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Cn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Tn(){var l=ee.p;return l!==0?l:(l=window.event,l===void 0?32:g3(l.type))}function he(l,u){var g=ee.p;try{return ee.p=l,u()}finally{ee.p=g}}var nt=Math.random().toString(36).slice(2),Ye="__reactFiber$"+nt,lt="__reactProps$"+nt,wt="__reactContainer$"+nt,hn="__reactEvents$"+nt,nn="__reactListeners$"+nt,Qt="__reactHandles$"+nt,Ft="__reactResources$"+nt,tn="__reactMarker$"+nt;function jt(l){delete l[Ye],delete l[lt],delete l[hn],delete l[nn],delete l[Qt]}function W(l){var u=l[Ye];if(u)return u;for(var g=l.parentNode;g;){if(u=g[wt]||g[Ye]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=t3(l);l!==null;){if(g=l[Ye])return g;l=t3(l)}return u}l=g,g=l.parentNode}return null}function re(l){if(l=l[Ye]||l[wt]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Ce(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function je(l){var u=l[Ft];return u||(u=l[Ft]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Qe(l){l[tn]=!0}var tt=new Set,Tt={};function dt(l,u){J(l,u),J(l+"Capture",u)}function J(l,u){for(Tt[l]=u,l=0;l<u.length;l++)tt.add(u[l])}var pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_e={},we={};function Oe(l){return be.call(we,l)?!0:be.call(_e,l)?!1:pe.test(l)?we[l]=!0:(_e[l]=!0,!1)}function Je(l,u,g){if(Oe(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var b=u.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function ut(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function xt(l,u,g,b){if(b===null)l.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+b)}}var St,zt;function Ot(l){if(St===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);St=u&&u[1]||"",zt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+l+zt}var Ht=!1;function rn(l,u){if(!l||Ht)return"";Ht=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(u){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(at){var rt=at}Reflect.construct(l,[],Mt)}else{try{Mt.call()}catch(at){rt=at}l.call(Mt.prototype)}}else{try{throw Error()}catch(at){rt=at}(Mt=l())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(at){if(at&&rt&&typeof at.stack=="string")return[at.stack,rt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=b.DetermineComponentFrameRoot(),q=P[0],se=P[1];if(q&&se){var Te=q.split(`
`),et=se.split(`
`);for(T=b=0;b<Te.length&&!Te[b].includes("DetermineComponentFrameRoot");)b++;for(;T<et.length&&!et[T].includes("DetermineComponentFrameRoot");)T++;if(b===Te.length||T===et.length)for(b=Te.length-1,T=et.length-1;1<=b&&0<=T&&Te[b]!==et[T];)T--;for(;1<=b&&0<=T;b--,T--)if(Te[b]!==et[T]){if(b!==1||T!==1)do if(b--,T--,0>T||Te[b]!==et[T]){var yt=`
`+Te[b].replace(" at new "," at ");return l.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",l.displayName)),yt}while(1<=b&&0<=T);break}}}finally{Ht=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Ot(g):""}function en(l){switch(l.tag){case 26:case 27:case 5:return Ot(l.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return rn(l.type,!1);case 11:return rn(l.type.render,!1);case 1:return rn(l.type,!0);case 31:return Ot("Activity");default:return""}}function kn(l){try{var u="";do u+=en(l),l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function qt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function on(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Yt(l){var u=on(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),b=""+l[u];if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,P=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return T.call(this)},set:function(q){b=""+q,P.call(this,q)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(q){b=""+q},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function gi(l){l._valueTracker||(l._valueTracker=Yt(l))}function Sn(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),b="";return l&&(b=on(l)?l.checked?"true":"false":l.value),l=b,l!==g?(u.setValue(l),!0):!1}function wn(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var xi=/[\n"\\]/g;function un(l){return l.replace(xi,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function zn(l,u,g,b,T,P,q,se){l.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.type=q:l.removeAttribute("type"),u!=null?q==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+qt(u)):l.value!==""+qt(u)&&(l.value=""+qt(u)):q!=="submit"&&q!=="reset"||l.removeAttribute("value"),u!=null?Ui(l,q,qt(u)):g!=null?Ui(l,q,qt(g)):b!=null&&l.removeAttribute("value"),T==null&&P!=null&&(l.defaultChecked=!!P),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?l.name=""+qt(se):l.removeAttribute("name")}function Pn(l,u,g,b,T,P,q,se){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),u!=null||g!=null){if(!(P!=="submit"&&P!=="reset"||u!=null))return;g=g!=null?""+qt(g):"",u=u!=null?""+qt(u):g,se||u===l.value||(l.value=u),l.defaultValue=u}b=b??T,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=se?l.checked:!!b,l.defaultChecked=!!b,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(l.name=q)}function Ui(l,u,g){u==="number"&&wn(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function ei(l,u,g,b){if(l=l.options,u){u={};for(var T=0;T<g.length;T++)u["$"+g[T]]=!0;for(g=0;g<l.length;g++)T=u.hasOwnProperty("$"+l[g].value),l[g].selected!==T&&(l[g].selected=T),T&&b&&(l[g].defaultSelected=!0)}else{for(g=""+qt(g),u=null,T=0;T<l.length;T++){if(l[T].value===g){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}u!==null||l[T].disabled||(u=l[T])}u!==null&&(u.selected=!0)}}function bi(l,u,g){if(u!=null&&(u=""+qt(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+qt(g):""}function Ir(l,u,g,b){if(u==null){if(b!=null){if(g!=null)throw Error(n(92));if(K(b)){if(1<b.length)throw Error(n(93));b=b[0]}g=b}g==null&&(g=""),u=g}g=qt(u),l.defaultValue=g,b=l.textContent,b===g&&b!==""&&b!==null&&(l.value=b)}function va(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var go=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Th(l,u,g){var b=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":b?l.setProperty(u,g):typeof g!="number"||g===0||go.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function wh(l,u,g){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||u!=null&&u.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var T in u)b=u[T],u.hasOwnProperty(T)&&g[T]!==b&&Th(l,T,b)}else for(var P in u)u.hasOwnProperty(P)&&Th(l,P,u[P])}function Sp(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),L_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ch(l){return L_.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Mp=null;function Ep(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Yl=null,$c=null;function gv(l){var u=re(l);if(u&&(l=u.stateNode)){var g=l[lt]||null;e:switch(l=u.stateNode,u.type){case"input":if(zn(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+un(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var b=g[u];if(b!==l&&b.form===l.form){var T=b[lt]||null;if(!T)throw Error(n(90));zn(b,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<g.length;u++)b=g[u],b.form===l.form&&Sn(b)}break e;case"textarea":bi(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&ei(l,!!g.multiple,u,!1)}}}var Rh=!1;function vv(l,u,g){if(Rh)return l(u,g);Rh=!0;try{var b=l(u);return b}finally{if(Rh=!1,(Yl!==null||$c!==null)&&(Lo(),Yl&&(u=Yl,l=$c,$c=Yl=null,gv(u),l)))for(u=0;u<l.length;u++)gv(l[u])}}function Xu(l,u){var g=l.stateNode;if(g===null)return null;var b=g[lt]||null;if(b===null)return null;g=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(n(231,u,typeof g));return g}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dh=!1;if(vo)try{var $u={};Object.defineProperty($u,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{Dh=!1}var Zo=null,yv=null,Ap=null;function _v(){if(Ap)return Ap;var l,u=yv,g=u.length,b,T="value"in Zo?Zo.value:Zo.textContent,P=T.length;for(l=0;l<g&&u[l]===T[l];l++);var q=g-l;for(b=1;b<=q&&u[g-b]===T[P-b];b++);return Ap=T.slice(l,1<b?1-b:void 0)}function Kl(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function ju(){return!0}function Bh(){return!1}function ya(l){function u(g,b,T,P,q){this._reactName=g,this._targetInst=T,this.type=b,this.nativeEvent=P,this.target=q,this.currentTarget=null;for(var se in l)l.hasOwnProperty(se)&&(g=l[se],this[se]=g?g(P):P[se]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?ju:Bh,this.isPropagationStopped=Bh,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),u}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=ya(Jl),Yu=d({},Jl,{view:0,detail:0}),I_=ya(Yu),Qo,Ku,Ju,Zu=d({},Yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ih,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ju&&(Ju&&l.type==="mousemove"?(Qo=l.screenX-Ju.screenX,Ku=l.screenY-Ju.screenY):Ku=Qo=0,Ju=l),Qo)},movementY:function(l){return"movementY"in l?l.movementY:Ku}}),xv=ya(Zu),P_=d({},Zu,{dataTransfer:0}),lE=ya(P_),kr=d({},Yu,{relatedTarget:0}),Tp=ya(kr),N_=d({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),O_=ya(N_),U_=d({},Jl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),F_=ya(U_),Lh=d({},Jl,{data:0}),wp=ya(Lh),z_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bv(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=G_[l])?!!u[l]:!1}function Ih(){return bv}var V_=d({},Yu,{key:function(l){if(l.key){var u=z_[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Kl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?H_[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ih,charCode:function(l){return l.type==="keypress"?Kl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Kl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Sv=ya(V_),Mv=d({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cp=ya(Mv),k_=d({},Yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ih}),Ev=ya(k_),W_=d({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),el=ya(W_),Av=d({},Zu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),cE=ya(Av),X_=d({},Jl,{newState:0,oldState:0}),Zl=ya(X_),tl=[9,13,27,32],Ph=vo&&"CompositionEvent"in window,jc=null;vo&&"documentMode"in document&&(jc=document.documentMode);var Nh=vo&&"TextEvent"in window&&!jc,Oh=vo&&(!Ph||jc&&8<jc&&11>=jc),Ql=" ",Wr=!1;function Uh(l,u){switch(l){case"keyup":return tl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tv(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ec=!1;function Fh(l,u){switch(l){case"compositionend":return Tv(u);case"keypress":return u.which!==32?null:(Wr=!0,Ql);case"textInput":return l=u.data,l===Ql&&Wr?null:l;default:return null}}function wv(l,u){if(ec)return l==="compositionend"||!Ph&&Uh(l,u)?(l=_v(),Ap=yv=Zo=null,ec=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Oh&&u.locale!=="ko"?null:u.data;default:return null}}var Rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Rp[l.type]:u==="textarea"}function Na(l,u,g,b){Yl?$c?$c.push(b):$c=[b]:Yl=b,u=Wx(u,"onChange"),0<u.length&&(g=new qu("onChange","change",null,g,b),l.push({event:g,listeners:u}))}var Qu=null,qc=null;function $_(l){XR(l,0)}function zh(l){var u=Ce(l);if(Sn(u))return l}function Dp(l,u){if(l==="change")return u}var Bp=!1;if(vo){var Lp;if(vo){var ef="oninput"in document;if(!ef){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),ef=typeof tf.oninput=="function"}Lp=ef}else Lp=!1;Bp=Lp&&(!document.documentMode||9<document.documentMode)}function Gi(){Qu&&(Qu.detachEvent("onpropertychange",j_),qc=Qu=null)}function j_(l){if(l.propertyName==="value"&&zh(qc)){var u=[];Na(u,qc,l,Ep(l)),vv($_,u)}}function uE(l,u,g){l==="focusin"?(Gi(),Qu=u,qc=g,Qu.attachEvent("onpropertychange",j_)):l==="focusout"&&Gi()}function q_(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return zh(qc)}function Hh(l,u){if(l==="click")return zh(u)}function tc(l,u){if(l==="input"||l==="change")return zh(u)}function Y_(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Oa=typeof Object.is=="function"?Object.is:Y_;function Ws(l,u){if(Oa(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var T=g[b];if(!be.call(u,T)||!Oa(l[T],u[T]))return!1}return!0}function Ua(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Rv(l,u){var g=Ua(l);l=0;for(var b;g;){if(g.nodeType===3){if(b=l+g.textContent.length,l<=u&&b>=u)return{node:g,offset:u-l};l=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Ua(g)}}function Dv(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Dv(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Bv(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=wn(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=wn(l.document)}return u}function Gh(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Lv=vo&&"documentMode"in document&&11>=document.documentMode,nl=null,Ip=null,Vh=null,Pp=!1;function Iv(l,u,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Pp||nl==null||nl!==wn(b)||(b=nl,"selectionStart"in b&&Gh(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Vh&&Ws(Vh,b)||(Vh=b,b=Wx(Ip,"onSelect"),0<b.length&&(u=new qu("onSelect","select",null,u,g),l.push({event:u,listeners:b}),u.target=nl)))}function Xr(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var nc={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},Np={},K_={};vo&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete nc.animationend.animation,delete nc.animationiteration.animation,delete nc.animationstart.animation),"TransitionEvent"in window||delete nc.transitionend.transition);function il(l){if(Np[l])return Np[l];if(!nc[l])return l;var u=nc[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in K_)return Np[l]=u[g];return l}var _a=il("animationend"),Pv=il("animationiteration"),Fa=il("animationstart"),J_=il("transitionrun"),rl=il("transitionstart"),nf=il("transitioncancel"),al=il("transitionend"),Op=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function Pr(l,u){Op.set(l,u),dt(u,[l])}var Nv=new WeakMap;function $r(l,u){if(typeof l=="object"&&l!==null){var g=Nv.get(l);return g!==void 0?g:(u={value:l,source:u,stack:kn(u)},Nv.set(l,u),u)}return{value:l,source:u,stack:kn(u)}}var na=[],As=0,Up=0;function Wh(){for(var l=As,u=Up=As=0;u<l;){var g=na[u];na[u++]=null;var b=na[u];na[u++]=null;var T=na[u];na[u++]=null;var P=na[u];if(na[u++]=null,b!==null&&T!==null){var q=b.pending;q===null?T.next=T:(T.next=q.next,q.next=T),b.pending=T}P!==0&&Ov(g,T,P)}}function ic(l,u,g,b){na[As++]=l,na[As++]=u,na[As++]=g,na[As++]=b,Up|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function Fp(l,u,g,b){return ic(l,u,g,b),rf(l)}function sl(l,u){return ic(l,null,null,u),rf(l)}function Ov(l,u,g){l.lanes|=g;var b=l.alternate;b!==null&&(b.lanes|=g);for(var T=!1,P=l.return;P!==null;)P.childLanes|=g,b=P.alternate,b!==null&&(b.childLanes|=g),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(T=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,T&&u!==null&&(T=31-He(g),l=P.hiddenUpdates,b=l[T],b===null?l[T]=[u]:b.push(u),u.lane=g|536870912),P):null}function rf(l){if(50<Bo)throw Bo=0,hu=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var rc={};function Uv(l,u,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(l,u,g,b){return new Uv(l,u,g,b)}function Xh(l){return l=l.prototype,!(!l||!l.isReactComponent)}function sr(l,u){var g=l.alternate;return g===null?(g=za(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Fv(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Nr(l,u,g,b,T,P){var q=0;if(b=l,typeof l=="function")Xh(l)&&(q=1);else if(typeof l=="string")q=DH(l,g,oe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case L:return l=za(31,g,u,T),l.elementType=L,l.lanes=P,l;case _:return ac(g.children,T,P,u);case A:q=8,T|=24;break;case S:return l=za(12,g,u,T|2),l.elementType=S,l.lanes=P,l;case U:return l=za(13,g,u,T),l.elementType=U,l.lanes=P,l;case w:return l=za(19,g,u,T),l.elementType=w,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case D:q=10;break e;case E:q=9;break e;case B:q=11;break e;case O:q=14;break e;case I:q=16,b=null;break e}q=29,g=Error(n(130,l===null?"null":typeof l,"")),b=null}return u=za(q,g,u,T),u.elementType=l,u.type=b,u.lanes=P,u}function ac(l,u,g,b){return l=za(7,l,b,u),l.lanes=g,l}function $h(l,u,g){return l=za(6,l,null,u),l.lanes=g,l}function zp(l,u,g){return u=za(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var af=[],Ha=0,jh=null,sf=0,jr=[],Za=0,sc=null,yo=1,_o="";function ol(l,u){af[Ha++]=sf,af[Ha++]=jh,jh=l,sf=u}function Hp(l,u,g){jr[Za++]=yo,jr[Za++]=_o,jr[Za++]=sc,sc=l;var b=yo;l=_o;var T=32-He(b)-1;b&=~(1<<T),g+=1;var P=32-He(u)+T;if(30<P){var q=T-T%5;P=(b&(1<<q)-1).toString(32),b>>=q,T-=q,yo=1<<32-He(u)+T|g<<T|b,_o=P+l}else yo=1<<P|g<<T|b,_o=l}function zv(l){l.return!==null&&(ol(l,1),Hp(l,1,0))}function Hv(l){for(;l===jh;)jh=af[--Ha],af[Ha]=null,sf=af[--Ha],af[Ha]=null;for(;l===sc;)sc=jr[--Za],jr[Za]=null,_o=jr[--Za],jr[Za]=null,yo=jr[--Za],jr[Za]=null}var xa=null,$i=null,oi=!1,Ts=null,Qa=!1,Gp=Error(n(519));function oc(l){var u=Error(n(418,""));throw Yc($r(u,l)),Gp}function Z_(l){var u=l.stateNode,g=l.type,b=l.memoizedProps;switch(u[Ye]=l,u[lt]=b,g){case"dialog":Kn("cancel",u),Kn("close",u);break;case"iframe":case"object":case"embed":Kn("load",u);break;case"video":case"audio":for(g=0;g<v0.length;g++)Kn(v0[g],u);break;case"source":Kn("error",u);break;case"img":case"image":case"link":Kn("error",u),Kn("load",u);break;case"details":Kn("toggle",u);break;case"input":Kn("invalid",u),Pn(u,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),gi(u);break;case"select":Kn("invalid",u);break;case"textarea":Kn("invalid",u),Ir(u,b.value,b.defaultValue,b.children),gi(u)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||b.suppressHydrationWarning===!0||YR(u.textContent,g)?(b.popover!=null&&(Kn("beforetoggle",u),Kn("toggle",u)),b.onScroll!=null&&Kn("scroll",u),b.onScrollEnd!=null&&Kn("scrollend",u),b.onClick!=null&&(u.onclick=Xx),u=!0):u=!1,u||oc(l)}function Gv(l){for(xa=l.return;xa;)switch(xa.tag){case 5:case 13:Qa=!1;return;case 27:case 3:Qa=!0;return;default:xa=xa.return}}function Xs(l){if(l!==xa)return!1;if(!oi)return Gv(l),oi=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||DE(l.type,l.memoizedProps)),g=!g),g&&$i&&oc(l),Gv(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(u===0){$i=bl(l.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++;l=l.nextSibling}$i=null}}else u===27?(u=$i,Bf(l.type)?(l=PE,PE=null,$i=l):$i=u):$i=xa?bl(l.stateNode.nextSibling):null;return!0}function of(){$i=xa=null,oi=!1}function ui(){var l=Ts;return l!==null&&(dn===null?dn=l:dn.push.apply(dn,l),Ts=null),l}function Yc(l){Ts===null?Ts=[l]:Ts.push(l)}var Vv=fe(null),lc=null,ll=null;function cc(l,u,g){Le(Vv,u._currentValue),u._currentValue=g}function cl(l){l._currentValue=Vv.current,Re(Vv)}function kv(l,u,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===g)break;l=l.return}}function qh(l,u,g,b){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var P=T.dependencies;if(P!==null){var q=T.child;P=P.firstContext;e:for(;P!==null;){var se=P;P=T;for(var Te=0;Te<u.length;Te++)if(se.context===u[Te]){P.lanes|=g,se=P.alternate,se!==null&&(se.lanes|=g),kv(P.return,g,l),b||(q=null);break e}P=se.next}}else if(T.tag===18){if(q=T.return,q===null)throw Error(n(341));q.lanes|=g,P=q.alternate,P!==null&&(P.lanes|=g),kv(q,g,l),q=null}else q=T.child;if(q!==null)q.return=T;else for(q=T;q!==null;){if(q===l){q=null;break}if(T=q.sibling,T!==null){T.return=q.return,q=T;break}q=q.return}T=q}}function ws(l,u,g,b){l=null;for(var T=u,P=!1;T!==null;){if(!P){if((T.flags&524288)!==0)P=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var q=T.alternate;if(q===null)throw Error(n(387));if(q=q.memoizedProps,q!==null){var se=T.type;Oa(T.pendingProps.value,q.value)||(l!==null?l.push(se):l=[se])}}else if(T===Ze.current){if(q=T.alternate,q===null)throw Error(n(387));q.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(M0):l=[M0])}T=T.return}l!==null&&qh(u,l,g,b),u.flags|=262144}function Yh(l){for(l=l.firstContext;l!==null;){if(!Oa(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function xo(l){lc=l,ll=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Zi(l){return Vp(lc,l)}function Kh(l,u){return lc===null&&xo(l),Vp(l,u)}function Vp(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},ll===null){if(l===null)throw Error(n(308));ll=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ll=ll.next=u;return g}var Wv=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,b){l.push(b)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},fE=i.unstable_scheduleCallback,Q_=i.unstable_NormalPriority,yr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kp(){return{controller:new Wv,data:new Map,refCount:0}}function lf(l){l.refCount--,l.refCount===0&&fE(Q_,function(){l.controller.abort()})}var cf=null,Jh=0,Bn=0,uf=null;function es(l,u){if(cf===null){var g=cf=[];Jh=0,Bn=bE(),uf={status:"pending",value:void 0,then:function(b){g.push(b)}}}return Jh++,u.then(Wp,Wp),u}function Wp(){if(--Jh===0&&cf!==null){uf!==null&&(uf.status="fulfilled");var l=cf;cf=null,Bn=0,uf=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function hE(l,u){var g=[],b={status:"pending",value:null,reason:null,then:function(T){g.push(T)}};return l.then(function(){b.status="fulfilled",b.value=u;for(var T=0;T<g.length;T++)(0,g[T])(u)},function(T){for(b.status="rejected",b.reason=T,T=0;T<g.length;T++)(0,g[T])(void 0)}),b}var Zh=z.S;z.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&es(l,u),Zh!==null&&Zh(l,u)};var Cs=fe(null);function uc(){var l=Cs.current;return l!==null?l:Rn.pooledCache}function Qh(l,u){u===null?Le(Cs,Cs.current):Le(Cs,u.pool)}function Xp(){var l=uc();return l===null?null:{parent:yr._currentValue,pool:l}}var ed=Error(n(460)),Xv=Error(n(474)),$s=Error(n(542)),td={then:function(){}};function $p(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ff(){}function jp(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(ff,ff),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ex(l),l;default:if(typeof u.status=="string")u.then(ff,ff);else{if(l=Rn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(b){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=b}},function(b){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=b}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ex(l),l}throw Rs=u,ed}}var Rs=null;function $v(){if(Rs===null)throw Error(n(459));var l=Rs;return Rs=null,l}function ex(l){if(l===ed||l===$s)throw Error(n(483))}var ul=!1;function jv(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mn(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function bo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fl(l,u,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(fi&2)!==0){var T=b.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),b.pending=u,u=rf(l),Ov(l,null,g),u}return ic(l,b,u,g),rf(l)}function Kc(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var b=u.lanes;b&=l.pendingLanes,g|=b,u.lanes=g,Ut(l,g)}}function hf(l,u){var g=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var T=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};P===null?T=P=q:P=P.next=q,g=g.next}while(g!==null);P===null?T=P=u:P=P.next=u}else T=P=u;g={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:b.shared,callbacks:b.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var qv=!1;function nd(){if(qv){var l=uf;if(l!==null)throw l}}function df(l,u,g,b){qv=!1;var T=l.updateQueue;ul=!1;var P=T.firstBaseUpdate,q=T.lastBaseUpdate,se=T.shared.pending;if(se!==null){T.shared.pending=null;var Te=se,et=Te.next;Te.next=null,q===null?P=et:q.next=et,q=Te;var yt=l.alternate;yt!==null&&(yt=yt.updateQueue,se=yt.lastBaseUpdate,se!==q&&(se===null?yt.firstBaseUpdate=et:se.next=et,yt.lastBaseUpdate=Te))}if(P!==null){var Mt=T.baseState;q=0,yt=et=Te=null,se=P;do{var rt=se.lane&-536870913,at=rt!==se.lane;if(at?(cn&rt)===rt:(b&rt)===rt){rt!==0&&rt===Bn&&(qv=!0),yt!==null&&(yt=yt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var An=l,vn=se;rt=u;var Li=g;switch(vn.tag){case 1:if(An=vn.payload,typeof An=="function"){Mt=An.call(Li,Mt,rt);break e}Mt=An;break e;case 3:An.flags=An.flags&-65537|128;case 0:if(An=vn.payload,rt=typeof An=="function"?An.call(Li,Mt,rt):An,rt==null)break e;Mt=d({},Mt,rt);break e;case 2:ul=!0}}rt=se.callback,rt!==null&&(l.flags|=64,at&&(l.flags|=8192),at=T.callbacks,at===null?T.callbacks=[rt]:at.push(rt))}else at={lane:rt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},yt===null?(et=yt=at,Te=Mt):yt=yt.next=at,q|=rt;if(se=se.next,se===null){if(se=T.shared.pending,se===null)break;at=se,se=at.next,at.next=null,T.lastBaseUpdate=at,T.shared.pending=null}}while(!0);yt===null&&(Te=Mt),T.baseState=Te,T.firstBaseUpdate=et,T.lastBaseUpdate=yt,P===null&&(T.shared.lanes=0),eo|=q,l.lanes=q,l.memoizedState=Mt}}function pf(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function tx(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)pf(g[l],u)}var mf=fe(null),qp=fe(0);function nx(l,u){l=Ns,Le(qp,l),Le(mf,u),Ns=l|u.baseLanes}function Yv(){Le(qp,Ns),Le(mf,mf.current)}function id(){Ns=qp.current,Re(mf),Re(qp)}var hl=0,Ln=null,vi=null,_r=null,Yp=!1,fc=!1,ba=!1,Ar=0,Ds=0,qr=null,ix=0;function or(){throw Error(n(321))}function ia(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!Oa(l[g],u[g]))return!1;return!0}function dl(l,u,g,b,T,P){return hl=P,Ln=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=l===null||l.memoizedState===null?rm:f0,ba=!1,P=g(b,T),ba=!1,fc&&(P=ax(u,g,b,T)),rx(l),P}function rx(l){z.H=sd;var u=vi!==null&&vi.next!==null;if(hl=0,_r=vi=Ln=null,Yp=!1,Ds=0,qr=null,u)throw Error(n(300));l===null||Or||(l=l.dependencies,l!==null&&Yh(l)&&(Or=!0))}function ax(l,u,g,b){Ln=l;var T=0;do{if(fc&&(qr=null),Ds=0,fc=!1,25<=T)throw Error(n(301));if(T+=1,_r=vi=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}z.H=Bx,P=u(g,b)}while(fc);return P}function dE(){var l=z.H,u=l.useState()[0];return u=typeof u.then=="function"?js(u):u,l=l.useState()[0],(vi!==null?vi.memoizedState:null)!==l&&(Ln.flags|=1024),u}function Kv(){var l=Ar!==0;return Ar=0,l}function Kp(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function Jv(l){if(Yp){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Yp=!1}hl=0,_r=vi=Ln=null,fc=!1,Ds=Ar=0,qr=null}function Sa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Ln.memoizedState=_r=l:_r=_r.next=l,_r}function xr(){if(vi===null){var l=Ln.alternate;l=l!==null?l.memoizedState:null}else l=vi.next;var u=_r===null?Ln.memoizedState:_r.next;if(u!==null)_r=u,vi=l;else{if(l===null)throw Ln.alternate===null?Error(n(467)):Error(n(310));vi=l,l={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},_r===null?Ln.memoizedState=_r=l:_r=_r.next=l}return _r}function hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function js(l){var u=Ds;return Ds+=1,qr===null&&(qr=[]),l=jp(qr,l,u),u=Ln,(_r===null?u.memoizedState:_r.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?rm:f0),l}function Jp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return js(l);if(l.$$typeof===D)return Zi(l)}throw Error(n(438,String(l)))}function Zv(l){var u=null,g=Ln.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var b=Ln.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(u={data:b.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=hc(),Ln.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),b=0;b<l;b++)g[b]=R;return u.index++,g}function pl(l,u){return typeof u=="function"?u(l):u}function dc(l){var u=xr();return Qv(u,vi,l)}function Qv(l,u,g){var b=l.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=g;var T=l.baseQueue,P=b.pending;if(P!==null){if(T!==null){var q=T.next;T.next=P.next,P.next=q}u.baseQueue=T=P,b.pending=null}if(P=l.baseState,T===null)l.memoizedState=P;else{u=T.next;var se=q=null,Te=null,et=u,yt=!1;do{var Mt=et.lane&-536870913;if(Mt!==et.lane?(cn&Mt)===Mt:(hl&Mt)===Mt){var rt=et.revertLane;if(rt===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),Mt===Bn&&(yt=!0);else if((hl&rt)===rt){et=et.next,rt===Bn&&(yt=!0);continue}else Mt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Te===null?(se=Te=Mt,q=P):Te=Te.next=Mt,Ln.lanes|=rt,eo|=rt;Mt=et.action,ba&&g(P,Mt),P=et.hasEagerState?et.eagerState:g(P,Mt)}else rt={lane:Mt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Te===null?(se=Te=rt,q=P):Te=Te.next=rt,Ln.lanes|=Mt,eo|=Mt;et=et.next}while(et!==null&&et!==u);if(Te===null?q=P:Te.next=se,!Oa(P,l.memoizedState)&&(Or=!0,yt&&(g=uf,g!==null)))throw g;l.memoizedState=P,l.baseState=q,l.baseQueue=Te,b.lastRenderedState=P}return T===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function e0(l){var u=xr(),g=u.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var b=g.dispatch,T=g.pending,P=u.memoizedState;if(T!==null){g.pending=null;var q=T=T.next;do P=l(P,q.action),q=q.next;while(q!==T);Oa(P,u.memoizedState)||(Or=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),g.lastRenderedState=P}return[P,b]}function sx(l,u,g){var b=Ln,T=xr(),P=oi;if(P){if(g===void 0)throw Error(n(407));g=g()}else g=u();var q=!Oa((vi||T).memoizedState,g);q&&(T.memoizedState=g,Or=!0),T=T.queue;var se=lx.bind(null,b,T,l);if(yf(2048,8,se,[l]),T.getSnapshot!==u||q||_r!==null&&_r.memoizedState.tag&1){if(b.flags|=2048,vf(9,rd(),ox.bind(null,b,T,g,u),null),Rn===null)throw Error(n(349));P||(hl&124)!==0||gf(b,u,g)}return g}function gf(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=Ln.updateQueue,u===null?(u=hc(),Ln.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function ox(l,u,g,b){u.value=g,u.getSnapshot=b,cx(u)&&ux(l)}function lx(l,u,g){return g(function(){cx(u)&&ux(l)})}function cx(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!Oa(l,g)}catch{return!0}}function ux(l){var u=sl(l,2);u!==null&&Aa(u,l,2)}function t0(l){var u=Sa();if(typeof l=="function"){var g=l;if(l=g(),ba){Ue(!0);try{g()}finally{Ue(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:l},u}function fx(l,u,g,b){return l.baseState=g,Qv(l,vi,typeof b=="function"?b:pl)}function pE(l,u,g,b,T){if(im(l))throw Error(n(485));if(l=u.action,l!==null){var P={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){P.listeners.push(q)}};z.T!==null?g(!0):P.isTransition=!1,b(P),g=u.pending,g===null?(P.next=u.pending=P,hx(u,P)):(P.next=g.next,u.pending=g.next=P)}}function hx(l,u){var g=u.action,b=u.payload,T=l.state;if(u.isTransition){var P=z.T,q={};z.T=q;try{var se=g(T,b),Te=z.S;Te!==null&&Te(q,se),dx(l,u,se)}catch(et){n0(l,u,et)}finally{z.T=P}}else try{P=g(T,b),dx(l,u,P)}catch(et){n0(l,u,et)}}function dx(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){px(l,u,b)},function(b){return n0(l,u,b)}):px(l,u,g)}function px(l,u,g){u.status="fulfilled",u.value=g,mx(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,hx(l,g)))}function n0(l,u,g){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do u.status="rejected",u.reason=g,mx(u),u=u.next;while(u!==b)}l.action=null}function mx(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function i0(l,u){return u}function gx(l,u){if(oi){var g=Rn.formState;if(g!==null){e:{var b=Ln;if(oi){if($i){t:{for(var T=$i,P=Qa;T.nodeType!==8;){if(!P){T=null;break t}if(T=bl(T.nextSibling),T===null){T=null;break t}}P=T.data,T=P==="F!"||P==="F"?T:null}if(T){$i=bl(T.nextSibling),b=T.data==="F!";break e}}oc(b)}b=!1}b&&(u=g[0])}}return g=Sa(),g.memoizedState=g.baseState=u,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i0,lastRenderedState:u},g.queue=b,g=Rx.bind(null,Ln,b),b.dispatch=g,b=t0(!1),P=nm.bind(null,Ln,!1,b.queue),b=Sa(),T={state:u,dispatch:null,action:l,pending:null},b.queue=T,g=pE.bind(null,Ln,T,P,g),T.dispatch=g,b.memoizedState=l,[u,g,!1]}function vx(l){var u=xr();return yx(u,vi,l)}function yx(l,u,g){if(u=Qv(l,u,i0)[0],l=dc(pl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var b=js(u)}catch(q){throw q===ed?$s:q}else b=u;u=xr();var T=u.queue,P=T.dispatch;return g!==u.memoizedState&&(Ln.flags|=2048,vf(9,rd(),mE.bind(null,T,g),null)),[b,P,l]}function mE(l,u){l.action=u}function _x(l){var u=xr(),g=vi;if(g!==null)return yx(u,g,l);xr(),u=u.memoizedState,g=xr();var b=g.queue.dispatch;return g.memoizedState=l,[u,b,!1]}function vf(l,u,g,b){return l={tag:l,create:g,deps:b,inst:u,next:null},u=Ln.updateQueue,u===null&&(u=hc(),Ln.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,u.lastEffect=l),l}function rd(){return{destroy:void 0,resource:void 0}}function r0(){return xr().memoizedState}function Zp(l,u,g,b){var T=Sa();b=b===void 0?null:b,Ln.flags|=l,T.memoizedState=vf(1|u,rd(),g,b)}function yf(l,u,g,b){var T=xr();b=b===void 0?null:b;var P=T.memoizedState.inst;vi!==null&&b!==null&&ia(b,vi.memoizedState.deps)?T.memoizedState=vf(u,P,g,b):(Ln.flags|=l,T.memoizedState=vf(1|u,P,g,b))}function a0(l,u){Zp(8390656,8,l,u)}function s0(l,u){yf(2048,8,l,u)}function Qp(l,u){return yf(4,2,l,u)}function em(l,u){return yf(4,4,l,u)}function xx(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function bx(l,u,g){g=g!=null?g.concat([l]):null,yf(4,4,xx.bind(null,u,l),g)}function o0(){}function Sx(l,u){var g=xr();u=u===void 0?null:u;var b=g.memoizedState;return u!==null&&ia(u,b[1])?b[0]:(g.memoizedState=[l,u],l)}function l0(l,u){var g=xr();u=u===void 0?null:u;var b=g.memoizedState;if(u!==null&&ia(u,b[1]))return b[0];if(b=l(),ba){Ue(!0);try{l()}finally{Ue(!1)}}return g.memoizedState=[b,u],b}function tm(l,u,g){return g===void 0||(hl&1073741824)!==0?l.memoizedState=u:(l.memoizedState=g,l=mm(),Ln.lanes|=l,eo|=l,g)}function Mx(l,u,g,b){return Oa(g,u)?g:mf.current!==null?(l=tm(l,g,b),Oa(l,u)||(Or=!0),l):(hl&42)===0?(Or=!0,l.memoizedState=g):(l=mm(),Ln.lanes|=l,eo|=l,u)}function Ex(l,u,g,b,T){var P=ee.p;ee.p=P!==0&&8>P?P:8;var q=z.T,se={};z.T=se,nm(l,!1,u,g);try{var Te=T(),et=z.S;if(et!==null&&et(se,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var yt=hE(Te,b);ad(l,u,yt,tr(l))}else ad(l,u,b,tr(l))}catch(Mt){ad(l,u,{then:function(){},status:"rejected",reason:Mt},tr())}finally{ee.p=P,z.T=q}}function gE(){}function c0(l,u,g,b){if(l.tag!==5)throw Error(n(476));var T=Ax(l).queue;Ex(l,T,u,ne,g===null?gE:function(){return Tx(l),g(b)})}function Ax(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:ne},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Tx(l){var u=Ax(l).next.queue;ad(l,u,{},tr())}function u0(){return Zi(M0)}function wx(){return xr().memoizedState}function Cx(){return xr().memoizedState}function vE(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=tr();l=bo(g);var b=fl(u,l,g);b!==null&&(Aa(b,u,g),Kc(b,u,g)),u={cache:kp()},l.payload=u;return}u=u.return}}function yE(l,u,g){var b=tr();g={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},im(l)?Dx(u,g):(g=Fp(l,u,g,b),g!==null&&(Aa(g,l,b),ts(g,u,b)))}function Rx(l,u,g){var b=tr();ad(l,u,g,b)}function ad(l,u,g,b){var T={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(im(l))Dx(u,T);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var q=u.lastRenderedState,se=P(q,g);if(T.hasEagerState=!0,T.eagerState=se,Oa(se,q))return ic(l,u,T,0),Rn===null&&Wh(),!1}catch{}finally{}if(g=Fp(l,u,T,b),g!==null)return Aa(g,l,b),ts(g,u,b),!0}return!1}function nm(l,u,g,b){if(b={lane:2,revertLane:bE(),action:b,hasEagerState:!1,eagerState:null,next:null},im(l)){if(u)throw Error(n(479))}else u=Fp(l,g,b,2),u!==null&&Aa(u,l,2)}function im(l){var u=l.alternate;return l===Ln||u!==null&&u===Ln}function Dx(l,u){fc=Yp=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function ts(l,u,g){if((g&4194048)!==0){var b=u.lanes;b&=l.pendingLanes,g|=b,u.lanes=g,Ut(l,g)}}var sd={readContext:Zi,use:Jp,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useLayoutEffect:or,useInsertionEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useSyncExternalStore:or,useId:or,useHostTransitionStatus:or,useFormState:or,useActionState:or,useOptimistic:or,useMemoCache:or,useCacheRefresh:or},rm={readContext:Zi,use:Jp,useCallback:function(l,u){return Sa().memoizedState=[l,u===void 0?null:u],l},useContext:Zi,useEffect:a0,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,Zp(4194308,4,xx.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Zp(4194308,4,l,u)},useInsertionEffect:function(l,u){Zp(4,2,l,u)},useMemo:function(l,u){var g=Sa();u=u===void 0?null:u;var b=l();if(ba){Ue(!0);try{l()}finally{Ue(!1)}}return g.memoizedState=[b,u],b},useReducer:function(l,u,g){var b=Sa();if(g!==void 0){var T=g(u);if(ba){Ue(!0);try{g(u)}finally{Ue(!1)}}}else T=u;return b.memoizedState=b.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},b.queue=l,l=l.dispatch=yE.bind(null,Ln,l),[b.memoizedState,l]},useRef:function(l){var u=Sa();return l={current:l},u.memoizedState=l},useState:function(l){l=t0(l);var u=l.queue,g=Rx.bind(null,Ln,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:o0,useDeferredValue:function(l,u){var g=Sa();return tm(g,l,u)},useTransition:function(){var l=t0(!1);return l=Ex.bind(null,Ln,l.queue,!0,!1),Sa().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var b=Ln,T=Sa();if(oi){if(g===void 0)throw Error(n(407));g=g()}else{if(g=u(),Rn===null)throw Error(n(349));(cn&124)!==0||gf(b,u,g)}T.memoizedState=g;var P={value:g,getSnapshot:u};return T.queue=P,a0(lx.bind(null,b,P,l),[l]),b.flags|=2048,vf(9,rd(),ox.bind(null,b,P,g,u),null),g},useId:function(){var l=Sa(),u=Rn.identifierPrefix;if(oi){var g=_o,b=yo;g=(b&~(1<<32-He(b)-1)).toString(32)+g,u=""+u+"R"+g,g=Ar++,0<g&&(u+="H"+g.toString(32)),u+=""}else g=ix++,u=""+u+"r"+g.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:u0,useFormState:gx,useActionState:gx,useOptimistic:function(l){var u=Sa();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=nm.bind(null,Ln,!0,g),g.dispatch=u,[l,u]},useMemoCache:Zv,useCacheRefresh:function(){return Sa().memoizedState=vE.bind(null,Ln)}},f0={readContext:Zi,use:Jp,useCallback:Sx,useContext:Zi,useEffect:s0,useImperativeHandle:bx,useInsertionEffect:Qp,useLayoutEffect:em,useMemo:l0,useReducer:dc,useRef:r0,useState:function(){return dc(pl)},useDebugValue:o0,useDeferredValue:function(l,u){var g=xr();return Mx(g,vi.memoizedState,l,u)},useTransition:function(){var l=dc(pl)[0],u=xr().memoizedState;return[typeof l=="boolean"?l:js(l),u]},useSyncExternalStore:sx,useId:wx,useHostTransitionStatus:u0,useFormState:vx,useActionState:vx,useOptimistic:function(l,u){var g=xr();return fx(g,vi,l,u)},useMemoCache:Zv,useCacheRefresh:Cx},Bx={readContext:Zi,use:Jp,useCallback:Sx,useContext:Zi,useEffect:s0,useImperativeHandle:bx,useInsertionEffect:Qp,useLayoutEffect:em,useMemo:l0,useReducer:e0,useRef:r0,useState:function(){return e0(pl)},useDebugValue:o0,useDeferredValue:function(l,u){var g=xr();return vi===null?tm(g,l,u):Mx(g,vi.memoizedState,l,u)},useTransition:function(){var l=e0(pl)[0],u=xr().memoizedState;return[typeof l=="boolean"?l:js(l),u]},useSyncExternalStore:sx,useId:wx,useHostTransitionStatus:u0,useFormState:_x,useActionState:_x,useOptimistic:function(l,u){var g=xr();return vi!==null?fx(g,vi,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:Zv,useCacheRefresh:Cx},Jc=null,od=0;function ld(l){var u=od;return od+=1,Jc===null&&(Jc=[]),jp(Jc,l,u)}function _f(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function am(l,u){throw u.$$typeof===m?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Lx(l){var u=l._init;return u(l._payload)}function Ix(l){function u(Xe,Fe){if(l){var Ke=Xe.deletions;Ke===null?(Xe.deletions=[Fe],Xe.flags|=16):Ke.push(Fe)}}function g(Xe,Fe){if(!l)return null;for(;Fe!==null;)u(Xe,Fe),Fe=Fe.sibling;return null}function b(Xe){for(var Fe=new Map;Xe!==null;)Xe.key!==null?Fe.set(Xe.key,Xe):Fe.set(Xe.index,Xe),Xe=Xe.sibling;return Fe}function T(Xe,Fe){return Xe=sr(Xe,Fe),Xe.index=0,Xe.sibling=null,Xe}function P(Xe,Fe,Ke){return Xe.index=Ke,l?(Ke=Xe.alternate,Ke!==null?(Ke=Ke.index,Ke<Fe?(Xe.flags|=67108866,Fe):Ke):(Xe.flags|=67108866,Fe)):(Xe.flags|=1048576,Fe)}function q(Xe){return l&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function se(Xe,Fe,Ke,bt){return Fe===null||Fe.tag!==6?(Fe=$h(Ke,Xe.mode,bt),Fe.return=Xe,Fe):(Fe=T(Fe,Ke),Fe.return=Xe,Fe)}function Te(Xe,Fe,Ke,bt){var Jt=Ke.type;return Jt===_?yt(Xe,Fe,Ke.props.children,bt,Ke.key):Fe!==null&&(Fe.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===I&&Lx(Jt)===Fe.type)?(Fe=T(Fe,Ke.props),_f(Fe,Ke),Fe.return=Xe,Fe):(Fe=Nr(Ke.type,Ke.key,Ke.props,null,Xe.mode,bt),_f(Fe,Ke),Fe.return=Xe,Fe)}function et(Xe,Fe,Ke,bt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Ke.containerInfo||Fe.stateNode.implementation!==Ke.implementation?(Fe=zp(Ke,Xe.mode,bt),Fe.return=Xe,Fe):(Fe=T(Fe,Ke.children||[]),Fe.return=Xe,Fe)}function yt(Xe,Fe,Ke,bt,Jt){return Fe===null||Fe.tag!==7?(Fe=ac(Ke,Xe.mode,bt,Jt),Fe.return=Xe,Fe):(Fe=T(Fe,Ke),Fe.return=Xe,Fe)}function Mt(Xe,Fe,Ke){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=$h(""+Fe,Xe.mode,Ke),Fe.return=Xe,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case v:return Ke=Nr(Fe.type,Fe.key,Fe.props,null,Xe.mode,Ke),_f(Ke,Fe),Ke.return=Xe,Ke;case y:return Fe=zp(Fe,Xe.mode,Ke),Fe.return=Xe,Fe;case I:var bt=Fe._init;return Fe=bt(Fe._payload),Mt(Xe,Fe,Ke)}if(K(Fe)||G(Fe))return Fe=ac(Fe,Xe.mode,Ke,null),Fe.return=Xe,Fe;if(typeof Fe.then=="function")return Mt(Xe,ld(Fe),Ke);if(Fe.$$typeof===D)return Mt(Xe,Kh(Xe,Fe),Ke);am(Xe,Fe)}return null}function rt(Xe,Fe,Ke,bt){var Jt=Fe!==null?Fe.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Jt!==null?null:se(Xe,Fe,""+Ke,bt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:return Ke.key===Jt?Te(Xe,Fe,Ke,bt):null;case y:return Ke.key===Jt?et(Xe,Fe,Ke,bt):null;case I:return Jt=Ke._init,Ke=Jt(Ke._payload),rt(Xe,Fe,Ke,bt)}if(K(Ke)||G(Ke))return Jt!==null?null:yt(Xe,Fe,Ke,bt,null);if(typeof Ke.then=="function")return rt(Xe,Fe,ld(Ke),bt);if(Ke.$$typeof===D)return rt(Xe,Fe,Kh(Xe,Ke),bt);am(Xe,Ke)}return null}function at(Xe,Fe,Ke,bt,Jt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Xe=Xe.get(Ke)||null,se(Fe,Xe,""+bt,Jt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case v:return Xe=Xe.get(bt.key===null?Ke:bt.key)||null,Te(Fe,Xe,bt,Jt);case y:return Xe=Xe.get(bt.key===null?Ke:bt.key)||null,et(Fe,Xe,bt,Jt);case I:var qn=bt._init;return bt=qn(bt._payload),at(Xe,Fe,Ke,bt,Jt)}if(K(bt)||G(bt))return Xe=Xe.get(Ke)||null,yt(Fe,Xe,bt,Jt,null);if(typeof bt.then=="function")return at(Xe,Fe,Ke,ld(bt),Jt);if(bt.$$typeof===D)return at(Xe,Fe,Ke,Kh(Fe,bt),Jt);am(Fe,bt)}return null}function An(Xe,Fe,Ke,bt){for(var Jt=null,qn=null,ln=Fe,xn=Fe=0,sa=null;ln!==null&&xn<Ke.length;xn++){ln.index>xn?(sa=ln,ln=null):sa=ln.sibling;var di=rt(Xe,ln,Ke[xn],bt);if(di===null){ln===null&&(ln=sa);break}l&&ln&&di.alternate===null&&u(Xe,ln),Fe=P(di,Fe,xn),qn===null?Jt=di:qn.sibling=di,qn=di,ln=sa}if(xn===Ke.length)return g(Xe,ln),oi&&ol(Xe,xn),Jt;if(ln===null){for(;xn<Ke.length;xn++)ln=Mt(Xe,Ke[xn],bt),ln!==null&&(Fe=P(ln,Fe,xn),qn===null?Jt=ln:qn.sibling=ln,qn=ln);return oi&&ol(Xe,xn),Jt}for(ln=b(ln);xn<Ke.length;xn++)sa=at(ln,Xe,xn,Ke[xn],bt),sa!==null&&(l&&sa.alternate!==null&&ln.delete(sa.key===null?xn:sa.key),Fe=P(sa,Fe,xn),qn===null?Jt=sa:qn.sibling=sa,qn=sa);return l&&ln.forEach(function(Of){return u(Xe,Of)}),oi&&ol(Xe,xn),Jt}function vn(Xe,Fe,Ke,bt){if(Ke==null)throw Error(n(151));for(var Jt=null,qn=null,ln=Fe,xn=Fe=0,sa=null,di=Ke.next();ln!==null&&!di.done;xn++,di=Ke.next()){ln.index>xn?(sa=ln,ln=null):sa=ln.sibling;var Of=rt(Xe,ln,di.value,bt);if(Of===null){ln===null&&(ln=sa);break}l&&ln&&Of.alternate===null&&u(Xe,ln),Fe=P(Of,Fe,xn),qn===null?Jt=Of:qn.sibling=Of,qn=Of,ln=sa}if(di.done)return g(Xe,ln),oi&&ol(Xe,xn),Jt;if(ln===null){for(;!di.done;xn++,di=Ke.next())di=Mt(Xe,di.value,bt),di!==null&&(Fe=P(di,Fe,xn),qn===null?Jt=di:qn.sibling=di,qn=di);return oi&&ol(Xe,xn),Jt}for(ln=b(ln);!di.done;xn++,di=Ke.next())di=at(ln,Xe,xn,di.value,bt),di!==null&&(l&&di.alternate!==null&&ln.delete(di.key===null?xn:di.key),Fe=P(di,Fe,xn),qn===null?Jt=di:qn.sibling=di,qn=di);return l&&ln.forEach(function(VH){return u(Xe,VH)}),oi&&ol(Xe,xn),Jt}function Li(Xe,Fe,Ke,bt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===_&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:e:{for(var Jt=Ke.key;Fe!==null;){if(Fe.key===Jt){if(Jt=Ke.type,Jt===_){if(Fe.tag===7){g(Xe,Fe.sibling),bt=T(Fe,Ke.props.children),bt.return=Xe,Xe=bt;break e}}else if(Fe.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===I&&Lx(Jt)===Fe.type){g(Xe,Fe.sibling),bt=T(Fe,Ke.props),_f(bt,Ke),bt.return=Xe,Xe=bt;break e}g(Xe,Fe);break}else u(Xe,Fe);Fe=Fe.sibling}Ke.type===_?(bt=ac(Ke.props.children,Xe.mode,bt,Ke.key),bt.return=Xe,Xe=bt):(bt=Nr(Ke.type,Ke.key,Ke.props,null,Xe.mode,bt),_f(bt,Ke),bt.return=Xe,Xe=bt)}return q(Xe);case y:e:{for(Jt=Ke.key;Fe!==null;){if(Fe.key===Jt)if(Fe.tag===4&&Fe.stateNode.containerInfo===Ke.containerInfo&&Fe.stateNode.implementation===Ke.implementation){g(Xe,Fe.sibling),bt=T(Fe,Ke.children||[]),bt.return=Xe,Xe=bt;break e}else{g(Xe,Fe);break}else u(Xe,Fe);Fe=Fe.sibling}bt=zp(Ke,Xe.mode,bt),bt.return=Xe,Xe=bt}return q(Xe);case I:return Jt=Ke._init,Ke=Jt(Ke._payload),Li(Xe,Fe,Ke,bt)}if(K(Ke))return An(Xe,Fe,Ke,bt);if(G(Ke)){if(Jt=G(Ke),typeof Jt!="function")throw Error(n(150));return Ke=Jt.call(Ke),vn(Xe,Fe,Ke,bt)}if(typeof Ke.then=="function")return Li(Xe,Fe,ld(Ke),bt);if(Ke.$$typeof===D)return Li(Xe,Fe,Kh(Xe,Ke),bt);am(Xe,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Fe!==null&&Fe.tag===6?(g(Xe,Fe.sibling),bt=T(Fe,Ke),bt.return=Xe,Xe=bt):(g(Xe,Fe),bt=$h(Ke,Xe.mode,bt),bt.return=Xe,Xe=bt),q(Xe)):g(Xe,Fe)}return function(Xe,Fe,Ke,bt){try{od=0;var Jt=Li(Xe,Fe,Ke,bt);return Jc=null,Jt}catch(ln){if(ln===ed||ln===$s)throw ln;var qn=za(29,ln,null,Xe.mode);return qn.lanes=bt,qn.return=Xe,qn}finally{}}}var Zc=Ix(!0),Px=Ix(!1),Si=fe(null),qs=null;function pc(l){var u=l.alternate;Le(lr,lr.current&1),Le(Si,l),qs===null&&(u===null||mf.current!==null||u.memoizedState!==null)&&(qs=l)}function Nx(l){if(l.tag===22){if(Le(lr,lr.current),Le(Si,l),qs===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(qs=l)}}else mc()}function mc(){Le(lr,lr.current),Le(Si,Si.current)}function So(l){Re(Si),qs===l&&(qs=null),Re(lr)}var lr=fe(0);function ml(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||IE(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function gc(l,u,g,b){u=l.memoizedState,g=g(b,u),g=g==null?u:d({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Ma={enqueueSetState:function(l,u,g){l=l._reactInternals;var b=tr(),T=bo(b);T.payload=u,g!=null&&(T.callback=g),u=fl(l,T,b),u!==null&&(Aa(u,l,b),Kc(u,l,b))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var b=tr(),T=bo(b);T.tag=1,T.payload=u,g!=null&&(T.callback=g),u=fl(l,T,b),u!==null&&(Aa(u,l,b),Kc(u,l,b))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=tr(),b=bo(g);b.tag=2,u!=null&&(b.callback=u),u=fl(l,b,g),u!==null&&(Aa(u,l,g),Kc(u,l,g))}};function Ox(l,u,g,b,T,P,q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,P,q):u.prototype&&u.prototype.isPureReactComponent?!Ws(g,b)||!Ws(T,P):!0}function Ux(l,u,g,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==l&&Ma.enqueueReplaceState(u,u.state,null)}function Mo(l,u){var g=u;if("ref"in u){g={};for(var b in u)b!=="ref"&&(g[b]=u[b])}if(l=l.defaultProps){g===u&&(g=d({},g));for(var T in l)g[T]===void 0&&(g[T]=l[T])}return g}var Qc=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function cd(l){Qc(l)}function sm(l){console.error(l)}function Fx(l){Qc(l)}function om(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(b){setTimeout(function(){throw b})}}function Bs(l,u,g){try{var b=l.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function lm(l,u,g){return g=bo(g),g.tag=3,g.payload={element:null},g.callback=function(){om(l,u)},g}function zx(l){return l=bo(l),l.tag=3,l}function cm(l,u,g,b){var T=g.type.getDerivedStateFromError;if(typeof T=="function"){var P=b.value;l.payload=function(){return T(P)},l.callback=function(){Bs(u,g,b)}}var q=g.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(l.callback=function(){Bs(u,g,b),typeof T!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var se=b.stack;this.componentDidCatch(b.value,{componentStack:se!==null?se:""})})}function _E(l,u,g,b,T){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(u=g.alternate,u!==null&&ws(u,g,T,!0),g=Si.current,g!==null){switch(g.tag){case 13:return qs===null?h():g.alternate===null&&Fi===0&&(Fi=3),g.flags&=-257,g.flags|=65536,g.lanes=T,b===td?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([b]):u.add(b),st(l,b,T)),!1;case 22:return g.flags|=65536,b===td?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([b]):g.add(b)),st(l,b,T)),!1}throw Error(n(435,g.tag))}return st(l,b,T),h(),!1}if(oi)return u=Si.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,b!==Gp&&(l=Error(n(422),{cause:b}),Yc($r(l,g)))):(b!==Gp&&(u=Error(n(423),{cause:b}),Yc($r(u,g))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,b=$r(b,g),T=lm(l.stateNode,b,T),hf(l,T),Fi!==4&&(Fi=2)),!1;var P=Error(n(520),{cause:b});if(P=$r(P,g),hi===null?hi=[P]:hi.push(P),Fi!==4&&(Fi=2),u===null)return!0;b=$r(b,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=T&-T,g.lanes|=l,l=lm(g.stateNode,b,l),hf(g,l),!1;case 1:if(u=g.type,P=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(cs===null||!cs.has(P))))return g.flags|=65536,T&=-T,g.lanes|=T,T=zx(T),cm(T,l,g,b),hf(g,T),!1}g=g.return}while(g!==null);return!1}var Hx=Error(n(461)),Or=!1;function cr(l,u,g,b){u.child=l===null?Px(u,null,g,b):Zc(u,l.child,g,b)}function Ga(l,u,g,b,T){g=g.render;var P=u.ref;if("ref"in b){var q={};for(var se in b)se!=="ref"&&(q[se]=b[se])}else q=b;return xo(u),b=dl(l,u,g,q,P,T),se=Kv(),l!==null&&!Or?(Kp(l,u,T),Ur(l,u,T)):(oi&&se&&zv(u),u.flags|=1,cr(l,u,b,T),u.child)}function Va(l,u,g,b,T){if(l===null){var P=g.type;return typeof P=="function"&&!Xh(P)&&P.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=P,h0(l,u,P,b,T)):(l=Nr(g.type,null,b,u,u.mode,T),l.ref=u.ref,l.return=u,u.child=l)}if(P=l.child,!ud(l,T)){var q=P.memoizedProps;if(g=g.compare,g=g!==null?g:Ws,g(q,b)&&l.ref===u.ref)return Ur(l,u,T)}return u.flags|=1,l=sr(P,b),l.ref=u.ref,l.return=u,u.child=l}function h0(l,u,g,b,T){if(l!==null){var P=l.memoizedProps;if(Ws(P,b)&&l.ref===u.ref)if(Or=!1,u.pendingProps=b=P,ud(l,T))(l.flags&131072)!==0&&(Or=!0);else return u.lanes=l.lanes,Ur(l,u,T)}return xf(l,u,g,b,T)}function eu(l,u,g){var b=u.pendingProps,T=b.children,P=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((u.flags&128)!==0){if(b=P!==null?P.baseLanes|g:g,l!==null){for(T=u.child=l.child,P=0;T!==null;)P=P|T.lanes|T.childLanes,T=T.sibling;u.childLanes=P&~b}else u.childLanes=0,u.child=null;return tu(l,u,b,g)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Qh(u,P!==null?P.cachePool:null),P!==null?nx(u,P):Yv(),Nx(u);else return u.lanes=u.childLanes=536870912,tu(l,u,P!==null?P.baseLanes|g:g,g)}else P!==null?(Qh(u,P.cachePool),nx(u,P),mc(),u.memoizedState=null):(l!==null&&Qh(u,null),Yv(),mc());return cr(l,u,T,g),u.child}function tu(l,u,g,b){var T=uc();return T=T===null?null:{parent:yr._currentValue,pool:T},u.memoizedState={baseLanes:g,cachePool:T},l!==null&&Qh(u,null),Yv(),Nx(u),l!==null&&ws(l,u,b,!0),null}function nu(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function xf(l,u,g,b,T){return xo(u),g=dl(l,u,g,b,void 0,T),b=Kv(),l!==null&&!Or?(Kp(l,u,T),Ur(l,u,T)):(oi&&b&&zv(u),u.flags|=1,cr(l,u,g,T),u.child)}function ns(l,u,g,b,T,P){return xo(u),u.updateQueue=null,g=ax(u,b,g,T),rx(l),b=Kv(),l!==null&&!Or?(Kp(l,u,P),Ur(l,u,P)):(oi&&b&&zv(u),u.flags|=1,cr(l,u,g,P),u.child)}function is(l,u,g,b,T){if(xo(u),u.stateNode===null){var P=rc,q=g.contextType;typeof q=="object"&&q!==null&&(P=Zi(q)),P=new g(b,P),u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Ma,u.stateNode=P,P._reactInternals=u,P=u.stateNode,P.props=b,P.state=u.memoizedState,P.refs={},jv(u),q=g.contextType,P.context=typeof q=="object"&&q!==null?Zi(q):rc,P.state=u.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(gc(u,g,q,b),P.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(q=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),q!==P.state&&Ma.enqueueReplaceState(P,P.state,null),df(u,b,P,T),nd(),P.state=u.memoizedState),typeof P.componentDidMount=="function"&&(u.flags|=4194308),b=!0}else if(l===null){P=u.stateNode;var se=u.memoizedProps,Te=Mo(g,se);P.props=Te;var et=P.context,yt=g.contextType;q=rc,typeof yt=="object"&&yt!==null&&(q=Zi(yt));var Mt=g.getDerivedStateFromProps;yt=typeof Mt=="function"||typeof P.getSnapshotBeforeUpdate=="function",se=u.pendingProps!==se,yt||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(se||et!==q)&&Ux(u,P,b,q),ul=!1;var rt=u.memoizedState;P.state=rt,df(u,b,P,T),nd(),et=u.memoizedState,se||rt!==et||ul?(typeof Mt=="function"&&(gc(u,g,Mt,b),et=u.memoizedState),(Te=ul||Ox(u,g,Te,b,rt,et,q))?(yt||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(u.flags|=4194308)):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=et),P.props=b,P.state=et,P.context=q,b=Te):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{P=u.stateNode,Mn(l,u),q=u.memoizedProps,yt=Mo(g,q),P.props=yt,Mt=u.pendingProps,rt=P.context,et=g.contextType,Te=rc,typeof et=="object"&&et!==null&&(Te=Zi(et)),se=g.getDerivedStateFromProps,(et=typeof se=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(q!==Mt||rt!==Te)&&Ux(u,P,b,Te),ul=!1,rt=u.memoizedState,P.state=rt,df(u,b,P,T),nd();var at=u.memoizedState;q!==Mt||rt!==at||ul||l!==null&&l.dependencies!==null&&Yh(l.dependencies)?(typeof se=="function"&&(gc(u,g,se,b),at=u.memoizedState),(yt=ul||Ox(u,g,yt,b,rt,at,Te)||l!==null&&l.dependencies!==null&&Yh(l.dependencies))?(et||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(b,at,Te),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(b,at,Te)),typeof P.componentDidUpdate=="function"&&(u.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof P.componentDidUpdate!="function"||q===l.memoizedProps&&rt===l.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&rt===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=at),P.props=b,P.state=at,P.context=Te,b=yt):(typeof P.componentDidUpdate!="function"||q===l.memoizedProps&&rt===l.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&rt===l.memoizedState||(u.flags|=1024),b=!1)}return P=b,nu(l,u),b=(u.flags&128)!==0,P||b?(P=u.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:P.render(),u.flags|=1,l!==null&&b?(u.child=Zc(u,l.child,null,T),u.child=Zc(u,null,g,T)):cr(l,u,g,T),u.memoizedState=P.state,l=u.child):l=Ur(l,u,T),l}function vc(l,u,g,b){return of(),u.flags|=256,cr(l,u,g,b),u.child}var Ys={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ks(l){return{baseLanes:l,cachePool:Xp()}}function Tr(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=Os),l}function bf(l,u,g){var b=u.pendingProps,T=!1,P=(u.flags&128)!==0,q;if((q=P)||(q=l!==null&&l.memoizedState===null?!1:(lr.current&2)!==0),q&&(T=!0,u.flags&=-129),q=(u.flags&32)!==0,u.flags&=-33,l===null){if(oi){if(T?pc(u):mc(),oi){var se=$i,Te;if(Te=se){e:{for(Te=se,se=Qa;Te.nodeType!==8;){if(!se){se=null;break e}if(Te=bl(Te.nextSibling),Te===null){se=null;break e}}se=Te}se!==null?(u.memoizedState={dehydrated:se,treeContext:sc!==null?{id:yo,overflow:_o}:null,retryLane:536870912,hydrationErrors:null},Te=za(18,null,null,0),Te.stateNode=se,Te.return=u,u.child=Te,xa=u,$i=null,Te=!0):Te=!1}Te||oc(u)}if(se=u.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return IE(se)?u.lanes=32:u.lanes=536870912,null;So(u)}return se=b.children,b=b.fallback,T?(mc(),T=u.mode,se=iu({mode:"hidden",children:se},T),b=ac(b,T,g,null),se.return=u,b.return=u,se.sibling=b,u.child=se,T=u.child,T.memoizedState=Ks(g),T.childLanes=Tr(l,q,g),u.memoizedState=Ys,b):(pc(u),Eo(u,se))}if(Te=l.memoizedState,Te!==null&&(se=Te.dehydrated,se!==null)){if(P)u.flags&256?(pc(u),u.flags&=-257,u=Yr(l,u,g)):u.memoizedState!==null?(mc(),u.child=l.child,u.flags|=128,u=null):(mc(),T=b.fallback,se=u.mode,b=iu({mode:"visible",children:b.children},se),T=ac(T,se,g,null),T.flags|=2,b.return=u,T.return=u,b.sibling=T,u.child=b,Zc(u,l.child,null,g),b=u.child,b.memoizedState=Ks(g),b.childLanes=Tr(l,q,g),u.memoizedState=Ys,u=T);else if(pc(u),IE(se)){if(q=se.nextSibling&&se.nextSibling.dataset,q)var et=q.dgst;q=et,b=Error(n(419)),b.stack="",b.digest=q,Yc({value:b,source:null,stack:null}),u=Yr(l,u,g)}else if(Or||ws(l,u,g,!1),q=(g&l.childLanes)!==0,Or||q){if(q=Rn,q!==null&&(b=g&-g,b=(b&42)!==0?1:Xt(b),b=(b&(q.suspendedLanes|g))!==0?0:b,b!==0&&b!==Te.retryLane))throw Te.retryLane=b,sl(l,b),Aa(q,l,b),Hx;se.data==="$?"||h(),u=Yr(l,u,g)}else se.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=Te.treeContext,$i=bl(se.nextSibling),xa=u,oi=!0,Ts=null,Qa=!1,l!==null&&(jr[Za++]=yo,jr[Za++]=_o,jr[Za++]=sc,yo=l.id,_o=l.overflow,sc=u),u=Eo(u,b.children),u.flags|=4096);return u}return T?(mc(),T=b.fallback,se=u.mode,Te=l.child,et=Te.sibling,b=sr(Te,{mode:"hidden",children:b.children}),b.subtreeFlags=Te.subtreeFlags&65011712,et!==null?T=sr(et,T):(T=ac(T,se,g,null),T.flags|=2),T.return=u,b.return=u,b.sibling=T,u.child=b,b=T,T=u.child,se=l.child.memoizedState,se===null?se=Ks(g):(Te=se.cachePool,Te!==null?(et=yr._currentValue,Te=Te.parent!==et?{parent:et,pool:et}:Te):Te=Xp(),se={baseLanes:se.baseLanes|g,cachePool:Te}),T.memoizedState=se,T.childLanes=Tr(l,q,g),u.memoizedState=Ys,b):(pc(u),g=l.child,l=g.sibling,g=sr(g,{mode:"visible",children:b.children}),g.return=u,g.sibling=null,l!==null&&(q=u.deletions,q===null?(u.deletions=[l],u.flags|=16):q.push(l)),u.child=g,u.memoizedState=null,g)}function Eo(l,u){return u=iu({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function iu(l,u){return l=za(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Yr(l,u,g){return Zc(u,l.child,null,g),l=Eo(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Kr(l,u,g){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),kv(l.return,u,g)}function ti(l,u,g,b,T){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:T}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=b,P.tail=g,P.tailMode=T)}function Ls(l,u,g){var b=u.pendingProps,T=b.revealOrder,P=b.tail;if(cr(l,u,b.children,g),b=lr.current,(b&2)!==0)b=b&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Kr(l,g,u);else if(l.tag===19)Kr(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(Le(lr,b),T){case"forwards":for(g=u.child,T=null;g!==null;)l=g.alternate,l!==null&&ml(l)===null&&(T=g),g=g.sibling;g=T,g===null?(T=u.child,u.child=null):(T=g.sibling,g.sibling=null),ti(u,!1,T,g,P);break;case"backwards":for(g=null,T=u.child,u.child=null;T!==null;){if(l=T.alternate,l!==null&&ml(l)===null){u.child=T;break}l=T.sibling,T.sibling=g,g=T,T=l}ti(u,!0,g,null,P);break;case"together":ti(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ur(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),eo|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(ws(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,g=sr(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=sr(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function ud(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Yh(l)))}function Is(l,u,g){switch(u.tag){case 3:Ae(u,u.stateNode.containerInfo),cc(u,yr,l.memoizedState.cache),of();break;case 27:case 5:le(u);break;case 4:Ae(u,u.stateNode.containerInfo);break;case 10:cc(u,u.type,u.memoizedProps.value);break;case 13:var b=u.memoizedState;if(b!==null)return b.dehydrated!==null?(pc(u),u.flags|=128,null):(g&u.child.childLanes)!==0?bf(l,u,g):(pc(u),l=Ur(l,u,g),l!==null?l.sibling:null);pc(u);break;case 19:var T=(l.flags&128)!==0;if(b=(g&u.childLanes)!==0,b||(ws(l,u,g,!1),b=(g&u.childLanes)!==0),T){if(b)return Ls(l,u,g);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Le(lr,lr.current),b)break;return null;case 22:case 23:return u.lanes=0,eu(l,u,g);case 24:cc(u,yr,l.memoizedState.cache)}return Ur(l,u,g)}function ru(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)Or=!0;else{if(!ud(l,g)&&(u.flags&128)===0)return Or=!1,Is(l,u,g);Or=(l.flags&131072)!==0}else Or=!1,oi&&(u.flags&1048576)!==0&&Hp(u,sf,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var b=u.elementType,T=b._init;if(b=T(b._payload),u.type=b,typeof b=="function")Xh(b)?(l=Mo(b,l),u.tag=1,u=is(null,u,b,l,g)):(u.tag=0,u=xf(null,u,b,l,g));else{if(b!=null){if(T=b.$$typeof,T===B){u.tag=11,u=Ga(null,u,b,l,g);break e}else if(T===O){u.tag=14,u=Va(null,u,b,l,g);break e}}throw u=$(b)||b,Error(n(306,u,""))}}return u;case 0:return xf(l,u,u.type,u.pendingProps,g);case 1:return b=u.type,T=Mo(b,u.pendingProps),is(l,u,b,T,g);case 3:e:{if(Ae(u,u.stateNode.containerInfo),l===null)throw Error(n(387));b=u.pendingProps;var P=u.memoizedState;T=P.element,Mn(l,u),df(u,b,null,g);var q=u.memoizedState;if(b=q.cache,cc(u,yr,b),b!==P.cache&&qh(u,[yr],g,!0),nd(),b=q.element,P.isDehydrated)if(P={element:b,isDehydrated:!1,cache:q.cache},u.updateQueue.baseState=P,u.memoizedState=P,u.flags&256){u=vc(l,u,b,g);break e}else if(b!==T){T=$r(Error(n(424)),u),Yc(T),u=vc(l,u,b,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for($i=bl(l.firstChild),xa=u,oi=!0,Ts=null,Qa=!0,g=Px(u,null,b,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(of(),b===T){u=Ur(l,u,g);break e}cr(l,u,b,g)}u=u.child}return u;case 26:return nu(l,u),l===null?(g=a3(u.type,null,u.pendingProps,null))?u.memoizedState=g:oi||(g=u.type,l=u.pendingProps,b=$x(Ge.current).createElement(g),b[Ye]=u,b[lt]=l,Ta(b,g,l),Qe(b),u.stateNode=b):u.memoizedState=a3(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return le(u),l===null&&oi&&(b=u.stateNode=n3(u.type,u.pendingProps,Ge.current),xa=u,Qa=!0,T=$i,Bf(u.type)?(PE=T,$i=bl(b.firstChild)):$i=T),cr(l,u,u.pendingProps.children,g),nu(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&oi&&((T=b=$i)&&(b=vH(b,u.type,u.pendingProps,Qa),b!==null?(u.stateNode=b,xa=u,$i=bl(b.firstChild),Qa=!1,T=!0):T=!1),T||oc(u)),le(u),T=u.type,P=u.pendingProps,q=l!==null?l.memoizedProps:null,b=P.children,DE(T,P)?b=null:q!==null&&DE(T,q)&&(u.flags|=32),u.memoizedState!==null&&(T=dl(l,u,dE,null,null,g),M0._currentValue=T),nu(l,u),cr(l,u,b,g),u.child;case 6:return l===null&&oi&&((l=g=$i)&&(g=yH(g,u.pendingProps,Qa),g!==null?(u.stateNode=g,xa=u,$i=null,l=!0):l=!1),l||oc(u)),null;case 13:return bf(l,u,g);case 4:return Ae(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=Zc(u,null,b,g):cr(l,u,b,g),u.child;case 11:return Ga(l,u,u.type,u.pendingProps,g);case 7:return cr(l,u,u.pendingProps,g),u.child;case 8:return cr(l,u,u.pendingProps.children,g),u.child;case 12:return cr(l,u,u.pendingProps.children,g),u.child;case 10:return b=u.pendingProps,cc(u,u.type,b.value),cr(l,u,b.children,g),u.child;case 9:return T=u.type._context,b=u.pendingProps.children,xo(u),T=Zi(T),b=b(T),u.flags|=1,cr(l,u,b,g),u.child;case 14:return Va(l,u,u.type,u.pendingProps,g);case 15:return h0(l,u,u.type,u.pendingProps,g);case 19:return Ls(l,u,g);case 31:return b=u.pendingProps,g=u.mode,b={mode:b.mode,children:b.children},l===null?(g=iu(b,g),g.ref=u.ref,u.child=g,g.return=u,u=g):(g=sr(l.child,b),g.ref=u.ref,u.child=g,g.return=u,u=g),u;case 22:return eu(l,u,g);case 24:return xo(u),b=Zi(yr),l===null?(T=uc(),T===null&&(T=Rn,P=kp(),T.pooledCache=P,P.refCount++,P!==null&&(T.pooledCacheLanes|=g),T=P),u.memoizedState={parent:b,cache:T},jv(u),cc(u,yr,T)):((l.lanes&g)!==0&&(Mn(l,u),df(u,null,null,g),nd()),T=l.memoizedState,P=u.memoizedState,T.parent!==b?(T={parent:b,cache:b},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),cc(u,yr,b)):(b=P.cache,cc(u,yr,b),b!==T.cache&&qh(u,[yr],g,!0))),cr(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Js(l){l.flags|=4}function fd(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!u3(u)){if(u=Si.current,u!==null&&((cn&4194048)===cn?qs!==null:(cn&62914560)!==cn&&(cn&536870912)===0||u!==qs))throw Rs=td,Xv;l.flags|=8192}}function gl(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?qe():536870912,l.lanes|=u,ri|=u)}function au(l,u){if(!oi)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Ci(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(u)for(var T=l.child;T!==null;)g|=T.lanes|T.childLanes,b|=T.subtreeFlags&65011712,b|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)g|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=g,u}function d0(l,u,g){var b=u.pendingProps;switch(Hv(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(u),null;case 1:return Ci(u),null;case 3:return g=u.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),u.memoizedState.cache!==b&&(u.flags|=2048),cl(yr),Q(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Xs(u)?Js(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ui())),Ci(u),null;case 26:return g=u.memoizedState,l===null?(Js(u),g!==null?(Ci(u),fd(u,g)):(Ci(u),u.flags&=-16777217)):g?g!==l.memoizedState?(Js(u),Ci(u),fd(u,g)):(Ci(u),u.flags&=-16777217):(l.memoizedProps!==b&&Js(u),Ci(u),u.flags&=-16777217),null;case 27:me(u),g=Ge.current;var T=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==b&&Js(u);else{if(!b){if(u.stateNode===null)throw Error(n(166));return Ci(u),null}l=oe.current,Xs(u)?Z_(u):(l=n3(T,b,g),u.stateNode=l,Js(u))}return Ci(u),null;case 5:if(me(u),g=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==b&&Js(u);else{if(!b){if(u.stateNode===null)throw Error(n(166));return Ci(u),null}if(l=oe.current,Xs(u))Z_(u);else{switch(T=$x(Ge.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?T.createElement("select",{is:b.is}):T.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?T.createElement(g,{is:b.is}):T.createElement(g)}}l[Ye]=u,l[lt]=b;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=l;e:switch(Ta(l,g,b),g){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Js(u)}}return Ci(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==b&&Js(u);else{if(typeof b!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ge.current,Xs(u)){if(l=u.stateNode,g=u.memoizedProps,b=null,T=xa,T!==null)switch(T.tag){case 27:case 5:b=T.memoizedProps}l[Ye]=u,l=!!(l.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||YR(l.nodeValue,g)),l||oc(u)}else l=$x(l).createTextNode(b),l[Ye]=u,u.stateNode=l}return Ci(u),null;case 13:if(b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=Xs(u),b!==null&&b.dehydrated!==null){if(l===null){if(!T)throw Error(n(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Ye]=u}else of(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ci(u),T=!1}else T=ui(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(So(u),u):(So(u),null)}if(So(u),(u.flags&128)!==0)return u.lanes=g,u;if(g=b!==null,l=l!==null&&l.memoizedState!==null,g){b=u.child,T=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(T=b.alternate.memoizedState.cachePool.pool);var P=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(P=b.memoizedState.cachePool.pool),P!==T&&(b.flags|=2048)}return g!==l&&g&&(u.child.flags|=8192),gl(u,u.updateQueue),Ci(u),null;case 4:return Q(),l===null&&AE(u.stateNode.containerInfo),Ci(u),null;case 10:return cl(u.type),Ci(u),null;case 19:if(Re(lr),T=u.memoizedState,T===null)return Ci(u),null;if(b=(u.flags&128)!==0,P=T.rendering,P===null)if(b)au(T,!1);else{if(Fi!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(P=ml(l),P!==null){for(u.flags|=128,au(T,!1),l=P.updateQueue,u.updateQueue=l,gl(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)Fv(g,l),g=g.sibling;return Le(lr,lr.current&1|2),u.child}l=l.sibling}T.tail!==null&&ae()>ra&&(u.flags|=128,b=!0,au(T,!1),u.lanes=4194304)}else{if(!b)if(l=ml(P),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,gl(u,l),au(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!oi)return Ci(u),null}else 2*ae()-T.renderingStartTime>ra&&g!==536870912&&(u.flags|=128,b=!0,au(T,!1),u.lanes=4194304);T.isBackwards?(P.sibling=u.child,u.child=P):(l=T.last,l!==null?l.sibling=P:u.child=P,T.last=P)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=ae(),u.sibling=null,l=lr.current,Le(lr,b?l&1|2:l&1),u):(Ci(u),null);case 22:case 23:return So(u),id(),b=u.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(u.flags|=8192):b&&(u.flags|=8192),b?(g&536870912)!==0&&(u.flags&128)===0&&(Ci(u),u.subtreeFlags&6&&(u.flags|=8192)):Ci(u),g=u.updateQueue,g!==null&&gl(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==g&&(u.flags|=2048),l!==null&&Re(Cs),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),cl(yr),Ci(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function Sf(l,u){switch(Hv(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return cl(yr),Q(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return me(u),null;case 13:if(So(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));of()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Re(lr),null;case 4:return Q(),null;case 10:return cl(u.type),null;case 22:case 23:return So(u),id(),l!==null&&Re(Cs),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return cl(yr),null;case 25:return null;default:return null}}function Mf(l,u){switch(Hv(u),u.tag){case 3:cl(yr),Q();break;case 26:case 27:case 5:me(u);break;case 4:Q();break;case 13:So(u);break;case 19:Re(lr);break;case 10:cl(u.type);break;case 22:case 23:So(u),id(),l!==null&&Re(Cs);break;case 24:cl(yr)}}function su(l,u){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var T=b.next;g=T;do{if((g.tag&l)===l){b=void 0;var P=g.create,q=g.inst;b=P(),q.destroy=b}g=g.next}while(g!==T)}}catch(se){Ne(u,u.return,se)}}function rs(l,u,g){try{var b=u.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var P=T.next;b=P;do{if((b.tag&l)===l){var q=b.inst,se=q.destroy;if(se!==void 0){q.destroy=void 0,T=u;var Te=g,et=se;try{et()}catch(yt){Ne(T,Te,yt)}}}b=b.next}while(b!==P)}}catch(yt){Ne(u,u.return,yt)}}function ou(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{tx(u,g)}catch(b){Ne(l,l.return,b)}}}function vl(l,u,g){g.props=Mo(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(b){Ne(l,u,b)}}function lu(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof g=="function"?l.refCleanup=g(b):g.current=b}}catch(T){Ne(l,u,T)}}function Ao(l,u){var g=l.ref,b=l.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(T){Ne(l,u,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(T){Ne(l,u,T)}else g.current=null}function Ef(l){var u=l.type,g=l.memoizedProps,b=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(T){Ne(l,l.return,T)}}function hd(l,u,g){try{var b=l.stateNode;hH(b,l.type,g,u),b[lt]=u}catch(T){Ne(l,l.return,T)}}function dd(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Bf(l.type)||l.tag===4}function yc(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||dd(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Bf(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function _c(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Xx));else if(b!==4&&(b===27&&Bf(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(_c(l,u,g),l=l.sibling;l!==null;)_c(l,u,g),l=l.sibling}function xc(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(b!==4&&(b===27&&Bf(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(xc(l,u,g),l=l.sibling;l!==null;)xc(l,u,g),l=l.sibling}function bc(l){var u=l.stateNode,g=l.memoizedProps;try{for(var b=l.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);Ta(u,b,g),u[Ye]=l,u[lt]=g}catch(P){Ne(l,l.return,P)}}var To=!1,Ri=!1,Af=!1,as=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function wr(l,u){if(l=l.containerInfo,CE=Zx,l=Bv(l),Gh(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var T=b.anchorOffset,P=b.focusNode;b=b.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var q=0,se=-1,Te=-1,et=0,yt=0,Mt=l,rt=null;t:for(;;){for(var at;Mt!==g||T!==0&&Mt.nodeType!==3||(se=q+T),Mt!==P||b!==0&&Mt.nodeType!==3||(Te=q+b),Mt.nodeType===3&&(q+=Mt.nodeValue.length),(at=Mt.firstChild)!==null;)rt=Mt,Mt=at;for(;;){if(Mt===l)break t;if(rt===g&&++et===T&&(se=q),rt===P&&++yt===b&&(Te=q),(at=Mt.nextSibling)!==null)break;Mt=rt,rt=Mt.parentNode}Mt=at}g=se===-1||Te===-1?null:{start:se,end:Te}}else g=null}g=g||{start:0,end:0}}else g=null;for(RE={focusedElem:l,selectionRange:g},Zx=!1,Mi=u;Mi!==null;)if(u=Mi,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Mi=l;else for(;Mi!==null;){switch(u=Mi,P=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,g=u,T=P.memoizedProps,P=P.memoizedState,b=g.stateNode;try{var An=Mo(g.type,T,g.elementType===g.type);l=b.getSnapshotBeforeUpdate(An,P),b.__reactInternalSnapshotBeforeUpdate=l}catch(vn){Ne(g,g.return,vn)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)LE(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":LE(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Mi=l;break}Mi=u.return}}function yl(l,u,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:Ea(l,g),b&4&&su(5,g);break;case 1:if(Ea(l,g),b&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(q){Ne(g,g.return,q)}else{var T=Mo(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(T,u,l.__reactInternalSnapshotBeforeUpdate)}catch(q){Ne(g,g.return,q)}}b&64&&ou(g),b&512&&lu(g,g.return);break;case 3:if(Ea(l,g),b&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{tx(l,u)}catch(q){Ne(g,g.return,q)}}break;case 27:u===null&&b&4&&bc(g);case 26:case 5:Ea(l,g),u===null&&b&4&&Ef(g),b&512&&lu(g,g.return);break;case 12:Ea(l,g);break;case 13:Ea(l,g),b&4&&Sc(l,g),b&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=zi.bind(null,g),_H(l,g))));break;case 22:if(b=g.memoizedState!==null||To,!b){u=u!==null&&u.memoizedState!==null||Ri,T=To;var P=Ri;To=b,(Ri=u)&&!P?wo(l,g,(g.subtreeFlags&8772)!==0):Ea(l,g),To=T,Ri=P}break;case 30:break;default:Ea(l,g)}}function Hn(l){var u=l.alternate;u!==null&&(l.alternate=null,Hn(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&jt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var fn=null,ii=!1;function Ps(l,u,g){for(g=g.child;g!==null;)cu(l,u,g),g=g.sibling}function cu(l,u,g){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Ee,g)}catch{}switch(g.tag){case 26:Ri||Ao(g,u),Ps(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Ri||Ao(g,u);var b=fn,T=ii;Bf(g.type)&&(fn=g.stateNode,ii=!1),Ps(l,u,g),_0(g.stateNode),fn=b,ii=T;break;case 5:Ri||Ao(g,u);case 6:if(b=fn,T=ii,fn=null,Ps(l,u,g),fn=b,ii=T,fn!==null)if(ii)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(g.stateNode)}catch(P){Ne(g,u,P)}else try{fn.removeChild(g.stateNode)}catch(P){Ne(g,u,P)}break;case 18:fn!==null&&(ii?(l=fn,e3(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),w0(l)):e3(fn,g.stateNode));break;case 4:b=fn,T=ii,fn=g.stateNode.containerInfo,ii=!0,Ps(l,u,g),fn=b,ii=T;break;case 0:case 11:case 14:case 15:Ri||rs(2,g,u),Ri||rs(4,g,u),Ps(l,u,g);break;case 1:Ri||(Ao(g,u),b=g.stateNode,typeof b.componentWillUnmount=="function"&&vl(g,u,b)),Ps(l,u,g);break;case 21:Ps(l,u,g);break;case 22:Ri=(b=Ri)||g.memoizedState!==null,Ps(l,u,g),Ri=b;break;default:Ps(l,u,g)}}function Sc(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{w0(l)}catch(g){Ne(u,u.return,g)}}function um(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new as),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new as),u;default:throw Error(n(435,l.tag))}}function uu(l,u){var g=um(l);u.forEach(function(b){var T=En.bind(null,l,b);g.has(b)||(g.add(b),b.then(T,T))})}function Fr(l,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var T=g[b],P=l,q=u,se=q;e:for(;se!==null;){switch(se.tag){case 27:if(Bf(se.type)){fn=se.stateNode,ii=!1;break e}break;case 5:fn=se.stateNode,ii=!1;break e;case 3:case 4:fn=se.stateNode.containerInfo,ii=!0;break e}se=se.return}if(fn===null)throw Error(n(160));cu(P,q,T),fn=null,ii=!1,P=T.alternate,P!==null&&(P.return=null),T.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)fm(u,l),u=u.sibling}var Zs=null;function fm(l,u){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Fr(u,l),Qi(l),b&4&&(rs(3,l,l.return),su(3,l),rs(5,l,l.return));break;case 1:Fr(u,l),Qi(l),b&512&&(Ri||g===null||Ao(g,g.return)),b&64&&To&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var T=Zs;if(Fr(u,l),Qi(l),b&512&&(Ri||g===null||Ao(g,g.return)),b&4){var P=g!==null?g.memoizedState:null;if(b=l.memoizedState,g===null)if(b===null)if(l.stateNode===null){e:{b=l.type,g=l.memoizedProps,T=T.ownerDocument||T;t:switch(b){case"title":P=T.getElementsByTagName("title")[0],(!P||P[tn]||P[Ye]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=T.createElement(b),T.head.insertBefore(P,T.querySelector("head > title"))),Ta(P,b,g),P[Ye]=l,Qe(P),b=P;break e;case"link":var q=l3("link","href",T).get(b+(g.href||""));if(q){for(var se=0;se<q.length;se++)if(P=q[se],P.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&P.getAttribute("rel")===(g.rel==null?null:g.rel)&&P.getAttribute("title")===(g.title==null?null:g.title)&&P.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){q.splice(se,1);break t}}P=T.createElement(b),Ta(P,b,g),T.head.appendChild(P);break;case"meta":if(q=l3("meta","content",T).get(b+(g.content||""))){for(se=0;se<q.length;se++)if(P=q[se],P.getAttribute("content")===(g.content==null?null:""+g.content)&&P.getAttribute("name")===(g.name==null?null:g.name)&&P.getAttribute("property")===(g.property==null?null:g.property)&&P.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&P.getAttribute("charset")===(g.charSet==null?null:g.charSet)){q.splice(se,1);break t}}P=T.createElement(b),Ta(P,b,g),T.head.appendChild(P);break;default:throw Error(n(468,b))}P[Ye]=l,Qe(P),b=P}l.stateNode=b}else c3(T,l.type,l.stateNode);else l.stateNode=o3(T,b,l.memoizedProps);else P!==b?(P===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):P.count--,b===null?c3(T,l.type,l.stateNode):o3(T,b,l.memoizedProps)):b===null&&l.stateNode!==null&&hd(l,l.memoizedProps,g.memoizedProps)}break;case 27:Fr(u,l),Qi(l),b&512&&(Ri||g===null||Ao(g,g.return)),g!==null&&b&4&&hd(l,l.memoizedProps,g.memoizedProps);break;case 5:if(Fr(u,l),Qi(l),b&512&&(Ri||g===null||Ao(g,g.return)),l.flags&32){T=l.stateNode;try{va(T,"")}catch(at){Ne(l,l.return,at)}}b&4&&l.stateNode!=null&&(T=l.memoizedProps,hd(l,T,g!==null?g.memoizedProps:T)),b&1024&&(Af=!0);break;case 6:if(Fr(u,l),Qi(l),b&4){if(l.stateNode===null)throw Error(n(162));b=l.memoizedProps,g=l.stateNode;try{g.nodeValue=b}catch(at){Ne(l,l.return,at)}}break;case 3:if(Yx=null,T=Zs,Zs=jx(u.containerInfo),Fr(u,l),Zs=T,Qi(l),b&4&&g!==null&&g.memoizedState.isDehydrated)try{w0(u.containerInfo)}catch(at){Ne(l,l.return,at)}Af&&(Af=!1,Mc(l));break;case 4:b=Zs,Zs=jx(l.stateNode.containerInfo),Fr(u,l),Qi(l),Zs=b;break;case 12:Fr(u,l),Qi(l);break;case 13:Fr(u,l),Qi(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(yi=ae()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,uu(l,b)));break;case 22:T=l.memoizedState!==null;var Te=g!==null&&g.memoizedState!==null,et=To,yt=Ri;if(To=et||T,Ri=yt||Te,Fr(u,l),Ri=yt,To=et,Qi(l),b&8192)e:for(u=l.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(g===null||Te||To||Ri||ss(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){Te=g=u;try{if(P=Te.stateNode,T)q=P.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{se=Te.stateNode;var Mt=Te.memoizedProps.style,rt=Mt!=null&&Mt.hasOwnProperty("display")?Mt.display:null;se.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(at){Ne(Te,Te.return,at)}}}else if(u.tag===6){if(g===null){Te=u;try{Te.stateNode.nodeValue=T?"":Te.memoizedProps}catch(at){Ne(Te,Te.return,at)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}b&4&&(b=l.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,uu(l,g))));break;case 19:Fr(u,l),Qi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,uu(l,b)));break;case 30:break;case 21:break;default:Fr(u,l),Qi(l)}}function Qi(l){var u=l.flags;if(u&2){try{for(var g,b=l.return;b!==null;){if(dd(b)){g=b;break}b=b.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var T=g.stateNode,P=yc(l);xc(l,P,T);break;case 5:var q=g.stateNode;g.flags&32&&(va(q,""),g.flags&=-33);var se=yc(l);xc(l,se,q);break;case 3:case 4:var Te=g.stateNode.containerInfo,et=yc(l);_c(l,et,Te);break;default:throw Error(n(161))}}catch(yt){Ne(l,l.return,yt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Mc(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Mc(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ea(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)yl(l,u.alternate,u),u=u.sibling}function ss(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:rs(4,u,u.return),ss(u);break;case 1:Ao(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&vl(u,u.return,g),ss(u);break;case 27:_0(u.stateNode);case 26:case 5:Ao(u,u.return),ss(u);break;case 22:u.memoizedState===null&&ss(u);break;case 30:ss(u);break;default:ss(u)}l=l.sibling}}function wo(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var b=u.alternate,T=l,P=u,q=P.flags;switch(P.tag){case 0:case 11:case 15:wo(T,P,g),su(4,P);break;case 1:if(wo(T,P,g),b=P,T=b.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(et){Ne(b,b.return,et)}if(b=P,T=b.updateQueue,T!==null){var se=b.stateNode;try{var Te=T.shared.hiddenCallbacks;if(Te!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Te.length;T++)pf(Te[T],se)}catch(et){Ne(b,b.return,et)}}g&&q&64&&ou(P),lu(P,P.return);break;case 27:bc(P);case 26:case 5:wo(T,P,g),g&&b===null&&q&4&&Ef(P),lu(P,P.return);break;case 12:wo(T,P,g);break;case 13:wo(T,P,g),g&&q&4&&Sc(T,P);break;case 22:P.memoizedState===null&&wo(T,P,g),lu(P,P.return);break;case 30:break;default:wo(T,P,g)}u=u.sibling}}function hm(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&lf(g))}function dm(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&lf(l))}function Ei(l,u,g,b){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)pm(l,u,g,b),u=u.sibling}function pm(l,u,g,b){var T=u.flags;switch(u.tag){case 0:case 11:case 15:Ei(l,u,g,b),T&2048&&su(9,u);break;case 1:Ei(l,u,g,b);break;case 3:Ei(l,u,g,b),T&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&lf(l)));break;case 12:if(T&2048){Ei(l,u,g,b),l=u.stateNode;try{var P=u.memoizedProps,q=P.id,se=P.onPostCommit;typeof se=="function"&&se(q,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Te){Ne(u,u.return,Te)}}else Ei(l,u,g,b);break;case 13:Ei(l,u,g,b);break;case 23:break;case 22:P=u.stateNode,q=u.alternate,u.memoizedState!==null?P._visibility&2?Ei(l,u,g,b):Qs(l,u):P._visibility&2?Ei(l,u,g,b):(P._visibility|=2,_l(l,u,g,b,(u.subtreeFlags&10256)!==0)),T&2048&&hm(q,u);break;case 24:Ei(l,u,g,b),T&2048&&dm(u.alternate,u);break;default:Ei(l,u,g,b)}}function _l(l,u,g,b,T){for(T=T&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var P=l,q=u,se=g,Te=b,et=q.flags;switch(q.tag){case 0:case 11:case 15:_l(P,q,se,Te,T),su(8,q);break;case 23:break;case 22:var yt=q.stateNode;q.memoizedState!==null?yt._visibility&2?_l(P,q,se,Te,T):Qs(P,q):(yt._visibility|=2,_l(P,q,se,Te,T)),T&&et&2048&&hm(q.alternate,q);break;case 24:_l(P,q,se,Te,T),T&&et&2048&&dm(q.alternate,q);break;default:_l(P,q,se,Te,T)}u=u.sibling}}function Qs(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,b=u,T=b.flags;switch(b.tag){case 22:Qs(g,b),T&2048&&hm(b.alternate,b);break;case 24:Qs(g,b),T&2048&&dm(b.alternate,b);break;default:Qs(g,b)}u=u.sibling}}var os=8192;function Tf(l){if(l.subtreeFlags&os)for(l=l.child;l!==null;)Gx(l),l=l.sibling}function Gx(l){switch(l.tag){case 26:Tf(l),l.flags&os&&l.memoizedState!==null&&LH(Zs,l.memoizedState,l.memoizedProps);break;case 5:Tf(l);break;case 3:case 4:var u=Zs;Zs=jx(l.stateNode.containerInfo),Tf(l),Zs=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=os,os=16777216,Tf(l),os=u):Tf(l));break;default:Tf(l)}}function Vx(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Di(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var b=u[g];Mi=b,Ro(b,l)}Vx(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)p0(l),l=l.sibling}function p0(l){switch(l.tag){case 0:case 11:case 15:Di(l),l.flags&2048&&rs(9,l,l.return);break;case 3:Di(l);break;case 12:Di(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Co(l)):Di(l);break;default:Di(l)}}function Co(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var b=u[g];Mi=b,Ro(b,l)}Vx(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:rs(8,u,u.return),Co(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,Co(u));break;default:Co(u)}l=l.sibling}}function Ro(l,u){for(;Mi!==null;){var g=Mi;switch(g.tag){case 0:case 11:case 15:rs(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:lf(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,Mi=b;else e:for(g=l;Mi!==null;){b=Mi;var T=b.sibling,P=b.return;if(Hn(b),b===g){Mi=null;break e}if(T!==null){T.return=P,Mi=T;break e}Mi=P}}}var er={getCacheForType:function(l){var u=Zi(yr),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g}},m0=typeof WeakMap=="function"?WeakMap:Map,fi=0,Rn=null,Wn=null,cn=0,Nn=0,ji=null,ls=!1,wf=!1,Cf=!1,Ns=0,Fi=0,eo=0,Do=0,fu=0,Os=0,ri=0,hi=null,dn=null,jn=!1,yi=0,ra=1/0,Us=null,cs=null,Cr=0,aa=null,Ai=null,us=0,xl=0,pd=null,fs=null,Bo=0,hu=null;function tr(){if((fi&2)!==0&&cn!==0)return cn&-cn;if(z.T!==null){var l=Bn;return l!==0?l:bE()}return Tn()}function mm(){Os===0&&(Os=(cn&536870912)===0||oi?Me():536870912);var l=Si.current;return l!==null&&(l.flags|=32),Os}function Aa(l,u,g){(l===Rn&&(Nn===2||Nn===9)||l.cancelPendingCommit!==null)&&(Ac(l,0),to(l,cn,Os,!1)),Pt(l,g),((fi&2)===0||l!==Rn)&&(l===Rn&&((fi&2)===0&&(Do|=g),Fi===4&&to(l,cn,Os,!1)),Cc(l))}function Rf(l,u,g){if((fi&6)!==0)throw Error(n(327));var b=!g&&(u&124)===0&&(u&l.expiredLanes)===0||Ve(l,u),T=b?C(l,u):p(l,u,!0),P=b;do{if(T===0){wf&&!b&&to(l,u,0,!1);break}else{if(g=l.current.alternate,P&&!Ec(g)){T=p(l,u,!1),P=!1;continue}if(T===2){if(P=u,l.errorRecoveryDisabledLanes&P)var q=0;else q=l.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){u=q;e:{var se=l;T=hi;var Te=se.current.memoizedState.isDehydrated;if(Te&&(Ac(se,q).flags|=256),q=p(se,q,!1),q!==2){if(Cf&&!Te){se.errorRecoveryDisabledLanes|=P,Do|=P,T=4;break e}P=dn,dn=T,P!==null&&(dn===null?dn=P:dn.push.apply(dn,P))}T=q}if(P=!1,T!==2)continue}}if(T===1){Ac(l,0),to(l,u,0,!0);break}e:{switch(b=l,P=T,P){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:to(b,u,Os,!ls);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(T=yi+300-ae(),10<T)){if(to(b,u,Os,!ls),ge(b,0,!0)!==0)break e;b.timeoutHandle=ZR(md.bind(null,b,g,dn,Us,jn,u,Os,Do,ri,ls,P,2,-0,0),T);break e}md(b,g,dn,Us,jn,u,Os,Do,ri,ls,P,0,-0,0)}}break}while(!0);Cc(l)}function md(l,u,g,b,T,P,q,se,Te,et,yt,Mt,rt,at){if(l.timeoutHandle=-1,Mt=u.subtreeFlags,(Mt&8192||(Mt&16785408)===16785408)&&(S0={stylesheets:null,count:0,unsuspend:BH},Gx(u),Mt=IH(),Mt!==null)){l.cancelPendingCommit=Mt(Lt.bind(null,l,u,P,g,b,T,q,se,Te,yt,1,rt,at)),to(l,P,q,!et);return}Lt(l,u,P,g,b,T,q,se,Te)}function Ec(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var T=g[b],P=T.getSnapshot;T=T.value;try{if(!Oa(P(),T))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function to(l,u,g,b){u&=~fu,u&=~Do,l.suspendedLanes|=u,l.pingedLanes&=~u,b&&(l.warmLanes|=u),b=l.expirationTimes;for(var T=u;0<T;){var P=31-He(T),q=1<<P;b[P]=-1,T&=~q}g!==0&&gt(l,g,u)}function Lo(){return(fi&6)===0?(g0(0),!1):!0}function du(){if(Wn!==null){if(Nn===0)var l=Wn.return;else l=Wn,ll=lc=null,Jv(l),Jc=null,od=0,l=Wn;for(;l!==null;)Mf(l.alternate,l),l=l.return;Wn=null}}function Ac(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,pH(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),du(),Rn=l,Wn=g=sr(l.current,null),cn=u,Nn=0,ji=null,ls=!1,wf=Ve(l,u),Cf=!1,ri=Os=fu=Do=eo=Fi=0,dn=hi=null,jn=!1,(u&8)!==0&&(u|=u&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=u;0<b;){var T=31-He(b),P=1<<T;u|=l[T],b&=~P}return Ns=u,Wh(),g}function gm(l,u){Ln=null,z.H=sd,u===ed||u===$s?(u=$v(),Nn=3):u===Xv?(u=$v(),Nn=4):Nn=u===Hx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ji=u,Wn===null&&(Fi=1,om(l,$r(u,l.current)))}function Df(){var l=z.H;return z.H=sd,l===null?sd:l}function vm(){var l=z.A;return z.A=er,l}function h(){Fi=4,ls||(cn&4194048)!==cn&&Si.current!==null||(wf=!0),(eo&134217727)===0&&(Do&134217727)===0||Rn===null||to(Rn,cn,Os,!1)}function p(l,u,g){var b=fi;fi|=2;var T=Df(),P=vm();(Rn!==l||cn!==u)&&(Us=null,Ac(l,u)),u=!1;var q=Fi;e:do try{if(Nn!==0&&Wn!==null){var se=Wn,Te=ji;switch(Nn){case 8:du(),q=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(u=!0);var et=Nn;if(Nn=0,ji=null,De(l,se,Te,et),g&&wf){q=0;break e}break;default:et=Nn,Nn=0,ji=null,De(l,se,Te,et)}}M(),q=Fi;break}catch(yt){gm(l,yt)}while(!0);return u&&l.shellSuspendCounter++,ll=lc=null,fi=b,z.H=T,z.A=P,Wn===null&&(Rn=null,cn=0,Wh()),q}function M(){for(;Wn!==null;)H(Wn)}function C(l,u){var g=fi;fi|=2;var b=Df(),T=vm();Rn!==l||cn!==u?(Us=null,ra=ae()+500,Ac(l,u)):wf=Ve(l,u);e:do try{if(Nn!==0&&Wn!==null){u=Wn;var P=ji;t:switch(Nn){case 1:Nn=0,ji=null,De(l,u,P,1);break;case 2:case 9:if($p(P)){Nn=0,ji=null,ce(u);break}u=function(){Nn!==2&&Nn!==9||Rn!==l||(Nn=7),Cc(l)},P.then(u,u);break e;case 3:Nn=7;break e;case 4:Nn=5;break e;case 7:$p(P)?(Nn=0,ji=null,ce(u)):(Nn=0,ji=null,De(l,u,P,7));break;case 5:var q=null;switch(Wn.tag){case 26:q=Wn.memoizedState;case 5:case 27:var se=Wn;if(!q||u3(q)){Nn=0,ji=null;var Te=se.sibling;if(Te!==null)Wn=Te;else{var et=se.return;et!==null?(Wn=et,$e(et)):Wn=null}break t}}Nn=0,ji=null,De(l,u,P,5);break;case 6:Nn=0,ji=null,De(l,u,P,6);break;case 8:du(),Fi=6;break e;default:throw Error(n(462))}}N();break}catch(yt){gm(l,yt)}while(!0);return ll=lc=null,z.H=b,z.A=T,fi=g,Wn!==null?0:(Rn=null,cn=0,Wh(),Fi)}function N(){for(;Wn!==null&&!ze();)H(Wn)}function H(l){var u=ru(l.alternate,l,Ns);l.memoizedProps=l.pendingProps,u===null?$e(l):Wn=u}function ce(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=ns(g,u,u.pendingProps,u.type,void 0,cn);break;case 11:u=ns(g,u,u.pendingProps,u.type.render,u.ref,cn);break;case 5:Jv(u);default:Mf(g,u),u=Wn=Fv(u,Ns),u=ru(g,u,Ns)}l.memoizedProps=l.pendingProps,u===null?$e(l):Wn=u}function De(l,u,g,b){ll=lc=null,Jv(u),Jc=null,od=0;var T=u.return;try{if(_E(l,T,u,g,cn)){Fi=1,om(l,$r(g,l.current)),Wn=null;return}}catch(P){if(T!==null)throw Wn=T,P;Fi=1,om(l,$r(g,l.current)),Wn=null;return}u.flags&32768?(oi||b===1?l=!0:wf||(cn&536870912)!==0?l=!1:(ls=l=!0,(b===2||b===9||b===3||b===6)&&(b=Si.current,b!==null&&b.tag===13&&(b.flags|=16384))),vt(u,l)):$e(u)}function $e(l){var u=l;do{if((u.flags&32768)!==0){vt(u,ls);return}l=u.return;var g=d0(u.alternate,u,Ns);if(g!==null){Wn=g;return}if(u=u.sibling,u!==null){Wn=u;return}Wn=u=l}while(u!==null);Fi===0&&(Fi=5)}function vt(l,u){do{var g=Sf(l.alternate,l);if(g!==null){g.flags&=32767,Wn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){Wn=l;return}Wn=l=g}while(l!==null);Fi=6,Wn=null}function Lt(l,u,g,b,T,P,q,se,Te){l.cancelPendingCommit=null;do Tc();while(Cr!==0);if((fi&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(P=u.lanes|u.childLanes,P|=Up,At(l,g,P,q,se,Te),l===Rn&&(Wn=Rn=null,cn=0),Ai=u,aa=l,us=g,xl=P,pd=T,fs=b,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,li(We,function(){return wc(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||b){b=z.T,z.T=null,T=ee.p,ee.p=2,q=fi,fi|=4;try{wr(l,u,g)}finally{fi=q,ee.p=T,z.T=b}}Cr=1,Gt(),Wt(),Dn()}}function Gt(){if(Cr===1){Cr=0;var l=aa,u=Ai,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=z.T,z.T=null;var b=ee.p;ee.p=2;var T=fi;fi|=4;try{fm(u,l);var P=RE,q=Bv(l.containerInfo),se=P.focusedElem,Te=P.selectionRange;if(q!==se&&se&&se.ownerDocument&&Dv(se.ownerDocument.documentElement,se)){if(Te!==null&&Gh(se)){var et=Te.start,yt=Te.end;if(yt===void 0&&(yt=et),"selectionStart"in se)se.selectionStart=et,se.selectionEnd=Math.min(yt,se.value.length);else{var Mt=se.ownerDocument||document,rt=Mt&&Mt.defaultView||window;if(rt.getSelection){var at=rt.getSelection(),An=se.textContent.length,vn=Math.min(Te.start,An),Li=Te.end===void 0?vn:Math.min(Te.end,An);!at.extend&&vn>Li&&(q=Li,Li=vn,vn=q);var Xe=Rv(se,vn),Fe=Rv(se,Li);if(Xe&&Fe&&(at.rangeCount!==1||at.anchorNode!==Xe.node||at.anchorOffset!==Xe.offset||at.focusNode!==Fe.node||at.focusOffset!==Fe.offset)){var Ke=Mt.createRange();Ke.setStart(Xe.node,Xe.offset),at.removeAllRanges(),vn>Li?(at.addRange(Ke),at.extend(Fe.node,Fe.offset)):(Ke.setEnd(Fe.node,Fe.offset),at.addRange(Ke))}}}}for(Mt=[],at=se;at=at.parentNode;)at.nodeType===1&&Mt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<Mt.length;se++){var bt=Mt[se];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}Zx=!!CE,RE=CE=null}finally{fi=T,ee.p=b,z.T=g}}l.current=u,Cr=2}}function Wt(){if(Cr===2){Cr=0;var l=aa,u=Ai,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=z.T,z.T=null;var b=ee.p;ee.p=2;var T=fi;fi|=4;try{yl(l,u.alternate,u)}finally{fi=T,ee.p=b,z.T=g}}Cr=3}}function Dn(){if(Cr===4||Cr===3){Cr=0,Pe();var l=aa,u=Ai,g=us,b=fs;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Cr=5:(Cr=0,Ai=aa=null,hs(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(cs=null),Cn(g),u=u.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Ee,u,void 0,(u.current.flags&128)===128)}catch{}if(b!==null){u=z.T,T=ee.p,ee.p=2,z.T=null;try{for(var P=l.onRecoverableError,q=0;q<b.length;q++){var se=b[q];P(se.value,{componentStack:se.stack})}}finally{z.T=u,ee.p=T}}(us&3)!==0&&Tc(),Cc(l),T=l.pendingLanes,(g&4194090)!==0&&(T&42)!==0?l===hu?Bo++:(Bo=0,hu=l):Bo=0,g0(0)}}function hs(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,lf(u)))}function Tc(l){return Gt(),Wt(),Dn(),wc()}function wc(){if(Cr!==5)return!1;var l=aa,u=xl;xl=0;var g=Cn(us),b=z.T,T=ee.p;try{ee.p=32>g?32:g,z.T=null,g=pd,pd=null;var P=aa,q=us;if(Cr=0,Ai=aa=null,us=0,(fi&6)!==0)throw Error(n(331));var se=fi;if(fi|=4,p0(P.current),pm(P,P.current,q,g),fi=se,g0(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Ee,P)}catch{}return!0}finally{ee.p=T,z.T=b,hs(l,u)}}function it(l,u,g){u=$r(g,u),u=lm(l.stateNode,u,2),l=fl(l,u,2),l!==null&&(Pt(l,2),Cc(l))}function Ne(l,u,g){if(l.tag===3)it(l,l,g);else for(;u!==null;){if(u.tag===3){it(u,l,g);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(cs===null||!cs.has(b))){l=$r(g,l),g=zx(2),b=fl(u,g,2),b!==null&&(cm(g,b,u,l),Pt(b,2),Cc(b));break}}u=u.return}}function st(l,u,g){var b=l.pingCache;if(b===null){b=l.pingCache=new m0;var T=new Set;b.set(u,T)}else T=b.get(u),T===void 0&&(T=new Set,b.set(u,T));T.has(g)||(Cf=!0,T.add(g),l=Dt.bind(null,l,u,g),u.then(l,l))}function Dt(l,u,g){var b=l.pingCache;b!==null&&b.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Rn===l&&(cn&g)===g&&(Fi===4||Fi===3&&(cn&62914560)===cn&&300>ae()-yi?(fi&2)===0&&Ac(l,0):fu|=g,ri===cn&&(ri=0)),Cc(l)}function an(l,u){u===0&&(u=qe()),l=sl(l,u),l!==null&&(Pt(l,u),Cc(l))}function zi(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),an(l,g)}function En(l,u){var g=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(g=T.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(n(314))}b!==null&&b.delete(u),an(l,g)}function li(l,u){return ye(l,u)}var ur=null,Xn=null,Io=!1,ym=!1,xE=!1,gd=0;function Cc(l){l!==Xn&&l.next===null&&(Xn===null?ur=Xn=l:Xn=Xn.next=l),ym=!0,Io||(Io=!0,aH())}function g0(l,u){if(!xE&&ym){xE=!0;do for(var g=!1,b=ur;b!==null;){if(l!==0){var T=b.pendingLanes;if(T===0)var P=0;else{var q=b.suspendedLanes,se=b.pingedLanes;P=(1<<31-He(42|l)+1)-1,P&=T&~(q&~se),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(g=!0,VR(b,P))}else P=cn,P=ge(b,b===Rn?P:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(P&3)===0||Ve(b,P)||(g=!0,VR(b,P));b=b.next}while(g);xE=!1}}function rH(){zR()}function zR(){ym=Io=!1;var l=0;gd!==0&&(dH()&&(l=gd),gd=0);for(var u=ae(),g=null,b=ur;b!==null;){var T=b.next,P=HR(b,u);P===0?(b.next=null,g===null?ur=T:g.next=T,T===null&&(Xn=g)):(g=b,(l!==0||(P&3)!==0)&&(ym=!0)),b=T}g0(l)}function HR(l,u){for(var g=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var q=31-He(P),se=1<<q,Te=T[q];Te===-1?((se&g)===0||(se&b)!==0)&&(T[q]=_t(se,u)):Te<=u&&(l.expiredLanes|=se),P&=~se}if(u=Rn,g=cn,g=ge(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,g===0||l===u&&(Nn===2||Nn===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&j(b),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Ve(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(b!==null&&j(b),Cn(g)){case 2:case 8:g=Se;break;case 32:g=We;break;case 268435456:g=te;break;default:g=We}return b=GR.bind(null,l),g=ye(g,b),l.callbackPriority=u,l.callbackNode=g,u}return b!==null&&b!==null&&j(b),l.callbackPriority=2,l.callbackNode=null,2}function GR(l,u){if(Cr!==0&&Cr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(Tc()&&l.callbackNode!==g)return null;var b=cn;return b=ge(l,l===Rn?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(Rf(l,b,u),HR(l,ae()),l.callbackNode!=null&&l.callbackNode===g?GR.bind(null,l):null)}function VR(l,u){if(Tc())return null;Rf(l,u,!0)}function aH(){mH(function(){(fi&6)!==0?ye(Ie,rH):zR()})}function bE(){return gd===0&&(gd=Me()),gd}function kR(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ch(""+l)}function WR(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function sH(l,u,g,b,T){if(u==="submit"&&g&&g.stateNode===T){var P=kR((T[lt]||null).action),q=b.submitter;q&&(u=(u=q[lt]||null)?kR(u.formAction):q.getAttribute("formAction"),u!==null&&(P=u,q=null));var se=new qu("action","action",null,b,T);l.push({event:se,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(gd!==0){var Te=q?WR(T,q):new FormData(T);c0(g,{pending:!0,data:Te,method:T.method,action:P},null,Te)}}else typeof P=="function"&&(se.preventDefault(),Te=q?WR(T,q):new FormData(T),c0(g,{pending:!0,data:Te,method:T.method,action:P},P,Te))},currentTarget:T}]})}}for(var SE=0;SE<kh.length;SE++){var ME=kh[SE],oH=ME.toLowerCase(),lH=ME[0].toUpperCase()+ME.slice(1);Pr(oH,"on"+lH)}Pr(_a,"onAnimationEnd"),Pr(Pv,"onAnimationIteration"),Pr(Fa,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(J_,"onTransitionRun"),Pr(rl,"onTransitionStart"),Pr(nf,"onTransitionCancel"),Pr(al,"onTransitionEnd"),J("onMouseEnter",["mouseout","mouseover"]),J("onMouseLeave",["mouseout","mouseover"]),J("onPointerEnter",["pointerout","pointerover"]),J("onPointerLeave",["pointerout","pointerover"]),dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var v0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(v0));function XR(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var b=l[g],T=b.event;b=b.listeners;e:{var P=void 0;if(u)for(var q=b.length-1;0<=q;q--){var se=b[q],Te=se.instance,et=se.currentTarget;if(se=se.listener,Te!==P&&T.isPropagationStopped())break e;P=se,T.currentTarget=et;try{P(T)}catch(yt){Qc(yt)}T.currentTarget=null,P=Te}else for(q=0;q<b.length;q++){if(se=b[q],Te=se.instance,et=se.currentTarget,se=se.listener,Te!==P&&T.isPropagationStopped())break e;P=se,T.currentTarget=et;try{P(T)}catch(yt){Qc(yt)}T.currentTarget=null,P=Te}}}}function Kn(l,u){var g=u[hn];g===void 0&&(g=u[hn]=new Set);var b=l+"__bubble";g.has(b)||($R(u,l,2,!1),g.add(b))}function EE(l,u,g){var b=0;u&&(b|=4),$R(g,l,b,u)}var kx="_reactListening"+Math.random().toString(36).slice(2);function AE(l){if(!l[kx]){l[kx]=!0,tt.forEach(function(g){g!=="selectionchange"&&(cH.has(g)||EE(g,!1,l),EE(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[kx]||(u[kx]=!0,EE("selectionchange",!1,u))}}function $R(l,u,g,b){switch(g3(u)){case 2:var T=OH;break;case 8:T=UH;break;default:T=zE}g=T.bind(null,u,g,l),T=void 0,!Dh||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(u,g,{capture:!0,passive:T}):l.addEventListener(u,g,!0):T!==void 0?l.addEventListener(u,g,{passive:T}):l.addEventListener(u,g,!1)}function TE(l,u,g,b,T){var P=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var q=b.tag;if(q===3||q===4){var se=b.stateNode.containerInfo;if(se===T)break;if(q===4)for(q=b.return;q!==null;){var Te=q.tag;if((Te===3||Te===4)&&q.stateNode.containerInfo===T)return;q=q.return}for(;se!==null;){if(q=W(se),q===null)return;if(Te=q.tag,Te===5||Te===6||Te===26||Te===27){b=P=q;continue e}se=se.parentNode}}b=b.return}vv(function(){var et=P,yt=Ep(g),Mt=[];e:{var rt=Op.get(l);if(rt!==void 0){var at=qu,An=l;switch(l){case"keypress":if(Kl(g)===0)break e;case"keydown":case"keyup":at=Sv;break;case"focusin":An="focus",at=Tp;break;case"focusout":An="blur",at=Tp;break;case"beforeblur":case"afterblur":at=Tp;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=lE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Ev;break;case _a:case Pv:case Fa:at=O_;break;case al:at=el;break;case"scroll":case"scrollend":at=I_;break;case"wheel":at=cE;break;case"copy":case"cut":case"paste":at=F_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Cp;break;case"toggle":case"beforetoggle":at=Zl}var vn=(u&4)!==0,Li=!vn&&(l==="scroll"||l==="scrollend"),Xe=vn?rt!==null?rt+"Capture":null:rt;vn=[];for(var Fe=et,Ke;Fe!==null;){var bt=Fe;if(Ke=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||Ke===null||Xe===null||(bt=Xu(Fe,Xe),bt!=null&&vn.push(y0(Fe,bt,Ke))),Li)break;Fe=Fe.return}0<vn.length&&(rt=new at(rt,An,null,g,yt),Mt.push({event:rt,listeners:vn}))}}if((u&7)===0){e:{if(rt=l==="mouseover"||l==="pointerover",at=l==="mouseout"||l==="pointerout",rt&&g!==Mp&&(An=g.relatedTarget||g.fromElement)&&(W(An)||An[wt]))break e;if((at||rt)&&(rt=yt.window===yt?yt:(rt=yt.ownerDocument)?rt.defaultView||rt.parentWindow:window,at?(An=g.relatedTarget||g.toElement,at=et,An=An?W(An):null,An!==null&&(Li=a(An),vn=An.tag,An!==Li||vn!==5&&vn!==27&&vn!==6)&&(An=null)):(at=null,An=et),at!==An)){if(vn=xv,bt="onMouseLeave",Xe="onMouseEnter",Fe="mouse",(l==="pointerout"||l==="pointerover")&&(vn=Cp,bt="onPointerLeave",Xe="onPointerEnter",Fe="pointer"),Li=at==null?rt:Ce(at),Ke=An==null?rt:Ce(An),rt=new vn(bt,Fe+"leave",at,g,yt),rt.target=Li,rt.relatedTarget=Ke,bt=null,W(yt)===et&&(vn=new vn(Xe,Fe+"enter",An,g,yt),vn.target=Ke,vn.relatedTarget=Li,bt=vn),Li=bt,at&&An)t:{for(vn=at,Xe=An,Fe=0,Ke=vn;Ke;Ke=_m(Ke))Fe++;for(Ke=0,bt=Xe;bt;bt=_m(bt))Ke++;for(;0<Fe-Ke;)vn=_m(vn),Fe--;for(;0<Ke-Fe;)Xe=_m(Xe),Ke--;for(;Fe--;){if(vn===Xe||Xe!==null&&vn===Xe.alternate)break t;vn=_m(vn),Xe=_m(Xe)}vn=null}else vn=null;at!==null&&jR(Mt,rt,at,vn,!1),An!==null&&Li!==null&&jR(Mt,Li,An,vn,!0)}}e:{if(rt=et?Ce(et):window,at=rt.nodeName&&rt.nodeName.toLowerCase(),at==="select"||at==="input"&&rt.type==="file")var Jt=Dp;else if(Cv(rt))if(Bp)Jt=tc;else{Jt=q_;var qn=uE}else at=rt.nodeName,!at||at.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?et&&Sp(et.elementType)&&(Jt=Dp):Jt=Hh;if(Jt&&(Jt=Jt(l,et))){Na(Mt,Jt,g,yt);break e}qn&&qn(l,rt,et),l==="focusout"&&et&&rt.type==="number"&&et.memoizedProps.value!=null&&Ui(rt,"number",rt.value)}switch(qn=et?Ce(et):window,l){case"focusin":(Cv(qn)||qn.contentEditable==="true")&&(nl=qn,Ip=et,Vh=null);break;case"focusout":Vh=Ip=nl=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,Iv(Mt,g,yt);break;case"selectionchange":if(Lv)break;case"keydown":case"keyup":Iv(Mt,g,yt)}var ln;if(Ph)e:{switch(l){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else ec?Uh(l,g)&&(xn="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(xn="onCompositionStart");xn&&(Oh&&g.locale!=="ko"&&(ec||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&ec&&(ln=_v()):(Zo=yt,yv="value"in Zo?Zo.value:Zo.textContent,ec=!0)),qn=Wx(et,xn),0<qn.length&&(xn=new wp(xn,l,null,g,yt),Mt.push({event:xn,listeners:qn}),ln?xn.data=ln:(ln=Tv(g),ln!==null&&(xn.data=ln)))),(ln=Nh?Fh(l,g):wv(l,g))&&(xn=Wx(et,"onBeforeInput"),0<xn.length&&(qn=new wp("onBeforeInput","beforeinput",null,g,yt),Mt.push({event:qn,listeners:xn}),qn.data=ln)),sH(Mt,l,et,g,yt)}XR(Mt,u)})}function y0(l,u,g){return{instance:l,listener:u,currentTarget:g}}function Wx(l,u){for(var g=u+"Capture",b=[];l!==null;){var T=l,P=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||P===null||(T=Xu(l,g),T!=null&&b.unshift(y0(l,T,P)),T=Xu(l,u),T!=null&&b.push(y0(l,T,P))),l.tag===3)return b;l=l.return}return[]}function _m(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function jR(l,u,g,b,T){for(var P=u._reactName,q=[];g!==null&&g!==b;){var se=g,Te=se.alternate,et=se.stateNode;if(se=se.tag,Te!==null&&Te===b)break;se!==5&&se!==26&&se!==27||et===null||(Te=et,T?(et=Xu(g,P),et!=null&&q.unshift(y0(g,et,Te))):T||(et=Xu(g,P),et!=null&&q.push(y0(g,et,Te)))),g=g.return}q.length!==0&&l.push({event:u,listeners:q})}var uH=/\r\n?/g,fH=/\u0000|\uFFFD/g;function qR(l){return(typeof l=="string"?l:""+l).replace(uH,`
`).replace(fH,"")}function YR(l,u){return u=qR(u),qR(l)===u}function Xx(){}function Bi(l,u,g,b,T,P){switch(g){case"children":typeof b=="string"?u==="body"||u==="textarea"&&b===""||va(l,b):(typeof b=="number"||typeof b=="bigint")&&u!=="body"&&va(l,""+b);break;case"className":ut(l,"class",b);break;case"tabIndex":ut(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(l,g,b);break;case"style":wh(l,b,P);break;case"data":if(u!=="object"){ut(l,"data",b);break}case"src":case"href":if(b===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=Ch(""+b),l.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(g==="formAction"?(u!=="input"&&Bi(l,u,"name",T.name,T,null),Bi(l,u,"formEncType",T.formEncType,T,null),Bi(l,u,"formMethod",T.formMethod,T,null),Bi(l,u,"formTarget",T.formTarget,T,null)):(Bi(l,u,"encType",T.encType,T,null),Bi(l,u,"method",T.method,T,null),Bi(l,u,"target",T.target,T,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(g);break}b=Ch(""+b),l.setAttribute(g,b);break;case"onClick":b!=null&&(l.onclick=Xx);break;case"onScroll":b!=null&&Kn("scroll",l);break;case"onScrollEnd":b!=null&&Kn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(g=b.__html,g!=null){if(T.children!=null)throw Error(n(60));l.innerHTML=g}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}g=Ch(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""+b):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":b===!0?l.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(g,b):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(g,b):l.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(g):l.setAttribute(g,b);break;case"popover":Kn("beforetoggle",l),Kn("toggle",l),Je(l,"popover",b);break;case"xlinkActuate":xt(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":xt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":xt(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":xt(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":xt(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":xt(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":xt(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":xt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":xt(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Je(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=mv.get(g)||g,Je(l,g,b))}}function wE(l,u,g,b,T,P){switch(g){case"style":wh(l,b,P);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(g=b.__html,g!=null){if(T.children!=null)throw Error(n(60));l.innerHTML=g}}break;case"children":typeof b=="string"?va(l,b):(typeof b=="number"||typeof b=="bigint")&&va(l,""+b);break;case"onScroll":b!=null&&Kn("scroll",l);break;case"onScrollEnd":b!=null&&Kn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Xx);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tt.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(T=g.endsWith("Capture"),u=g.slice(2,T?g.length-7:void 0),P=l[lt]||null,P=P!=null?P[g]:null,typeof P=="function"&&l.removeEventListener(u,P,T),typeof b=="function")){typeof P!="function"&&P!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,b,T);break e}g in l?l[g]=b:b===!0?l.setAttribute(g,""):Je(l,g,b)}}}function Ta(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kn("error",l),Kn("load",l);var b=!1,T=!1,P;for(P in g)if(g.hasOwnProperty(P)){var q=g[P];if(q!=null)switch(P){case"src":b=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Bi(l,u,P,q,g,null)}}T&&Bi(l,u,"srcSet",g.srcSet,g,null),b&&Bi(l,u,"src",g.src,g,null);return;case"input":Kn("invalid",l);var se=P=q=T=null,Te=null,et=null;for(b in g)if(g.hasOwnProperty(b)){var yt=g[b];if(yt!=null)switch(b){case"name":T=yt;break;case"type":q=yt;break;case"checked":Te=yt;break;case"defaultChecked":et=yt;break;case"value":P=yt;break;case"defaultValue":se=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(n(137,u));break;default:Bi(l,u,b,yt,g,null)}}Pn(l,P,se,Te,et,q,T,!1),gi(l);return;case"select":Kn("invalid",l),b=q=P=null;for(T in g)if(g.hasOwnProperty(T)&&(se=g[T],se!=null))switch(T){case"value":P=se;break;case"defaultValue":q=se;break;case"multiple":b=se;default:Bi(l,u,T,se,g,null)}u=P,g=q,l.multiple=!!b,u!=null?ei(l,!!b,u,!1):g!=null&&ei(l,!!b,g,!0);return;case"textarea":Kn("invalid",l),P=T=b=null;for(q in g)if(g.hasOwnProperty(q)&&(se=g[q],se!=null))switch(q){case"value":b=se;break;case"defaultValue":T=se;break;case"children":P=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(91));break;default:Bi(l,u,q,se,g,null)}Ir(l,b,T,P),gi(l);return;case"option":for(Te in g)if(g.hasOwnProperty(Te)&&(b=g[Te],b!=null))switch(Te){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:Bi(l,u,Te,b,g,null)}return;case"dialog":Kn("beforetoggle",l),Kn("toggle",l),Kn("cancel",l),Kn("close",l);break;case"iframe":case"object":Kn("load",l);break;case"video":case"audio":for(b=0;b<v0.length;b++)Kn(v0[b],l);break;case"image":Kn("error",l),Kn("load",l);break;case"details":Kn("toggle",l);break;case"embed":case"source":case"link":Kn("error",l),Kn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in g)if(g.hasOwnProperty(et)&&(b=g[et],b!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Bi(l,u,et,b,g,null)}return;default:if(Sp(u)){for(yt in g)g.hasOwnProperty(yt)&&(b=g[yt],b!==void 0&&wE(l,u,yt,b,g,void 0));return}}for(se in g)g.hasOwnProperty(se)&&(b=g[se],b!=null&&Bi(l,u,se,b,g,null))}function hH(l,u,g,b){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,P=null,q=null,se=null,Te=null,et=null,yt=null;for(at in g){var Mt=g[at];if(g.hasOwnProperty(at)&&Mt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Te=Mt;default:b.hasOwnProperty(at)||Bi(l,u,at,null,b,Mt)}}for(var rt in b){var at=b[rt];if(Mt=g[rt],b.hasOwnProperty(rt)&&(at!=null||Mt!=null))switch(rt){case"type":P=at;break;case"name":T=at;break;case"checked":et=at;break;case"defaultChecked":yt=at;break;case"value":q=at;break;case"defaultValue":se=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,u));break;default:at!==Mt&&Bi(l,u,rt,at,b,Mt)}}zn(l,q,se,Te,et,yt,P,T);return;case"select":at=q=se=rt=null;for(P in g)if(Te=g[P],g.hasOwnProperty(P)&&Te!=null)switch(P){case"value":break;case"multiple":at=Te;default:b.hasOwnProperty(P)||Bi(l,u,P,null,b,Te)}for(T in b)if(P=b[T],Te=g[T],b.hasOwnProperty(T)&&(P!=null||Te!=null))switch(T){case"value":rt=P;break;case"defaultValue":se=P;break;case"multiple":q=P;default:P!==Te&&Bi(l,u,T,P,b,Te)}u=se,g=q,b=at,rt!=null?ei(l,!!g,rt,!1):!!b!=!!g&&(u!=null?ei(l,!!g,u,!0):ei(l,!!g,g?[]:"",!1));return;case"textarea":at=rt=null;for(se in g)if(T=g[se],g.hasOwnProperty(se)&&T!=null&&!b.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Bi(l,u,se,null,b,T)}for(q in b)if(T=b[q],P=g[q],b.hasOwnProperty(q)&&(T!=null||P!=null))switch(q){case"value":rt=T;break;case"defaultValue":at=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==P&&Bi(l,u,q,T,b,P)}bi(l,rt,at);return;case"option":for(var An in g)if(rt=g[An],g.hasOwnProperty(An)&&rt!=null&&!b.hasOwnProperty(An))switch(An){case"selected":l.selected=!1;break;default:Bi(l,u,An,null,b,rt)}for(Te in b)if(rt=b[Te],at=g[Te],b.hasOwnProperty(Te)&&rt!==at&&(rt!=null||at!=null))switch(Te){case"selected":l.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Bi(l,u,Te,rt,b,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vn in g)rt=g[vn],g.hasOwnProperty(vn)&&rt!=null&&!b.hasOwnProperty(vn)&&Bi(l,u,vn,null,b,rt);for(et in b)if(rt=b[et],at=g[et],b.hasOwnProperty(et)&&rt!==at&&(rt!=null||at!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,u));break;default:Bi(l,u,et,rt,b,at)}return;default:if(Sp(u)){for(var Li in g)rt=g[Li],g.hasOwnProperty(Li)&&rt!==void 0&&!b.hasOwnProperty(Li)&&wE(l,u,Li,void 0,b,rt);for(yt in b)rt=b[yt],at=g[yt],!b.hasOwnProperty(yt)||rt===at||rt===void 0&&at===void 0||wE(l,u,yt,rt,b,at);return}}for(var Xe in g)rt=g[Xe],g.hasOwnProperty(Xe)&&rt!=null&&!b.hasOwnProperty(Xe)&&Bi(l,u,Xe,null,b,rt);for(Mt in b)rt=b[Mt],at=g[Mt],!b.hasOwnProperty(Mt)||rt===at||rt==null&&at==null||Bi(l,u,Mt,rt,b,at)}var CE=null,RE=null;function $x(l){return l.nodeType===9?l:l.ownerDocument}function KR(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JR(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function DE(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var BE=null;function dH(){var l=window.event;return l&&l.type==="popstate"?l===BE?!1:(BE=l,!0):(BE=null,!1)}var ZR=typeof setTimeout=="function"?setTimeout:void 0,pH=typeof clearTimeout=="function"?clearTimeout:void 0,QR=typeof Promise=="function"?Promise:void 0,mH=typeof queueMicrotask=="function"?queueMicrotask:typeof QR<"u"?function(l){return QR.resolve(null).then(l).catch(gH)}:ZR;function gH(l){setTimeout(function(){throw l})}function Bf(l){return l==="head"}function e3(l,u){var g=u,b=0,T=0;do{var P=g.nextSibling;if(l.removeChild(g),P&&P.nodeType===8)if(g=P.data,g==="/$"){if(0<b&&8>b){g=b;var q=l.ownerDocument;if(g&1&&_0(q.documentElement),g&2&&_0(q.body),g&4)for(g=q.head,_0(g),q=g.firstChild;q;){var se=q.nextSibling,Te=q.nodeName;q[tn]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&q.rel.toLowerCase()==="stylesheet"||g.removeChild(q),q=se}}if(T===0){l.removeChild(P),w0(u);return}T--}else g==="$"||g==="$?"||g==="$!"?T++:b=g.charCodeAt(0)-48;else b=0;g=P}while(g);w0(u)}function LE(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":LE(g),jt(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function vH(l,u,g,b){for(;l.nodeType===1;){var T=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[tn])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var P=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=bl(l.nextSibling),l===null)break}return null}function yH(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=bl(l.nextSibling),l===null))return null;return l}function IE(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function _H(l,u){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")u();else{var b=function(){u(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function bl(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var PE=null;function t3(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return l;u--}else g==="/$"&&u++}l=l.previousSibling}return null}function n3(l,u,g){switch(u=$x(g),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function _0(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);jt(l)}var Po=new Map,i3=new Set;function jx(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var pu=ee.d;ee.d={f:xH,r:bH,D:SH,C:MH,L:EH,m:AH,X:wH,S:TH,M:CH};function xH(){var l=pu.f(),u=Lo();return l||u}function bH(l){var u=re(l);u!==null&&u.tag===5&&u.type==="form"?Tx(u):pu.r(l)}var xm=typeof document>"u"?null:document;function r3(l,u,g){var b=xm;if(b&&typeof u=="string"&&u){var T=un(u);T='link[rel="'+l+'"][href="'+T+'"]',typeof g=="string"&&(T+='[crossorigin="'+g+'"]'),i3.has(T)||(i3.add(T),l={rel:l,crossOrigin:g,href:u},b.querySelector(T)===null&&(u=b.createElement("link"),Ta(u,"link",l),Qe(u),b.head.appendChild(u)))}}function SH(l){pu.D(l),r3("dns-prefetch",l,null)}function MH(l,u){pu.C(l,u),r3("preconnect",l,u)}function EH(l,u,g){pu.L(l,u,g);var b=xm;if(b&&l&&u){var T='link[rel="preload"][as="'+un(u)+'"]';u==="image"&&g&&g.imageSrcSet?(T+='[imagesrcset="'+un(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(T+='[imagesizes="'+un(g.imageSizes)+'"]')):T+='[href="'+un(l)+'"]';var P=T;switch(u){case"style":P=bm(l);break;case"script":P=Sm(l)}Po.has(P)||(l=d({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),Po.set(P,l),b.querySelector(T)!==null||u==="style"&&b.querySelector(x0(P))||u==="script"&&b.querySelector(b0(P))||(u=b.createElement("link"),Ta(u,"link",l),Qe(u),b.head.appendChild(u)))}}function AH(l,u){pu.m(l,u);var g=xm;if(g&&l){var b=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+un(b)+'"][href="'+un(l)+'"]',P=T;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=Sm(l)}if(!Po.has(P)&&(l=d({rel:"modulepreload",href:l},u),Po.set(P,l),g.querySelector(T)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(b0(P)))return}b=g.createElement("link"),Ta(b,"link",l),Qe(b),g.head.appendChild(b)}}}function TH(l,u,g){pu.S(l,u,g);var b=xm;if(b&&l){var T=je(b).hoistableStyles,P=bm(l);u=u||"default";var q=T.get(P);if(!q){var se={loading:0,preload:null};if(q=b.querySelector(x0(P)))se.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},g),(g=Po.get(P))&&NE(l,g);var Te=q=b.createElement("link");Qe(Te),Ta(Te,"link",l),Te._p=new Promise(function(et,yt){Te.onload=et,Te.onerror=yt}),Te.addEventListener("load",function(){se.loading|=1}),Te.addEventListener("error",function(){se.loading|=2}),se.loading|=4,qx(q,u,b)}q={type:"stylesheet",instance:q,count:1,state:se},T.set(P,q)}}}function wH(l,u){pu.X(l,u);var g=xm;if(g&&l){var b=je(g).hoistableScripts,T=Sm(l),P=b.get(T);P||(P=g.querySelector(b0(T)),P||(l=d({src:l,async:!0},u),(u=Po.get(T))&&OE(l,u),P=g.createElement("script"),Qe(P),Ta(P,"link",l),g.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(T,P))}}function CH(l,u){pu.M(l,u);var g=xm;if(g&&l){var b=je(g).hoistableScripts,T=Sm(l),P=b.get(T);P||(P=g.querySelector(b0(T)),P||(l=d({src:l,async:!0,type:"module"},u),(u=Po.get(T))&&OE(l,u),P=g.createElement("script"),Qe(P),Ta(P,"link",l),g.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},b.set(T,P))}}function a3(l,u,g,b){var T=(T=Ge.current)?jx(T):null;if(!T)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=bm(g.href),g=je(T).hoistableStyles,b=g.get(u),b||(b={type:"style",instance:null,count:0,state:null},g.set(u,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=bm(g.href);var P=je(T).hoistableStyles,q=P.get(l);if(q||(T=T.ownerDocument||T,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,q),(P=T.querySelector(x0(l)))&&!P._p&&(q.instance=P,q.state.loading=5),Po.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Po.set(l,g),P||RH(T,l,g,q.state))),u&&b===null)throw Error(n(528,""));return q}if(u&&b!==null)throw Error(n(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Sm(g),g=je(T).hoistableScripts,b=g.get(u),b||(b={type:"script",instance:null,count:0,state:null},g.set(u,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function bm(l){return'href="'+un(l)+'"'}function x0(l){return'link[rel="stylesheet"]['+l+"]"}function s3(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function RH(l,u,g,b){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?b.loading=1:(u=l.createElement("link"),b.preload=u,u.addEventListener("load",function(){return b.loading|=1}),u.addEventListener("error",function(){return b.loading|=2}),Ta(u,"link",g),Qe(u),l.head.appendChild(u))}function Sm(l){return'[src="'+un(l)+'"]'}function b0(l){return"script[async]"+l}function o3(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var b=l.querySelector('style[data-href~="'+un(g.href)+'"]');if(b)return u.instance=b,Qe(b),b;var T=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Qe(b),Ta(b,"style",T),qx(b,g.precedence,l),u.instance=b;case"stylesheet":T=bm(g.href);var P=l.querySelector(x0(T));if(P)return u.state.loading|=4,u.instance=P,Qe(P),P;b=s3(g),(T=Po.get(T))&&NE(b,T),P=(l.ownerDocument||l).createElement("link"),Qe(P);var q=P;return q._p=new Promise(function(se,Te){q.onload=se,q.onerror=Te}),Ta(P,"link",b),u.state.loading|=4,qx(P,g.precedence,l),u.instance=P;case"script":return P=Sm(g.src),(T=l.querySelector(b0(P)))?(u.instance=T,Qe(T),T):(b=g,(T=Po.get(P))&&(b=d({},g),OE(b,T)),l=l.ownerDocument||l,T=l.createElement("script"),Qe(T),Ta(T,"link",b),l.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(b=u.instance,u.state.loading|=4,qx(b,g.precedence,l));return u.instance}function qx(l,u,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=b.length?b[b.length-1]:null,P=T,q=0;q<b.length;q++){var se=b[q];if(se.dataset.precedence===u)P=se;else if(P!==T)break}P?P.parentNode.insertBefore(l,P.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function NE(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function OE(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Yx=null;function l3(l,u,g){if(Yx===null){var b=new Map,T=Yx=new Map;T.set(g,b)}else T=Yx,b=T.get(g),b||(b=new Map,T.set(g,b));if(b.has(l))return b;for(b.set(l,null),g=g.getElementsByTagName(l),T=0;T<g.length;T++){var P=g[T];if(!(P[tn]||P[Ye]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var q=P.getAttribute(u)||"";q=l+q;var se=b.get(q);se?se.push(P):b.set(q,[P])}}return b}function c3(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function DH(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function u3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var S0=null;function BH(){}function LH(l,u,g){if(S0===null)throw Error(n(475));var b=S0;if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=bm(g.href),P=l.querySelector(x0(T));if(P){l=P._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=Kx.bind(b),l.then(b,b)),u.state.loading|=4,u.instance=P,Qe(P);return}P=l.ownerDocument||l,g=s3(g),(T=Po.get(T))&&NE(g,T),P=P.createElement("link"),Qe(P);var q=P;q._p=new Promise(function(se,Te){q.onload=se,q.onerror=Te}),Ta(P,"link",g),u.instance=P}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(b.count++,u=Kx.bind(b),l.addEventListener("load",u),l.addEventListener("error",u))}}function IH(){if(S0===null)throw Error(n(475));var l=S0;return l.stylesheets&&l.count===0&&UE(l,l.stylesheets),0<l.count?function(u){var g=setTimeout(function(){if(l.stylesheets&&UE(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Kx(){if(this.count--,this.count===0){if(this.stylesheets)UE(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Jx=null;function UE(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Jx=new Map,u.forEach(PH,l),Jx=null,Kx.call(l))}function PH(l,u){if(!(u.state.loading&4)){var g=Jx.get(l);if(g)var b=g.get(null);else{g=new Map,Jx.set(l,g);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<T.length;P++){var q=T[P];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(g.set(q.dataset.precedence,q),b=q)}b&&g.set(null,b)}T=u.instance,q=T.getAttribute("data-precedence"),P=g.get(q)||b,P===b&&g.set(null,T),g.set(q,T),this.count++,b=Kx.bind(this),T.addEventListener("load",b),T.addEventListener("error",b),P?P.parentNode.insertBefore(T,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),u.state.loading|=4}}var M0={$$typeof:D,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function NH(l,u,g,b,T,P,q,se){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=b,this.onUncaughtError=T,this.onCaughtError=P,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function f3(l,u,g,b,T,P,q,se,Te,et,yt,Mt){return l=new NH(l,u,g,q,se,Te,et,Mt),u=1,P===!0&&(u|=24),P=za(3,null,null,u),l.current=P,P.stateNode=l,u=kp(),u.refCount++,l.pooledCache=u,u.refCount++,P.memoizedState={element:b,isDehydrated:g,cache:u},jv(P),l}function h3(l){return l?(l=rc,l):rc}function d3(l,u,g,b,T,P){T=h3(T),b.context===null?b.context=T:b.pendingContext=T,b=bo(u),b.payload={element:g},P=P===void 0?null:P,P!==null&&(b.callback=P),g=fl(l,b,u),g!==null&&(Aa(g,l,u),Kc(g,l,u))}function p3(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function FE(l,u){p3(l,u),(l=l.alternate)&&p3(l,u)}function m3(l){if(l.tag===13){var u=sl(l,67108864);u!==null&&Aa(u,l,67108864),FE(l,67108864)}}var Zx=!0;function OH(l,u,g,b){var T=z.T;z.T=null;var P=ee.p;try{ee.p=2,zE(l,u,g,b)}finally{ee.p=P,z.T=T}}function UH(l,u,g,b){var T=z.T;z.T=null;var P=ee.p;try{ee.p=8,zE(l,u,g,b)}finally{ee.p=P,z.T=T}}function zE(l,u,g,b){if(Zx){var T=HE(b);if(T===null)TE(l,u,b,Qx,g),v3(l,b);else if(zH(T,l,u,g,b))b.stopPropagation();else if(v3(l,b),u&4&&-1<FH.indexOf(l)){for(;T!==null;){var P=re(T);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var q=Nt(P.pendingLanes);if(q!==0){var se=P;for(se.pendingLanes|=2,se.entangledLanes|=2;q;){var Te=1<<31-He(q);se.entanglements[1]|=Te,q&=~Te}Cc(P),(fi&6)===0&&(ra=ae()+500,g0(0))}}break;case 13:se=sl(P,2),se!==null&&Aa(se,P,2),Lo(),FE(P,2)}if(P=HE(b),P===null&&TE(l,u,b,Qx,g),P===T)break;T=P}T!==null&&b.stopPropagation()}else TE(l,u,b,null,g)}}function HE(l){return l=Ep(l),GE(l)}var Qx=null;function GE(l){if(Qx=null,l=W(l),l!==null){var u=a(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=s(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Qx=l,null}function g3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case Ie:return 2;case Se:return 8;case We:case ht:return 32;case te:return 268435456;default:return 32}default:return 32}}var VE=!1,Lf=null,If=null,Pf=null,E0=new Map,A0=new Map,Nf=[],FH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v3(l,u){switch(l){case"focusin":case"focusout":Lf=null;break;case"dragenter":case"dragleave":If=null;break;case"mouseover":case"mouseout":Pf=null;break;case"pointerover":case"pointerout":E0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":A0.delete(u.pointerId)}}function T0(l,u,g,b,T,P){return l===null||l.nativeEvent!==P?(l={blockedOn:u,domEventName:g,eventSystemFlags:b,nativeEvent:P,targetContainers:[T]},u!==null&&(u=re(u),u!==null&&m3(u)),l):(l.eventSystemFlags|=b,u=l.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),l)}function zH(l,u,g,b,T){switch(u){case"focusin":return Lf=T0(Lf,l,u,g,b,T),!0;case"dragenter":return If=T0(If,l,u,g,b,T),!0;case"mouseover":return Pf=T0(Pf,l,u,g,b,T),!0;case"pointerover":var P=T.pointerId;return E0.set(P,T0(E0.get(P)||null,l,u,g,b,T)),!0;case"gotpointercapture":return P=T.pointerId,A0.set(P,T0(A0.get(P)||null,l,u,g,b,T)),!0}return!1}function y3(l){var u=W(l.target);if(u!==null){var g=a(u);if(g!==null){if(u=g.tag,u===13){if(u=s(g),u!==null){l.blockedOn=u,he(l.priority,function(){if(g.tag===13){var b=tr();b=Xt(b);var T=sl(g,b);T!==null&&Aa(T,g,b),FE(g,b)}});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function e1(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=HE(l.nativeEvent);if(g===null){g=l.nativeEvent;var b=new g.constructor(g.type,g);Mp=b,g.target.dispatchEvent(b),Mp=null}else return u=re(g),u!==null&&m3(u),l.blockedOn=g,!1;u.shift()}return!0}function _3(l,u,g){e1(l)&&g.delete(u)}function HH(){VE=!1,Lf!==null&&e1(Lf)&&(Lf=null),If!==null&&e1(If)&&(If=null),Pf!==null&&e1(Pf)&&(Pf=null),E0.forEach(_3),A0.forEach(_3)}function t1(l,u){l.blockedOn===u&&(l.blockedOn=null,VE||(VE=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,HH)))}var n1=null;function x3(l){n1!==l&&(n1=l,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){n1===l&&(n1=null);for(var u=0;u<l.length;u+=3){var g=l[u],b=l[u+1],T=l[u+2];if(typeof b!="function"){if(GE(b||g)===null)continue;break}var P=re(g);P!==null&&(l.splice(u,3),u-=3,c0(P,{pending:!0,data:T,method:g.method,action:b},b,T))}}))}function w0(l){function u(Te){return t1(Te,l)}Lf!==null&&t1(Lf,l),If!==null&&t1(If,l),Pf!==null&&t1(Pf,l),E0.forEach(u),A0.forEach(u);for(var g=0;g<Nf.length;g++){var b=Nf[g];b.blockedOn===l&&(b.blockedOn=null)}for(;0<Nf.length&&(g=Nf[0],g.blockedOn===null);)y3(g),g.blockedOn===null&&Nf.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var T=g[b],P=g[b+1],q=T[lt]||null;if(typeof P=="function")q||x3(g);else if(q){var se=null;if(P&&P.hasAttribute("formAction")){if(T=P,q=P[lt]||null)se=q.formAction;else if(GE(T)!==null)continue}else se=q.action;typeof se=="function"?g[b+1]=se:(g.splice(b,3),b-=3),x3(g)}}}function kE(l){this._internalRoot=l}i1.prototype.render=kE.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var g=u.current,b=tr();d3(g,b,l,u,null,null)},i1.prototype.unmount=kE.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;d3(l.current,2,null,l,null,null),Lo(),u[wt]=null}};function i1(l){this._internalRoot=l}i1.prototype.unstable_scheduleHydration=function(l){if(l){var u=Tn();l={blockedOn:null,target:l,priority:u};for(var g=0;g<Nf.length&&u!==0&&u<Nf[g].priority;g++);Nf.splice(g,0,l),g===0&&y3(l)}};var b3=e.version;if(b3!=="19.1.0")throw Error(n(527,b3,"19.1.0"));ee.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=c(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var GH={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var r1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r1.isDisabled&&r1.supportsFiber)try{Ee=r1.inject(GH),Be=r1}catch{}}return R0.createRoot=function(l,u){if(!r(l))throw Error(n(299));var g=!1,b="",T=cd,P=sm,q=Fx,se=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(q=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(se=u.unstable_transitionCallbacks)),u=f3(l,1,!1,null,null,g,b,T,P,q,se,null),l[wt]=u.current,AE(l),new kE(u)},R0.hydrateRoot=function(l,u,g){if(!r(l))throw Error(n(299));var b=!1,T="",P=cd,q=sm,se=Fx,Te=null,et=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onUncaughtError!==void 0&&(P=g.onUncaughtError),g.onCaughtError!==void 0&&(q=g.onCaughtError),g.onRecoverableError!==void 0&&(se=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Te=g.unstable_transitionCallbacks),g.formState!==void 0&&(et=g.formState)),u=f3(l,1,!0,u,g??null,b,T,P,q,se,Te,et),u.context=h3(null),g=u.current,b=tr(),b=Xt(b),T=bo(b),T.callback=null,fl(g,T,b),g=b,u.current.lanes=g,Pt(u,g),Cc(u),l[wt]=u.current,AE(l),new i1(u)},R0.version="19.1.0",R0}var B3;function QH(){if(B3)return XE.exports;B3=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),XE.exports=ZH(),XE.exports}var e5=QH();function dh(){return dh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},dh.apply(null,arguments)}var X=Xg();const xe=ho(X),t5=XH({__proto__:null,default:xe},[X]);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const xh="177",Nd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Od={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_N=0,Uw=1,xN=2,n5=3,bN=0,uM=1,py=2,Bl=3,Fl=0,Zr=1,fa=2,Gr=0,Yd=1,Fw=2,zw=3,Hw=4,SN=5,nh=100,MN=101,EN=102,AN=103,TN=104,wN=200,CN=201,RN=202,DN=203,Qb=204,eS=205,BN=206,LN=207,IN=208,PN=209,NN=210,ON=211,UN=212,FN=213,zN=214,tS=0,nS=1,iS=2,np=3,rS=4,aS=5,sS=6,oS=7,r_=0,HN=1,GN=2,Nl=0,VN=1,kN=2,WN=3,k2=4,XN=5,$N=6,jN=7,Gw="attached",qN="detached",ph=300,zc=301,mh=302,Rg=303,Ny=304,$g=306,gh=1e3,Br=1001,Dg=1002,Mr=1003,fM=1004,i5=1004,Gd=1005,r5=1005,Qn=1006,Sg=1007,a5=1007,Ho=1008,Vw=1008,Ji=1009,hM=1010,dM=1011,Bg=1012,a_=1013,zl=1014,Yi=1015,Hr=1016,pM=1017,mM=1018,ip=1020,W2=35902,X2=1021,$2=1022,Lr=1023,Lg=1026,rp=1027,s_=1028,o_=1029,j2=1030,gM=1031,s5=1032,vM=1033,my=33776,gy=33777,vy=33778,yy=33779,lS=35840,cS=35841,uS=35842,fS=35843,hS=36196,dS=37492,pS=37496,mS=37808,gS=37809,vS=37810,yS=37811,_S=37812,xS=37813,bS=37814,SS=37815,MS=37816,ES=37817,AS=37818,TS=37819,wS=37820,CS=37821,_y=36492,RS=36494,DS=36495,q2=36283,BS=36284,LS=36285,IS=36286,YN=2200,KN=2201,JN=2202,Ig=2300,Pg=2301,kb=2302,Vd=2400,kd=2401,Oy=2402,yM=2500,Y2=2501,ZN=0,K2=1,PS=2,Vc=3200,QN=3201,o5=3202,l5=3203,bh=0,eO=1,Il="",$n="srgb",fo="srgb-linear",Uy="linear",Ti="srgb",c5=0,Ud=7680,u5=7681,f5=7682,h5=7683,d5=34055,p5=34056,m5=5386,g5=512,v5=513,y5=514,_5=515,x5=516,b5=517,S5=518,kw=519,tO=512,nO=513,iO=514,J2=515,rO=516,aO=517,sO=518,oO=519,Fy=35044,M5=35048,E5=35040,A5=35045,T5=35049,w5=35041,C5=35046,R5=35050,D5=35042,B5="100",Ww="300 es",Go=2e3,zy=2001,L5={COMPUTE:"compute",RENDER:"render"},I5={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},P5={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let po=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const Wa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let L3=1234567;const Kd=Math.PI/180,Ng=180/Math.PI;function co(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Wa[i&255]+Wa[i>>8&255]+Wa[i>>16&255]+Wa[i>>24&255]+"-"+Wa[e&255]+Wa[e>>8&255]+"-"+Wa[e>>16&15|64]+Wa[e>>24&255]+"-"+Wa[t&63|128]+Wa[t>>8&255]+"-"+Wa[t>>16&255]+Wa[t>>24&255]+Wa[n&255]+Wa[n>>8&255]+Wa[n>>16&255]+Wa[n>>24&255]).toLowerCase()}function In(i,e,t){return Math.max(e,Math.min(t,i))}function Z2(i,e){return(i%e+e)%e}function N5(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function O5(i,e,t){return i!==e?(t-i)/(e-i):0}function xy(i,e,t){return(1-t)*i+t*e}function U5(i,e,t,n){return xy(i,e,1-Math.exp(-t*n))}function F5(i,e=1){return e-Math.abs(Z2(i,e*2)-e)}function z5(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function H5(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function G5(i,e){return i+Math.floor(Math.random()*(e-i+1))}function V5(i,e){return i+Math.random()*(e-i)}function k5(i){return i*(.5-Math.random())}function W5(i){i!==void 0&&(L3=i);let e=L3+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X5(i){return i*Kd}function $5(i){return i*Ng}function j5(i){return(i&i-1)===0&&i!==0}function q5(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Y5(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function K5(i,e,t,n,r){const a=Math.cos,s=Math.sin,o=a(t/2),c=s(t/2),f=a((e+n)/2),d=s((e+n)/2),m=a((e-n)/2),v=s((e-n)/2),y=a((n-e)/2),_=s((n-e)/2);switch(r){case"XYX":i.set(o*d,c*m,c*v,o*f);break;case"YZY":i.set(c*v,o*d,c*m,o*f);break;case"ZXZ":i.set(c*m,c*v,o*d,o*f);break;case"XZX":i.set(o*d,c*_,c*y,o*f);break;case"YXY":i.set(c*y,o*d,c*_,o*f);break;case"ZYZ":i.set(c*_,c*y,o*d,o*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ys(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Gn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Sr={DEG2RAD:Kd,RAD2DEG:Ng,generateUUID:co,clamp:In,euclideanModulo:Z2,mapLinear:N5,inverseLerp:O5,lerp:xy,damp:U5,pingpong:F5,smoothstep:z5,smootherstep:H5,randInt:G5,randFloat:V5,randFloatSpread:k5,seededRandom:W5,degToRad:X5,radToDeg:$5,isPowerOfTwo:j5,ceilPowerOfTwo:q5,floorPowerOfTwo:Y5,setQuaternionFromProperEuler:K5,normalize:Gn,denormalize:ys};let ot=class lO{constructor(e=0,t=0){lO.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=In(this.x,e.x,t.x),this.y=In(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=In(this.x,e,t),this.y=In(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(In(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(In(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*n-s*r+e.x,this.y=a*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ha=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,a,s,o){let c=n[r+0],f=n[r+1],d=n[r+2],m=n[r+3];const v=a[s+0],y=a[s+1],_=a[s+2],A=a[s+3];if(o===0){e[t+0]=c,e[t+1]=f,e[t+2]=d,e[t+3]=m;return}if(o===1){e[t+0]=v,e[t+1]=y,e[t+2]=_,e[t+3]=A;return}if(m!==A||c!==v||f!==y||d!==_){let S=1-o;const x=c*v+f*y+d*_+m*A,E=x>=0?1:-1,D=1-x*x;if(D>Number.EPSILON){const U=Math.sqrt(D),w=Math.atan2(U,x*E);S=Math.sin(S*w)/U,o=Math.sin(o*w)/U}const B=o*E;if(c=c*S+v*B,f=f*S+y*B,d=d*S+_*B,m=m*S+A*B,S===1-o){const U=1/Math.sqrt(c*c+f*f+d*d+m*m);c*=U,f*=U,d*=U,m*=U}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,r,a,s){const o=n[r],c=n[r+1],f=n[r+2],d=n[r+3],m=a[s],v=a[s+1],y=a[s+2],_=a[s+3];return e[t]=o*_+d*m+c*y-f*v,e[t+1]=c*_+d*v+f*m-o*y,e[t+2]=f*_+d*y+o*v-c*m,e[t+3]=d*_-o*m-c*v-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,f=o(n/2),d=o(r/2),m=o(a/2),v=c(n/2),y=c(r/2),_=c(a/2);switch(s){case"XYZ":this._x=v*d*m+f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m-v*y*_;break;case"YXZ":this._x=v*d*m+f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m+v*y*_;break;case"ZXY":this._x=v*d*m-f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m-v*y*_;break;case"ZYX":this._x=v*d*m-f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m+v*y*_;break;case"YZX":this._x=v*d*m+f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m-v*y*_;break;case"XZY":this._x=v*d*m-f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m+v*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],a=t[8],s=t[1],o=t[5],c=t[9],f=t[2],d=t[6],m=t[10],v=n+o+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(d-c)*y,this._y=(a-f)*y,this._z=(s-r)*y}else if(n>o&&n>m){const y=2*Math.sqrt(1+n-o-m);this._w=(d-c)/y,this._x=.25*y,this._y=(r+s)/y,this._z=(a+f)/y}else if(o>m){const y=2*Math.sqrt(1+o-n-m);this._w=(a-f)/y,this._x=(r+s)/y,this._y=.25*y,this._z=(c+d)/y}else{const y=2*Math.sqrt(1+m-n-o);this._w=(s-r)/y,this._x=(a+f)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(In(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,a=e._z,s=e._w,o=t._x,c=t._y,f=t._z,d=t._w;return this._x=n*d+s*o+r*f-a*c,this._y=r*d+s*c+a*o-n*f,this._z=a*d+s*f+n*c-r*o,this._w=s*d-n*o-r*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,a=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=a,this;const c=1-o*o;if(c<=Number.EPSILON){const y=1-t;return this._w=y*s+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*a+t*this._z,this.normalize(),this}const f=Math.sqrt(c),d=Math.atan2(f,o),m=Math.sin((1-t)*d)/f,v=Math.sin(t*d)/f;return this._w=s*m+this._w*v,this._x=n*m+this._x*v,this._y=r*m+this._y*v,this._z=a*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},ue=class cO{constructor(e=0,t=0,n=0){cO.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(I3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(I3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,a=e.x,s=e.y,o=e.z,c=e.w,f=2*(s*r-o*n),d=2*(o*t-a*r),m=2*(a*n-s*t);return this.x=t+c*f+s*m-o*d,this.y=n+c*d+o*f-a*m,this.z=r+c*m+a*d-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=In(this.x,e.x,t.x),this.y=In(this.y,e.y,t.y),this.z=In(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=In(this.x,e,t),this.y=In(this.y,e,t),this.z=In(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(In(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,a=e.z,s=t.x,o=t.y,c=t.z;return this.x=r*c-a*o,this.y=a*s-n*c,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return KE.copy(this).projectOnVector(e),this.sub(KE)}reflect(e){return this.sub(KE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(In(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const KE=new ue,I3=new ha;let Un=class uO{constructor(e,t,n,r,a,s,o,c,f){uO.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,a,s,o,c,f)}set(e,t,n,r,a,s,o,c,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=a,d[5]=c,d[6]=n,d[7]=s,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,a=this.elements,s=n[0],o=n[3],c=n[6],f=n[1],d=n[4],m=n[7],v=n[2],y=n[5],_=n[8],A=r[0],S=r[3],x=r[6],E=r[1],D=r[4],B=r[7],U=r[2],w=r[5],O=r[8];return a[0]=s*A+o*E+c*U,a[3]=s*S+o*D+c*w,a[6]=s*x+o*B+c*O,a[1]=f*A+d*E+m*U,a[4]=f*S+d*D+m*w,a[7]=f*x+d*B+m*O,a[2]=v*A+y*E+_*U,a[5]=v*S+y*D+_*w,a[8]=v*x+y*B+_*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8];return t*s*d-t*o*f-n*a*d+n*o*c+r*a*f-r*s*c}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8],m=d*s-o*f,v=o*c-d*a,y=f*a-s*c,_=t*m+n*v+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/_;return e[0]=m*A,e[1]=(r*f-d*n)*A,e[2]=(o*n-r*s)*A,e[3]=v*A,e[4]=(d*t-r*c)*A,e[5]=(r*a-o*t)*A,e[6]=y*A,e[7]=(n*c-f*t)*A,e[8]=(s*t-n*a)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,a,s,o){const c=Math.cos(a),f=Math.sin(a);return this.set(n*c,n*f,-n*(c*s+f*o)+s+e,-r*f,r*c,-r*(-f*s+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(JE.makeScale(e,t)),this}rotate(e){return this.premultiply(JE.makeRotation(-e)),this}translate(e,t){return this.premultiply(JE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const JE=new Un;function fO(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const J5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mg(i,e){return new J5[i](e)}function Hy(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function hO(){const i=Hy("canvas");return i.style.display="block",i}const P3={};function Mg(i){i in P3||(P3[i]=!0,console.warn(i))}function Z5(i,e,t){return new Promise(function(n,r){function a(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}function Q5(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function eG(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const N3=new Un().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),O3=new Un().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function tG(){const i={enabled:!0,workingColorSpace:fo,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Ti&&(r.r=Ou(r.r),r.g=Ou(r.g),r.b=Ou(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Ti&&(r.r=Eg(r.r),r.g=Eg(r.g),r.b=Eg(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Il?Uy:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Mg("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Mg("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[fo]:{primaries:e,whitePoint:n,transfer:Uy,toXYZ:N3,fromXYZ:O3,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:$n},outputColorSpaceConfig:{drawingBufferColorSpace:$n}},[$n]:{primaries:e,whitePoint:n,transfer:Ti,toXYZ:N3,fromXYZ:O3,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:$n}}}),i}const ai=tG();function Ou(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Eg(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Mm,dO=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Mm===void 0&&(Mm=Hy("canvas")),Mm.width=e.width,Mm.height=e.height;const r=Mm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Mm}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Hy("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Ou(a[s]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ou(t[n]/255)*255):t[n]=Ou(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},nG=0;class rh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nG++}),this.uuid=co(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(ZE(r[s].image)):a.push(ZE(r[s]))}else a=ZE(r);n.url=a}return t||(e.images[this.uuid]=n),n}}function ZE(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?dO.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iG=0;const QE=new ue;let mi=class Wb extends po{constructor(e=Wb.DEFAULT_IMAGE,t=Wb.DEFAULT_MAPPING,n=Br,r=Br,a=Qn,s=Ho,o=Lr,c=Ji,f=Wb.DEFAULT_ANISOTROPY,d=Il){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=co(),this.name="",this.source=new rh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=o,this.internalFormat=null,this.type=c,this.offset=new ot(0,0),this.repeat=new ot(1,1),this.center=new ot(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(QE).x}get height(){return this.source.getSize(QE).y}get depth(){return this.source.getSize(QE).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ph)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case gh:e.x=e.x-Math.floor(e.x);break;case Br:e.x=e.x<0?0:1;break;case Dg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case gh:e.y=e.y-Math.floor(e.y);break;case Br:e.y=e.y<0?0:1;break;case Dg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};mi.DEFAULT_IMAGE=null;mi.DEFAULT_MAPPING=ph;mi.DEFAULT_ANISOTROPY=1;let ni=class pO{constructor(e=0,t=0,n=0,r=1){pO.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,a;const c=e.elements,f=c[0],d=c[4],m=c[8],v=c[1],y=c[5],_=c[9],A=c[2],S=c[6],x=c[10];if(Math.abs(d-v)<.01&&Math.abs(m-A)<.01&&Math.abs(_-S)<.01){if(Math.abs(d+v)<.1&&Math.abs(m+A)<.1&&Math.abs(_+S)<.1&&Math.abs(f+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(f+1)/2,B=(y+1)/2,U=(x+1)/2,w=(d+v)/4,O=(m+A)/4,I=(_+S)/4;return D>B&&D>U?D<.01?(n=0,r=.707106781,a=.707106781):(n=Math.sqrt(D),r=w/n,a=O/n):B>U?B<.01?(n=.707106781,r=0,a=.707106781):(r=Math.sqrt(B),n=w/r,a=I/r):U<.01?(n=.707106781,r=.707106781,a=0):(a=Math.sqrt(U),n=O/a,r=I/a),this.set(n,r,a,t),this}let E=Math.sqrt((S-_)*(S-_)+(m-A)*(m-A)+(v-d)*(v-d));return Math.abs(E)<.001&&(E=1),this.x=(S-_)/E,this.y=(m-A)/E,this.z=(v-d)/E,this.w=Math.acos((f+y+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=In(this.x,e.x,t.x),this.y=In(this.y,e.y,t.y),this.z=In(this.z,e.z,t.z),this.w=In(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=In(this.x,e,t),this.y=In(this.y,e,t),this.z=In(this.z,e,t),this.w=In(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(In(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};class Q2 extends po{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Qn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new ni(0,0,e,t),this.scissorTest=!1,this.viewport=new ni(0,0,e,t);const r={width:e,height:t,depth:n.depth},a=new mi(r);this.textures=[];const s=n.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Qn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new rh(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}let ar=class extends Q2{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}};class _M extends mi{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Mr,this.minFilter=Mr,this.wrapR=Br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rG extends ar{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new _M(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class xM extends mi{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Mr,this.minFilter=Mr,this.wrapR=Br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aG extends ar{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new xM(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}let Ba=class{constructor(e=new ue(1/0,1/0,1/0),t=new ue(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ml.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ml.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ml.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Ml):Ml.fromBufferAttribute(a,s),Ml.applyMatrix4(e.matrixWorld),this.expandByPoint(Ml);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),a1.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),a1.copy(n.boundingBox)),a1.applyMatrix4(e.matrixWorld),this.union(a1)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ml),Ml.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(D0),s1.subVectors(this.max,D0),Em.subVectors(e.a,D0),Am.subVectors(e.b,D0),Tm.subVectors(e.c,D0),Uf.subVectors(Am,Em),Ff.subVectors(Tm,Am),vd.subVectors(Em,Tm);let t=[0,-Uf.z,Uf.y,0,-Ff.z,Ff.y,0,-vd.z,vd.y,Uf.z,0,-Uf.x,Ff.z,0,-Ff.x,vd.z,0,-vd.x,-Uf.y,Uf.x,0,-Ff.y,Ff.x,0,-vd.y,vd.x,0];return!eA(t,Em,Am,Tm,s1)||(t=[1,0,0,0,1,0,0,0,1],!eA(t,Em,Am,Tm,s1))?!1:(o1.crossVectors(Uf,Ff),t=[o1.x,o1.y,o1.z],eA(t,Em,Am,Tm,s1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ml).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ml).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(mu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}};const mu=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue],Ml=new ue,a1=new Ba,Em=new ue,Am=new ue,Tm=new ue,Uf=new ue,Ff=new ue,vd=new ue,D0=new ue,s1=new ue,o1=new ue,yd=new ue;function eA(i,e,t,n,r){for(let a=0,s=i.length-3;a<=s;a+=3){yd.fromArray(i,a);const o=r.x*Math.abs(yd.x)+r.y*Math.abs(yd.y)+r.z*Math.abs(yd.z),c=e.dot(yd),f=t.dot(yd),d=n.dot(yd);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>o)return!1}return!0}const sG=new Ba,B0=new ue,tA=new ue;let da=class{constructor(e=new ue,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):sG.setFromPoints(e).getCenter(n);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;B0.subVectors(e,this.center);const t=B0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(B0,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(tA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(B0.copy(e.center).add(tA)),this.expandByPoint(B0.copy(e.center).sub(tA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const gu=new ue,nA=new ue,l1=new ue,zf=new ue,iA=new ue,c1=new ue,rA=new ue;let pp=class{constructor(e=new ue,t=new ue(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,gu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=gu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(gu.copy(this.origin).addScaledVector(this.direction,t),gu.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){nA.copy(e).add(t).multiplyScalar(.5),l1.copy(t).sub(e).normalize(),zf.copy(this.origin).sub(nA);const a=e.distanceTo(t)*.5,s=-this.direction.dot(l1),o=zf.dot(this.direction),c=-zf.dot(l1),f=zf.lengthSq(),d=Math.abs(1-s*s);let m,v,y,_;if(d>0)if(m=s*c-o,v=s*o-c,_=a*d,m>=0)if(v>=-_)if(v<=_){const A=1/d;m*=A,v*=A,y=m*(m+s*v+2*o)+v*(s*m+v+2*c)+f}else v=a,m=Math.max(0,-(s*v+o)),y=-m*m+v*(v+2*c)+f;else v=-a,m=Math.max(0,-(s*v+o)),y=-m*m+v*(v+2*c)+f;else v<=-_?(m=Math.max(0,-(-s*a+o)),v=m>0?-a:Math.min(Math.max(-a,-c),a),y=-m*m+v*(v+2*c)+f):v<=_?(m=0,v=Math.min(Math.max(-a,-c),a),y=v*(v+2*c)+f):(m=Math.max(0,-(s*a+o)),v=m>0?a:Math.min(Math.max(-a,-c),a),y=-m*m+v*(v+2*c)+f);else v=s>0?-a:a,m=Math.max(0,-(s*v+o)),y=-m*m+v*(v+2*c)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(nA).addScaledVector(l1,v),y}intersectSphere(e,t){gu.subVectors(e.center,this.origin);const n=gu.dot(this.direction),r=gu.dot(gu)-n*n,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=n-s,c=n+s;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,a,s,o,c;const f=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,v=this.origin;return f>=0?(n=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(n=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),d>=0?(a=(e.min.y-v.y)*d,s=(e.max.y-v.y)*d):(a=(e.max.y-v.y)*d,s=(e.min.y-v.y)*d),n>s||a>r||((a>n||isNaN(n))&&(n=a),(s<r||isNaN(r))&&(r=s),m>=0?(o=(e.min.z-v.z)*m,c=(e.max.z-v.z)*m):(o=(e.max.z-v.z)*m,c=(e.min.z-v.z)*m),n>c||o>r)||((o>n||n!==n)&&(n=o),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,gu)!==null}intersectTriangle(e,t,n,r,a){iA.subVectors(t,e),c1.subVectors(n,e),rA.crossVectors(iA,c1);let s=this.direction.dot(rA),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;zf.subVectors(this.origin,e);const c=o*this.direction.dot(c1.crossVectors(zf,c1));if(c<0)return null;const f=o*this.direction.dot(iA.cross(zf));if(f<0||c+f>s)return null;const d=-o*zf.dot(rA);return d<0?null:this.at(d/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},mn=class Xw{constructor(e,t,n,r,a,s,o,c,f,d,m,v,y,_,A,S){Xw.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,a,s,o,c,f,d,m,v,y,_,A,S)}set(e,t,n,r,a,s,o,c,f,d,m,v,y,_,A,S){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=r,x[1]=a,x[5]=s,x[9]=o,x[13]=c,x[2]=f,x[6]=d,x[10]=m,x[14]=v,x[3]=y,x[7]=_,x[11]=A,x[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xw().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/wm.setFromMatrixColumn(e,0).length(),a=1/wm.setFromMatrixColumn(e,1).length(),s=1/wm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,a=e.z,s=Math.cos(n),o=Math.sin(n),c=Math.cos(r),f=Math.sin(r),d=Math.cos(a),m=Math.sin(a);if(e.order==="XYZ"){const v=s*d,y=s*m,_=o*d,A=o*m;t[0]=c*d,t[4]=-c*m,t[8]=f,t[1]=y+_*f,t[5]=v-A*f,t[9]=-o*c,t[2]=A-v*f,t[6]=_+y*f,t[10]=s*c}else if(e.order==="YXZ"){const v=c*d,y=c*m,_=f*d,A=f*m;t[0]=v+A*o,t[4]=_*o-y,t[8]=s*f,t[1]=s*m,t[5]=s*d,t[9]=-o,t[2]=y*o-_,t[6]=A+v*o,t[10]=s*c}else if(e.order==="ZXY"){const v=c*d,y=c*m,_=f*d,A=f*m;t[0]=v-A*o,t[4]=-s*m,t[8]=_+y*o,t[1]=y+_*o,t[5]=s*d,t[9]=A-v*o,t[2]=-s*f,t[6]=o,t[10]=s*c}else if(e.order==="ZYX"){const v=s*d,y=s*m,_=o*d,A=o*m;t[0]=c*d,t[4]=_*f-y,t[8]=v*f+A,t[1]=c*m,t[5]=A*f+v,t[9]=y*f-_,t[2]=-f,t[6]=o*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,y=s*f,_=o*c,A=o*f;t[0]=c*d,t[4]=A-v*m,t[8]=_*m+y,t[1]=m,t[5]=s*d,t[9]=-o*d,t[2]=-f*d,t[6]=y*m+_,t[10]=v-A*m}else if(e.order==="XZY"){const v=s*c,y=s*f,_=o*c,A=o*f;t[0]=c*d,t[4]=-m,t[8]=f*d,t[1]=v*m+A,t[5]=s*d,t[9]=y*m-_,t[2]=_*m-y,t[6]=o*d,t[10]=A*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oG,e,lG)}lookAt(e,t,n){const r=this.elements;return no.subVectors(e,t),no.lengthSq()===0&&(no.z=1),no.normalize(),Hf.crossVectors(n,no),Hf.lengthSq()===0&&(Math.abs(n.z)===1?no.x+=1e-4:no.z+=1e-4,no.normalize(),Hf.crossVectors(n,no)),Hf.normalize(),u1.crossVectors(no,Hf),r[0]=Hf.x,r[4]=u1.x,r[8]=no.x,r[1]=Hf.y,r[5]=u1.y,r[9]=no.y,r[2]=Hf.z,r[6]=u1.z,r[10]=no.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,a=this.elements,s=n[0],o=n[4],c=n[8],f=n[12],d=n[1],m=n[5],v=n[9],y=n[13],_=n[2],A=n[6],S=n[10],x=n[14],E=n[3],D=n[7],B=n[11],U=n[15],w=r[0],O=r[4],I=r[8],L=r[12],R=r[1],F=r[5],G=r[9],V=r[13],$=r[2],K=r[6],z=r[10],ee=r[14],ne=r[3],de=r[7],Y=r[11],fe=r[15];return a[0]=s*w+o*R+c*$+f*ne,a[4]=s*O+o*F+c*K+f*de,a[8]=s*I+o*G+c*z+f*Y,a[12]=s*L+o*V+c*ee+f*fe,a[1]=d*w+m*R+v*$+y*ne,a[5]=d*O+m*F+v*K+y*de,a[9]=d*I+m*G+v*z+y*Y,a[13]=d*L+m*V+v*ee+y*fe,a[2]=_*w+A*R+S*$+x*ne,a[6]=_*O+A*F+S*K+x*de,a[10]=_*I+A*G+S*z+x*Y,a[14]=_*L+A*V+S*ee+x*fe,a[3]=E*w+D*R+B*$+U*ne,a[7]=E*O+D*F+B*K+U*de,a[11]=E*I+D*G+B*z+U*Y,a[15]=E*L+D*V+B*ee+U*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],s=e[1],o=e[5],c=e[9],f=e[13],d=e[2],m=e[6],v=e[10],y=e[14],_=e[3],A=e[7],S=e[11],x=e[15];return _*(+a*c*m-r*f*m-a*o*v+n*f*v+r*o*y-n*c*y)+A*(+t*c*y-t*f*v+a*s*v-r*s*y+r*f*d-a*c*d)+S*(+t*f*m-t*o*y-a*s*m+n*s*y+a*o*d-n*f*d)+x*(-r*o*d-t*c*m+t*o*v+r*s*m-n*s*v+n*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8],m=e[9],v=e[10],y=e[11],_=e[12],A=e[13],S=e[14],x=e[15],E=m*S*f-A*v*f+A*c*y-o*S*y-m*c*x+o*v*x,D=_*v*f-d*S*f-_*c*y+s*S*y+d*c*x-s*v*x,B=d*A*f-_*m*f+_*o*y-s*A*y-d*o*x+s*m*x,U=_*m*c-d*A*c-_*o*v+s*A*v+d*o*S-s*m*S,w=t*E+n*D+r*B+a*U;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/w;return e[0]=E*O,e[1]=(A*v*a-m*S*a-A*r*y+n*S*y+m*r*x-n*v*x)*O,e[2]=(o*S*a-A*c*a+A*r*f-n*S*f-o*r*x+n*c*x)*O,e[3]=(m*c*a-o*v*a-m*r*f+n*v*f+o*r*y-n*c*y)*O,e[4]=D*O,e[5]=(d*S*a-_*v*a+_*r*y-t*S*y-d*r*x+t*v*x)*O,e[6]=(_*c*a-s*S*a-_*r*f+t*S*f+s*r*x-t*c*x)*O,e[7]=(s*v*a-d*c*a+d*r*f-t*v*f-s*r*y+t*c*y)*O,e[8]=B*O,e[9]=(_*m*a-d*A*a-_*n*y+t*A*y+d*n*x-t*m*x)*O,e[10]=(s*A*a-_*o*a+_*n*f-t*A*f-s*n*x+t*o*x)*O,e[11]=(d*o*a-s*m*a-d*n*f+t*m*f+s*n*y-t*o*y)*O,e[12]=U*O,e[13]=(d*A*r-_*m*r+_*n*v-t*A*v-d*n*S+t*m*S)*O,e[14]=(_*o*r-s*A*r-_*n*c+t*A*c+s*n*S-t*o*S)*O,e[15]=(s*m*r-d*o*r+d*n*c-t*m*c-s*n*v+t*o*v)*O,this}scale(e){const t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),a=1-n,s=e.x,o=e.y,c=e.z,f=a*s,d=a*o;return this.set(f*s+n,f*o-r*c,f*c+r*o,0,f*o+r*c,d*o+n,d*c-r*s,0,f*c-r*o,d*c+r*s,a*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,a,s){return this.set(1,n,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,a=t._x,s=t._y,o=t._z,c=t._w,f=a+a,d=s+s,m=o+o,v=a*f,y=a*d,_=a*m,A=s*d,S=s*m,x=o*m,E=c*f,D=c*d,B=c*m,U=n.x,w=n.y,O=n.z;return r[0]=(1-(A+x))*U,r[1]=(y+B)*U,r[2]=(_-D)*U,r[3]=0,r[4]=(y-B)*w,r[5]=(1-(v+x))*w,r[6]=(S+E)*w,r[7]=0,r[8]=(_+D)*O,r[9]=(S-E)*O,r[10]=(1-(v+A))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let a=wm.set(r[0],r[1],r[2]).length();const s=wm.set(r[4],r[5],r[6]).length(),o=wm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],El.copy(this);const f=1/a,d=1/s,m=1/o;return El.elements[0]*=f,El.elements[1]*=f,El.elements[2]*=f,El.elements[4]*=d,El.elements[5]*=d,El.elements[6]*=d,El.elements[8]*=m,El.elements[9]*=m,El.elements[10]*=m,t.setFromRotationMatrix(El),n.x=a,n.y=s,n.z=o,this}makePerspective(e,t,n,r,a,s,o=Go){const c=this.elements,f=2*a/(t-e),d=2*a/(n-r),m=(t+e)/(t-e),v=(n+r)/(n-r);let y,_;if(o===Go)y=-(s+a)/(s-a),_=-2*s*a/(s-a);else if(o===zy)y=-s/(s-a),_=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=f,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=d,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,a,s,o=Go){const c=this.elements,f=1/(t-e),d=1/(n-r),m=1/(s-a),v=(t+e)*f,y=(n+r)*d;let _,A;if(o===Go)_=(s+a)*m,A=-2*m;else if(o===zy)_=a*m,A=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=A,c[14]=-_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const wm=new ue,El=new mn,oG=new ue(0,0,0),lG=new ue(1,1,1),Hf=new ue,u1=new ue,no=new ue,U3=new mn,F3=new ha;let Hl=class mO{constructor(e=0,t=0,n=0,r=mO.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],c=r[1],f=r[5],d=r[9],m=r[2],v=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(In(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-In(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-m,a),this._z=0);break;case"ZXY":this._x=Math.asin(In(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-In(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(In(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-In(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return U3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(U3,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return F3.setFromEuler(this),this.setFromQuaternion(F3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Hl.DEFAULT_ORDER="XYZ";let Og=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},cG=0;const z3=new ue,Cm=new ha,vu=new mn,f1=new ue,L0=new ue,uG=new ue,fG=new ha,H3=new ue(1,0,0),G3=new ue(0,1,0),V3=new ue(0,0,1),k3={type:"added"},hG={type:"removed"},Rm={type:"childadded",child:null},aA={type:"childremoved",child:null};let ci=class Xb extends po{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cG++}),this.uuid=co(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xb.DEFAULT_UP.clone();const e=new ue,t=new Hl,n=new ha,r=new ue(1,1,1);function a(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new mn},normalMatrix:{value:new Un}}),this.matrix=new mn,this.matrixWorld=new mn,this.matrixAutoUpdate=Xb.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Xb.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Og,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Cm.setFromAxisAngle(e,t),this.quaternion.multiply(Cm),this}rotateOnWorldAxis(e,t){return Cm.setFromAxisAngle(e,t),this.quaternion.premultiply(Cm),this}rotateX(e){return this.rotateOnAxis(H3,e)}rotateY(e){return this.rotateOnAxis(G3,e)}rotateZ(e){return this.rotateOnAxis(V3,e)}translateOnAxis(e,t){return z3.copy(e).applyQuaternion(this.quaternion),this.position.add(z3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(H3,e)}translateY(e){return this.translateOnAxis(G3,e)}translateZ(e){return this.translateOnAxis(V3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(vu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?f1.copy(e):f1.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),L0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vu.lookAt(L0,f1,this.up):vu.lookAt(f1,L0,this.up),this.quaternion.setFromRotationMatrix(vu),r&&(vu.extractRotation(r.matrixWorld),Cm.setFromRotationMatrix(vu),this.quaternion.premultiply(Cm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(k3),Rm.child=e,this.dispatchEvent(Rm),Rm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(hG),aA.child=e,this.dispatchEvent(aA),aA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),vu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),vu.multiply(e.parent.matrixWorld)),e.applyMatrix4(vu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(k3),Rm.child=e,this.dispatchEvent(Rm),Rm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(L0,e,uG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(L0,fG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const m=c[f];a(e.shapes,m)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,f=this.material.length;c<f;c++)o.push(a(e.materials,this.material[c]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];r.animations.push(a(e.animations,c))}}if(t){const o=s(e.geometries),c=s(e.materials),f=s(e.textures),d=s(e.images),m=s(e.shapes),v=s(e.skeletons),y=s(e.animations),_=s(e.nodes);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),f.length>0&&(n.textures=f),d.length>0&&(n.images=d),m.length>0&&(n.shapes=m),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=r,n;function s(o){const c=[];for(const f in o){const d=o[f];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}};ci.DEFAULT_UP=new ue(0,1,0);ci.DEFAULT_MATRIX_AUTO_UPDATE=!0;ci.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Al=new ue,yu=new ue,sA=new ue,_u=new ue,Dm=new ue,Bm=new ue,W3=new ue,oA=new ue,lA=new ue,cA=new ue,uA=new ni,fA=new ni,hA=new ni;let Du=class hg{constructor(e=new ue,t=new ue,n=new ue){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Al.subVectors(e,t),r.cross(Al);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,n,r,a){Al.subVectors(r,t),yu.subVectors(n,t),sA.subVectors(e,t);const s=Al.dot(Al),o=Al.dot(yu),c=Al.dot(sA),f=yu.dot(yu),d=yu.dot(sA),m=s*f-o*o;if(m===0)return a.set(0,0,0),null;const v=1/m,y=(f*c-o*d)*v,_=(s*d-o*c)*v;return a.set(1-y-_,_,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,_u)===null?!1:_u.x>=0&&_u.y>=0&&_u.x+_u.y<=1}static getInterpolation(e,t,n,r,a,s,o,c){return this.getBarycoord(e,t,n,r,_u)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,_u.x),c.addScaledVector(s,_u.y),c.addScaledVector(o,_u.z),c)}static getInterpolatedAttribute(e,t,n,r,a,s){return uA.setScalar(0),fA.setScalar(0),hA.setScalar(0),uA.fromBufferAttribute(e,t),fA.fromBufferAttribute(e,n),hA.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(uA,a.x),s.addScaledVector(fA,a.y),s.addScaledVector(hA,a.z),s}static isFrontFacing(e,t,n,r){return Al.subVectors(n,t),yu.subVectors(e,t),Al.cross(yu).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Al.subVectors(this.c,this.b),yu.subVectors(this.a,this.b),Al.cross(yu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hg.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,a){return hg.getInterpolation(e,this.a,this.b,this.c,t,n,r,a)}containsPoint(e){return hg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,a=this.c;let s,o;Dm.subVectors(r,n),Bm.subVectors(a,n),oA.subVectors(e,n);const c=Dm.dot(oA),f=Bm.dot(oA);if(c<=0&&f<=0)return t.copy(n);lA.subVectors(e,r);const d=Dm.dot(lA),m=Bm.dot(lA);if(d>=0&&m<=d)return t.copy(r);const v=c*m-d*f;if(v<=0&&c>=0&&d<=0)return s=c/(c-d),t.copy(n).addScaledVector(Dm,s);cA.subVectors(e,a);const y=Dm.dot(cA),_=Bm.dot(cA);if(_>=0&&y<=_)return t.copy(a);const A=y*f-c*_;if(A<=0&&f>=0&&_<=0)return o=f/(f-_),t.copy(n).addScaledVector(Bm,o);const S=d*_-y*m;if(S<=0&&m-d>=0&&y-_>=0)return W3.subVectors(a,r),o=(m-d)/(m-d+(y-_)),t.copy(r).addScaledVector(W3,o);const x=1/(S+A+v);return s=A*x,o=v*x,t.copy(n).addScaledVector(Dm,s).addScaledVector(Bm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const gO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gf={h:0,s:0,l:0},h1={h:0,s:0,l:0};function dA(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Bt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$n){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ai.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=ai.workingColorSpace){return this.r=e,this.g=t,this.b=n,ai.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=ai.workingColorSpace){if(e=Z2(e,1),t=In(t,0,1),n=In(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,s=2*n-a;this.r=dA(s,a,e+1/3),this.g=dA(s,a,e),this.b=dA(s,a,e-1/3)}return ai.colorSpaceToWorking(this,r),this}setStyle(e,t=$n){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$n){const n=gO[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ou(e.r),this.g=Ou(e.g),this.b=Ou(e.b),this}copyLinearToSRGB(e){return this.r=Eg(e.r),this.g=Eg(e.g),this.b=Eg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$n){return ai.workingToColorSpace(Xa.copy(this),e),Math.round(In(Xa.r*255,0,255))*65536+Math.round(In(Xa.g*255,0,255))*256+Math.round(In(Xa.b*255,0,255))}getHexString(e=$n){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ai.workingColorSpace){ai.workingToColorSpace(Xa.copy(this),t);const n=Xa.r,r=Xa.g,a=Xa.b,s=Math.max(n,r,a),o=Math.min(n,r,a);let c,f;const d=(o+s)/2;if(o===s)c=0,f=0;else{const m=s-o;switch(f=d<=.5?m/(s+o):m/(2-s-o),s){case n:c=(r-a)/m+(r<a?6:0);break;case r:c=(a-n)/m+2;break;case a:c=(n-r)/m+4;break}c/=6}return e.h=c,e.s=f,e.l=d,e}getRGB(e,t=ai.workingColorSpace){return ai.workingToColorSpace(Xa.copy(this),t),e.r=Xa.r,e.g=Xa.g,e.b=Xa.b,e}getStyle(e=$n){ai.workingToColorSpace(Xa.copy(this),e);const t=Xa.r,n=Xa.g,r=Xa.b;return e!==$n?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Gf),this.setHSL(Gf.h+e,Gf.s+t,Gf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Gf),e.getHSL(h1);const n=xy(Gf.h,h1.h,t),r=xy(Gf.s,h1.s,t),a=xy(Gf.l,h1.l,t);return this.setHSL(n,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*r,this.g=a[1]*t+a[4]*n+a[7]*r,this.b=a[2]*t+a[5]*n+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Xa=new Bt;Bt.NAMES=gO;let dG=0,vr=class extends po{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dG++}),this.uuid=co(),this.name="",this.type="Material",this.blending=Yd,this.side=Fl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Qb,this.blendDst=eS,this.blendEquation=nh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=np,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ud,this.stencilZFail=Ud,this.stencilZPass=Ud,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Yd&&(n.blending=this.blending),this.side!==Fl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Qb&&(n.blendSrc=this.blendSrc),this.blendDst!==eS&&(n.blendDst=this.blendDst),this.blendEquation!==nh&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==np&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==kw&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ud&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ud&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ud&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(n.textures=a),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},xs=class extends vr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hl,this.combine=r_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Bu=pG();function pG(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(n[c]=0,n[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(n[c]=1024>>-f-14,n[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(n[c]=f+15<<10,n[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(n[c]=31744,n[c|256]=64512,r[c]=24,r[c|256]=24):(n[c]=31744,n[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,d=0;for(;(f&8388608)===0;)f<<=1,d-=8388608;f&=-8388609,d+=947912704,a[c]=f|d}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function Hs(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=In(i,-65504,65504),Bu.floatView[0]=i;const e=Bu.uint32View[0],t=e>>23&511;return Bu.baseTable[t]+((e&8388607)>>Bu.shiftTable[t])}function oy(i){const e=i>>10;return Bu.uint32View[0]=Bu.mantissaTable[Bu.offsetTable[e]+(i&1023)]+Bu.exponentTable[e],Bu.floatView[0]}class Wd{static toHalfFloat(e){return Hs(e)}static fromHalfFloat(e){return oy(e)}}const zr=new ue,d1=new ot;let mG=0,si=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:mG++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Fy,this.updateRanges=[],this.gpuType=Yi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)d1.fromBufferAttribute(this,t),d1.applyMatrix3(e),this.setXY(t,d1.x,d1.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.applyMatrix3(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.applyMatrix4(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.applyNormalMatrix(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.transformDirection(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ys(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Gn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ys(t,this.array)),t}setX(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ys(t,this.array)),t}setY(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ys(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ys(t,this.array)),t}setW(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,a){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array),a=Gn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Fy&&(e.usage=this.usage),e}};class gG extends si{constructor(e,t,n){super(new Int8Array(e),t,n)}}class vG extends si{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class yG extends si{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class _G extends si{constructor(e,t,n){super(new Int16Array(e),t,n)}}let eC=class extends si{constructor(e,t,n){super(new Uint16Array(e),t,n)}};class xG extends si{constructor(e,t,n){super(new Int32Array(e),t,n)}}let tC=class extends si{constructor(e,t,n){super(new Uint32Array(e),t,n)}},bG=class extends si{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=oy(this.array[e*this.itemSize]);return this.normalized&&(t=ys(t,this.array)),t}setX(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize]=Hs(t),this}getY(e){let t=oy(this.array[e*this.itemSize+1]);return this.normalized&&(t=ys(t,this.array)),t}setY(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+1]=Hs(t),this}getZ(e){let t=oy(this.array[e*this.itemSize+2]);return this.normalized&&(t=ys(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+2]=Hs(t),this}getW(e){let t=oy(this.array[e*this.itemSize+3]);return this.normalized&&(t=ys(t,this.array)),t}setW(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+3]=Hs(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(n),this.array[e+2]=Hs(r),this}setXYZW(e,t,n,r,a){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array),a=Gn(a,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(n),this.array[e+2]=Hs(r),this.array[e+3]=Hs(a),this}},Zt=class extends si{constructor(e,t,n){super(new Float32Array(e),t,n)}},SG=0;const No=new mn,pA=new ci,Lm=new ue,io=new Ba,I0=new Ba,oa=new ue;let Fn=class vO extends po{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:SG++}),this.uuid=co(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(fO(e)?tC:eC)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new Un().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return No.makeRotationFromQuaternion(e),this.applyMatrix4(No),this}rotateX(e){return No.makeRotationX(e),this.applyMatrix4(No),this}rotateY(e){return No.makeRotationY(e),this.applyMatrix4(No),this}rotateZ(e){return No.makeRotationZ(e),this.applyMatrix4(No),this}translate(e,t,n){return No.makeTranslation(e,t,n),this.applyMatrix4(No),this}scale(e,t,n){return No.makeScale(e,t,n),this.applyMatrix4(No),this}lookAt(e){return pA.lookAt(e),pA.updateMatrix(),this.applyMatrix4(pA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lm).negate(),this.translate(Lm.x,Lm.y,Lm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Zt(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ba);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ue(-1/0,-1/0,-1/0),new ue(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const a=t[n];io.setFromBufferAttribute(a),this.morphTargetsRelative?(oa.addVectors(this.boundingBox.min,io.min),this.boundingBox.expandByPoint(oa),oa.addVectors(this.boundingBox.max,io.max),this.boundingBox.expandByPoint(oa)):(this.boundingBox.expandByPoint(io.min),this.boundingBox.expandByPoint(io.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new da);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ue,1/0);return}if(e){const n=this.boundingSphere.center;if(io.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];I0.setFromBufferAttribute(o),this.morphTargetsRelative?(oa.addVectors(io.min,I0.min),io.expandByPoint(oa),oa.addVectors(io.max,I0.max),io.expandByPoint(oa)):(io.expandByPoint(I0.min),io.expandByPoint(I0.max))}io.getCenter(n);let r=0;for(let a=0,s=e.count;a<s;a++)oa.fromBufferAttribute(e,a),r=Math.max(r,n.distanceToSquared(oa));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],c=this.morphTargetsRelative;for(let f=0,d=o.count;f<d;f++)oa.fromBufferAttribute(o,f),c&&(Lm.fromBufferAttribute(e,f),oa.add(Lm)),r=Math.max(r,n.distanceToSquared(oa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new si(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let I=0;I<n.count;I++)o[I]=new ue,c[I]=new ue;const f=new ue,d=new ue,m=new ue,v=new ot,y=new ot,_=new ot,A=new ue,S=new ue;function x(I,L,R){f.fromBufferAttribute(n,I),d.fromBufferAttribute(n,L),m.fromBufferAttribute(n,R),v.fromBufferAttribute(a,I),y.fromBufferAttribute(a,L),_.fromBufferAttribute(a,R),d.sub(f),m.sub(f),y.sub(v),_.sub(v);const F=1/(y.x*_.y-_.x*y.y);isFinite(F)&&(A.copy(d).multiplyScalar(_.y).addScaledVector(m,-y.y).multiplyScalar(F),S.copy(m).multiplyScalar(y.x).addScaledVector(d,-_.x).multiplyScalar(F),o[I].add(A),o[L].add(A),o[R].add(A),c[I].add(S),c[L].add(S),c[R].add(S))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let I=0,L=E.length;I<L;++I){const R=E[I],F=R.start,G=R.count;for(let V=F,$=F+G;V<$;V+=3)x(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const D=new ue,B=new ue,U=new ue,w=new ue;function O(I){U.fromBufferAttribute(r,I),w.copy(U);const L=o[I];D.copy(L),D.sub(U.multiplyScalar(U.dot(L))).normalize(),B.crossVectors(w,L);const F=B.dot(c[I])<0?-1:1;s.setXYZW(I,D.x,D.y,D.z,F)}for(let I=0,L=E.length;I<L;++I){const R=E[I],F=R.start,G=R.count;for(let V=F,$=F+G;V<$;V+=3)O(e.getX(V+0)),O(e.getX(V+1)),O(e.getX(V+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new si(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const r=new ue,a=new ue,s=new ue,o=new ue,c=new ue,f=new ue,d=new ue,m=new ue;if(e)for(let v=0,y=e.count;v<y;v+=3){const _=e.getX(v+0),A=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,_),a.fromBufferAttribute(t,A),s.fromBufferAttribute(t,S),d.subVectors(s,a),m.subVectors(r,a),d.cross(m),o.fromBufferAttribute(n,_),c.fromBufferAttribute(n,A),f.fromBufferAttribute(n,S),o.add(d),c.add(d),f.add(d),n.setXYZ(_,o.x,o.y,o.z),n.setXYZ(A,c.x,c.y,c.z),n.setXYZ(S,f.x,f.y,f.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),d.subVectors(s,a),m.subVectors(r,a),d.cross(m),n.setXYZ(v+0,d.x,d.y,d.z),n.setXYZ(v+1,d.x,d.y,d.z),n.setXYZ(v+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)oa.fromBufferAttribute(e,t),oa.normalize(),e.setXYZ(t,oa.x,oa.y,oa.z)}toNonIndexed(){function e(o,c){const f=o.array,d=o.itemSize,m=o.normalized,v=new f.constructor(c.length*d);let y=0,_=0;for(let A=0,S=c.length;A<S;A++){o.isInterleavedBufferAttribute?y=c[A]*o.data.stride+o.offset:y=c[A]*d;for(let x=0;x<d;x++)v[_++]=f[y++]}return new si(v,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vO,n=this.index.array,r=this.attributes;for(const o in r){const c=r[o],f=e(c,n);t.setAttribute(o,f)}const a=this.morphAttributes;for(const o in a){const c=[],f=a[o];for(let d=0,m=f.length;d<m;d++){const v=f[d],y=e(v,n);c.push(y)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const f=s[o];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const f=n[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let m=0,v=f.length;m<v;m++){const y=f[m];d.push(y.toJSON(e.data))}d.length>0&&(r[c]=d,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(t))}const a=e.morphAttributes;for(const f in a){const d=[],m=a[f];for(let v=0,y=m.length;v<y;v++)d.push(m[v].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,d=s.length;f<d;f++){const m=s[f];this.addGroup(m.start,m.count,m.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const X3=new mn,_d=new pp,p1=new da,$3=new ue,m1=new ue,g1=new ue,v1=new ue,mA=new ue,y1=new ue,j3=new ue,_1=new ue;let Ki=class extends ci{constructor(e=new Fn,t=new xs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,a=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){y1.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const d=o[c],m=a[c];d!==0&&(mA.fromBufferAttribute(m,e),s?y1.addScaledVector(mA,d):y1.addScaledVector(mA.sub(t),d))}t.add(y1)}return t}raycast(e,t){const n=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),p1.copy(n.boundingSphere),p1.applyMatrix4(a),_d.copy(e.ray).recast(e.near),!(p1.containsPoint(_d.origin)===!1&&(_d.intersectSphere(p1,$3)===null||_d.origin.distanceToSquared($3)>(e.far-e.near)**2))&&(X3.copy(a).invert(),_d.copy(e.ray).applyMatrix4(X3),!(n.boundingBox!==null&&_d.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,_d)))}_computeIntersections(e,t,n){let r;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,f=a.attributes.uv,d=a.attributes.uv1,m=a.attributes.normal,v=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(s))for(let _=0,A=v.length;_<A;_++){const S=v[_],x=s[S.materialIndex],E=Math.max(S.start,y.start),D=Math.min(o.count,Math.min(S.start+S.count,y.start+y.count));for(let B=E,U=D;B<U;B+=3){const w=o.getX(B),O=o.getX(B+1),I=o.getX(B+2);r=x1(this,x,e,n,f,d,m,w,O,I),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),A=Math.min(o.count,y.start+y.count);for(let S=_,x=A;S<x;S+=3){const E=o.getX(S),D=o.getX(S+1),B=o.getX(S+2);r=x1(this,s,e,n,f,d,m,E,D,B),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let _=0,A=v.length;_<A;_++){const S=v[_],x=s[S.materialIndex],E=Math.max(S.start,y.start),D=Math.min(c.count,Math.min(S.start+S.count,y.start+y.count));for(let B=E,U=D;B<U;B+=3){const w=B,O=B+1,I=B+2;r=x1(this,x,e,n,f,d,m,w,O,I),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),A=Math.min(c.count,y.start+y.count);for(let S=_,x=A;S<x;S+=3){const E=S,D=S+1,B=S+2;r=x1(this,s,e,n,f,d,m,E,D,B),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}};function MG(i,e,t,n,r,a,s,o){let c;if(e.side===Zr?c=n.intersectTriangle(s,a,r,!0,o):c=n.intersectTriangle(r,a,s,e.side===Fl,o),c===null)return null;_1.copy(o),_1.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(_1);return f<t.near||f>t.far?null:{distance:f,point:_1.clone(),object:i}}function x1(i,e,t,n,r,a,s,o,c,f){i.getVertexPosition(o,m1),i.getVertexPosition(c,g1),i.getVertexPosition(f,v1);const d=MG(i,e,t,n,m1,g1,v1,j3);if(d){const m=new ue;Du.getBarycoord(j3,m1,g1,v1,m),r&&(d.uv=Du.getInterpolatedAttribute(r,o,c,f,m,new ot)),a&&(d.uv1=Du.getInterpolatedAttribute(a,o,c,f,m,new ot)),s&&(d.normal=Du.getInterpolatedAttribute(s,o,c,f,m,new ue),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const v={a:o,b:c,c:f,normal:new ue,materialIndex:0};Du.getNormal(m1,g1,v1,v.normal),d.face=v,d.barycoord=m}return d}let l_=class yO extends Fn{constructor(e=1,t=1,n=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],d=[],m=[];let v=0,y=0;_("z","y","x",-1,-1,n,t,e,s,a,0),_("z","y","x",1,-1,n,t,-e,s,a,1),_("x","z","y",1,1,e,n,t,r,s,2),_("x","z","y",1,-1,e,n,-t,r,s,3),_("x","y","z",1,-1,e,t,n,r,a,4),_("x","y","z",-1,-1,e,t,-n,r,a,5),this.setIndex(c),this.setAttribute("position",new Zt(f,3)),this.setAttribute("normal",new Zt(d,3)),this.setAttribute("uv",new Zt(m,2));function _(A,S,x,E,D,B,U,w,O,I,L){const R=B/O,F=U/I,G=B/2,V=U/2,$=w/2,K=O+1,z=I+1;let ee=0,ne=0;const de=new ue;for(let Y=0;Y<z;Y++){const fe=Y*F-V;for(let Re=0;Re<K;Re++){const Le=Re*R-G;de[A]=Le*E,de[S]=fe*D,de[x]=$,f.push(de.x,de.y,de.z),de[A]=0,de[S]=0,de[x]=w>0?1:-1,d.push(de.x,de.y,de.z),m.push(Re/O),m.push(1-Y/I),ee+=1}}for(let Y=0;Y<I;Y++)for(let fe=0;fe<O;fe++){const Re=v+fe+K*Y,Le=v+fe+K*(Y+1),oe=v+(fe+1)+K*(Y+1),ke=v+(fe+1)+K*Y;c.push(Re,Le,ke),c.push(Le,oe,ke),ne+=6}o.addGroup(y,ne,L),y+=ne,v+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yO(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Ug(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function ms(i){const e={};for(let t=0;t<i.length;t++){const n=Ug(i[t]);for(const r in n)e[r]=n[r]}return e}function EG(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function _O(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ai.workingColorSpace}const xO={clone:Ug,merge:ms};var AG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,TG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Wi=class extends vr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=AG,this.fragmentShader=TG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ug(e.uniforms),this.uniformsGroups=EG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},c_=class extends ci{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mn,this.projectionMatrix=new mn,this.projectionMatrixInverse=new mn,this.coordinateSystem=Go}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Vf=new ue,q3=new ot,Y3=new ot;let rr=class extends c_{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ng*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ng*2*Math.atan(Math.tan(Kd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Vf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Vf.x,Vf.y).multiplyScalar(-e/Vf.z),Vf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Vf.x,Vf.y).multiplyScalar(-e/Vf.z)}getViewSize(e,t){return this.getViewBounds(e,q3,Y3),t.subVectors(Y3,q3)}setViewOffset(e,t,n,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Kd*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*n/f,r*=s.width/c,n*=s.height/f}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Im=-90,Pm=1;let bO=class extends ci{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new rr(Im,Pm,e,t);r.layers=this.layers,this.add(r);const a=new rr(Im,Pm,e,t);a.layers=this.layers,this.add(a);const s=new rr(Im,Pm,e,t);s.layers=this.layers,this.add(s);const o=new rr(Im,Pm,e,t);o.layers=this.layers,this.add(o);const c=new rr(Im,Pm,e,t);c.layers=this.layers,this.add(c);const f=new rr(Im,Pm,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,a,s,o,c]=t;for(const f of t)this.remove(f);if(e===Go)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===zy)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,f,d]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,a),e.setRenderTarget(n,1,r),e.render(t,s),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,c),e.setRenderTarget(n,4,r),e.render(t,f),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,r),e.render(t,d),e.setRenderTarget(m,v,y),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}},u_=class extends mi{constructor(e=[],t=zc,n,r,a,s,o,c,f,d){super(e,t,n,r,a,s,o,c,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},nC=class extends ar{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new u_(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new l_(5,5,5),a=new Wi({name:"CubemapFromEquirect",uniforms:Ug(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Zr,blending:Gr});a.uniforms.tEquirect.value=t;const s=new Ki(r,a),o=t.minFilter;return t.minFilter===Ho&&(t.minFilter=Qn),new bO(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(a)}},Iu=class extends ci{constructor(){super(),this.isGroup=!0,this.type="Group"}};const wG={type:"move"};let $b=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Iu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Iu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ue),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Iu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ue),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,a=null,s=null;const o=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const A of e.hand.values()){const S=t.getJointPose(A,n),x=this._getHandJoint(f,A);S!==null&&(x.matrix.fromArray(S.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=S.radius),x.visible=S!==null}const d=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],v=d.position.distanceTo(m.position),y=.02,_=.005;f.inputState.pinching&&v>y+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=y-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(wG)))}return o!==null&&(o.visible=r!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Iu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}};class bM{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=t}clone(){return new bM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class SM{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=n}clone(){return new SM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let ap=class extends ci{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Hl,this.environmentIntensity=1,this.environmentRotation=new Hl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},f_=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Fy,this.updateRanges=[],this.version=0,this.uuid=co()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=co()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=co()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const ds=new ue;let Fg=class SO{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ds.fromBufferAttribute(this,t),ds.applyMatrix4(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ds.fromBufferAttribute(this,t),ds.applyNormalMatrix(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ds.fromBufferAttribute(this,t),ds.transformDirection(e),this.setXYZ(t,ds.x,ds.y,ds.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ys(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ys(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ys(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ys(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ys(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array),a=Gn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new si(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new SO(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},iC=class extends vr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Nm;const P0=new ue,Om=new ue,Um=new ue,Fm=new ot,N0=new ot,MO=new mn,b1=new ue,O0=new ue,S1=new ue,K3=new ot,gA=new ot,J3=new ot;let EO=class extends ci{constructor(e=new iC){if(super(),this.isSprite=!0,this.type="Sprite",Nm===void 0){Nm=new Fn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new f_(t,5);Nm.setIndex([0,1,2,0,2,3]),Nm.setAttribute("position",new Fg(n,3,0,!1)),Nm.setAttribute("uv",new Fg(n,2,3,!1))}this.geometry=Nm,this.material=e,this.center=new ot(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Om.setFromMatrixScale(this.matrixWorld),MO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Um.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Om.multiplyScalar(-Um.z);const n=this.material.rotation;let r,a;n!==0&&(a=Math.cos(n),r=Math.sin(n));const s=this.center;M1(b1.set(-.5,-.5,0),Um,s,Om,r,a),M1(O0.set(.5,-.5,0),Um,s,Om,r,a),M1(S1.set(.5,.5,0),Um,s,Om,r,a),K3.set(0,0),gA.set(1,0),J3.set(1,1);let o=e.ray.intersectTriangle(b1,O0,S1,!1,P0);if(o===null&&(M1(O0.set(-.5,.5,0),Um,s,Om,r,a),gA.set(0,1),o=e.ray.intersectTriangle(b1,S1,O0,!1,P0),o===null))return;const c=e.ray.origin.distanceTo(P0);c<e.near||c>e.far||t.push({distance:c,point:P0.clone(),uv:Du.getInterpolation(P0,b1,O0,S1,K3,gA,J3,new ot),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function M1(i,e,t,n,r,a){Fm.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(N0.x=a*Fm.x-r*Fm.y,N0.y=r*Fm.x+a*Fm.y):N0.copy(Fm),i.copy(e),i.x+=N0.x,i.y+=N0.y,i.applyMatrix4(MO)}const E1=new ue,Z3=new ue;class AO extends ci{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){E1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(E1);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){E1.setFromMatrixPosition(e.matrixWorld),Z3.setFromMatrixPosition(this.matrixWorld);const n=E1.distanceTo(Z3)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),n>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,a=n.length;r<a;r++){const s=n[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const Q3=new ue,eD=new ni,tD=new ni,CG=new ue,nD=new mn,A1=new ue,vA=new da,iD=new mn,yA=new pp;let rC=class extends Ki{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Gw,this.bindMatrix=new mn,this.bindMatrixInverse=new mn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ba),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,A1),this.boundingBox.expandByPoint(A1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new da),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,A1),this.boundingSphere.expandByPoint(A1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vA.copy(this.boundingSphere),vA.applyMatrix4(r),e.ray.intersectsSphere(vA)!==!1&&(iD.copy(r).invert(),yA.copy(e.ray).applyMatrix4(iD),!(this.boundingBox!==null&&yA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,yA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ni,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Gw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===qN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;eD.fromBufferAttribute(r.attributes.skinIndex,e),tD.fromBufferAttribute(r.attributes.skinWeight,e),Q3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=tD.getComponent(a);if(s!==0){const o=eD.getComponent(a);nD.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(CG.copy(Q3).applyMatrix4(nD),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},MM=class extends ci{constructor(){super(),this.isBone=!0,this.type="Bone"}},Ol=class extends mi{constructor(e=null,t=1,n=1,r,a,s,o,c,f=Mr,d=Mr,m,v){super(null,s,o,c,f,d,r,a,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const rD=new mn,RG=new mn;class h_{constructor(e=[],t=[]){this.uuid=co(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new mn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new mn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:RG;rD.multiplyMatrices(o,t[a]),rD.toArray(n,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new h_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ol(t,e,e,Lr,Yi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const a=e.bones[n];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new MM),this.bones.push(s),this.boneInverses.push(new mn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}let Hu=class extends si{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const zm=new mn,aD=new mn,T1=[],sD=new Ba,DG=new mn,U0=new Ki,F0=new da;let aC=class extends Ki{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Hu(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,DG)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ba),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,zm),sD.copy(e.boundingBox).applyMatrix4(zm),this.boundingBox.union(sD)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new da),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,zm),F0.copy(e.boundingSphere).applyMatrix4(zm),this.boundingSphere.union(F0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=n.length+1,s=e*a+1;for(let o=0;o<n.length;o++)n[o]=r[s+o]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(U0.geometry=this.geometry,U0.material=this.material,U0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),F0.copy(this.boundingSphere),F0.applyMatrix4(n),e.ray.intersectsSphere(F0)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,zm),aD.multiplyMatrices(n,zm),U0.matrixWorld=aD,U0.raycast(e,T1);for(let s=0,o=T1.length;s<o;s++){const c=T1[s];c.instanceId=a,c.object=this,t.push(c)}T1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Hu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new Ol(new Float32Array(r*this.count),r,this.count,s_,Yi));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<n.length;f++)s+=n[f];const o=this.geometry.morphTargetsRelative?1:1-s,c=r*e;a[c]=o,a.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}};const _A=new ue,BG=new ue,LG=new Un;let Ru=class{constructor(e=new ue(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=_A.subVectors(n,t).cross(BG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(_A),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||LG.getNormalMatrix(e),r=this.coplanarPoint(_A).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const xd=new da,w1=new ue;let jg=class{constructor(e=new Ru,t=new Ru,n=new Ru,r=new Ru,a=new Ru,s=new Ru){this.planes=[e,t,n,r,a,s]}set(e,t,n,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Go){const n=this.planes,r=e.elements,a=r[0],s=r[1],o=r[2],c=r[3],f=r[4],d=r[5],m=r[6],v=r[7],y=r[8],_=r[9],A=r[10],S=r[11],x=r[12],E=r[13],D=r[14],B=r[15];if(n[0].setComponents(c-a,v-f,S-y,B-x).normalize(),n[1].setComponents(c+a,v+f,S+y,B+x).normalize(),n[2].setComponents(c+s,v+d,S+_,B+E).normalize(),n[3].setComponents(c-s,v-d,S-_,B-E).normalize(),n[4].setComponents(c-o,v-m,S-A,B-D).normalize(),t===Go)n[5].setComponents(c+o,v+m,S+A,B+D).normalize();else if(t===zy)n[5].setComponents(o,m,A,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),xd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),xd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(xd)}intersectsSprite(e){return xd.center.set(0,0,0),xd.radius=.7071067811865476,xd.applyMatrix4(e.matrixWorld),this.intersectsSphere(xd)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(w1.x=r.normal.x>0?e.max.x:e.min.x,w1.y=r.normal.y>0?e.max.y:e.min.y,w1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(w1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};const Rc=new mn,Dc=new jg;class EM{constructor(){this.coordinateSystem=Go}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Rc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Dc.setFromProjectionMatrix(Rc,this.coordinateSystem),Dc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Rc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Dc.setFromProjectionMatrix(Rc,this.coordinateSystem),Dc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Rc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Dc.setFromProjectionMatrix(Rc,this.coordinateSystem),Dc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Rc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Dc.setFromProjectionMatrix(Rc,this.coordinateSystem),Dc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Rc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Dc.setFromProjectionMatrix(Rc,this.coordinateSystem),Dc.containsPoint(e))return!0}return!1}clone(){return new EM}}function xA(i,e){return i-e}function IG(i,e){return i.z-e.z}function PG(i,e){return e.z-i.z}class NG{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}const Fs=new mn,OG=new Bt(1,1,1),oD=new jg,UG=new EM,C1=new Ba,bd=new da,z0=new ue,lD=new ue,FG=new ue,bA=new NG,$a=new Ki,R1=[];function zG(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let a=0;a<r;a++)for(let s=0;s<n;s++)e.setComponent(a+t,s,i.getComponent(a,s))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Sd(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class TO extends Ki{constructor(e,t,n=t*2,r){super(new Fn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Ol(t,e,e,Lr,Yi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Ol(t,e,e,o_,zl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Ol(t,e,e,Lr,Yi);n.colorSpace=ai.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:c,normalized:f}=s,d=new o.constructor(n*c),m=new si(d,c,f);t.setAttribute(a,m)}if(e.getIndex()!==null){const a=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new si(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),a=t.getAttribute(n);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ba);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Fs),this.getBoundingBoxAt(a,C1).applyMatrix4(Fs),e.union(C1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new da);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Fs),this.getBoundingSphereAt(a,bd).applyMatrix4(Fs),e.union(bd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(xA),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const a=this._matricesTexture;Fs.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(OG.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?s.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(xA),c=this._availableGeometryIds.shift(),a[c]=r):(c=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,a=n.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,f=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const d in n.attributes){const m=t.getAttribute(d),v=n.getAttribute(d);zG(m,v,c);const y=m.itemSize;for(let _=m.count,A=f;_<A;_++){const S=c+_;for(let x=0;x<y;x++)v.setComponent(S,x,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,f*y)}if(r){const d=o.indexStart,m=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let v=0;v<s.count;v++)a.setX(d+v,c+s.getX(v));for(let v=s.count,y=m;v<y;v++)a.setX(d+v,c);a.needsUpdate=!0,a.addUpdateRange(d,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,a=n.length;r<a;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((s,o)=>o).sort((s,o)=>n[s].vertexStart-n[o].vertexStart),a=this.geometry;for(let s=0,o=n.length;s<o;s++){const c=r[s],f=n[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:d,vertexStart:m,reservedIndexCount:v}=f,y=a.index,_=y.array,A=e-m;for(let S=d;S<d+v;S++)_[S]=_[S]+A;y.array.copyWithin(t,d,d+v),y.addUpdateRange(t,v),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:d,reservedVertexCount:m}=f,v=a.attributes;for(const y in v){const _=v[y],{array:A,itemSize:S}=_;A.copyWithin(e*S,d*S,(d+m)*S),_.addUpdateRange(e*S,m*S)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Ba,s=n.index,o=n.attributes.position;for(let c=r.start,f=r.start+r.count;c<f;c++){let d=c;s&&(d=s.getX(d)),a.expandByPoint(z0.fromBufferAttribute(o,d))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new da;this.getBoundingBoxAt(e,C1),C1.getCenter(a.center);const s=n.index,o=n.attributes.position;let c=0;for(let f=r.start,d=r.start+r.count;f<d;f++){let m=f;s&&(m=s.getX(m)),z0.fromBufferAttribute(o,m),c=Math.max(c,a.center.distanceToSquared(z0))}a.radius=Math.sqrt(c),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(xA);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Sd(this._multiDrawCounts,r),Sd(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Sd(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Sd(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Sd(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Fn,this._initializeGeometry(a));const s=this.geometry;a.index&&Sd(a.index.array,s.index.array);for(const o in a.attributes)Sd(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;$a.material=this.material,$a.geometry.index=s.index,$a.geometry.attributes=s.attributes,$a.geometry.boundingBox===null&&($a.geometry.boundingBox=new Ba),$a.geometry.boundingSphere===null&&($a.geometry.boundingSphere=new da);for(let o=0,c=n.length;o<c;o++){if(!n[o].visible||!n[o].active)continue;const f=n[o].geometryIndex,d=r[f];$a.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,$a.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,$a.geometry.boundingBox),this.getBoundingSphereAt(f,$a.geometry.boundingSphere),$a.raycast(e,R1);for(let m=0,v=R1.length;m<v;m++){const y=R1[m];y.object=this,y.batchId=o,t.push(y)}R1.length=0}$a.material=null,$a.geometry.index=null,$a.geometry.attributes={},$a.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,_=y.image.data,A=n.isArrayCamera?UG:oD;v&&!n.isArrayCamera&&(Fs.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),oD.setFromProjectionMatrix(Fs,e.coordinateSystem));let S=0;if(this.sortObjects){Fs.copy(this.matrixWorld).invert(),z0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Fs),lD.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Fs);for(let D=0,B=c.length;D<B;D++)if(c[D].visible&&c[D].active){const U=c[D].geometryIndex;this.getMatrixAt(D,Fs),this.getBoundingSphereAt(U,bd).applyMatrix4(Fs);let w=!1;if(v&&(w=!A.intersectsSphere(bd,n)),!w){const O=m[U],I=FG.subVectors(bd.center,z0).dot(lD);bA.push(O.start,O.count,I,D)}}const x=bA.list,E=this.customSort;E===null?x.sort(a.transparent?PG:IG):E.call(this,x,n);for(let D=0,B=x.length;D<B;D++){const U=x[D];f[S]=U.start*o,d[S]=U.count,_[S]=U.index,S++}bA.reset()}else for(let x=0,E=c.length;x<E;x++)if(c[x].visible&&c[x].active){const D=c[x].geometryIndex;let B=!1;if(v&&(this.getMatrixAt(x,Fs),this.getBoundingSphereAt(D,bd).applyMatrix4(Fs),B=!A.intersectsSphere(bd,n)),!B){const U=m[D];f[S]=U.start*o,d[S]=U.count,_[S]=x,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,a,s){this.onBeforeRender(e,null,r,a,s)}}let Ka=class extends vr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const NS=new ue,OS=new ue,cD=new mn,H0=new pp,D1=new da,SA=new ue,uD=new ue;let Gu=class extends ci{constructor(e=new Fn,t=new Ka){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,a=t.count;r<a;r++)NS.fromBufferAttribute(t,r-1),OS.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=NS.distanceTo(OS);e.setAttribute("lineDistance",new Zt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),D1.copy(n.boundingSphere),D1.applyMatrix4(r),D1.radius+=a,e.ray.intersectsSphere(D1)===!1)return;cD.copy(r).invert(),H0.copy(e.ray).applyMatrix4(cD);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=this.isLineSegments?2:1,d=n.index,v=n.attributes.position;if(d!==null){const y=Math.max(0,s.start),_=Math.min(d.count,s.start+s.count);for(let A=y,S=_-1;A<S;A+=f){const x=d.getX(A),E=d.getX(A+1),D=B1(this,e,H0,c,x,E,A);D&&t.push(D)}if(this.isLineLoop){const A=d.getX(_-1),S=d.getX(y),x=B1(this,e,H0,c,A,S,_-1);x&&t.push(x)}}else{const y=Math.max(0,s.start),_=Math.min(v.count,s.start+s.count);for(let A=y,S=_-1;A<S;A+=f){const x=B1(this,e,H0,c,A,A+1,A);x&&t.push(x)}if(this.isLineLoop){const A=B1(this,e,H0,c,_-1,y,_-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function B1(i,e,t,n,r,a,s){const o=i.geometry.attributes.position;if(NS.fromBufferAttribute(o,r),OS.fromBufferAttribute(o,a),t.distanceSqToSegment(NS,OS,SA,uD)>n)return;SA.applyMatrix4(i.matrixWorld);const f=e.ray.origin.distanceTo(SA);if(!(f<e.near||f>e.far))return{distance:f,point:uD.clone().applyMatrix4(i.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:i}}const fD=new ue,hD=new ue;let Xl=class extends Gu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,a=t.count;r<a;r+=2)fD.fromBufferAttribute(t,r),hD.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+fD.distanceTo(hD);e.setAttribute("lineDistance",new Zt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},sC=class extends Gu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},AM=class extends vr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}};const dD=new mn,$w=new pp,L1=new da,I1=new ue;let oC=class extends ci{constructor(e=new Fn,t=new AM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),L1.copy(n.boundingSphere),L1.applyMatrix4(r),L1.radius+=a,e.ray.intersectsSphere(L1)===!1)return;dD.copy(r).invert(),$w.copy(e.ray).applyMatrix4(dD);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=n.index,m=n.attributes.position;if(f!==null){const v=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let _=v,A=y;_<A;_++){const S=f.getX(_);I1.fromBufferAttribute(m,S),pD(I1,S,c,r,e,t,this)}}else{const v=Math.max(0,s.start),y=Math.min(m.count,s.start+s.count);for(let _=v,A=y;_<A;_++)I1.fromBufferAttribute(m,_),pD(I1,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function pD(i,e,t,n,r,a,s){const o=$w.distanceSqToPoint(i);if(o<t){const c=new ue;$w.closestPointToPoint(i,c),c.applyMatrix4(n);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}let wO=class extends mi{constructor(e,t,n,r,a=Qn,s=Qn,o,c,f){super(e,t,n,r,a,s,o,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};class HG extends wO{constructor(e,t,n,r,a,s,o,c){super({},e,t,n,r,a,s,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class GG extends mi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Mr,this.minFilter=Mr,this.generateMipmaps=!1,this.needsUpdate=!0}}let TM=class extends mi{constructor(e,t,n,r,a,s,o,c,f,d,m,v){super(null,s,o,c,f,d,r,a,m,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}};class VG extends TM{constructor(e,t,n,r,a,s){super(e,t,n,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Br,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kG extends TM{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,zc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}let WG=class extends mi{constructor(e,t,n,r,a,s,o,c,f){super(e,t,n,r,a,s,o,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}},d_=class extends mi{constructor(e,t,n=zl,r,a,s,o=Mr,c=Mr,f,d=Lg,m=1){if(d!==Lg&&d!==rp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:m};super(v,r,a,s,o,c,d,n,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new rh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};class wM extends Fn{constructor(e=1,t=1,n=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:a},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],o=[],c=[],f=[],d=t/2,m=Math.PI/2*e,v=t,y=2*m+v,_=n*2+a,A=r+1,S=new ue,x=new ue;for(let E=0;E<=_;E++){let D=0,B=0,U=0,w=0;if(E<=n){const L=E/n,R=L*Math.PI/2;B=-d-e*Math.cos(R),U=e*Math.sin(R),w=-e*Math.cos(R),D=L*m}else if(E<=n+a){const L=(E-n)/a;B=-d+L*t,U=e,w=0,D=m+L*v}else{const L=(E-n-a)/n,R=L*Math.PI/2;B=d+e*Math.sin(R),U=e*Math.cos(R),w=e*Math.sin(R),D=m+v+L*m}const O=Math.max(0,Math.min(1,D/y));let I=0;E===0?I=.5/r:E===_&&(I=-.5/r);for(let L=0;L<=r;L++){const R=L/r,F=R*Math.PI*2,G=Math.sin(F),V=Math.cos(F);x.x=-U*V,x.y=B,x.z=U*G,o.push(x.x,x.y,x.z),S.set(-U*V,w,U*G),S.normalize(),c.push(S.x,S.y,S.z),f.push(R+I,O)}if(E>0){const L=(E-1)*A;for(let R=0;R<r;R++){const F=L+R,G=L+R+1,V=E*A+R,$=E*A+R+1;s.push(F,G,V),s.push(G,$,V)}}}this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("normal",new Zt(c,3)),this.setAttribute("uv",new Zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wM(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class CM extends Fn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const a=[],s=[],o=[],c=[],f=new ue,d=new ot;s.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=n+m/t*r;f.x=e*Math.cos(y),f.y=e*Math.sin(y),s.push(f.x,f.y,f.z),o.push(0,0,1),d.x=(s[v]/e+1)/2,d.y=(s[v+1]/e+1)/2,c.push(d.x,d.y)}for(let m=1;m<=t;m++)a.push(m,m+1,0);this.setIndex(a),this.setAttribute("position",new Zt(s,3)),this.setAttribute("normal",new Zt(o,3)),this.setAttribute("uv",new Zt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class p_ extends Fn{constructor(e=1,t=1,n=1,r=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const f=this;r=Math.floor(r),a=Math.floor(a);const d=[],m=[],v=[],y=[];let _=0;const A=[],S=n/2;let x=0;E(),s===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(d),this.setAttribute("position",new Zt(m,3)),this.setAttribute("normal",new Zt(v,3)),this.setAttribute("uv",new Zt(y,2));function E(){const B=new ue,U=new ue;let w=0;const O=(t-e)/n;for(let I=0;I<=a;I++){const L=[],R=I/a,F=R*(t-e)+e;for(let G=0;G<=r;G++){const V=G/r,$=V*c+o,K=Math.sin($),z=Math.cos($);U.x=F*K,U.y=-R*n+S,U.z=F*z,m.push(U.x,U.y,U.z),B.set(K,O,z).normalize(),v.push(B.x,B.y,B.z),y.push(V,1-R),L.push(_++)}A.push(L)}for(let I=0;I<r;I++)for(let L=0;L<a;L++){const R=A[L][I],F=A[L+1][I],G=A[L+1][I+1],V=A[L][I+1];(e>0||L!==0)&&(d.push(R,F,V),w+=3),(t>0||L!==a-1)&&(d.push(F,G,V),w+=3)}f.addGroup(x,w,0),x+=w}function D(B){const U=_,w=new ot,O=new ue;let I=0;const L=B===!0?e:t,R=B===!0?1:-1;for(let G=1;G<=r;G++)m.push(0,S*R,0),v.push(0,R,0),y.push(.5,.5),_++;const F=_;for(let G=0;G<=r;G++){const $=G/r*c+o,K=Math.cos($),z=Math.sin($);O.x=L*z,O.y=S*R,O.z=L*K,m.push(O.x,O.y,O.z),v.push(0,R,0),w.x=K*.5+.5,w.y=z*.5*R+.5,y.push(w.x,w.y),_++}for(let G=0;G<r;G++){const V=U+G,$=F+G;B===!0?d.push($,$+1,V):d.push($+1,$,V),I+=3}f.addGroup(x,I,B===!0?1:2),x+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new p_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class m_ extends p_{constructor(e=1,t=1,n=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,n,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new m_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sh extends Fn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const a=[],s=[];o(r),f(n),d(),this.setAttribute("position",new Zt(a,3)),this.setAttribute("normal",new Zt(a.slice(),3)),this.setAttribute("uv",new Zt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(E){const D=new ue,B=new ue,U=new ue;for(let w=0;w<t.length;w+=3)y(t[w+0],D),y(t[w+1],B),y(t[w+2],U),c(D,B,U,E)}function c(E,D,B,U){const w=U+1,O=[];for(let I=0;I<=w;I++){O[I]=[];const L=E.clone().lerp(B,I/w),R=D.clone().lerp(B,I/w),F=w-I;for(let G=0;G<=F;G++)G===0&&I===w?O[I][G]=L:O[I][G]=L.clone().lerp(R,G/F)}for(let I=0;I<w;I++)for(let L=0;L<2*(w-I)-1;L++){const R=Math.floor(L/2);L%2===0?(v(O[I][R+1]),v(O[I+1][R]),v(O[I][R])):(v(O[I][R+1]),v(O[I+1][R+1]),v(O[I+1][R]))}}function f(E){const D=new ue;for(let B=0;B<a.length;B+=3)D.x=a[B+0],D.y=a[B+1],D.z=a[B+2],D.normalize().multiplyScalar(E),a[B+0]=D.x,a[B+1]=D.y,a[B+2]=D.z}function d(){const E=new ue;for(let D=0;D<a.length;D+=3){E.x=a[D+0],E.y=a[D+1],E.z=a[D+2];const B=S(E)/2/Math.PI+.5,U=x(E)/Math.PI+.5;s.push(B,1-U)}_(),m()}function m(){for(let E=0;E<s.length;E+=6){const D=s[E+0],B=s[E+2],U=s[E+4],w=Math.max(D,B,U),O=Math.min(D,B,U);w>.9&&O<.1&&(D<.2&&(s[E+0]+=1),B<.2&&(s[E+2]+=1),U<.2&&(s[E+4]+=1))}}function v(E){a.push(E.x,E.y,E.z)}function y(E,D){const B=E*3;D.x=e[B+0],D.y=e[B+1],D.z=e[B+2]}function _(){const E=new ue,D=new ue,B=new ue,U=new ue,w=new ot,O=new ot,I=new ot;for(let L=0,R=0;L<a.length;L+=9,R+=6){E.set(a[L+0],a[L+1],a[L+2]),D.set(a[L+3],a[L+4],a[L+5]),B.set(a[L+6],a[L+7],a[L+8]),w.set(s[R+0],s[R+1]),O.set(s[R+2],s[R+3]),I.set(s[R+4],s[R+5]),U.copy(E).add(D).add(B).divideScalar(3);const F=S(U);A(w,R+0,E,F),A(O,R+2,D,F),A(I,R+4,B,F)}}function A(E,D,B,U){U<0&&E.x===1&&(s[D]=E.x-1),B.x===0&&B.z===0&&(s[D]=U/2/Math.PI+.5)}function S(E){return Math.atan2(E.z,-E.x)}function x(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sh(e.vertices,e.indices,e.radius,e.details)}}class RM extends Sh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new RM(e.radius,e.detail)}}const P1=new ue,N1=new ue,MA=new ue,O1=new Du;class CO extends Fn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(Kd*t),s=e.getIndex(),o=e.getAttribute("position"),c=s?s.count:o.count,f=[0,0,0],d=["a","b","c"],m=new Array(3),v={},y=[];for(let _=0;_<c;_+=3){s?(f[0]=s.getX(_),f[1]=s.getX(_+1),f[2]=s.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:A,b:S,c:x}=O1;if(A.fromBufferAttribute(o,f[0]),S.fromBufferAttribute(o,f[1]),x.fromBufferAttribute(o,f[2]),O1.getNormal(MA),m[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,m[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,m[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let E=0;E<3;E++){const D=(E+1)%3,B=m[E],U=m[D],w=O1[d[E]],O=O1[d[D]],I=`${B}_${U}`,L=`${U}_${B}`;L in v&&v[L]?(MA.dot(v[L].normal)<=a&&(y.push(w.x,w.y,w.z),y.push(O.x,O.y,O.z)),v[L]=null):I in v||(v[I]={index0:f[E],index1:f[D],normal:MA.clone()})}}for(const _ in v)if(v[_]){const{index0:A,index1:S}=v[_];P1.fromBufferAttribute(o,A),N1.fromBufferAttribute(o,S),y.push(P1.x,P1.y,P1.z),y.push(N1.x,N1.y,N1.z)}this.setAttribute("position",new Zt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let $l=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),a+=n.distanceTo(r),t.push(a),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const a=n.length;let s;t?s=t:s=e*n[a-1];let o=0,c=a-1,f;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),f=n[r]-s,f<0)o=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,n[r]===s)return r/(a-1);const d=n[r],v=n[r+1]-d,y=(s-d)/v;return(r+y)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),c=t||(s.isVector2?new ot:new ue);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new ue,r=[],a=[],s=[],o=new ue,c=new mn;for(let y=0;y<=e;y++){const _=y/e;r[y]=this.getTangentAt(_,new ue)}a[0]=new ue,s[0]=new ue;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),m=Math.abs(r[0].y),v=Math.abs(r[0].z);d<=f&&(f=d,n.set(1,0,0)),m<=f&&(f=m,n.set(0,1,0)),v<=f&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(r[y-1],r[y]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(In(r[y-1].dot(r[y]),-1,1));a[y].applyMatrix4(c.makeRotationAxis(o,_))}s[y].crossVectors(r[y],a[y])}if(t===!0){let y=Math.acos(In(a[0].dot(a[e]),-1,1));y/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let _=1;_<=e;_++)a[_].applyMatrix4(c.makeRotationAxis(r[_],y*_)),s[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},DM=class extends $l{constructor(e=0,t=0,n=1,r=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new ot){const n=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=c-this.aX,y=f-this.aY;c=v*d-y*m+this.aX,f=v*m+y*d+this.aY}return n.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},RO=class extends DM{constructor(e,t,n,r,a,s){super(e,t,n,n,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}};function lC(){let i=0,e=0,t=0,n=0;function r(a,s,o,c){i=a,e=o,t=-3*a+3*s-2*o-c,n=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,f){r(s,o,f*(o-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,f,d,m){let v=(s-a)/f-(o-a)/(f+d)+(o-s)/d,y=(o-s)/d-(c-s)/(d+m)+(c-o)/m;v*=d,y*=d,r(s,o,v,y)},calc:function(a){const s=a*a,o=s*a;return i+e*a+t*s+n*o}}}const U1=new ue,EA=new lC,AA=new lC,TA=new lC;let DO=class extends $l{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ue){const n=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let f,d;this.closed||o>0?f=r[(o-1)%a]:(U1.subVectors(r[0],r[1]).add(r[0]),f=U1);const m=r[o%a],v=r[(o+1)%a];if(this.closed||o+2<a?d=r[(o+2)%a]:(U1.subVectors(r[a-1],r[a-2]).add(r[a-1]),d=U1),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(m),y),A=Math.pow(m.distanceToSquared(v),y),S=Math.pow(v.distanceToSquared(d),y);A<1e-4&&(A=1),_<1e-4&&(_=A),S<1e-4&&(S=A),EA.initNonuniformCatmullRom(f.x,m.x,v.x,d.x,_,A,S),AA.initNonuniformCatmullRom(f.y,m.y,v.y,d.y,_,A,S),TA.initNonuniformCatmullRom(f.z,m.z,v.z,d.z,_,A,S)}else this.curveType==="catmullrom"&&(EA.initCatmullRom(f.x,m.x,v.x,d.x,this.tension),AA.initCatmullRom(f.y,m.y,v.y,d.y,this.tension),TA.initCatmullRom(f.z,m.z,v.z,d.z,this.tension));return n.set(EA.calc(c),AA.calc(c),TA.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ue().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function mD(i,e,t,n,r){const a=(n-e)*.5,s=(r-t)*.5,o=i*i,c=i*o;return(2*t-2*n+a+s)*c+(-3*t+3*n-2*a-s)*o+a*i+t}function XG(i,e){const t=1-i;return t*t*e}function $G(i,e){return 2*(1-i)*i*e}function jG(i,e){return i*i*e}function by(i,e,t,n){return XG(i,e)+$G(i,t)+jG(i,n)}function qG(i,e){const t=1-i;return t*t*t*e}function YG(i,e){const t=1-i;return 3*t*t*i*e}function KG(i,e){return 3*(1-i)*i*i*e}function JG(i,e){return i*i*i*e}function Sy(i,e,t,n,r){return qG(i,e)+YG(i,t)+KG(i,n)+JG(i,r)}let cC=class extends $l{constructor(e=new ot,t=new ot,n=new ot,r=new ot){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ot){const n=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return n.set(Sy(e,r.x,a.x,s.x,o.x),Sy(e,r.y,a.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},BO=class extends $l{constructor(e=new ue,t=new ue,n=new ue,r=new ue){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ue){const n=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return n.set(Sy(e,r.x,a.x,s.x,o.x),Sy(e,r.y,a.y,s.y,o.y),Sy(e,r.z,a.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},uC=class extends $l{constructor(e=new ot,t=new ot){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ot){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ot){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},LO=class extends $l{constructor(e=new ue,t=new ue){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ue){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},fC=class extends $l{constructor(e=new ot,t=new ot,n=new ot){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ot){const n=t,r=this.v0,a=this.v1,s=this.v2;return n.set(by(e,r.x,a.x,s.x),by(e,r.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},hC=class extends $l{constructor(e=new ue,t=new ue,n=new ue){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ue){const n=t,r=this.v0,a=this.v1,s=this.v2;return n.set(by(e,r.x,a.x,s.x),by(e,r.y,a.y,s.y),by(e,r.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},dC=class extends $l{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ot){const n=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,c=r[s===0?s:s-1],f=r[s],d=r[s>r.length-2?r.length-1:s+1],m=r[s>r.length-3?r.length-1:s+2];return n.set(mD(o,c.x,f.x,d.x,m.x),mD(o,c.y,f.y,d.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ot().fromArray(r))}return this}};var US=Object.freeze({__proto__:null,ArcCurve:RO,CatmullRomCurve3:DO,CubicBezierCurve:cC,CubicBezierCurve3:BO,EllipseCurve:DM,LineCurve:uC,LineCurve3:LO,QuadraticBezierCurve:fC,QuadraticBezierCurve3:hC,SplineCurve:dC});let IO=class extends $l{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new US[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=n){const s=r[a]-n,o=this.curves[a],c=o.getLength(),f=c===0?0:1-s/c;return o.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let f=0;f<c.length;f++){const d=c[f];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new US[r.type]().fromJSON(r))}return this}},FS=class extends IO{constructor(e){super(),this.type="Path",this.currentPoint=new ot,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new uC(this.currentPoint.clone(),new ot(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const a=new fC(this.currentPoint.clone(),new ot(e,t),new ot(n,r));return this.curves.push(a),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,a,s){const o=new cC(this.currentPoint.clone(),new ot(e,t),new ot(n,r),new ot(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new dC(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,n,r,a,s),this}absarc(e,t,n,r,a,s){return this.absellipse(e,t,n,n,r,a,s),this}ellipse(e,t,n,r,a,s,o,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,n,r,a,s,o,c),this}absellipse(e,t,n,r,a,s,o,c){const f=new DM(e,t,n,r,a,s,o,c);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Jd=class extends FS{constructor(e){super(e),this.uuid=co(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new FS().fromJSON(r))}return this}};function ZG(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let a=PO(i,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,f;if(n&&(a=i6(i,e,a,t)),i.length>80*t){o=1/0,c=1/0;let d=-1/0,m=-1/0;for(let v=t;v<r;v+=t){const y=i[v],_=i[v+1];y<o&&(o=y),_<c&&(c=_),y>d&&(d=y),_>m&&(m=_)}f=Math.max(d-o,m-c),f=f!==0?32767/f:0}return Gy(a,s,t,o,c,f,0),s}function PO(i,e,t,n,r){let a;if(r===p6(i,e,t,n)>0)for(let s=e;s<t;s+=n)a=gD(s/n|0,i[s],i[s+1],a);else for(let s=t-n;s>=e;s-=n)a=gD(s/n|0,i[s],i[s+1],a);return a&&zg(a,a.next)&&(ky(a),a=a.next),a}function sp(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(zg(t,t.next)||pr(t.prev,t,t.next)===0)){if(ky(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Gy(i,e,t,n,r,a,s){if(!i)return;!s&&a&&l6(i,n,r,a);let o=i;for(;i.prev!==i.next;){const c=i.prev,f=i.next;if(a?e6(i,n,r,a):QG(i)){e.push(c.i,i.i,f.i),ky(i),i=f.next,o=f.next;continue}if(i=f,i===o){s?s===1?(i=t6(sp(i),e),Gy(i,e,t,n,r,a,2)):s===2&&n6(i,e,t,n,r,a):Gy(sp(i),e,t,n,r,a,1);break}}}function QG(i){const e=i.prev,t=i,n=i.next;if(pr(e,t,n)>=0)return!1;const r=e.x,a=t.x,s=n.x,o=e.y,c=t.y,f=n.y,d=Math.min(r,a,s),m=Math.min(o,c,f),v=Math.max(r,a,s),y=Math.max(o,c,f);let _=n.next;for(;_!==e;){if(_.x>=d&&_.x<=v&&_.y>=m&&_.y<=y&&ly(r,o,a,c,s,f,_.x,_.y)&&pr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function e6(i,e,t,n){const r=i.prev,a=i,s=i.next;if(pr(r,a,s)>=0)return!1;const o=r.x,c=a.x,f=s.x,d=r.y,m=a.y,v=s.y,y=Math.min(o,c,f),_=Math.min(d,m,v),A=Math.max(o,c,f),S=Math.max(d,m,v),x=jw(y,_,e,t,n),E=jw(A,S,e,t,n);let D=i.prevZ,B=i.nextZ;for(;D&&D.z>=x&&B&&B.z<=E;){if(D.x>=y&&D.x<=A&&D.y>=_&&D.y<=S&&D!==r&&D!==s&&ly(o,d,c,m,f,v,D.x,D.y)&&pr(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=y&&B.x<=A&&B.y>=_&&B.y<=S&&B!==r&&B!==s&&ly(o,d,c,m,f,v,B.x,B.y)&&pr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=x;){if(D.x>=y&&D.x<=A&&D.y>=_&&D.y<=S&&D!==r&&D!==s&&ly(o,d,c,m,f,v,D.x,D.y)&&pr(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=E;){if(B.x>=y&&B.x<=A&&B.y>=_&&B.y<=S&&B!==r&&B!==s&&ly(o,d,c,m,f,v,B.x,B.y)&&pr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function t6(i,e){let t=i;do{const n=t.prev,r=t.next.next;!zg(n,r)&&OO(n,t,t.next,r)&&Vy(n,r)&&Vy(r,n)&&(e.push(n.i,t.i,r.i),ky(t),ky(t.next),t=i=r),t=t.next}while(t!==i);return sp(t)}function n6(i,e,t,n,r,a){let s=i;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&f6(s,o)){let c=UO(s,o);s=sp(s,s.next),c=sp(c,c.next),Gy(s,e,t,n,r,a,0),Gy(c,e,t,n,r,a,0);return}o=o.next}s=s.next}while(s!==i)}function i6(i,e,t,n){const r=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*n,c=a<s-1?e[a+1]*n:i.length,f=PO(i,o,c,n,!1);f===f.next&&(f.steiner=!0),r.push(u6(f))}r.sort(r6);for(let a=0;a<r.length;a++)t=a6(r[a],t);return t}function r6(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function a6(i,e){const t=s6(i,e);if(!t)return e;const n=UO(t,i);return sp(n,n.next),sp(t,t.next)}function s6(i,e){let t=e;const n=i.x,r=i.y;let a=-1/0,s;if(zg(i,t))return t;do{if(zg(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const m=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>a&&(a=m,s=t.x<t.next.x?t:t.next,m===n))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,c=s.x,f=s.y;let d=1/0;t=s;do{if(n>=t.x&&t.x>=c&&n!==t.x&&NO(r<f?n:a,r,c,f,r<f?a:n,r,t.x,t.y)){const m=Math.abs(r-t.y)/(n-t.x);Vy(t,i)&&(m<d||m===d&&(t.x>s.x||t.x===s.x&&o6(s,t)))&&(s=t,d=m)}t=t.next}while(t!==o);return s}function o6(i,e){return pr(i.prev,i,e.prev)<0&&pr(e.next,i,i.next)<0}function l6(i,e,t,n){let r=i;do r.z===0&&(r.z=jw(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,c6(r)}function c6(i){let e,t=1;do{let n=i,r;i=null;let a=null;for(e=0;n;){e++;let s=n,o=0;for(let f=0;f<t&&(o++,s=s.nextZ,!!s);f++);let c=t;for(;o>0||c>0&&s;)o!==0&&(c===0||!s||n.z<=s.z)?(r=n,n=n.nextZ,o--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:i=r,r.prevZ=a,a=r;n=s}a.nextZ=null,t*=2}while(e>1);return i}function jw(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function u6(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function NO(i,e,t,n,r,a,s,o){return(r-s)*(e-o)>=(i-s)*(a-o)&&(i-s)*(n-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(r-s)*(n-o)}function ly(i,e,t,n,r,a,s,o){return!(i===s&&e===o)&&NO(i,e,t,n,r,a,s,o)}function f6(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!h6(i,e)&&(Vy(i,e)&&Vy(e,i)&&d6(i,e)&&(pr(i.prev,i,e.prev)||pr(i,e.prev,e))||zg(i,e)&&pr(i.prev,i,i.next)>0&&pr(e.prev,e,e.next)>0)}function pr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function zg(i,e){return i.x===e.x&&i.y===e.y}function OO(i,e,t,n){const r=z1(pr(i,e,t)),a=z1(pr(i,e,n)),s=z1(pr(t,n,i)),o=z1(pr(t,n,e));return!!(r!==a&&s!==o||r===0&&F1(i,t,e)||a===0&&F1(i,n,e)||s===0&&F1(t,i,n)||o===0&&F1(t,e,n))}function F1(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function z1(i){return i>0?1:i<0?-1:0}function h6(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&OO(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Vy(i,e){return pr(i.prev,i,i.next)<0?pr(i,e,i.next)>=0&&pr(i,i.prev,e)>=0:pr(i,e,i.prev)<0||pr(i,i.next,e)<0}function d6(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function UO(i,e){const t=qw(i.i,i.x,i.y),n=qw(e.i,e.x,e.y),r=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function gD(i,e,t,n){const r=qw(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ky(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function qw(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function p6(i,e,t,n){let r=0;for(let a=e,s=t-n;a<t;a+=n)r+=(i[s]-i[a])*(i[a+1]+i[s+1]),s=a;return r}let m6=class{static triangulate(e,t,n=2){return ZG(e,t,n)}},Pu=class FO{static area(e){const t=e.length;let n=0;for(let r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return n*.5}static isClockWise(e){return FO.area(e)<0}static triangulateShape(e,t){const n=[],r=[],a=[];vD(e),yD(n,e);let s=e.length;t.forEach(vD);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,yD(n,t[c]);const o=m6.triangulate(n,r);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}};function vD(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function yD(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}let zO=class HO extends Fn{constructor(e=new Jd([new ot(.5,.5),new ot(-.5,.5),new ot(-.5,-.5),new ot(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],a=[];for(let o=0,c=e.length;o<c;o++){const f=e[o];s(f)}this.setAttribute("position",new Zt(r,3)),this.setAttribute("uv",new Zt(a,2)),this.computeVertexNormals();function s(o){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:g6;let D,B=!1,U,w,O,I;x&&(D=x.getSpacedPoints(d),B=!0,v=!1,U=x.computeFrenetFrames(d,!1),w=new ue,O=new ue,I=new ue),v||(S=0,y=0,_=0,A=0);const L=o.extractPoints(f);let R=L.shape;const F=L.holes;if(!Pu.isClockWise(R)){R=R.reverse();for(let j=0,ze=F.length;j<ze;j++){const Pe=F[j];Pu.isClockWise(Pe)&&(F[j]=Pe.reverse())}}function V(j){const Pe=10000000000000001e-36;let ae=j[0];for(let Z=1;Z<=j.length;Z++){const Ie=Z%j.length,Se=j[Ie],We=Se.x-ae.x,ht=Se.y-ae.y,te=We*We+ht*ht,k=Math.max(Math.abs(Se.x),Math.abs(Se.y),Math.abs(ae.x),Math.abs(ae.y)),ie=Pe*k*k;if(te<=ie){j.splice(Ie,1),Z--;continue}ae=Se}}V(R),F.forEach(V);const $=F.length,K=R;for(let j=0;j<$;j++){const ze=F[j];R=R.concat(ze)}function z(j,ze,Pe){return ze||console.error("THREE.ExtrudeGeometry: vec does not exist"),j.clone().addScaledVector(ze,Pe)}const ee=R.length;function ne(j,ze,Pe){let ae,Z,Ie;const Se=j.x-ze.x,We=j.y-ze.y,ht=Pe.x-j.x,te=Pe.y-j.y,k=Se*Se+We*We,ie=Se*te-We*ht;if(Math.abs(ie)>Number.EPSILON){const Ee=Math.sqrt(k),Be=Math.sqrt(ht*ht+te*te),Ue=ze.x-We/Ee,He=ze.y+Se/Ee,ft=Pe.x-te/Be,Et=Pe.y+ht/Be,Rt=((ft-Ue)*te-(Et-He)*ht)/(Se*te-We*ht);ae=Ue+Se*Rt-j.x,Z=He+We*Rt-j.y;const ct=ae*ae+Z*Z;if(ct<=2)return new ot(ae,Z);Ie=Math.sqrt(ct/2)}else{let Ee=!1;Se>Number.EPSILON?ht>Number.EPSILON&&(Ee=!0):Se<-Number.EPSILON?ht<-Number.EPSILON&&(Ee=!0):Math.sign(We)===Math.sign(te)&&(Ee=!0),Ee?(ae=-We,Z=Se,Ie=Math.sqrt(k)):(ae=Se,Z=We,Ie=Math.sqrt(k/2))}return new ot(ae/Ie,Z/Ie)}const de=[];for(let j=0,ze=K.length,Pe=ze-1,ae=j+1;j<ze;j++,Pe++,ae++)Pe===ze&&(Pe=0),ae===ze&&(ae=0),de[j]=ne(K[j],K[Pe],K[ae]);const Y=[];let fe,Re=de.concat();for(let j=0,ze=$;j<ze;j++){const Pe=F[j];fe=[];for(let ae=0,Z=Pe.length,Ie=Z-1,Se=ae+1;ae<Z;ae++,Ie++,Se++)Ie===Z&&(Ie=0),Se===Z&&(Se=0),fe[ae]=ne(Pe[ae],Pe[Ie],Pe[Se]);Y.push(fe),Re=Re.concat(fe)}let Le;if(S===0)Le=Pu.triangulateShape(K,F);else{const j=[],ze=[];for(let Pe=0;Pe<S;Pe++){const ae=Pe/S,Z=y*Math.cos(ae*Math.PI/2),Ie=_*Math.sin(ae*Math.PI/2)+A;for(let Se=0,We=K.length;Se<We;Se++){const ht=z(K[Se],de[Se],Ie);Q(ht.x,ht.y,-Z),ae===0&&j.push(ht)}for(let Se=0,We=$;Se<We;Se++){const ht=F[Se];fe=Y[Se];const te=[];for(let k=0,ie=ht.length;k<ie;k++){const Ee=z(ht[k],fe[k],Ie);Q(Ee.x,Ee.y,-Z),ae===0&&te.push(Ee)}ae===0&&ze.push(te)}}Le=Pu.triangulateShape(j,ze)}const oe=Le.length,ke=_+A;for(let j=0;j<ee;j++){const ze=v?z(R[j],Re[j],ke):R[j];B?(O.copy(U.normals[0]).multiplyScalar(ze.x),w.copy(U.binormals[0]).multiplyScalar(ze.y),I.copy(D[0]).add(O).add(w),Q(I.x,I.y,I.z)):Q(ze.x,ze.y,0)}for(let j=1;j<=d;j++)for(let ze=0;ze<ee;ze++){const Pe=v?z(R[ze],Re[ze],ke):R[ze];B?(O.copy(U.normals[j]).multiplyScalar(Pe.x),w.copy(U.binormals[j]).multiplyScalar(Pe.y),I.copy(D[j]).add(O).add(w),Q(I.x,I.y,I.z)):Q(Pe.x,Pe.y,m/d*j)}for(let j=S-1;j>=0;j--){const ze=j/S,Pe=y*Math.cos(ze*Math.PI/2),ae=_*Math.sin(ze*Math.PI/2)+A;for(let Z=0,Ie=K.length;Z<Ie;Z++){const Se=z(K[Z],de[Z],ae);Q(Se.x,Se.y,m+Pe)}for(let Z=0,Ie=F.length;Z<Ie;Z++){const Se=F[Z];fe=Y[Z];for(let We=0,ht=Se.length;We<ht;We++){const te=z(Se[We],fe[We],ae);B?Q(te.x,te.y+D[d-1].y,D[d-1].x+Pe):Q(te.x,te.y,m+Pe)}}}Ge(),Ze();function Ge(){const j=r.length/3;if(v){let ze=0,Pe=ee*ze;for(let ae=0;ae<oe;ae++){const Z=Le[ae];le(Z[2]+Pe,Z[1]+Pe,Z[0]+Pe)}ze=d+S*2,Pe=ee*ze;for(let ae=0;ae<oe;ae++){const Z=Le[ae];le(Z[0]+Pe,Z[1]+Pe,Z[2]+Pe)}}else{for(let ze=0;ze<oe;ze++){const Pe=Le[ze];le(Pe[2],Pe[1],Pe[0])}for(let ze=0;ze<oe;ze++){const Pe=Le[ze];le(Pe[0]+ee*d,Pe[1]+ee*d,Pe[2]+ee*d)}}n.addGroup(j,r.length/3-j,0)}function Ze(){const j=r.length/3;let ze=0;Ae(K,ze),ze+=K.length;for(let Pe=0,ae=F.length;Pe<ae;Pe++){const Z=F[Pe];Ae(Z,ze),ze+=Z.length}n.addGroup(j,r.length/3-j,1)}function Ae(j,ze){let Pe=j.length;for(;--Pe>=0;){const ae=Pe;let Z=Pe-1;Z<0&&(Z=j.length-1);for(let Ie=0,Se=d+S*2;Ie<Se;Ie++){const We=ee*Ie,ht=ee*(Ie+1),te=ze+ae+We,k=ze+Z+We,ie=ze+Z+ht,Ee=ze+ae+ht;me(te,k,ie,Ee)}}}function Q(j,ze,Pe){c.push(j),c.push(ze),c.push(Pe)}function le(j,ze,Pe){be(j),be(ze),be(Pe);const ae=r.length/3,Z=E.generateTopUV(n,r,ae-3,ae-2,ae-1);ye(Z[0]),ye(Z[1]),ye(Z[2])}function me(j,ze,Pe,ae){be(j),be(ze),be(ae),be(ze),be(Pe),be(ae);const Z=r.length/3,Ie=E.generateSideWallUV(n,r,Z-6,Z-3,Z-2,Z-1);ye(Ie[0]),ye(Ie[1]),ye(Ie[3]),ye(Ie[1]),ye(Ie[2]),ye(Ie[3])}function be(j){r.push(c[j*3+0]),r.push(c[j*3+1]),r.push(c[j*3+2])}function ye(j){a.push(j.x),a.push(j.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return v6(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new US[r.type]().fromJSON(r)),new HO(n,e.options)}};const g6={generateTopUV:function(i,e,t,n,r){const a=e[t*3],s=e[t*3+1],o=e[n*3],c=e[n*3+1],f=e[r*3],d=e[r*3+1];return[new ot(a,s),new ot(o,c),new ot(f,d)]},generateSideWallUV:function(i,e,t,n,r,a){const s=e[t*3],o=e[t*3+1],c=e[t*3+2],f=e[n*3],d=e[n*3+1],m=e[n*3+2],v=e[r*3],y=e[r*3+1],_=e[r*3+2],A=e[a*3],S=e[a*3+1],x=e[a*3+2];return Math.abs(o-d)<Math.abs(s-f)?[new ot(s,1-c),new ot(f,1-m),new ot(v,1-_),new ot(A,1-x)]:[new ot(o,1-c),new ot(d,1-m),new ot(y,1-_),new ot(S,1-x)]}};function v6(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const a=i[n];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class g_ extends Sh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new g_(e.radius,e.detail)}}class BM extends Fn{constructor(e=[new ot(0,-.5),new ot(.5,0),new ot(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=In(r,0,Math.PI*2);const a=[],s=[],o=[],c=[],f=[],d=1/t,m=new ue,v=new ot,y=new ue,_=new ue,A=new ue;let S=0,x=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:S=e[E+1].x-e[E].x,x=e[E+1].y-e[E].y,y.x=x*1,y.y=-S,y.z=x*0,A.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(A.x,A.y,A.z);break;default:S=e[E+1].x-e[E].x,x=e[E+1].y-e[E].y,y.x=x*1,y.y=-S,y.z=x*0,_.copy(y),y.x+=A.x,y.y+=A.y,y.z+=A.z,y.normalize(),c.push(y.x,y.y,y.z),A.copy(_)}for(let E=0;E<=t;E++){const D=n+E*d*r,B=Math.sin(D),U=Math.cos(D);for(let w=0;w<=e.length-1;w++){m.x=e[w].x*B,m.y=e[w].y,m.z=e[w].x*U,s.push(m.x,m.y,m.z),v.x=E/t,v.y=w/(e.length-1),o.push(v.x,v.y);const O=c[3*w+0]*B,I=c[3*w+1],L=c[3*w+0]*U;f.push(O,I,L)}}for(let E=0;E<t;E++)for(let D=0;D<e.length-1;D++){const B=D+E*e.length,U=B,w=B+e.length,O=B+e.length+1,I=B+1;a.push(U,w,I),a.push(O,I,w)}this.setIndex(a),this.setAttribute("position",new Zt(s,3)),this.setAttribute("uv",new Zt(o,2)),this.setAttribute("normal",new Zt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BM(e.points,e.segments,e.phiStart,e.phiLength)}}class v_ extends Sh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v_(e.radius,e.detail)}}let qg=class GO extends Fn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const a=e/2,s=t/2,o=Math.floor(n),c=Math.floor(r),f=o+1,d=c+1,m=e/o,v=t/c,y=[],_=[],A=[],S=[];for(let x=0;x<d;x++){const E=x*v-s;for(let D=0;D<f;D++){const B=D*m-a;_.push(B,-E,0),A.push(0,0,1),S.push(D/o),S.push(1-x/c)}}for(let x=0;x<c;x++)for(let E=0;E<o;E++){const D=E+f*x,B=E+f*(x+1),U=E+1+f*(x+1),w=E+1+f*x;y.push(D,B,w),y.push(B,U,w)}this.setIndex(y),this.setAttribute("position",new Zt(_,3)),this.setAttribute("normal",new Zt(A,3)),this.setAttribute("uv",new Zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new GO(e.width,e.height,e.widthSegments,e.heightSegments)}};class LM extends Fn{constructor(e=.5,t=1,n=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:s},n=Math.max(3,n),r=Math.max(1,r);const o=[],c=[],f=[],d=[];let m=e;const v=(t-e)/r,y=new ue,_=new ot;for(let A=0;A<=r;A++){for(let S=0;S<=n;S++){const x=a+S/n*s;y.x=m*Math.cos(x),y.y=m*Math.sin(x),c.push(y.x,y.y,y.z),f.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,d.push(_.x,_.y)}m+=v}for(let A=0;A<r;A++){const S=A*(n+1);for(let x=0;x<n;x++){const E=x+S,D=E,B=E+n+1,U=E+n+2,w=E+1;o.push(D,B,w),o.push(B,U,w)}}this.setIndex(o),this.setAttribute("position",new Zt(c,3)),this.setAttribute("normal",new Zt(f,3)),this.setAttribute("uv",new Zt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}let VO=class kO extends Fn{constructor(e=new Jd([new ot(0,.5),new ot(-.5,-.5),new ot(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(o,c,d),o+=c,c=0;this.setIndex(n),this.setAttribute("position",new Zt(r,3)),this.setAttribute("normal",new Zt(a,3)),this.setAttribute("uv",new Zt(s,2));function f(d){const m=r.length/3,v=d.extractPoints(t);let y=v.shape;const _=v.holes;Pu.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,x=_.length;S<x;S++){const E=_[S];Pu.isClockWise(E)===!0&&(_[S]=E.reverse())}const A=Pu.triangulateShape(y,_);for(let S=0,x=_.length;S<x;S++){const E=_[S];y=y.concat(E)}for(let S=0,x=y.length;S<x;S++){const E=y[S];r.push(E.x,E.y,0),a.push(0,0,1),s.push(E.x,E.y)}for(let S=0,x=A.length;S<x;S++){const E=A[S],D=E[0]+m,B=E[1]+m,U=E[2]+m;n.push(D,B,U),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return y6(t,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];n.push(s)}return new kO(n,e.curveSegments)}};function y6(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class y_ extends Fn{constructor(e=1,t=32,n=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(s+o,Math.PI);let f=0;const d=[],m=new ue,v=new ue,y=[],_=[],A=[],S=[];for(let x=0;x<=n;x++){const E=[],D=x/n;let B=0;x===0&&s===0?B=.5/t:x===n&&c===Math.PI&&(B=-.5/t);for(let U=0;U<=t;U++){const w=U/t;m.x=-e*Math.cos(r+w*a)*Math.sin(s+D*o),m.y=e*Math.cos(s+D*o),m.z=e*Math.sin(r+w*a)*Math.sin(s+D*o),_.push(m.x,m.y,m.z),v.copy(m).normalize(),A.push(v.x,v.y,v.z),S.push(w+B,1-D),E.push(f++)}d.push(E)}for(let x=0;x<n;x++)for(let E=0;E<t;E++){const D=d[x][E+1],B=d[x][E],U=d[x+1][E],w=d[x+1][E+1];(x!==0||s>0)&&y.push(D,B,w),(x!==n-1||c<Math.PI)&&y.push(B,U,w)}this.setIndex(y),this.setAttribute("position",new Zt(_,3)),this.setAttribute("normal",new Zt(A,3)),this.setAttribute("uv",new Zt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class IM extends Sh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IM(e.radius,e.detail)}}class PM extends Fn{constructor(e=1,t=.4,n=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:a},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],c=[],f=[],d=new ue,m=new ue,v=new ue;for(let y=0;y<=n;y++)for(let _=0;_<=r;_++){const A=_/r*a,S=y/n*Math.PI*2;m.x=(e+t*Math.cos(S))*Math.cos(A),m.y=(e+t*Math.cos(S))*Math.sin(A),m.z=t*Math.sin(S),o.push(m.x,m.y,m.z),d.x=e*Math.cos(A),d.y=e*Math.sin(A),v.subVectors(m,d).normalize(),c.push(v.x,v.y,v.z),f.push(_/r),f.push(y/n)}for(let y=1;y<=n;y++)for(let _=1;_<=r;_++){const A=(r+1)*y+_-1,S=(r+1)*(y-1)+_-1,x=(r+1)*(y-1)+_,E=(r+1)*y+_;s.push(A,S,E),s.push(S,x,E)}this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("normal",new Zt(c,3)),this.setAttribute("uv",new Zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class NM extends Fn{constructor(e=1,t=.4,n=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:a,q:s},n=Math.floor(n),r=Math.floor(r);const o=[],c=[],f=[],d=[],m=new ue,v=new ue,y=new ue,_=new ue,A=new ue,S=new ue,x=new ue;for(let D=0;D<=n;++D){const B=D/n*a*Math.PI*2;E(B,a,s,e,y),E(B+.01,a,s,e,_),S.subVectors(_,y),x.addVectors(_,y),A.crossVectors(S,x),x.crossVectors(A,S),A.normalize(),x.normalize();for(let U=0;U<=r;++U){const w=U/r*Math.PI*2,O=-t*Math.cos(w),I=t*Math.sin(w);m.x=y.x+(O*x.x+I*A.x),m.y=y.y+(O*x.y+I*A.y),m.z=y.z+(O*x.z+I*A.z),c.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),f.push(v.x,v.y,v.z),d.push(D/n),d.push(U/r)}}for(let D=1;D<=n;D++)for(let B=1;B<=r;B++){const U=(r+1)*(D-1)+(B-1),w=(r+1)*D+(B-1),O=(r+1)*D+B,I=(r+1)*(D-1)+B;o.push(U,w,I),o.push(w,O,I)}this.setIndex(o),this.setAttribute("position",new Zt(c,3)),this.setAttribute("normal",new Zt(f,3)),this.setAttribute("uv",new Zt(d,2));function E(D,B,U,w,O){const I=Math.cos(D),L=Math.sin(D),R=U/B*D,F=Math.cos(R);O.x=w*(2+F)*.5*I,O.y=w*(2+F)*L*.5,O.z=w*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class OM extends Fn{constructor(e=new hC(new ue(-1,-1,0),new ue(-1,1,0),new ue(1,1,0)),t=64,n=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new ue,c=new ue,f=new ot;let d=new ue;const m=[],v=[],y=[],_=[];A(),this.setIndex(_),this.setAttribute("position",new Zt(m,3)),this.setAttribute("normal",new Zt(v,3)),this.setAttribute("uv",new Zt(y,2));function A(){for(let D=0;D<t;D++)S(D);S(a===!1?t:0),E(),x()}function S(D){d=e.getPointAt(D/t,d);const B=s.normals[D],U=s.binormals[D];for(let w=0;w<=r;w++){const O=w/r*Math.PI*2,I=Math.sin(O),L=-Math.cos(O);c.x=L*B.x+I*U.x,c.y=L*B.y+I*U.y,c.z=L*B.z+I*U.z,c.normalize(),v.push(c.x,c.y,c.z),o.x=d.x+n*c.x,o.y=d.y+n*c.y,o.z=d.z+n*c.z,m.push(o.x,o.y,o.z)}}function x(){for(let D=1;D<=t;D++)for(let B=1;B<=r;B++){const U=(r+1)*(D-1)+(B-1),w=(r+1)*D+(B-1),O=(r+1)*D+B,I=(r+1)*(D-1)+B;_.push(U,w,I),_.push(w,O,I)}}function E(){for(let D=0;D<=t;D++)for(let B=0;B<=r;B++)f.x=D/t,f.y=B/r,y.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new OM(new US[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WO extends Fn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new ue,a=new ue;if(e.index!==null){const s=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let f=0,d=c.length;f<d;++f){const m=c[f],v=m.start,y=m.count;for(let _=v,A=v+y;_<A;_+=3)for(let S=0;S<3;S++){const x=o.getX(_+S),E=o.getX(_+(S+1)%3);r.fromBufferAttribute(s,x),a.fromBufferAttribute(s,E),_D(r,a,n)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,c=s.count/3;o<c;o++)for(let f=0;f<3;f++){const d=3*o+f,m=3*o+(f+1)%3;r.fromBufferAttribute(s,d),a.fromBufferAttribute(s,m),_D(r,a,n)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Zt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function _D(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var xD=Object.freeze({__proto__:null,BoxGeometry:l_,CapsuleGeometry:wM,CircleGeometry:CM,ConeGeometry:m_,CylinderGeometry:p_,DodecahedronGeometry:RM,EdgesGeometry:CO,ExtrudeGeometry:zO,IcosahedronGeometry:g_,LatheGeometry:BM,OctahedronGeometry:v_,PlaneGeometry:qg,PolyhedronGeometry:Sh,RingGeometry:LM,ShapeGeometry:VO,SphereGeometry:y_,TetrahedronGeometry:IM,TorusGeometry:PM,TorusKnotGeometry:NM,TubeGeometry:OM,WireframeGeometry:WO});let XO=class extends vr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},$O=class extends Wi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Yg=class extends vr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},mo=class extends Yg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ot(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return In(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},pC=class extends vr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hl,this.combine=r_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},mC=class extends vr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},gC=class extends vr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},vC=class extends vr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hl,this.combine=r_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},yC=class extends vr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Vc,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},_C=class extends vr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},jO=class extends vr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},qO=class extends Ka{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function Xd(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function YO(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function KO(i){function e(r,a){return i[r]-i[a]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function Yw(i,e,t){const n=i.length,r=new i.constructor(n);for(let a=0,s=0;s!==n;++a){const o=t[a]*e;for(let c=0;c!==e;++c)r[s++]=i[o+c]}return r}function xC(i,e,t,n){let r=1,a=i[0];for(;a!==void 0&&a[n]===void 0;)a=i[r++];if(a===void 0)return;let s=a[n];if(s!==void 0)if(Array.isArray(s))do s=a[n],s!==void 0&&(e.push(a.time),t.push(...s)),a=i[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[n],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=i[r++];while(a!==void 0);else do s=a[n],s!==void 0&&(e.push(a.time),t.push(s)),a=i[r++];while(a!==void 0)}function _6(i,e,t,n,r=30){const a=i.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],d=f.getValueSize(),m=[],v=[];for(let y=0;y<f.times.length;++y){const _=f.times[y]*r;if(!(_<t||_>=n)){m.push(f.times[y]);for(let A=0;A<d;++A)v.push(f.values[y*d+A])}}m.length!==0&&(f.times=Xd(m,f.times.constructor),f.values=Xd(v,f.values.constructor),s.push(f))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a}function x6(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,a=e/n;for(let s=0;s<r;++s){const o=t.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const f=i.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===c});if(f===void 0)continue;let d=0;const m=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let v=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const _=o.times.length-1;let A;if(a<=o.times[0]){const x=d,E=m-d;A=o.values.slice(x,E)}else if(a>=o.times[_]){const x=_*m+d,E=x+m-d;A=o.values.slice(x,E)}else{const x=o.createInterpolant(),E=d,D=m-d;x.evaluate(a),A=x.resultBuffer.slice(E,D)}c==="quaternion"&&new ha().fromArray(A).normalize().conjugate().toArray(A);const S=f.times.length;for(let x=0;x<S;++x){const E=x*y+v;if(c==="quaternion")ha.multiplyQuaternionsFlat(f.values,E,A,0,f.values,E);else{const D=y-v*2;for(let B=0;B<D;++B)f.values[E+B]-=A[B]}}}return i.blendMode=Y2,i}let b6=class{static convertArray(e,t){return Xd(e,t)}static isTypedArray(e){return YO(e)}static getKeyframeOrder(e){return KO(e)}static sortedArray(e,t,n){return Yw(e,t,n)}static flattenJSON(e,t,n,r){xC(e,t,n,r)}static subclip(e,t,n,r,a=30){return _6(e,t,n,r,a)}static makeClipAdditive(e,t=0,n=e,r=30){return x6(e,t,n,r)}},Kg=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(a=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(n=2,a=o);for(let c=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=a,a=t[--n-1],e>=a)break t}s=n,n=0;break n}break e}for(;n<s;){const o=n+s>>>1;e<t[o]?s=o:n=o+1}if(r=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=n[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},JO=class extends Kg{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vd,endingEnd:Vd}}intervalChanged_(e,t,n){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],c=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case kd:a=e,o=2*t-n;break;case Oy:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=n}if(c===void 0)switch(this.getSettings_().endingEnd){case kd:s=e,c=2*n-t;break;case Oy:s=1,c=n+r[1]-r[0];break;default:s=e-1,c=t}const f=(n-t)*.5,d=this.valueSize;this._weightPrev=f/(t-o),this._weightNext=f/(c-n),this._offsetPrev=a*d,this._offsetNext=s*d}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,d=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,_=(n-t)/(r-t),A=_*_,S=A*_,x=-v*S+2*v*A-v*_,E=(1+v)*S+(-1.5-2*v)*A+(-.5+v)*_+1,D=(-1-y)*S+(1.5+y)*A+.5*_,B=y*S-y*A;for(let U=0;U!==o;++U)a[U]=x*s[d+U]+E*s[f+U]+D*s[c+U]+B*s[m+U];return a}},bC=class extends Kg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,d=(n-t)/(r-t),m=1-d;for(let v=0;v!==o;++v)a[v]=s[f+v]*m+s[c+v]*d;return a}},ZO=class extends Kg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Yo=class{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xd(t,this.TimeBufferType),this.values=Xd(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Xd(e.times,Array),values:Xd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ZO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new JO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ig:t=this.InterpolantFactoryMethodDiscrete;break;case Pg:t=this.InterpolantFactoryMethodLinear;break;case kb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ig;case this.InterpolantFactoryMethodLinear:return Pg;case this.InterpolantFactoryMethodSmooth:return kb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let a=0,s=r-1;for(;a!==r&&n[a]<e;)++a;for(;s!==-1&&n[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=n.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=n[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(r!==void 0&&YO(r))for(let o=0,c=r.length;o!==c;++o){const f=r[o];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===kb,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const f=e[o],d=e[o+1];if(f!==d&&(o!==1||f!==e[0]))if(r)c=!0;else{const m=o*n,v=m-n,y=m+n;for(let _=0;_!==n;++_){const A=t[m+_];if(A!==t[v+_]||A!==t[y+_]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const m=o*n,v=s*n;for(let y=0;y!==n;++y)t[v+y]=t[m+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*n,c=s*n,f=0;f!==n;++f)t[c+f]=t[o+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Yo.prototype.ValueTypeName="";Yo.prototype.TimeBufferType=Float32Array;Yo.prototype.ValueBufferType=Float32Array;Yo.prototype.DefaultInterpolation=Pg;let mp=class extends Yo{constructor(e,t,n){super(e,t,n)}};mp.prototype.ValueTypeName="bool";mp.prototype.ValueBufferType=Array;mp.prototype.DefaultInterpolation=Ig;mp.prototype.InterpolantFactoryMethodLinear=void 0;mp.prototype.InterpolantFactoryMethodSmooth=void 0;let SC=class extends Yo{constructor(e,t,n,r){super(e,t,n,r)}};SC.prototype.ValueTypeName="color";let op=class extends Yo{constructor(e,t,n,r){super(e,t,n,r)}};op.prototype.ValueTypeName="number";let QO=class extends Kg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(n-t)/(r-t);let f=e*o;for(let d=f+o;f!==d;f+=4)ha.slerpFlat(a,0,s,f-o,s,f,c);return a}},lp=class extends Yo{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new QO(this.times,this.values,this.getValueSize(),e)}};lp.prototype.ValueTypeName="quaternion";lp.prototype.InterpolantFactoryMethodSmooth=void 0;let gp=class extends Yo{constructor(e,t,n){super(e,t,n)}};gp.prototype.ValueTypeName="string";gp.prototype.ValueBufferType=Array;gp.prototype.DefaultInterpolation=Ig;gp.prototype.InterpolantFactoryMethodLinear=void 0;gp.prototype.InterpolantFactoryMethodSmooth=void 0;let cp=class extends Yo{constructor(e,t,n,r){super(e,t,n,r)}};cp.prototype.ValueTypeName="vector";let Hg=class{constructor(e="",t=-1,n=[],r=yM){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=co(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,o=n.length;s!==o;++s)t.push(M6(n[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=n.length;a!==s;++a)t.push(Yo.toJSON(n[a]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const a=t.length,s=[];for(let o=0;o<a;o++){let c=[],f=[];c.push((o+a-1)%a,o,(o+1)%a),f.push(0,1,0);const d=KO(c);c=Yw(c,1,d),f=Yw(f,1,d),!r&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new op(".morphTargetInfluences["+t[o].name+"]",c,f).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const f=e[o],d=f.name.match(a);if(d&&d.length>1){const m=d[1];let v=r[m];v||(r[m]=v=[]),v.push(f)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,v,y,_,A){if(y.length!==0){const S=[],x=[];xC(y,S,x,_),S.length!==0&&A.push(new m(v,S,x))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let m=0;m<f.length;m++){const v=f[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let _;for(_=0;_<v.length;_++)if(v[_].morphTargets)for(let A=0;A<v[_].morphTargets.length;A++)y[v[_].morphTargets[A]]=-1;for(const A in y){const S=[],x=[];for(let E=0;E!==v[_].morphTargets.length;++E){const D=v[_];S.push(D.time),x.push(D.morphTarget===A?1:0)}r.push(new op(".morphTargetInfluence["+A+"]",S,x))}c=y.length*s}else{const y=".bones["+t[m].name+"]";n(cp,y+".position",v,"pos",r),n(lp,y+".quaternion",v,"rot",r),n(cp,y+".scale",v,"scl",r)}}return r.length===0?null:new this(a,c,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function S6(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return op;case"vector":case"vector2":case"vector3":case"vector4":return cp;case"color":return SC;case"quaternion":return lp;case"bool":case"boolean":return mp;case"string":return gp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function M6(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=S6(i.type);if(i.times===void 0){const t=[],n=[];xC(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Nu={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};let UM=class{constructor(e,t,n){const r=this;let a=!1,s=0,o=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){o++,a===!1&&r.onStart!==void 0&&r.onStart(d,s,o),a=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,m){return f.push(d,m),this},this.removeHandler=function(d){const m=f.indexOf(d);return m!==-1&&f.splice(m,2),this},this.getHandler=function(d){for(let m=0,v=f.length;m<v;m+=2){const y=f[m],_=f[m+1];if(y.global&&(y.lastIndex=0),y.test(d))return _}return null}}};const gg=new UM;let Pa=class{constructor(e){this.manager=e!==void 0?e:gg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,a){n.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Pa.DEFAULT_MATERIAL_NAME="__DEFAULT";const xu={};class E6 extends Error{constructor(e,t){super(e),this.response=t}}let La=class extends Pa{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Nu.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(xu[e]!==void 0){xu[e].push({onLoad:t,onProgress:n,onError:r});return}xu[e]=[],xu[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=xu[e],m=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),y=v?parseInt(v):0,_=y!==0;let A=0;const S=new ReadableStream({start(x){E();function E(){m.read().then(({done:D,value:B})=>{if(D)x.close();else{A+=B.byteLength;const U=new ProgressEvent("progress",{lengthComputable:_,loaded:A,total:y});for(let w=0,O=d.length;w<O;w++){const I=d[w];I.onProgress&&I.onProgress(U)}x.enqueue(B),E()}},D=>{x.error(D)})}}});return new Response(S)}else throw new E6(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return f.json();default:if(o==="")return f.text();{const m=/charset="?([^;"\s]*)"?/i.exec(o),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return f.arrayBuffer().then(_=>y.decode(_))}}}).then(f=>{Nu.add(e,f);const d=xu[e];delete xu[e];for(let m=0,v=d.length;m<v;m++){const y=d[m];y.onLoad&&y.onLoad(f)}}).catch(f=>{const d=xu[e];if(d===void 0)throw this.manager.itemError(e),f;delete xu[e];for(let m=0,v=d.length;m<v;m++){const y=d[m];y.onError&&y.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};class A6 extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=this,s=new La(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Hg.parse(e[n]);t.push(r)}return t}}class T6 extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=this,s=[],o=new TM,c=new La(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function d(m){c.load(e[m],function(v){const y=a.parse(v,!0);s[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},f+=1,f===6&&(y.mipmapCount===1&&(o.minFilter=Qn),o.image=s,o.format=y.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)d(m);else c.load(e,function(m){const v=a.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let _=0;_<y;_++){s[_]={mipmaps:[]};for(let A=0;A<v.mipmapCount;A++)s[_].mipmaps.push(v.mipmaps[_*v.mipmapCount+A]),s[_].format=v.format,s[_].width=v.width,s[_].height=v.height}o.image=s}else o.image.width=v.width,o.image.height=v.height,o.mipmaps=v.mipmaps;v.mipmapCount===1&&(o.minFilter=Qn),o.format=v.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}let Wy=class extends Pa{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Nu.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=Hy("img");function c(){d(),Nu.add(e,this),t&&t(this),a.manager.itemEnd(e)}function f(m){d(),r&&r(m),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){o.removeEventListener("load",c,!1),o.removeEventListener("error",f,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}},eU=class extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=new u_;a.colorSpace=$n;const s=new Wy(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(f){s.load(e[f],function(d){a.images[f]=d,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return a}};class MC extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=this,s=new Ol,o=new La(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(c){let f;try{f=a.parse(c)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Br,s.wrapT=f.wrapT!==void 0?f.wrapT:Br,s.magFilter=f.magFilter!==void 0?f.magFilter:Qn,s.minFilter=f.minFilter!==void 0?f.minFilter:Qn,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=Ho),f.mipmapCount===1&&(s.minFilter=Qn),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},n,r),s}}let __=class extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=new mi,s=new Wy(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},n,r),a}},Mh=class extends ci{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},tU=class extends Mh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}};const wA=new mn,bD=new ue,SD=new ue;let EC=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ot(512,512),this.mapType=Ji,this.map=null,this.mapPass=null,this.matrix=new mn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jg,this._frameExtents=new ot(1,1),this._viewportCount=1,this._viewports=[new ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;bD.setFromMatrixPosition(e.matrixWorld),t.position.copy(bD),SD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(SD),t.updateMatrixWorld(),wA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wA),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(wA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},w6=class extends EC{constructor(){super(new rr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Ng*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(n!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},AC=class extends Mh{constructor(e,t,n=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.distance=n,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new w6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const MD=new mn,G0=new ue,CA=new ue;let C6=class extends EC{constructor(){super(new rr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ot(4,2),this._viewportCount=6,this._viewports=[new ni(2,1,1,1),new ni(0,1,1,1),new ni(3,1,1,1),new ni(1,1,1,1),new ni(3,0,1,1),new ni(1,0,1,1)],this._cubeDirections=[new ue(1,0,0),new ue(-1,0,0),new ue(0,0,1),new ue(0,0,-1),new ue(0,1,0),new ue(0,-1,0)],this._cubeUps=[new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,0,1),new ue(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),G0.setFromMatrixPosition(e.matrixWorld),n.position.copy(G0),CA.copy(n.position),CA.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(CA),n.updateMatrixWorld(),r.makeTranslation(-G0.x,-G0.y,-G0.z),MD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MD)}},TC=class extends Mh{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new C6}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Uc=class extends c_{constructor(e=-1,t=1,n=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=n-e,s=n+e,o=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},R6=class extends EC{constructor(){super(new Uc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},wC=class extends Mh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.shadow=new R6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},nU=class extends Mh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},iU=class extends Mh{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}},rU=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ue)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],1.092548*(n*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(n*a)),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*n),t.addScaledVector(s[4],2*.429043*n*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*n*a),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-r*r)}},aU=class extends Mh{constructor(e=new rU,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}};class FM extends Pa{constructor(e){super(e),this.textures={}}load(e,t,n,r){const a=this,s=new La(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=n(s.value);break;case"c":r.uniforms[a].value=new Bt().setHex(s.value);break;case"v2":r.uniforms[a].value=new ot().fromArray(s.value);break;case"v3":r.uniforms[a].value=new ue().fromArray(s.value);break;case"v4":r.uniforms[a].value=new ni().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Un().fromArray(s.value);break;case"m4":r.uniforms[a].value=new mn().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new ot().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ot().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return FM.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:XO,SpriteMaterial:iC,RawShaderMaterial:$O,ShaderMaterial:Wi,PointsMaterial:AM,MeshPhysicalMaterial:mo,MeshStandardMaterial:Yg,MeshPhongMaterial:pC,MeshToonMaterial:mC,MeshNormalMaterial:gC,MeshLambertMaterial:vC,MeshDepthMaterial:yC,MeshDistanceMaterial:_C,MeshBasicMaterial:xs,MeshMatcapMaterial:jO,LineDashedMaterial:qO,LineBasicMaterial:Ka,Material:vr};return new t[e]}}let sh=class{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}},sU=class extends Fn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};class oU extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=this,s=new La(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(y,_){if(t[_]!==void 0)return t[_];const S=y.interleavedBuffers[_],x=a(y,S.buffer),E=mg(S.type,x),D=new f_(E,S.stride);return D.uuid=S.uuid,t[_]=D,D}function a(y,_){if(n[_]!==void 0)return n[_];const S=y.arrayBuffers[_],x=new Uint32Array(S).buffer;return n[_]=x,x}const s=e.isInstancedBufferGeometry?new sU:new Fn,o=e.data.index;if(o!==void 0){const y=mg(o.type,o.array);s.setIndex(new si(y,1))}const c=e.data.attributes;for(const y in c){const _=c[y];let A;if(_.isInterleavedBufferAttribute){const S=r(e.data,_.data);A=new Fg(S,_.itemSize,_.offset,_.normalized)}else{const S=mg(_.type,_.array),x=_.isInstancedBufferAttribute?Hu:si;A=new x(S,_.itemSize,_.normalized)}_.name!==void 0&&(A.name=_.name),_.usage!==void 0&&A.setUsage(_.usage),s.setAttribute(y,A)}const f=e.data.morphAttributes;if(f)for(const y in f){const _=f[y],A=[];for(let S=0,x=_.length;S<x;S++){const E=_[S];let D;if(E.isInterleavedBufferAttribute){const B=r(e.data,E.data);D=new Fg(B,E.itemSize,E.offset,E.normalized)}else{const B=mg(E.type,E.array);D=new si(B,E.itemSize,E.normalized)}E.name!==void 0&&(D.name=E.name),A.push(D)}s.morphAttributes[y]=A}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,_=m.length;y!==_;++y){const A=m[y];s.addGroup(A.start,A.count,A.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new da().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class D6 extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=this,s=this.path===""?sh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new La(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(f,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?sh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new La(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,c,o,n),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),this.bindLightTargets(f),t!==void 0){let m=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,o,s,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const a=new Jd().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new h_().fromJSON(e[a],r);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new oU;for(let a=0,s=e.length;a<s;a++){let o;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(c);break;default:c.type in xD?o=xD[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),n[c.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const a=new FM;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const c=e[s];n[c.uuid]===void 0&&(n[c.uuid]=a.parse(c)),r[c.uuid]=n[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],a=Hg.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const n=this,r={};let a;function s(c){return n.manager.itemStart(c),a.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const f=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return s(d)}else return c.data?{data:mg(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new UM(t);a=new Wy(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const m=e[f],v=m.url;if(Array.isArray(v)){const y=[];for(let _=0,A=v.length;_<A;_++){const S=v[_],x=o(S);x!==null&&(x instanceof HTMLImageElement?y.push(x):y.push(new Ol(x.data,x.width,x.height)))}r[m.uuid]=new rh(y)}else{const y=o(m.url);r[m.uuid]=new rh(y)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function a(s){if(typeof s=="string"){const o=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(c)}else return s.data?{data:mg(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new Wy(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const c=e[s],f=c.url;if(Array.isArray(f)){const d=[];for(let m=0,v=f.length;m<v;m++){const y=f[m],_=await a(y);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new Ol(_.data,_.width,_.height)))}n[c.uuid]=new rh(d)}else{const d=await a(c.url);n[c.uuid]=new rh(d)}}}return n}parseTextures(e,t){function n(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=t[o.image],f=c.data;let d;Array.isArray(f)?(d=new u_,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new Ol:d=new mi,f&&(d.needsUpdate=!0)),d.source=c,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=n(o.mapping,B6)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=n(o.wrap[0],ED),d.wrapT=n(o.wrap[1],ED)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=n(o.minFilter,AD)),o.magFilter!==void 0&&(d.magFilter=n(o.magFilter,AD)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),r[o.uuid]=d}return r}parseObject(e,t,n,r,a){let s;function o(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let _=0,A=v.length;_<A;_++){const S=v[_];n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),y.push(n[S])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function f(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let d,m;switch(e.type){case"Scene":s=new ap,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Bt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new SM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new bM(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new rr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Uc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new nU(e.color,e.intensity);break;case"DirectionalLight":s=new wC(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new TC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new iU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new AC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new tU(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new aU().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),m=c(e.material),s=new rC(d,m),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),m=c(e.material),s=new Ki(d,m);break;case"InstancedMesh":d=o(e.geometry),m=c(e.material);const v=e.count,y=e.instanceMatrix,_=e.instanceColor;s=new aC(d,m,v),s.instanceMatrix=new Hu(new Float32Array(y.array),16),_!==void 0&&(s.instanceColor=new Hu(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":d=o(e.geometry),m=c(e.material),s=new TO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(A=>{let S=null,x=null;return A.boundingBox!==void 0&&(S=new Ba().fromJSON(A.boundingBox)),A.boundingSphere!==void 0&&(x=new da().fromJSON(A.boundingSphere)),{...A,boundingBox:S,boundingSphere:x}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new da().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Ba().fromJSON(e.boundingBox));break;case"LOD":s=new AO;break;case"Line":s=new Gu(o(e.geometry),c(e.material));break;case"LineLoop":s=new sC(o(e.geometry),c(e.material));break;case"LineSegments":s=new Xl(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new oC(o(e.geometry),c(e.material));break;case"Sprite":s=new EO(c(e.material));break;case"Group":s=new Iu;break;case"Bone":s=new MM;break;default:s=new ci}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)s.add(this.parseObject(v[y],t,n,r,a))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const _=v[y];s.animations.push(a[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const _=v[y],A=s.getObjectByProperty("uuid",_.object);A!==void 0&&s.addLevel(A,_.distance,_.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new ci}})}}const B6={UVMapping:ph,CubeReflectionMapping:zc,CubeRefractionMapping:mh,EquirectangularReflectionMapping:Rg,EquirectangularRefractionMapping:Ny,CubeUVReflectionMapping:$g},ED={RepeatWrapping:gh,ClampToEdgeWrapping:Br,MirroredRepeatWrapping:Dg},AD={NearestFilter:Mr,NearestMipmapNearestFilter:fM,NearestMipmapLinearFilter:Gd,LinearFilter:Qn,LinearMipmapNearestFilter:Sg,LinearMipmapLinearFilter:Ho},RA=new WeakMap;let lU=class extends Pa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Nu.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(RA.has(s)===!0)r&&r(RA.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const c=fetch(e,o).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Nu.add(e,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),RA.set(c,f),Nu.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Nu.add(e,c),a.manager.itemStart(e)}},H1,CC=class{static getContext(){return H1===void 0&&(H1=new(window.AudioContext||window.webkitAudioContext)),H1}static setContext(e){H1=e}},L6=class extends Pa{constructor(e){super(e)}load(e,t,n,r){const a=this,s=new La(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const f=c.slice(0);CC.getContext().decodeAudioData(f,function(m){t(m)}).catch(o)}catch(f){o(f)}},n,r);function o(c){r?r(c):console.error(c),a.manager.itemError(e)}}};const TD=new mn,wD=new mn,Md=new mn;class I6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Md.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(Kd*t.fov*.5)/t.zoom;let o,c;wD.elements[12]=-r,TD.elements[12]=r,o=-s*t.aspect+a,c=s*t.aspect+a,Md.elements[0]=2*t.near/(c-o),Md.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(Md),o=-s*t.aspect-a,c=s*t.aspect-a,Md.elements[0]=2*t.near/(c-o),Md.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(Md)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(wD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(TD)}}let cU=class extends rr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};class RC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=CD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function CD(){return performance.now()}const Ed=new ue,DA=new ha,P6=new ue,Ad=new ue,Td=new ue;class N6 extends ci{constructor(){super(),this.type="AudioListener",this.context=CC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new RC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ed,DA,P6),Ad.set(0,0,-1).applyQuaternion(DA),Td.set(0,1,0).applyQuaternion(DA),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ed.x,n),t.positionY.linearRampToValueAtTime(Ed.y,n),t.positionZ.linearRampToValueAtTime(Ed.z,n),t.forwardX.linearRampToValueAtTime(Ad.x,n),t.forwardY.linearRampToValueAtTime(Ad.y,n),t.forwardZ.linearRampToValueAtTime(Ad.z,n),t.upX.linearRampToValueAtTime(Td.x,n),t.upY.linearRampToValueAtTime(Td.y,n),t.upZ.linearRampToValueAtTime(Td.z,n)}else t.setPosition(Ed.x,Ed.y,Ed.z),t.setOrientation(Ad.x,Ad.y,Ad.z,Td.x,Td.y,Td.z)}}let uU=class extends ci{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const wd=new ue,RD=new ha,O6=new ue,Cd=new ue;class U6 extends uU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(wd,RD,O6),Cd.set(0,0,1).applyQuaternion(RD);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(wd.x,n),t.positionY.linearRampToValueAtTime(wd.y,n),t.positionZ.linearRampToValueAtTime(wd.z,n),t.orientationX.linearRampToValueAtTime(Cd.x,n),t.orientationY.linearRampToValueAtTime(Cd.y,n),t.orientationZ.linearRampToValueAtTime(Cd.z,n)}else t.setPosition(wd.x,wd.y,wd.z),t.setOrientation(Cd.x,Cd.y,Cd.z)}}class F6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}let fU=class{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)n[a+o]=n[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(n,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(n,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(n[c]!==n[c+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let a=n,s=r;a!==s;++a)t[a]=t[r+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){ha.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,a){const s=this._workIndex*a;ha.multiplyQuaternionsFlat(e,s,e,t,e,n),ha.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,a){const s=1-r;for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[n+s]*r}}};const DC="\\[\\]\\.:\\/",z6=new RegExp("["+DC+"]","g"),BC="[^"+DC+"]",H6="[^"+DC.replace("\\.","")+"]",G6=/((?:WC+[\/:])*)/.source.replace("WC",BC),V6=/(WCOD+)?/.source.replace("WCOD",H6),k6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",BC),W6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",BC),X6=new RegExp("^"+G6+V6+k6+W6+"$"),$6=["material","materials","bones","map"];let j6=class{constructor(e,t,n){const r=n||Pi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Pi=class dg{constructor(e,t,n){this.path=t,this.parsedPath=n||dg.parseTrackName(t),this.node=dg.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new dg.Composite(e,t,n):new dg(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(z6,"")}static parseTrackName(e){const t=X6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=n.nodeName.substring(r+1);$6.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const c=n(o.children);if(c)return c}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=dg.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Pi.Composite=j6;Pi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Pi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Pi.prototype.GetterByBindingType=[Pi.prototype._getValue_direct,Pi.prototype._getValue_array,Pi.prototype._getValue_arrayElement,Pi.prototype._getValue_toArray];Pi.prototype.SetterByBindingTypeAndVersioning=[[Pi.prototype._setValue_direct,Pi.prototype._setValue_direct_setNeedsUpdate,Pi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pi.prototype._setValue_array,Pi.prototype._setValue_array_setNeedsUpdate,Pi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pi.prototype._setValue_arrayElement,Pi.prototype._setValue_arrayElement_setNeedsUpdate,Pi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pi.prototype._setValue_fromArray,Pi.prototype._setValue_fromArray_setNeedsUpdate,Pi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class q6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=co(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,c=e.length,f=this.nCachedObjects_;for(let d=0,m=arguments.length;d!==m;++d){const v=arguments[d],y=v.uuid;let _=t[y];if(_===void 0){_=c++,t[y]=_,e.push(v);for(let A=0,S=s;A!==S;++A)a[A].push(new Pi(v,n[A],r[A]))}else if(_<f){o=e[_];const A=--f,S=e[A];t[S.uuid]=_,e[_]=S,t[y]=A,e[A]=v;for(let x=0,E=s;x!==E;++x){const D=a[x],B=D[A];let U=D[_];D[_]=B,U===void 0&&(U=new Pi(v,n[x],r[x])),D[A]=U}}else e[_]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const c=arguments[s],f=c.uuid,d=t[f];if(d!==void 0&&d>=a){const m=a++,v=e[m];t[v.uuid]=d,e[d]=v,t[f]=m,e[m]=c;for(let y=0,_=r;y!==_;++y){const A=n[y],S=A[m],x=A[d];A[d]=S,A[m]=x}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],d=f.uuid,m=t[d];if(m!==void 0)if(delete t[d],m<a){const v=--a,y=e[v],_=--s,A=e[_];t[y.uuid]=m,e[m]=y,t[A.uuid]=v,e[v]=A,e.pop();for(let S=0,x=r;S!==x;++S){const E=n[S],D=E[v],B=E[_];E[m]=D,E[v]=B,E.pop()}}else{const v=--s,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let _=0,A=r;_!==A;++_){const S=n[_];S[m]=S[v],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,c=this._objects,f=c.length,d=this.nCachedObjects_,m=new Array(f);r=a.length,n[e]=r,s.push(e),o.push(t),a.push(m);for(let v=d,y=c.length;v!==y;++v){const _=c[v];m[v]=new Pi(_,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,c=s[o],f=e[o];t[f]=n,s[n]=c,s.pop(),a[n]=a[o],a.pop(),r[n]=r[o],r.pop()}}}let hU=class{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const a=t.tracks,s=a.length,o=new Array(s),c={endingStart:Vd,endingEnd:Vd};for(let f=0;f!==s;++f){const d=a[f].createInterpolant(null);o[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=KN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=a,c[1]=a+n,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Y2:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(s),f[d].accumulateAdditive(o);break;case yM:default:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(s),f[d].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,a=this._loopCount;const s=n===JN;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(n===YN){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=kd,r.endingEnd=kd):(e?r.endingStart=this.zeroSlopeAtStart?kd:Vd:r.endingStart=Oy,t?r.endingEnd=this.zeroSlopeAtEnd?kd:Vd:r.endingEnd=Oy)}_scheduleFading(e,t,n){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=t,o[1]=a+e,c[1]=n,this}};const Y6=new Float32Array(1);let dU=class extends po{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,c=n.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let m=0;m!==a;++m){const v=r[m],y=v.name;let _=d[y];if(_!==void 0)++_.referenceCount,s[m]=_;else{if(_=s[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,y));continue}const A=t&&t._propertyBindings[m].binding.parsedPath;_=new fU(Pi.create(n,y,A),v.ValueTypeName,v.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,y),s[m]=_}o[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;const m=o.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,s=this._bindingsByRootAndName,o=s[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new bC(new Float32Array(2),new Float32Array(2),1,Y6),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?Hg.findByName(r,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let f=null;if(n===void 0&&(s!==null?n=s.blendMode:n=yM),c!==void 0){const m=c.actionByRoot[a];if(m!==void 0&&m.blendMode===n)return m;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const d=new hU(this,s,t,n);return this._bindAction(d,f),this._addInactiveAction(d,o,a),d}existingAction(e,t){const n=t||this._root,r=n.uuid,a=typeof e=="string"?Hg.findByName(n,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==n;++f)t[f]._update(r,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)o[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const f=s[o];this._deactivateAction(f);const d=f._cacheIndex,m=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=d,t[d]=m,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const o=n[s].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}};class K6 extends Q2{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new xM(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class sn{constructor(e){this.value=e}clone(){return new sn(this.value.clone===void 0?this.value:this.value.clone())}}let J6=0;class Z6 extends po{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:J6++}),this.name="",this.usage=Fy,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}let Q6=class extends f_{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}};class e8{constructor(e,t,n,r,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const DD=new mn;class LC{constructor(e,t,n=0,r=1/0){this.ray=new pp(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Og,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return DD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(DD),this}intersectObject(e,t=!0,n=[]){return Kw(e,this,n,t),n.sort(BD),n}intersectObjects(e,t=!0,n=[]){for(let r=0,a=e.length;r<a;r++)Kw(e[r],this,n,t);return n.sort(BD),n}}function BD(i,e){return i.distance-e.distance}function Kw(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const a=i.children;for(let s=0,o=a.length;s<o;s++)Kw(a[s],e,t,!0)}}class Jw{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=In(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(In(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class t8{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class IC{constructor(e,t,n,r){IC.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=n,a[3]=r,this}}const LD=new ot;class n8{constructor(e=new ot(1/0,1/0),t=new ot(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=LD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,LD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ID=new ue,G1=new ue;class i8{constructor(e=new ue,t=new ue){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ID.subVectors(e,this.start),G1.subVectors(this.end,this.start);const n=G1.dot(G1);let a=G1.dot(ID)/n;return t&&(a=In(a,0,1)),a}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const PD=new ue;class r8 extends ci{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Fn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,c=32;s<c;s++,o++){const f=s/c*Math.PI*2,d=o/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Zt(r,3));const a=new Ka({fog:!1,toneMapped:!1});this.cone=new Xl(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),PD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(PD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const kf=new ue,V1=new mn,BA=new mn;let a8=class extends Xl{constructor(e){const t=pU(e),n=new Fn,r=[],a=[],s=new Bt(0,0,1),o=new Bt(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}n.setAttribute("position",new Zt(r,3)),n.setAttribute("color",new Zt(a,3));const c=new Ka({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");BA.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(V1.multiplyMatrices(BA,o.matrixWorld),kf.setFromMatrixPosition(V1),r.setXYZ(s,kf.x,kf.y,kf.z),V1.multiplyMatrices(BA,o.parent.matrixWorld),kf.setFromMatrixPosition(V1),r.setXYZ(s+1,kf.x,kf.y,kf.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function pU(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...pU(i.children[t]));return e}class s8 extends Ki{constructor(e,t,n){const r=new y_(t,4,2),a=new xs({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const o8=new ue,ND=new Bt,OD=new Bt;class l8 extends ci{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new v_(t);r.rotateY(Math.PI*.5),this.material=new xs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new si(s,3)),this.add(new Ki(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ND.copy(this.light.color),OD.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const a=n<r/2?ND:OD;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(o8.setFromMatrixPosition(this.light.matrixWorld).negate())}}let c8=class extends Xl{constructor(e=10,t=10,n=4473924,r=8947848){n=new Bt(n),r=new Bt(r);const a=t/2,s=e/t,o=e/2,c=[],f=[];for(let v=0,y=0,_=-o;v<=t;v++,_+=s){c.push(-o,0,_,o,0,_),c.push(_,0,-o,_,0,o);const A=v===a?n:r;A.toArray(f,y),y+=3,A.toArray(f,y),y+=3,A.toArray(f,y),y+=3,A.toArray(f,y),y+=3}const d=new Fn;d.setAttribute("position",new Zt(c,3)),d.setAttribute("color",new Zt(f,3));const m=new Ka({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};class u8 extends Xl{constructor(e=10,t=16,n=8,r=64,a=4473924,s=8947848){a=new Bt(a),s=new Bt(s);const o=[],c=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,_=Math.cos(v)*e;o.push(0,0,0),o.push(y,0,_);const A=m&1?a:s;c.push(A.r,A.g,A.b),c.push(A.r,A.g,A.b)}for(let m=0;m<n;m++){const v=m&1?a:s,y=e-e/n*m;for(let _=0;_<r;_++){let A=_/r*(Math.PI*2),S=Math.sin(A)*y,x=Math.cos(A)*y;o.push(S,0,x),c.push(v.r,v.g,v.b),A=(_+1)/r*(Math.PI*2),S=Math.sin(A)*y,x=Math.cos(A)*y,o.push(S,0,x),c.push(v.r,v.g,v.b)}}const f=new Fn;f.setAttribute("position",new Zt(o,3)),f.setAttribute("color",new Zt(c,3));const d=new Ka({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const UD=new ue,k1=new ue,FD=new ue;class f8 extends ci{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Fn;r.setAttribute("position",new Zt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Ka({fog:!1,toneMapped:!1});this.lightPlane=new Gu(r,a),this.add(this.lightPlane),r=new Fn,r.setAttribute("position",new Zt([0,0,0,0,0,1],3)),this.targetLine=new Gu(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),UD.setFromMatrixPosition(this.light.matrixWorld),k1.setFromMatrixPosition(this.light.target.matrixWorld),FD.subVectors(k1,UD),this.lightPlane.lookAt(k1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(k1),this.targetLine.scale.z=FD.length()}}const W1=new ue,br=new c_;class h8 extends Xl{constructor(e){const t=new Fn,n=new Ka({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,A){c(_),c(A)}function c(_){r.push(0,0,0),a.push(0,0,0),s[_]===void 0&&(s[_]=[]),s[_].push(r.length/3-1)}t.setAttribute("position",new Zt(r,3)),t.setAttribute("color",new Zt(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new Bt(16755200),d=new Bt(16711680),m=new Bt(43775),v=new Bt(16777215),y=new Bt(3355443);this.setColors(f,d,m,v,y)}setColors(e,t,n,r,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;br.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===Go?-1:0;Rr("c",t,e,br,0,0,a),Rr("t",t,e,br,0,0,1),Rr("n1",t,e,br,-1,-1,a),Rr("n2",t,e,br,n,-1,a),Rr("n3",t,e,br,-1,r,a),Rr("n4",t,e,br,n,r,a),Rr("f1",t,e,br,-1,-1,1),Rr("f2",t,e,br,n,-1,1),Rr("f3",t,e,br,-1,r,1),Rr("f4",t,e,br,n,r,1),Rr("u1",t,e,br,n*.7,r*1.1,a),Rr("u2",t,e,br,-1*.7,r*1.1,a),Rr("u3",t,e,br,0,r*2,a),Rr("cf1",t,e,br,-1,0,1),Rr("cf2",t,e,br,n,0,1),Rr("cf3",t,e,br,0,-1,1),Rr("cf4",t,e,br,0,r,1),Rr("cn1",t,e,br,-1,0,a),Rr("cn2",t,e,br,n,0,a),Rr("cn3",t,e,br,0,-1,a),Rr("cn4",t,e,br,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rr(i,e,t,n,r,a,s){W1.set(r,a,s).unproject(n);const o=e[i];if(o!==void 0){const c=t.getAttribute("position");for(let f=0,d=o.length;f<d;f++)c.setXYZ(o[f],W1.x,W1.y,W1.z)}}const X1=new Ba;class d8 extends Xl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),a=new Fn;a.setIndex(new si(n,1)),a.setAttribute("position",new si(r,3)),super(a,new Ka({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&X1.setFromObject(this.object),X1.isEmpty())return;const e=X1.min,t=X1.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class p8 extends Xl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Fn;a.setIndex(new si(n,1)),a.setAttribute("position",new Zt(r,3)),super(a,new Ka({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class m8 extends Gu{constructor(e,t=1,n=16776960){const r=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Fn;s.setAttribute("position",new Zt(a,3)),s.computeBoundingSphere(),super(s,new Ka({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Fn;c.setAttribute("position",new Zt(o,3)),c.computeBoundingSphere(),this.add(new Ki(c,new xs({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const zD=new ue;let $1,LA;class g8 extends ci{constructor(e=new ue(0,0,1),t=new ue(0,0,0),n=1,r=16776960,a=n*.2,s=a*.2){super(),this.type="ArrowHelper",$1===void 0&&($1=new Fn,$1.setAttribute("position",new Zt([0,0,0,0,1,0],3)),LA=new m_(.5,1,5,1),LA.translate(0,-.5,0)),this.position.copy(t),this.line=new Gu($1,new Ka({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ki(LA,new xs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{zD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(zD,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class v8 extends Xl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Fn;r.setAttribute("position",new Zt(t,3)),r.setAttribute("color",new Zt(n,3));const a=new Ka({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,n){const r=new Bt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(n),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class y8{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new FS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,a,s){return this.currentPath.bezierCurveTo(e,t,n,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const E=[];for(let D=0,B=x.length;D<B;D++){const U=x[D],w=new Jd;w.curves=U.curves,E.push(w)}return E}function n(x,E){const D=E.length;let B=!1;for(let U=D-1,w=0;w<D;U=w++){let O=E[U],I=E[w],L=I.x-O.x,R=I.y-O.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(O=E[w],L=-L,I=E[U],R=-R),x.y<O.y||x.y>I.y)continue;if(x.y===O.y){if(x.x===O.x)return!0}else{const F=R*(x.x-O.x)-L*(x.y-O.y);if(F===0)return!0;if(F<0)continue;B=!B}}else{if(x.y!==O.y)continue;if(I.x<=x.x&&x.x<=O.x||O.x<=x.x&&x.x<=I.x)return!0}}return B}const r=Pu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,c;const f=[];if(a.length===1)return o=a[0],c=new Jd,c.curves=o.curves,f.push(c),f;let d=!r(a[0].getPoints());d=e?!d:d;const m=[],v=[];let y=[],_=0,A;v[_]=void 0,y[_]=[];for(let x=0,E=a.length;x<E;x++)o=a[x],A=o.getPoints(),s=r(A),s=e?!s:s,s?(!d&&v[_]&&_++,v[_]={s:new Jd,p:A},v[_].s.curves=o.curves,d&&_++,y[_]=[]):y[_].push({h:o,p:A[0]});if(!v[0])return t(a);if(v.length>1){let x=!1,E=0;for(let D=0,B=v.length;D<B;D++)m[D]=[];for(let D=0,B=v.length;D<B;D++){const U=y[D];for(let w=0;w<U.length;w++){const O=U[w];let I=!0;for(let L=0;L<v.length;L++)n(O.p,v[L].p)&&(D!==L&&E++,I?(I=!1,m[L].push(O)):x=!0);I&&m[D].push(O)}}E>0&&x===!1&&(y=m)}let S;for(let x=0,E=v.length;x<E;x++){c=v[x].s,f.push(c),S=y[x];for(let D=0,B=S.length;D<B;D++)c.holes.push(S[D].h)}return f}}class _8 extends po{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function x8(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function b8(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function S8(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function Zw(i,e,t,n){const r=M8(n);switch(t){case X2:return i*e;case s_:return i*e/r.components*r.byteLength;case o_:return i*e/r.components*r.byteLength;case j2:return i*e*2/r.components*r.byteLength;case gM:return i*e*2/r.components*r.byteLength;case $2:return i*e*3/r.components*r.byteLength;case Lr:return i*e*4/r.components*r.byteLength;case vM:return i*e*4/r.components*r.byteLength;case my:case gy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case vy:case yy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case cS:case fS:return Math.max(i,16)*Math.max(e,8)/4;case lS:case uS:return Math.max(i,8)*Math.max(e,8)/2;case hS:case dS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case pS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case mS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case gS:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case vS:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case yS:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case _S:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case xS:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case bS:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case SS:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case MS:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case ES:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case AS:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case TS:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case wS:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case CS:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case _y:case RS:case DS:return Math.ceil(i/4)*Math.ceil(e/4)*16;case q2:case BS:return Math.ceil(i/4)*Math.ceil(e/4)*8;case LS:case IS:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function M8(i){switch(i){case Ji:case hM:return{byteLength:1,components:1};case Bg:case dM:case Hr:return{byteLength:2,components:1};case pM:case mM:return{byteLength:2,components:4};case zl:case a_:case Yi:return{byteLength:4,components:1};case W2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class E8{static contain(e,t){return x8(e,t)}static cover(e,t){return b8(e,t)}static fill(e){return S8(e)}static getByteLength(e,t,n,r){return Zw(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xh);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function mU(){let i=null,e=!1,t=null,n=null;function r(a,s){t(a,s),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function A8(i){const e=new WeakMap;function t(o,c){const f=o.array,d=o.usage,m=f.byteLength,v=i.createBuffer();i.bindBuffer(c,v),i.bufferData(c,f,d),o.onUploadCallback();let y;if(f instanceof Float32Array)y=i.FLOAT;else if(f instanceof Uint16Array)o.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)y=i.SHORT;else if(f instanceof Uint32Array)y=i.UNSIGNED_INT;else if(f instanceof Int32Array)y=i.INT;else if(f instanceof Int8Array)y=i.BYTE;else if(f instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:o.version,size:m}}function n(o,c,f){const d=c.array,m=c.updateRanges;if(i.bindBuffer(f,o),m.length===0)i.bufferSubData(f,0,d);else{m.sort((y,_)=>y.start-_.start);let v=0;for(let y=1;y<m.length;y++){const _=m[v],A=m[y];A.start<=_.start+_.count+1?_.count=Math.max(_.count,A.start+A.count-_.start):(++v,m[v]=A)}m.length=v+1;for(let y=0,_=m.length;y<_;y++){const A=m[y];i.bufferSubData(f,A.start*d.BYTES_PER_ELEMENT,d,A.start,A.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(i.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const f=e.get(o);if(f===void 0)e.set(o,t(o,c));else if(f.version<o.version){if(f.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,o,c),f.version=o.version}}return{get:r,remove:a,update:s}}var T8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,w8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,C8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,R8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,D8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,B8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,L8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,I8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,P8=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,N8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,O8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,U8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,F8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,z8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,H8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,G8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,V8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,k8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,W8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,X8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,j8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,q8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Y8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,K8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,J8=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Z8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Q8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,eV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,tV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,nV="gl_FragColor = linearToOutputTexel( gl_FragColor );",iV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,rV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,aV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,lV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,cV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,uV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,hV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,pV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,yV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_V=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,SV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,MV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,EV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,AV=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,CV=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,RV=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DV=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,BV=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,LV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,IV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,PV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,NV=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,OV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,UV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FV=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,zV=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,HV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,GV=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,VV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,WV=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,XV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$V=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,YV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,KV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,JV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ZV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,QV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,e9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,t9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,n9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,i9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,r9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,a9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,s9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,o9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,l9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,c9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,u9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,f9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,h9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,d9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,p9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,m9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,g9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,v9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,y9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,x9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,b9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,S9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,M9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,E9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const A9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,T9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,C9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,D9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,L9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,I9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,P9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,N9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,O9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,U9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,F9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,z9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,H9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,k9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,W9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,j9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,q9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,K9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ek=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tk=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nk=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ik=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,On={alphahash_fragment:T8,alphahash_pars_fragment:w8,alphamap_fragment:C8,alphamap_pars_fragment:R8,alphatest_fragment:D8,alphatest_pars_fragment:B8,aomap_fragment:L8,aomap_pars_fragment:I8,batching_pars_vertex:P8,batching_vertex:N8,begin_vertex:O8,beginnormal_vertex:U8,bsdfs:F8,iridescence_fragment:z8,bumpmap_pars_fragment:H8,clipping_planes_fragment:G8,clipping_planes_pars_fragment:V8,clipping_planes_pars_vertex:k8,clipping_planes_vertex:W8,color_fragment:X8,color_pars_fragment:$8,color_pars_vertex:j8,color_vertex:q8,common:Y8,cube_uv_reflection_fragment:K8,defaultnormal_vertex:J8,displacementmap_pars_vertex:Z8,displacementmap_vertex:Q8,emissivemap_fragment:eV,emissivemap_pars_fragment:tV,colorspace_fragment:nV,colorspace_pars_fragment:iV,envmap_fragment:rV,envmap_common_pars_fragment:aV,envmap_pars_fragment:sV,envmap_pars_vertex:oV,envmap_physical_pars_fragment:yV,envmap_vertex:lV,fog_vertex:cV,fog_pars_vertex:uV,fog_fragment:fV,fog_pars_fragment:hV,gradientmap_pars_fragment:dV,lightmap_pars_fragment:pV,lights_lambert_fragment:mV,lights_lambert_pars_fragment:gV,lights_pars_begin:vV,lights_toon_fragment:_V,lights_toon_pars_fragment:xV,lights_phong_fragment:bV,lights_phong_pars_fragment:SV,lights_physical_fragment:MV,lights_physical_pars_fragment:EV,lights_fragment_begin:AV,lights_fragment_maps:TV,lights_fragment_end:wV,logdepthbuf_fragment:CV,logdepthbuf_pars_fragment:RV,logdepthbuf_pars_vertex:DV,logdepthbuf_vertex:BV,map_fragment:LV,map_pars_fragment:IV,map_particle_fragment:PV,map_particle_pars_fragment:NV,metalnessmap_fragment:OV,metalnessmap_pars_fragment:UV,morphinstance_vertex:FV,morphcolor_vertex:zV,morphnormal_vertex:HV,morphtarget_pars_vertex:GV,morphtarget_vertex:VV,normal_fragment_begin:kV,normal_fragment_maps:WV,normal_pars_fragment:XV,normal_pars_vertex:$V,normal_vertex:jV,normalmap_pars_fragment:qV,clearcoat_normal_fragment_begin:YV,clearcoat_normal_fragment_maps:KV,clearcoat_pars_fragment:JV,iridescence_pars_fragment:ZV,opaque_fragment:QV,packing:e9,premultiplied_alpha_fragment:t9,project_vertex:n9,dithering_fragment:i9,dithering_pars_fragment:r9,roughnessmap_fragment:a9,roughnessmap_pars_fragment:s9,shadowmap_pars_fragment:o9,shadowmap_pars_vertex:l9,shadowmap_vertex:c9,shadowmask_pars_fragment:u9,skinbase_vertex:f9,skinning_pars_vertex:h9,skinning_vertex:d9,skinnormal_vertex:p9,specularmap_fragment:m9,specularmap_pars_fragment:g9,tonemapping_fragment:v9,tonemapping_pars_fragment:y9,transmission_fragment:_9,transmission_pars_fragment:x9,uv_pars_fragment:b9,uv_pars_vertex:S9,uv_vertex:M9,worldpos_vertex:E9,background_vert:A9,background_frag:T9,backgroundCube_vert:w9,backgroundCube_frag:C9,cube_vert:R9,cube_frag:D9,depth_vert:B9,depth_frag:L9,distanceRGBA_vert:I9,distanceRGBA_frag:P9,equirect_vert:N9,equirect_frag:O9,linedashed_vert:U9,linedashed_frag:F9,meshbasic_vert:z9,meshbasic_frag:H9,meshlambert_vert:G9,meshlambert_frag:V9,meshmatcap_vert:k9,meshmatcap_frag:W9,meshnormal_vert:X9,meshnormal_frag:$9,meshphong_vert:j9,meshphong_frag:q9,meshphysical_vert:Y9,meshphysical_frag:K9,meshtoon_vert:J9,meshtoon_frag:Z9,points_vert:Q9,points_frag:ek,shadow_vert:tk,shadow_frag:nk,sprite_vert:ik,sprite_frag:rk},Vt={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Un},alphaMap:{value:null},alphaMapTransform:{value:new Un},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Un}},envmap:{envMap:{value:null},envMapRotation:{value:new Un},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Un}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Un}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Un},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Un},normalScale:{value:new ot(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Un},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Un}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Un}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Un}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Un},alphaTest:{value:0},uvTransform:{value:new Un}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new ot(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Un},alphaMap:{value:null},alphaMapTransform:{value:new Un},alphaTest:{value:0}}},Ll={basic:{uniforms:ms([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:ms([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:ms([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:ms([Vt.common,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.roughnessmap,Vt.metalnessmap,Vt.fog,Vt.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:ms([Vt.common,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.gradientmap,Vt.fog,Vt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:ms([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:ms([Vt.points,Vt.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:ms([Vt.common,Vt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:ms([Vt.common,Vt.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:ms([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:ms([Vt.sprite,Vt.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new Un},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:On.background_vert,fragmentShader:On.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Un}},vertexShader:On.backgroundCube_vert,fragmentShader:On.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distanceRGBA:{uniforms:ms([Vt.common,Vt.displacementmap,{referencePosition:{value:new ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distanceRGBA_vert,fragmentShader:On.distanceRGBA_frag},shadow:{uniforms:ms([Vt.lights,Vt.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};Ll.physical={uniforms:ms([Ll.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Un},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Un},clearcoatNormalScale:{value:new ot(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Un},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Un},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Un},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Un},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Un},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Un},transmissionSamplerSize:{value:new ot},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Un},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Un},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Un},anisotropyVector:{value:new ot},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Un}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};const j1={r:0,b:0,g:0},Rd=new Hl,ak=new mn;function sk(i,e,t,n,r,a,s){const o=new Bt(0);let c=a===!0?0:1,f,d,m=null,v=0,y=null;function _(D){let B=D.isScene===!0?D.background:null;return B&&B.isTexture&&(B=(D.backgroundBlurriness>0?t:e).get(B)),B}function A(D){let B=!1;const U=_(D);U===null?x(o,c):U&&U.isColor&&(x(U,1),B=!0);const w=i.xr.getEnvironmentBlendMode();w==="additive"?n.buffers.color.setClear(0,0,0,1,s):w==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(i.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function S(D,B){const U=_(B);U&&(U.isCubeTexture||U.mapping===$g)?(d===void 0&&(d=new Ki(new l_(1,1,1),new Wi({name:"BackgroundCubeMaterial",uniforms:Ug(Ll.backgroundCube.uniforms),vertexShader:Ll.backgroundCube.vertexShader,fragmentShader:Ll.backgroundCube.fragmentShader,side:Zr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(w,O,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Rd.copy(B.backgroundRotation),Rd.x*=-1,Rd.y*=-1,Rd.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(Rd.y*=-1,Rd.z*=-1),d.material.uniforms.envMap.value=U,d.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(ak.makeRotationFromEuler(Rd)),d.material.toneMapped=ai.getTransfer(U.colorSpace)!==Ti,(m!==U||v!==U.version||y!==i.toneMapping)&&(d.material.needsUpdate=!0,m=U,v=U.version,y=i.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null)):U&&U.isTexture&&(f===void 0&&(f=new Ki(new qg(2,2),new Wi({name:"BackgroundMaterial",uniforms:Ug(Ll.background.uniforms),vertexShader:Ll.background.vertexShader,fragmentShader:Ll.background.fragmentShader,side:Fl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=U,f.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,f.material.toneMapped=ai.getTransfer(U.colorSpace)!==Ti,U.matrixAutoUpdate===!0&&U.updateMatrix(),f.material.uniforms.uvTransform.value.copy(U.matrix),(m!==U||v!==U.version||y!==i.toneMapping)&&(f.material.needsUpdate=!0,m=U,v=U.version,y=i.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null))}function x(D,B){D.getRGB(j1,_O(i)),n.buffers.color.setClear(j1.r,j1.g,j1.b,B,s)}function E(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return o},setClearColor:function(D,B=1){o.set(D),c=B,x(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(D){c=D,x(o,c)},render:A,addToRenderList:S,dispose:E}}function ok(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=v(null);let a=r,s=!1;function o(R,F,G,V,$){let K=!1;const z=m(V,G,F);a!==z&&(a=z,f(a.object)),K=y(R,V,G,$),K&&_(R,V,G,$),$!==null&&e.update($,i.ELEMENT_ARRAY_BUFFER),(K||s)&&(s=!1,B(R,F,G,V),$!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return i.createVertexArray()}function f(R){return i.bindVertexArray(R)}function d(R){return i.deleteVertexArray(R)}function m(R,F,G){const V=G.wireframe===!0;let $=n[R.id];$===void 0&&($={},n[R.id]=$);let K=$[F.id];K===void 0&&(K={},$[F.id]=K);let z=K[V];return z===void 0&&(z=v(c()),K[V]=z),z}function v(R){const F=[],G=[],V=[];for(let $=0;$<t;$++)F[$]=0,G[$]=0,V[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:G,attributeDivisors:V,object:R,attributes:{},index:null}}function y(R,F,G,V){const $=a.attributes,K=F.attributes;let z=0;const ee=G.getAttributes();for(const ne in ee)if(ee[ne].location>=0){const Y=$[ne];let fe=K[ne];if(fe===void 0&&(ne==="instanceMatrix"&&R.instanceMatrix&&(fe=R.instanceMatrix),ne==="instanceColor"&&R.instanceColor&&(fe=R.instanceColor)),Y===void 0||Y.attribute!==fe||fe&&Y.data!==fe.data)return!0;z++}return a.attributesNum!==z||a.index!==V}function _(R,F,G,V){const $={},K=F.attributes;let z=0;const ee=G.getAttributes();for(const ne in ee)if(ee[ne].location>=0){let Y=K[ne];Y===void 0&&(ne==="instanceMatrix"&&R.instanceMatrix&&(Y=R.instanceMatrix),ne==="instanceColor"&&R.instanceColor&&(Y=R.instanceColor));const fe={};fe.attribute=Y,Y&&Y.data&&(fe.data=Y.data),$[ne]=fe,z++}a.attributes=$,a.attributesNum=z,a.index=V}function A(){const R=a.newAttributes;for(let F=0,G=R.length;F<G;F++)R[F]=0}function S(R){x(R,0)}function x(R,F){const G=a.newAttributes,V=a.enabledAttributes,$=a.attributeDivisors;G[R]=1,V[R]===0&&(i.enableVertexAttribArray(R),V[R]=1),$[R]!==F&&(i.vertexAttribDivisor(R,F),$[R]=F)}function E(){const R=a.newAttributes,F=a.enabledAttributes;for(let G=0,V=F.length;G<V;G++)F[G]!==R[G]&&(i.disableVertexAttribArray(G),F[G]=0)}function D(R,F,G,V,$,K,z){z===!0?i.vertexAttribIPointer(R,F,G,$,K):i.vertexAttribPointer(R,F,G,V,$,K)}function B(R,F,G,V){A();const $=V.attributes,K=G.getAttributes(),z=F.defaultAttributeValues;for(const ee in K){const ne=K[ee];if(ne.location>=0){let de=$[ee];if(de===void 0&&(ee==="instanceMatrix"&&R.instanceMatrix&&(de=R.instanceMatrix),ee==="instanceColor"&&R.instanceColor&&(de=R.instanceColor)),de!==void 0){const Y=de.normalized,fe=de.itemSize,Re=e.get(de);if(Re===void 0)continue;const Le=Re.buffer,oe=Re.type,ke=Re.bytesPerElement,Ge=oe===i.INT||oe===i.UNSIGNED_INT||de.gpuType===a_;if(de.isInterleavedBufferAttribute){const Ze=de.data,Ae=Ze.stride,Q=de.offset;if(Ze.isInstancedInterleavedBuffer){for(let le=0;le<ne.locationSize;le++)x(ne.location+le,Ze.meshPerAttribute);R.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=Ze.meshPerAttribute*Ze.count)}else for(let le=0;le<ne.locationSize;le++)S(ne.location+le);i.bindBuffer(i.ARRAY_BUFFER,Le);for(let le=0;le<ne.locationSize;le++)D(ne.location+le,fe/ne.locationSize,oe,Y,Ae*ke,(Q+fe/ne.locationSize*le)*ke,Ge)}else{if(de.isInstancedBufferAttribute){for(let Ze=0;Ze<ne.locationSize;Ze++)x(ne.location+Ze,de.meshPerAttribute);R.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let Ze=0;Ze<ne.locationSize;Ze++)S(ne.location+Ze);i.bindBuffer(i.ARRAY_BUFFER,Le);for(let Ze=0;Ze<ne.locationSize;Ze++)D(ne.location+Ze,fe/ne.locationSize,oe,Y,fe*ke,fe/ne.locationSize*Ze*ke,Ge)}}else if(z!==void 0){const Y=z[ee];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv(ne.location,Y);break;case 3:i.vertexAttrib3fv(ne.location,Y);break;case 4:i.vertexAttrib4fv(ne.location,Y);break;default:i.vertexAttrib1fv(ne.location,Y)}}}}E()}function U(){I();for(const R in n){const F=n[R];for(const G in F){const V=F[G];for(const $ in V)d(V[$].object),delete V[$];delete F[G]}delete n[R]}}function w(R){if(n[R.id]===void 0)return;const F=n[R.id];for(const G in F){const V=F[G];for(const $ in V)d(V[$].object),delete V[$];delete F[G]}delete n[R.id]}function O(R){for(const F in n){const G=n[F];if(G[R.id]===void 0)continue;const V=G[R.id];for(const $ in V)d(V[$].object),delete V[$];delete G[R.id]}}function I(){L(),s=!0,a!==r&&(a=r,f(a.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:I,resetDefaultState:L,dispose:U,releaseStatesOfGeometry:w,releaseStatesOfProgram:O,initAttributes:A,enableAttribute:S,disableUnusedAttributes:E}}function lk(i,e,t){let n;function r(f){n=f}function a(f,d){i.drawArrays(n,f,d),t.update(d,n,1)}function s(f,d,m){m!==0&&(i.drawArraysInstanced(n,f,d,m),t.update(d,n,m))}function o(f,d,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,d,0,m);let y=0;for(let _=0;_<m;_++)y+=d[_];t.update(y,n,1)}function c(f,d,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<f.length;_++)s(f[_],d[_],v[_]);else{y.multiDrawArraysInstancedWEBGL(n,f,0,d,0,v,0,m);let _=0;for(let A=0;A<m;A++)_+=d[A]*v[A];t.update(_,n,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function ck(i,e,t,n){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(O){return!(O!==Lr&&n.convert(O)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(O){const I=O===Hr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==Ji&&n.convert(O)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==Yi&&!I)}function c(O){if(O==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const d=c(f);d!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);const m=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),x=i.getParameter(i.MAX_VERTEX_ATTRIBS),E=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),D=i.getParameter(i.MAX_VARYING_VECTORS),B=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),U=_>0,w=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:f,logarithmicDepthBuffer:m,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:_,maxTextureSize:A,maxCubemapSize:S,maxAttributes:x,maxVertexUniforms:E,maxVaryings:D,maxFragmentUniforms:B,vertexTextures:U,maxSamples:w}}function uk(i){const e=this;let t=null,n=0,r=!1,a=!1;const s=new Ru,o=new Un,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||n!==0||r;return r=v,n=m.length,y},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(m,v){t=d(m,v,0)},this.setState=function(m,v,y){const _=m.clippingPlanes,A=m.clipIntersection,S=m.clipShadows,x=i.get(m);if(!r||_===null||_.length===0||a&&!S)a?d(null):f();else{const E=a?0:n,D=E*4;let B=x.clippingState||null;c.value=B,B=d(_,v,D,y);for(let U=0;U!==D;++U)B[U]=t[U];x.clippingState=B,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=E}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(m,v,y,_){const A=m!==null?m.length:0;let S=null;if(A!==0){if(S=c.value,_!==!0||S===null){const x=y+A*4,E=v.matrixWorldInverse;o.getNormalMatrix(E),(S===null||S.length<x)&&(S=new Float32Array(x));for(let D=0,B=y;D!==A;++D,B+=4)s.copy(m[D]).applyMatrix4(E,o),s.normal.toArray(S,B),S[B+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,S}}function fk(i){let e=new WeakMap;function t(s,o){return o===Rg?s.mapping=zc:o===Ny&&(s.mapping=mh),s}function n(s){if(s&&s.isTexture){const o=s.mapping;if(o===Rg||o===Ny)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=new nC(c.height);return f.fromEquirectangularTexture(i,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const vg=4,HD=[.125,.215,.35,.446,.526,.582],Hd=20,IA=new Uc,GD=new Bt;let PA=null,NA=0,OA=0,UA=!1;const Fd=(1+Math.sqrt(5))/2,Hm=1/Fd,VD=[new ue(-Fd,Hm,0),new ue(Fd,Hm,0),new ue(-Hm,0,Fd),new ue(Hm,0,Fd),new ue(0,Fd,-Hm),new ue(0,Fd,Hm),new ue(-1,1,-1),new ue(1,1,-1),new ue(-1,1,1),new ue(1,1,1)],hk=new ue;class Qw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,a={}){const{size:s=256,position:o=hk}=a;PA=this._renderer.getRenderTarget(),NA=this._renderer.getActiveCubeFace(),OA=this._renderer.getActiveMipmapLevel(),UA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,r,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(PA,NA,OA),this._renderer.xr.enabled=UA,e.scissorTest=!1,q1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zc||e.mapping===mh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),PA=this._renderer.getRenderTarget(),NA=this._renderer.getActiveCubeFace(),OA=this._renderer.getActiveMipmapLevel(),UA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Qn,minFilter:Qn,generateMipmaps:!1,type:Hr,format:Lr,colorSpace:fo,depthBuffer:!1},r=kD(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=kD(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dk(a)),this._blurMaterial=pk(a,e,t)}return r}_compileMaterial(e){const t=new Ki(this._lodPlanes[0],e);this._renderer.compile(t,IA)}_sceneToCubeUV(e,t,n,r,a){const c=new rr(90,1,t,n),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,y=m.toneMapping;m.getClearColor(GD),m.toneMapping=Nl,m.autoClear=!1;const _=new xs({name:"PMREM.Background",side:Zr,depthWrite:!1,depthTest:!1}),A=new Ki(new l_,_);let S=!1;const x=e.background;x?x.isColor&&(_.color.copy(x),e.background=null,S=!0):(_.color.copy(GD),S=!0);for(let E=0;E<6;E++){const D=E%3;D===0?(c.up.set(0,f[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+d[E],a.y,a.z)):D===1?(c.up.set(0,0,f[E]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+d[E],a.z)):(c.up.set(0,f[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+d[E]));const B=this._cubeSize;q1(r,D*B,E>2?B:0,B,B),m.setRenderTarget(r),S&&m.render(A,c),m.render(e,c)}A.geometry.dispose(),A.material.dispose(),m.toneMapping=y,m.autoClear=v,e.background=x}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===zc||e.mapping===mh;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=XD()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WD());const a=r?this._cubemapMaterial:this._equirectMaterial,s=new Ki(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;q1(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(s,IA)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=VD[(r-a-1)%VD.length];this._blur(e,a-1,a,s,o)}t.autoClear=n}_blur(e,t,n,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",a),this._halfBlur(s,e,n,n,r,"longitudinal",a)}_halfBlur(e,t,n,r,a,s,o){const c=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new Ki(this._lodPlanes[r],f),v=f.uniforms,y=this._sizeLods[n]-1,_=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Hd-1),A=a/_,S=isFinite(a)?1+Math.floor(d*A):Hd;S>Hd&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Hd}`);const x=[];let E=0;for(let O=0;O<Hd;++O){const I=O/A,L=Math.exp(-I*I/2);x.push(L),O===0?E+=L:O<S&&(E+=2*L)}for(let O=0;O<x.length;O++)x[O]=x[O]/E;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=x,v.latitudinal.value=s==="latitudinal",o&&(v.poleAxis.value=o);const{_lodMax:D}=this;v.dTheta.value=_,v.mipInt.value=D-n;const B=this._sizeLods[r],U=3*B*(r>D-vg?r-D+vg:0),w=4*(this._cubeSize-B);q1(t,U,w,3*B,2*B),c.setRenderTarget(t),c.render(m,IA)}}function dk(i){const e=[],t=[],n=[];let r=i;const a=i-vg+1+HD.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);t.push(o);let c=1/o;s>i-vg?c=HD[s-i+vg-1]:s===0&&(c=0),n.push(c);const f=1/(o-2),d=-f,m=1+f,v=[d,d,m,d,m,m,d,d,m,m,d,m],y=6,_=6,A=3,S=2,x=1,E=new Float32Array(A*_*y),D=new Float32Array(S*_*y),B=new Float32Array(x*_*y);for(let w=0;w<y;w++){const O=w%3*2/3-1,I=w>2?0:-1,L=[O,I,0,O+2/3,I,0,O+2/3,I+1,0,O,I,0,O+2/3,I+1,0,O,I+1,0];E.set(L,A*_*w),D.set(v,S*_*w);const R=[w,w,w,w,w,w];B.set(R,x*_*w)}const U=new Fn;U.setAttribute("position",new si(E,A)),U.setAttribute("uv",new si(D,S)),U.setAttribute("faceIndex",new si(B,x)),e.push(U),r>vg&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function kD(i,e,t){const n=new ar(i,e,t);return n.texture.mapping=$g,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function q1(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function pk(i,e,t){const n=new Float32Array(Hd),r=new ue(0,1,0);return new Wi({name:"SphericalGaussianBlur",defines:{n:Hd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:PC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gr,depthTest:!1,depthWrite:!1})}function WD(){return new Wi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gr,depthTest:!1,depthWrite:!1})}function XD(){return new Wi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gr,depthTest:!1,depthWrite:!1})}function PC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mk(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const c=o.mapping,f=c===Rg||c===Ny,d=c===zc||c===mh;if(f||d){let m=e.get(o);const v=m!==void 0?m.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==v)return t===null&&(t=new Qw(i)),m=f?t.fromEquirectangular(o,m):t.fromCubemap(o,m),m.texture.pmremVersion=o.pmremVersion,e.set(o,m),m.texture;if(m!==void 0)return m.texture;{const y=o.image;return f&&y&&y.height>0||d&&y&&r(y)?(t===null&&(t=new Qw(i)),m=f?t.fromEquirectangular(o):t.fromCubemap(o),m.texture.pmremVersion=o.pmremVersion,e.set(o,m),o.addEventListener("dispose",a),m.texture):null}}}return o}function r(o){let c=0;const f=6;for(let d=0;d<f;d++)o[d]!==void 0&&c++;return c===f}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function gk(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&Mg("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function vk(i,e,t,n){const r={},a=new WeakMap;function s(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const _ in v.attributes)e.remove(v.attributes[_]);v.removeEventListener("dispose",s),delete r[v.id];const y=a.get(v);y&&(e.remove(y),a.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function o(m,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function c(m){const v=m.attributes;for(const y in v)e.update(v[y],i.ARRAY_BUFFER)}function f(m){const v=[],y=m.index,_=m.attributes.position;let A=0;if(y!==null){const E=y.array;A=y.version;for(let D=0,B=E.length;D<B;D+=3){const U=E[D+0],w=E[D+1],O=E[D+2];v.push(U,w,w,O,O,U)}}else if(_!==void 0){const E=_.array;A=_.version;for(let D=0,B=E.length/3-1;D<B;D+=3){const U=D+0,w=D+1,O=D+2;v.push(U,w,w,O,O,U)}}else return;const S=new(fO(v)?tC:eC)(v,1);S.version=A;const x=a.get(m);x&&e.remove(x),a.set(m,S)}function d(m){const v=a.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&f(m)}else f(m);return a.get(m)}return{get:o,update:c,getWireframeAttribute:d}}function yk(i,e,t){let n;function r(v){n=v}let a,s;function o(v){a=v.type,s=v.bytesPerElement}function c(v,y){i.drawElements(n,y,a,v*s),t.update(y,n,1)}function f(v,y,_){_!==0&&(i.drawElementsInstanced(n,y,a,v*s,_),t.update(y,n,_))}function d(v,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,a,v,0,_);let S=0;for(let x=0;x<_;x++)S+=y[x];t.update(S,n,1)}function m(v,y,_,A){if(_===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let x=0;x<v.length;x++)f(v[x]/s,y[x],A[x]);else{S.multiDrawElementsInstancedWEBGL(n,y,0,a,v,0,A,0,_);let x=0;for(let E=0;E<_;E++)x+=y[E]*A[E];t.update(x,n,1)}}this.setMode=r,this.setIndex=o,this.render=c,this.renderInstances=f,this.renderMultiDraw=d,this.renderMultiDrawInstances=m}function _k(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,s,o){switch(t.calls++,s){case i.TRIANGLES:t.triangles+=o*(a/3);break;case i.LINES:t.lines+=o*(a/2);break;case i.LINE_STRIP:t.lines+=o*(a-1);break;case i.LINE_LOOP:t.lines+=o*a;break;case i.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function xk(i,e,t){const n=new WeakMap,r=new ni;function a(s,o,c){const f=s.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,m=d!==void 0?d.length:0;let v=n.get(o);if(v===void 0||v.count!==m){let R=function(){I.dispose(),n.delete(o),o.removeEventListener("dispose",R)};var y=R;v!==void 0&&v.texture.dispose();const _=o.morphAttributes.position!==void 0,A=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,x=o.morphAttributes.position||[],E=o.morphAttributes.normal||[],D=o.morphAttributes.color||[];let B=0;_===!0&&(B=1),A===!0&&(B=2),S===!0&&(B=3);let U=o.attributes.position.count*B,w=1;U>e.maxTextureSize&&(w=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const O=new Float32Array(U*w*4*m),I=new _M(O,U,w,m);I.type=Yi,I.needsUpdate=!0;const L=B*4;for(let F=0;F<m;F++){const G=x[F],V=E[F],$=D[F],K=U*w*4*F;for(let z=0;z<G.count;z++){const ee=z*L;_===!0&&(r.fromBufferAttribute(G,z),O[K+ee+0]=r.x,O[K+ee+1]=r.y,O[K+ee+2]=r.z,O[K+ee+3]=0),A===!0&&(r.fromBufferAttribute(V,z),O[K+ee+4]=r.x,O[K+ee+5]=r.y,O[K+ee+6]=r.z,O[K+ee+7]=0),S===!0&&(r.fromBufferAttribute($,z),O[K+ee+8]=r.x,O[K+ee+9]=r.y,O[K+ee+10]=r.z,O[K+ee+11]=$.itemSize===4?r.w:1)}}v={count:m,texture:I,size:new ot(U,w)},n.set(o,v),o.addEventListener("dispose",R)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",s.morphTexture,t);else{let _=0;for(let S=0;S<f.length;S++)_+=f[S];const A=o.morphTargetsRelative?1:1-_;c.getUniforms().setValue(i,"morphTargetBaseInfluence",A),c.getUniforms().setValue(i,"morphTargetInfluences",f)}c.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:a}}function bk(i,e,t,n){let r=new WeakMap;function a(c){const f=n.render.frame,d=c.geometry,m=e.get(c,d);if(r.get(m)!==f&&(e.update(m),r.set(m,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),r.get(c)!==f&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==f&&(v.update(),r.set(v,f))}return m}function s(){r=new WeakMap}function o(c){const f=c.target;f.removeEventListener("dispose",o),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const gU=new mi,$D=new d_(1,1),vU=new _M,yU=new xM,_U=new u_,jD=[],qD=[],YD=new Float32Array(16),KD=new Float32Array(9),JD=new Float32Array(4);function Jg(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let a=jD[r];if(a===void 0&&(a=new Float32Array(r),jD[r]=a),e!==0){n.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,i[s].toArray(a,o)}return a}function ea(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function ta(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function zM(i,e){let t=qD[e];t===void 0&&(t=new Int32Array(e),qD[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Sk(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Mk(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ea(t,e))return;i.uniform2fv(this.addr,e),ta(t,e)}}function Ek(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ea(t,e))return;i.uniform3fv(this.addr,e),ta(t,e)}}function Ak(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ea(t,e))return;i.uniform4fv(this.addr,e),ta(t,e)}}function Tk(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ea(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),ta(t,e)}else{if(ea(t,n))return;JD.set(n),i.uniformMatrix2fv(this.addr,!1,JD),ta(t,n)}}function wk(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ea(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),ta(t,e)}else{if(ea(t,n))return;KD.set(n),i.uniformMatrix3fv(this.addr,!1,KD),ta(t,n)}}function Ck(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ea(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),ta(t,e)}else{if(ea(t,n))return;YD.set(n),i.uniformMatrix4fv(this.addr,!1,YD),ta(t,n)}}function Rk(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Dk(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ea(t,e))return;i.uniform2iv(this.addr,e),ta(t,e)}}function Bk(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ea(t,e))return;i.uniform3iv(this.addr,e),ta(t,e)}}function Lk(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ea(t,e))return;i.uniform4iv(this.addr,e),ta(t,e)}}function Ik(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Pk(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ea(t,e))return;i.uniform2uiv(this.addr,e),ta(t,e)}}function Nk(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ea(t,e))return;i.uniform3uiv(this.addr,e),ta(t,e)}}function Ok(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ea(t,e))return;i.uniform4uiv(this.addr,e),ta(t,e)}}function Uk(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let a;this.type===i.SAMPLER_2D_SHADOW?($D.compareFunction=J2,a=$D):a=gU,t.setTexture2D(e||a,r)}function Fk(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||yU,r)}function zk(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||_U,r)}function Hk(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||vU,r)}function Gk(i){switch(i){case 5126:return Sk;case 35664:return Mk;case 35665:return Ek;case 35666:return Ak;case 35674:return Tk;case 35675:return wk;case 35676:return Ck;case 5124:case 35670:return Rk;case 35667:case 35671:return Dk;case 35668:case 35672:return Bk;case 35669:case 35673:return Lk;case 5125:return Ik;case 36294:return Pk;case 36295:return Nk;case 36296:return Ok;case 35678:case 36198:case 36298:case 36306:case 35682:return Uk;case 35679:case 36299:case 36307:return Fk;case 35680:case 36300:case 36308:case 36293:return zk;case 36289:case 36303:case 36311:case 36292:return Hk}}function Vk(i,e){i.uniform1fv(this.addr,e)}function kk(i,e){const t=Jg(e,this.size,2);i.uniform2fv(this.addr,t)}function Wk(i,e){const t=Jg(e,this.size,3);i.uniform3fv(this.addr,t)}function Xk(i,e){const t=Jg(e,this.size,4);i.uniform4fv(this.addr,t)}function $k(i,e){const t=Jg(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function jk(i,e){const t=Jg(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function qk(i,e){const t=Jg(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Yk(i,e){i.uniform1iv(this.addr,e)}function Kk(i,e){i.uniform2iv(this.addr,e)}function Jk(i,e){i.uniform3iv(this.addr,e)}function Zk(i,e){i.uniform4iv(this.addr,e)}function Qk(i,e){i.uniform1uiv(this.addr,e)}function e7(i,e){i.uniform2uiv(this.addr,e)}function t7(i,e){i.uniform3uiv(this.addr,e)}function n7(i,e){i.uniform4uiv(this.addr,e)}function i7(i,e,t){const n=this.cache,r=e.length,a=zM(t,r);ea(n,a)||(i.uniform1iv(this.addr,a),ta(n,a));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||gU,a[s])}function r7(i,e,t){const n=this.cache,r=e.length,a=zM(t,r);ea(n,a)||(i.uniform1iv(this.addr,a),ta(n,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||yU,a[s])}function a7(i,e,t){const n=this.cache,r=e.length,a=zM(t,r);ea(n,a)||(i.uniform1iv(this.addr,a),ta(n,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||_U,a[s])}function s7(i,e,t){const n=this.cache,r=e.length,a=zM(t,r);ea(n,a)||(i.uniform1iv(this.addr,a),ta(n,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||vU,a[s])}function o7(i){switch(i){case 5126:return Vk;case 35664:return kk;case 35665:return Wk;case 35666:return Xk;case 35674:return $k;case 35675:return jk;case 35676:return qk;case 5124:case 35670:return Yk;case 35667:case 35671:return Kk;case 35668:case 35672:return Jk;case 35669:case 35673:return Zk;case 5125:return Qk;case 36294:return e7;case 36295:return t7;case 36296:return n7;case 35678:case 36198:case 36298:case 36306:case 35682:return i7;case 35679:case 36299:case 36307:return r7;case 35680:case 36300:case 36308:case 36293:return a7;case 36289:case 36303:case 36311:case 36292:return s7}}let l7=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Gk(t.type)}},c7=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=o7(t.type)}},u7=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,t[o.id],n)}}};const FA=/(\w+)(\])?(\[|\.)?/g;function ZD(i,e){i.seq.push(e),i.map[e.id]=e}function f7(i,e,t){const n=i.name,r=n.length;for(FA.lastIndex=0;;){const a=FA.exec(n),s=FA.lastIndex;let o=a[1];const c=a[2]==="]",f=a[3];if(c&&(o=o|0),f===void 0||f==="["&&s+2===r){ZD(t,f===void 0?new l7(o,i,e):new c7(o,i,e));break}else{let m=t.map[o];m===void 0&&(m=new u7(o),ZD(t,m)),t=m}}}let jb=class{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const a=e.getActiveUniform(t,r),s=e.getUniformLocation(t,a.name);f7(a,s,this)}}setValue(e,t,n,r){const a=this.map[t];a!==void 0&&a.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let a=0,s=t.length;a!==s;++a){const o=t[a],c=n[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&n.push(s)}return n}};function QD(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const h7=37297;let d7=0;function p7(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const o=s+1;n.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return n.join(`
`)}const eB=new Un;function m7(i){ai._getMatrix(eB,ai.workingColorSpace,i);const e=`mat3( ${eB.elements.map(t=>t.toFixed(4))} )`;switch(ai.getTransfer(i)){case Uy:return[e,"LinearTransferOETF"];case Ti:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function tB(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+r+`

`+p7(i.getShaderSource(e),s)}else return r}function g7(i,e){const t=m7(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function v7(i,e){let t;switch(e){case VN:t="Linear";break;case kN:t="Reinhard";break;case WN:t="Cineon";break;case k2:t="ACESFilmic";break;case $N:t="AgX";break;case jN:t="Neutral";break;case XN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Y1=new ue;function y7(){ai.getLuminanceCoefficients(Y1);const i=Y1.x.toFixed(4),e=Y1.y.toFixed(4),t=Y1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function _7(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cy).join(`
`)}function x7(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function b7(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const a=i.getActiveAttrib(e,r),s=a.name;let o=1;a.type===i.FLOAT_MAT2&&(o=2),a.type===i.FLOAT_MAT3&&(o=3),a.type===i.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:i.getAttribLocation(e,s),locationSize:o}}return t}function cy(i){return i!==""}function nB(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function iB(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const S7=/^[ \t]*#include +<([\w\d./]+)>/gm;function e2(i){return i.replace(S7,E7)}const M7=new Map;function E7(i,e){let t=On[e];if(t===void 0){const n=M7.get(e);if(n!==void 0)t=On[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return e2(t)}const A7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rB(i){return i.replace(A7,T7)}function T7(i,e,t,n){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function aB(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function w7(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===uM?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===py?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Bl&&(e="SHADOWMAP_TYPE_VSM"),e}function C7(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case zc:case mh:e="ENVMAP_TYPE_CUBE";break;case $g:e="ENVMAP_TYPE_CUBE_UV";break}return e}function R7(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case mh:e="ENVMAP_MODE_REFRACTION";break}return e}function D7(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case r_:e="ENVMAP_BLENDING_MULTIPLY";break;case HN:e="ENVMAP_BLENDING_MIX";break;case GN:e="ENVMAP_BLENDING_ADD";break}return e}function B7(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function L7(i,e,t,n){const r=i.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const c=w7(t),f=C7(t),d=R7(t),m=D7(t),v=B7(t),y=_7(t),_=x7(a),A=r.createProgram();let S,x,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(cy).join(`
`),S.length>0&&(S+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(cy).join(`
`),x.length>0&&(x+=`
`)):(S=[aB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cy).join(`
`),x=[aB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Nl?"#define TONE_MAPPING":"",t.toneMapping!==Nl?On.tonemapping_pars_fragment:"",t.toneMapping!==Nl?v7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",On.colorspace_pars_fragment,g7("linearToOutputTexel",t.outputColorSpace),y7(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cy).join(`
`)),s=e2(s),s=nB(s,t),s=iB(s,t),o=e2(o),o=nB(o,t),o=iB(o,t),s=rB(s),o=rB(o),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,x=["#define varying in",t.glslVersion===Ww?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ww?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const D=E+S+s,B=E+x+o,U=QD(r,r.VERTEX_SHADER,D),w=QD(r,r.FRAGMENT_SHADER,B);r.attachShader(A,U),r.attachShader(A,w),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function O(F){if(i.debug.checkShaderErrors){const G=r.getProgramInfoLog(A).trim(),V=r.getShaderInfoLog(U).trim(),$=r.getShaderInfoLog(w).trim();let K=!0,z=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(K=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,A,U,w);else{const ee=tB(r,U,"vertex"),ne=tB(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+G+`
`+ee+`
`+ne)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(V===""||$==="")&&(z=!1);z&&(F.diagnostics={runnable:K,programLog:G,vertexShader:{log:V,prefix:S},fragmentShader:{log:$,prefix:x}})}r.deleteShader(U),r.deleteShader(w),I=new jb(r,A),L=b7(r,A)}let I;this.getUniforms=function(){return I===void 0&&O(this),I};let L;this.getAttributes=function(){return L===void 0&&O(this),L};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(A,h7)),R},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=d7++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=U,this.fragmentShader=w,this}let I7=0;class P7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new N7(e),t.set(e,n)),n}}class N7{constructor(e){this.id=I7++,this.code=e,this.usedTimes=0}}function O7(i,e,t,n,r,a,s){const o=new Og,c=new P7,f=new Set,d=[],m=r.logarithmicDepthBuffer,v=r.vertexTextures;let y=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(L){return f.add(L),L===0?"uv":`uv${L}`}function S(L,R,F,G,V){const $=G.fog,K=V.geometry,z=L.isMeshStandardMaterial?G.environment:null,ee=(L.isMeshStandardMaterial?t:e).get(L.envMap||z),ne=ee&&ee.mapping===$g?ee.image.height:null,de=_[L.type];L.precision!==null&&(y=r.getMaxPrecision(L.precision),y!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",y,"instead."));const Y=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,fe=Y!==void 0?Y.length:0;let Re=0;K.morphAttributes.position!==void 0&&(Re=1),K.morphAttributes.normal!==void 0&&(Re=2),K.morphAttributes.color!==void 0&&(Re=3);let Le,oe,ke,Ge;if(de){const Tn=Ll[de];Le=Tn.vertexShader,oe=Tn.fragmentShader}else Le=L.vertexShader,oe=L.fragmentShader,c.update(L),ke=c.getVertexShaderID(L),Ge=c.getFragmentShaderID(L);const Ze=i.getRenderTarget(),Ae=i.state.buffers.depth.getReversed(),Q=V.isInstancedMesh===!0,le=V.isBatchedMesh===!0,me=!!L.map,be=!!L.matcap,ye=!!ee,j=!!L.aoMap,ze=!!L.lightMap,Pe=!!L.bumpMap,ae=!!L.normalMap,Z=!!L.displacementMap,Ie=!!L.emissiveMap,Se=!!L.metalnessMap,We=!!L.roughnessMap,ht=L.anisotropy>0,te=L.clearcoat>0,k=L.dispersion>0,ie=L.iridescence>0,Ee=L.sheen>0,Be=L.transmission>0,Ue=ht&&!!L.anisotropyMap,He=te&&!!L.clearcoatMap,ft=te&&!!L.clearcoatNormalMap,Et=te&&!!L.clearcoatRoughnessMap,Rt=ie&&!!L.iridescenceMap,ct=ie&&!!L.iridescenceThicknessMap,pt=Ee&&!!L.sheenColorMap,Nt=Ee&&!!L.sheenRoughnessMap,ge=!!L.specularMap,Ve=!!L.specularColorMap,_t=!!L.specularIntensityMap,Me=Be&&!!L.transmissionMap,qe=Be&&!!L.thicknessMap,mt=!!L.gradientMap,Pt=!!L.alphaMap,At=L.alphaTest>0,gt=!!L.alphaHash,Ut=!!L.extensions;let Xt=Nl;L.toneMapped&&(Ze===null||Ze.isXRRenderTarget===!0)&&(Xt=i.toneMapping);const Cn={shaderID:de,shaderType:L.type,shaderName:L.name,vertexShader:Le,fragmentShader:oe,defines:L.defines,customVertexShaderID:ke,customFragmentShaderID:Ge,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:y,batching:le,batchingColor:le&&V._colorsTexture!==null,instancing:Q,instancingColor:Q&&V.instanceColor!==null,instancingMorph:Q&&V.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ze===null?i.outputColorSpace:Ze.isXRRenderTarget===!0?Ze.texture.colorSpace:fo,alphaToCoverage:!!L.alphaToCoverage,map:me,matcap:be,envMap:ye,envMapMode:ye&&ee.mapping,envMapCubeUVHeight:ne,aoMap:j,lightMap:ze,bumpMap:Pe,normalMap:ae,displacementMap:v&&Z,emissiveMap:Ie,normalMapObjectSpace:ae&&L.normalMapType===eO,normalMapTangentSpace:ae&&L.normalMapType===bh,metalnessMap:Se,roughnessMap:We,anisotropy:ht,anisotropyMap:Ue,clearcoat:te,clearcoatMap:He,clearcoatNormalMap:ft,clearcoatRoughnessMap:Et,dispersion:k,iridescence:ie,iridescenceMap:Rt,iridescenceThicknessMap:ct,sheen:Ee,sheenColorMap:pt,sheenRoughnessMap:Nt,specularMap:ge,specularColorMap:Ve,specularIntensityMap:_t,transmission:Be,transmissionMap:Me,thicknessMap:qe,gradientMap:mt,opaque:L.transparent===!1&&L.blending===Yd&&L.alphaToCoverage===!1,alphaMap:Pt,alphaTest:At,alphaHash:gt,combine:L.combine,mapUv:me&&A(L.map.channel),aoMapUv:j&&A(L.aoMap.channel),lightMapUv:ze&&A(L.lightMap.channel),bumpMapUv:Pe&&A(L.bumpMap.channel),normalMapUv:ae&&A(L.normalMap.channel),displacementMapUv:Z&&A(L.displacementMap.channel),emissiveMapUv:Ie&&A(L.emissiveMap.channel),metalnessMapUv:Se&&A(L.metalnessMap.channel),roughnessMapUv:We&&A(L.roughnessMap.channel),anisotropyMapUv:Ue&&A(L.anisotropyMap.channel),clearcoatMapUv:He&&A(L.clearcoatMap.channel),clearcoatNormalMapUv:ft&&A(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Et&&A(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Rt&&A(L.iridescenceMap.channel),iridescenceThicknessMapUv:ct&&A(L.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&A(L.sheenColorMap.channel),sheenRoughnessMapUv:Nt&&A(L.sheenRoughnessMap.channel),specularMapUv:ge&&A(L.specularMap.channel),specularColorMapUv:Ve&&A(L.specularColorMap.channel),specularIntensityMapUv:_t&&A(L.specularIntensityMap.channel),transmissionMapUv:Me&&A(L.transmissionMap.channel),thicknessMapUv:qe&&A(L.thicknessMap.channel),alphaMapUv:Pt&&A(L.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(ae||ht),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!K.attributes.uv&&(me||Pt),fog:!!$,useFog:L.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:Ae,skinning:V.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:fe,morphTextureStride:Re,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:L.dithering,shadowMapEnabled:i.shadowMap.enabled&&F.length>0,shadowMapType:i.shadowMap.type,toneMapping:Xt,decodeVideoTexture:me&&L.map.isVideoTexture===!0&&ai.getTransfer(L.map.colorSpace)===Ti,decodeVideoTextureEmissive:Ie&&L.emissiveMap.isVideoTexture===!0&&ai.getTransfer(L.emissiveMap.colorSpace)===Ti,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===fa,flipSided:L.side===Zr,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Ut&&L.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ut&&L.extensions.multiDraw===!0||le)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Cn.vertexUv1s=f.has(1),Cn.vertexUv2s=f.has(2),Cn.vertexUv3s=f.has(3),f.clear(),Cn}function x(L){const R=[];if(L.shaderID?R.push(L.shaderID):(R.push(L.customVertexShaderID),R.push(L.customFragmentShaderID)),L.defines!==void 0)for(const F in L.defines)R.push(F),R.push(L.defines[F]);return L.isRawShaderMaterial===!1&&(E(R,L),D(R,L),R.push(i.outputColorSpace)),R.push(L.customProgramCacheKey),R.join()}function E(L,R){L.push(R.precision),L.push(R.outputColorSpace),L.push(R.envMapMode),L.push(R.envMapCubeUVHeight),L.push(R.mapUv),L.push(R.alphaMapUv),L.push(R.lightMapUv),L.push(R.aoMapUv),L.push(R.bumpMapUv),L.push(R.normalMapUv),L.push(R.displacementMapUv),L.push(R.emissiveMapUv),L.push(R.metalnessMapUv),L.push(R.roughnessMapUv),L.push(R.anisotropyMapUv),L.push(R.clearcoatMapUv),L.push(R.clearcoatNormalMapUv),L.push(R.clearcoatRoughnessMapUv),L.push(R.iridescenceMapUv),L.push(R.iridescenceThicknessMapUv),L.push(R.sheenColorMapUv),L.push(R.sheenRoughnessMapUv),L.push(R.specularMapUv),L.push(R.specularColorMapUv),L.push(R.specularIntensityMapUv),L.push(R.transmissionMapUv),L.push(R.thicknessMapUv),L.push(R.combine),L.push(R.fogExp2),L.push(R.sizeAttenuation),L.push(R.morphTargetsCount),L.push(R.morphAttributeCount),L.push(R.numDirLights),L.push(R.numPointLights),L.push(R.numSpotLights),L.push(R.numSpotLightMaps),L.push(R.numHemiLights),L.push(R.numRectAreaLights),L.push(R.numDirLightShadows),L.push(R.numPointLightShadows),L.push(R.numSpotLightShadows),L.push(R.numSpotLightShadowsWithMaps),L.push(R.numLightProbes),L.push(R.shadowMapType),L.push(R.toneMapping),L.push(R.numClippingPlanes),L.push(R.numClipIntersection),L.push(R.depthPacking)}function D(L,R){o.disableAll(),R.supportsVertexTextures&&o.enable(0),R.instancing&&o.enable(1),R.instancingColor&&o.enable(2),R.instancingMorph&&o.enable(3),R.matcap&&o.enable(4),R.envMap&&o.enable(5),R.normalMapObjectSpace&&o.enable(6),R.normalMapTangentSpace&&o.enable(7),R.clearcoat&&o.enable(8),R.iridescence&&o.enable(9),R.alphaTest&&o.enable(10),R.vertexColors&&o.enable(11),R.vertexAlphas&&o.enable(12),R.vertexUv1s&&o.enable(13),R.vertexUv2s&&o.enable(14),R.vertexUv3s&&o.enable(15),R.vertexTangents&&o.enable(16),R.anisotropy&&o.enable(17),R.alphaHash&&o.enable(18),R.batching&&o.enable(19),R.dispersion&&o.enable(20),R.batchingColor&&o.enable(21),L.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.reverseDepthBuffer&&o.enable(4),R.skinning&&o.enable(5),R.morphTargets&&o.enable(6),R.morphNormals&&o.enable(7),R.morphColors&&o.enable(8),R.premultipliedAlpha&&o.enable(9),R.shadowMapEnabled&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.transmission&&o.enable(15),R.sheen&&o.enable(16),R.opaque&&o.enable(17),R.pointsUvs&&o.enable(18),R.decodeVideoTexture&&o.enable(19),R.decodeVideoTextureEmissive&&o.enable(20),R.alphaToCoverage&&o.enable(21),L.push(o.mask)}function B(L){const R=_[L.type];let F;if(R){const G=Ll[R];F=xO.clone(G.uniforms)}else F=L.uniforms;return F}function U(L,R){let F;for(let G=0,V=d.length;G<V;G++){const $=d[G];if($.cacheKey===R){F=$,++F.usedTimes;break}}return F===void 0&&(F=new L7(i,R,L,a),d.push(F)),F}function w(L){if(--L.usedTimes===0){const R=d.indexOf(L);d[R]=d[d.length-1],d.pop(),L.destroy()}}function O(L){c.remove(L)}function I(){c.dispose()}return{getParameters:S,getProgramCacheKey:x,getUniforms:B,acquireProgram:U,releaseProgram:w,releaseShaderCache:O,programs:d,dispose:I}}function U7(){let i=new WeakMap;function e(s){return i.has(s)}function t(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}function n(s){i.delete(s)}function r(s,o,c){i.get(s)[o]=c}function a(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:a}}function F7(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function sB(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function oB(){const i=[];let e=0;const t=[],n=[],r=[];function a(){e=0,t.length=0,n.length=0,r.length=0}function s(m,v,y,_,A,S){let x=i[e];return x===void 0?(x={id:m.id,object:m,geometry:v,material:y,groupOrder:_,renderOrder:m.renderOrder,z:A,group:S},i[e]=x):(x.id=m.id,x.object=m,x.geometry=v,x.material=y,x.groupOrder=_,x.renderOrder=m.renderOrder,x.z=A,x.group=S),e++,x}function o(m,v,y,_,A,S){const x=s(m,v,y,_,A,S);y.transmission>0?n.push(x):y.transparent===!0?r.push(x):t.push(x)}function c(m,v,y,_,A,S){const x=s(m,v,y,_,A,S);y.transmission>0?n.unshift(x):y.transparent===!0?r.unshift(x):t.unshift(x)}function f(m,v){t.length>1&&t.sort(m||F7),n.length>1&&n.sort(v||sB),r.length>1&&r.sort(v||sB)}function d(){for(let m=e,v=i.length;m<v;m++){const y=i[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:r,init:a,push:o,unshift:c,finish:d,sort:f}}function z7(){let i=new WeakMap;function e(n,r){const a=i.get(n);let s;return a===void 0?(s=new oB,i.set(n,[s])):r>=a.length?(s=new oB,a.push(s)):s=a[r],s}function t(){i=new WeakMap}return{get:e,dispose:t}}function H7(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ue,color:new Bt};break;case"SpotLight":t={position:new ue,direction:new ue,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ue,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ue,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":t={color:new Bt,position:new ue,halfWidth:new ue,halfHeight:new ue};break}return i[e.id]=t,t}}}function G7(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ot};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ot};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ot,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let V7=0;function k7(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function W7(i){const e=new H7,t=G7(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new ue);const r=new ue,a=new mn,s=new mn;function o(f){let d=0,m=0,v=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let y=0,_=0,A=0,S=0,x=0,E=0,D=0,B=0,U=0,w=0,O=0;f.sort(k7);for(let L=0,R=f.length;L<R;L++){const F=f[L],G=F.color,V=F.intensity,$=F.distance,K=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=G.r*V,m+=G.g*V,v+=G.b*V;else if(F.isLightProbe){for(let z=0;z<9;z++)n.probe[z].addScaledVector(F.sh.coefficients[z],V);O++}else if(F.isDirectionalLight){const z=e.get(F);if(z.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const ee=F.shadow,ne=t.get(F);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,n.directionalShadow[y]=ne,n.directionalShadowMap[y]=K,n.directionalShadowMatrix[y]=F.shadow.matrix,E++}n.directional[y]=z,y++}else if(F.isSpotLight){const z=e.get(F);z.position.setFromMatrixPosition(F.matrixWorld),z.color.copy(G).multiplyScalar(V),z.distance=$,z.coneCos=Math.cos(F.angle),z.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),z.decay=F.decay,n.spot[A]=z;const ee=F.shadow;if(F.map&&(n.spotLightMap[U]=F.map,U++,ee.updateMatrices(F),F.castShadow&&w++),n.spotLightMatrix[A]=ee.matrix,F.castShadow){const ne=t.get(F);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,n.spotShadow[A]=ne,n.spotShadowMap[A]=K,B++}A++}else if(F.isRectAreaLight){const z=e.get(F);z.color.copy(G).multiplyScalar(V),z.halfWidth.set(F.width*.5,0,0),z.halfHeight.set(0,F.height*.5,0),n.rectArea[S]=z,S++}else if(F.isPointLight){const z=e.get(F);if(z.color.copy(F.color).multiplyScalar(F.intensity),z.distance=F.distance,z.decay=F.decay,F.castShadow){const ee=F.shadow,ne=t.get(F);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,ne.shadowCameraNear=ee.camera.near,ne.shadowCameraFar=ee.camera.far,n.pointShadow[_]=ne,n.pointShadowMap[_]=K,n.pointShadowMatrix[_]=F.shadow.matrix,D++}n.point[_]=z,_++}else if(F.isHemisphereLight){const z=e.get(F);z.skyColor.copy(F.color).multiplyScalar(V),z.groundColor.copy(F.groundColor).multiplyScalar(V),n.hemi[x]=z,x++}}S>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Vt.LTC_FLOAT_1,n.rectAreaLTC2=Vt.LTC_FLOAT_2):(n.rectAreaLTC1=Vt.LTC_HALF_1,n.rectAreaLTC2=Vt.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=m,n.ambient[2]=v;const I=n.hash;(I.directionalLength!==y||I.pointLength!==_||I.spotLength!==A||I.rectAreaLength!==S||I.hemiLength!==x||I.numDirectionalShadows!==E||I.numPointShadows!==D||I.numSpotShadows!==B||I.numSpotMaps!==U||I.numLightProbes!==O)&&(n.directional.length=y,n.spot.length=A,n.rectArea.length=S,n.point.length=_,n.hemi.length=x,n.directionalShadow.length=E,n.directionalShadowMap.length=E,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=E,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=B+U-w,n.spotLightMap.length=U,n.numSpotLightShadowsWithMaps=w,n.numLightProbes=O,I.directionalLength=y,I.pointLength=_,I.spotLength=A,I.rectAreaLength=S,I.hemiLength=x,I.numDirectionalShadows=E,I.numPointShadows=D,I.numSpotShadows=B,I.numSpotMaps=U,I.numLightProbes=O,n.version=V7++)}function c(f,d){let m=0,v=0,y=0,_=0,A=0;const S=d.matrixWorldInverse;for(let x=0,E=f.length;x<E;x++){const D=f[x];if(D.isDirectionalLight){const B=n.directional[m];B.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(S),m++}else if(D.isSpotLight){const B=n.spot[y];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(S),B.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(S),y++}else if(D.isRectAreaLight){const B=n.rectArea[_];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(S),s.identity(),a.copy(D.matrixWorld),a.premultiply(S),s.extractRotation(a),B.halfWidth.set(D.width*.5,0,0),B.halfHeight.set(0,D.height*.5,0),B.halfWidth.applyMatrix4(s),B.halfHeight.applyMatrix4(s),_++}else if(D.isPointLight){const B=n.point[v];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(S),v++}else if(D.isHemisphereLight){const B=n.hemi[A];B.direction.setFromMatrixPosition(D.matrixWorld),B.direction.transformDirection(S),A++}}}return{setup:o,setupView:c,state:n}}function lB(i){const e=new W7(i),t=[],n=[];function r(d){f.camera=d,t.length=0,n.length=0}function a(d){t.push(d)}function s(d){n.push(d)}function o(){e.setup(t)}function c(d){e.setupView(t,d)}const f={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function X7(i){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new lB(i),e.set(r,[o])):a>=s.length?(o=new lB(i),s.push(o)):o=s[a],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const $7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,j7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function q7(i,e,t){let n=new jg;const r=new ot,a=new ot,s=new ni,o=new yC({depthPacking:QN}),c=new _C,f={},d=t.maxTextureSize,m={[Fl]:Zr,[Zr]:Fl,[fa]:fa},v=new Wi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ot},radius:{value:4}},vertexShader:$7,fragmentShader:j7}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const _=new Fn;_.setAttribute("position",new si(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Ki(_,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=uM;let x=this.type;this.render=function(w,O,I){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||w.length===0)return;const L=i.getRenderTarget(),R=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),G=i.state;G.setBlending(Gr),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const V=x!==Bl&&this.type===Bl,$=x===Bl&&this.type!==Bl;for(let K=0,z=w.length;K<z;K++){const ee=w[K],ne=ee.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const de=ne.getFrameExtents();if(r.multiply(de),a.copy(ne.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(a.x=Math.floor(d/de.x),r.x=a.x*de.x,ne.mapSize.x=a.x),r.y>d&&(a.y=Math.floor(d/de.y),r.y=a.y*de.y,ne.mapSize.y=a.y)),ne.map===null||V===!0||$===!0){const fe=this.type!==Bl?{minFilter:Mr,magFilter:Mr}:{};ne.map!==null&&ne.map.dispose(),ne.map=new ar(r.x,r.y,fe),ne.map.texture.name=ee.name+".shadowMap",ne.camera.updateProjectionMatrix()}i.setRenderTarget(ne.map),i.clear();const Y=ne.getViewportCount();for(let fe=0;fe<Y;fe++){const Re=ne.getViewport(fe);s.set(a.x*Re.x,a.y*Re.y,a.x*Re.z,a.y*Re.w),G.viewport(s),ne.updateMatrices(ee,fe),n=ne.getFrustum(),B(O,I,ne.camera,ee,this.type)}ne.isPointLightShadow!==!0&&this.type===Bl&&E(ne,I),ne.needsUpdate=!1}x=this.type,S.needsUpdate=!1,i.setRenderTarget(L,R,F)};function E(w,O){const I=e.update(A);v.defines.VSM_SAMPLES!==w.blurSamples&&(v.defines.VSM_SAMPLES=w.blurSamples,y.defines.VSM_SAMPLES=w.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new ar(r.x,r.y)),v.uniforms.shadow_pass.value=w.map.texture,v.uniforms.resolution.value=w.mapSize,v.uniforms.radius.value=w.radius,i.setRenderTarget(w.mapPass),i.clear(),i.renderBufferDirect(O,null,I,v,A,null),y.uniforms.shadow_pass.value=w.mapPass.texture,y.uniforms.resolution.value=w.mapSize,y.uniforms.radius.value=w.radius,i.setRenderTarget(w.map),i.clear(),i.renderBufferDirect(O,null,I,y,A,null)}function D(w,O,I,L){let R=null;const F=I.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(F!==void 0)R=F;else if(R=I.isPointLight===!0?c:o,i.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0||O.alphaToCoverage===!0){const G=R.uuid,V=O.uuid;let $=f[G];$===void 0&&($={},f[G]=$);let K=$[V];K===void 0&&(K=R.clone(),$[V]=K,O.addEventListener("dispose",U)),R=K}if(R.visible=O.visible,R.wireframe=O.wireframe,L===Bl?R.side=O.shadowSide!==null?O.shadowSide:O.side:R.side=O.shadowSide!==null?O.shadowSide:m[O.side],R.alphaMap=O.alphaMap,R.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,R.map=O.map,R.clipShadows=O.clipShadows,R.clippingPlanes=O.clippingPlanes,R.clipIntersection=O.clipIntersection,R.displacementMap=O.displacementMap,R.displacementScale=O.displacementScale,R.displacementBias=O.displacementBias,R.wireframeLinewidth=O.wireframeLinewidth,R.linewidth=O.linewidth,I.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const G=i.properties.get(R);G.light=I}return R}function B(w,O,I,L,R){if(w.visible===!1)return;if(w.layers.test(O.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&R===Bl)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,w.matrixWorld);const V=e.update(w),$=w.material;if(Array.isArray($)){const K=V.groups;for(let z=0,ee=K.length;z<ee;z++){const ne=K[z],de=$[ne.materialIndex];if(de&&de.visible){const Y=D(w,de,L,R);w.onBeforeShadow(i,w,O,I,V,Y,ne),i.renderBufferDirect(I,null,V,Y,w,ne),w.onAfterShadow(i,w,O,I,V,Y,ne)}}}else if($.visible){const K=D(w,$,L,R);w.onBeforeShadow(i,w,O,I,V,K,null),i.renderBufferDirect(I,null,V,K,w,null),w.onAfterShadow(i,w,O,I,V,K,null)}}const G=w.children;for(let V=0,$=G.length;V<$;V++)B(G[V],O,I,L,R)}function U(w){w.target.removeEventListener("dispose",U);for(const I in f){const L=f[I],R=w.target.uuid;R in L&&(L[R].dispose(),delete L[R])}}}const Y7={[tS]:nS,[iS]:sS,[rS]:oS,[np]:aS,[nS]:tS,[sS]:iS,[oS]:rS,[aS]:np};function K7(i,e){function t(){let Me=!1;const qe=new ni;let mt=null;const Pt=new ni(0,0,0,0);return{setMask:function(At){mt!==At&&!Me&&(i.colorMask(At,At,At,At),mt=At)},setLocked:function(At){Me=At},setClear:function(At,gt,Ut,Xt,Cn){Cn===!0&&(At*=Xt,gt*=Xt,Ut*=Xt),qe.set(At,gt,Ut,Xt),Pt.equals(qe)===!1&&(i.clearColor(At,gt,Ut,Xt),Pt.copy(qe))},reset:function(){Me=!1,mt=null,Pt.set(-1,0,0,0)}}}function n(){let Me=!1,qe=!1,mt=null,Pt=null,At=null;return{setReversed:function(gt){if(qe!==gt){const Ut=e.get("EXT_clip_control");gt?Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.ZERO_TO_ONE_EXT):Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.NEGATIVE_ONE_TO_ONE_EXT),qe=gt;const Xt=At;At=null,this.setClear(Xt)}},getReversed:function(){return qe},setTest:function(gt){gt?Ze(i.DEPTH_TEST):Ae(i.DEPTH_TEST)},setMask:function(gt){mt!==gt&&!Me&&(i.depthMask(gt),mt=gt)},setFunc:function(gt){if(qe&&(gt=Y7[gt]),Pt!==gt){switch(gt){case tS:i.depthFunc(i.NEVER);break;case nS:i.depthFunc(i.ALWAYS);break;case iS:i.depthFunc(i.LESS);break;case np:i.depthFunc(i.LEQUAL);break;case rS:i.depthFunc(i.EQUAL);break;case aS:i.depthFunc(i.GEQUAL);break;case sS:i.depthFunc(i.GREATER);break;case oS:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Pt=gt}},setLocked:function(gt){Me=gt},setClear:function(gt){At!==gt&&(qe&&(gt=1-gt),i.clearDepth(gt),At=gt)},reset:function(){Me=!1,mt=null,Pt=null,At=null,qe=!1}}}function r(){let Me=!1,qe=null,mt=null,Pt=null,At=null,gt=null,Ut=null,Xt=null,Cn=null;return{setTest:function(Tn){Me||(Tn?Ze(i.STENCIL_TEST):Ae(i.STENCIL_TEST))},setMask:function(Tn){qe!==Tn&&!Me&&(i.stencilMask(Tn),qe=Tn)},setFunc:function(Tn,he,nt){(mt!==Tn||Pt!==he||At!==nt)&&(i.stencilFunc(Tn,he,nt),mt=Tn,Pt=he,At=nt)},setOp:function(Tn,he,nt){(gt!==Tn||Ut!==he||Xt!==nt)&&(i.stencilOp(Tn,he,nt),gt=Tn,Ut=he,Xt=nt)},setLocked:function(Tn){Me=Tn},setClear:function(Tn){Cn!==Tn&&(i.clearStencil(Tn),Cn=Tn)},reset:function(){Me=!1,qe=null,mt=null,Pt=null,At=null,gt=null,Ut=null,Xt=null,Cn=null}}}const a=new t,s=new n,o=new r,c=new WeakMap,f=new WeakMap;let d={},m={},v=new WeakMap,y=[],_=null,A=!1,S=null,x=null,E=null,D=null,B=null,U=null,w=null,O=new Bt(0,0,0),I=0,L=!1,R=null,F=null,G=null,V=null,$=null;const K=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,ee=0;const ne=i.getParameter(i.VERSION);ne.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(ne)[1]),z=ee>=1):ne.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),z=ee>=2);let de=null,Y={};const fe=i.getParameter(i.SCISSOR_BOX),Re=i.getParameter(i.VIEWPORT),Le=new ni().fromArray(fe),oe=new ni().fromArray(Re);function ke(Me,qe,mt,Pt){const At=new Uint8Array(4),gt=i.createTexture();i.bindTexture(Me,gt),i.texParameteri(Me,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Me,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ut=0;Ut<mt;Ut++)Me===i.TEXTURE_3D||Me===i.TEXTURE_2D_ARRAY?i.texImage3D(qe,0,i.RGBA,1,1,Pt,0,i.RGBA,i.UNSIGNED_BYTE,At):i.texImage2D(qe+Ut,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,At);return gt}const Ge={};Ge[i.TEXTURE_2D]=ke(i.TEXTURE_2D,i.TEXTURE_2D,1),Ge[i.TEXTURE_CUBE_MAP]=ke(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ge[i.TEXTURE_2D_ARRAY]=ke(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ge[i.TEXTURE_3D]=ke(i.TEXTURE_3D,i.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ze(i.DEPTH_TEST),s.setFunc(np),Pe(!1),ae(Uw),Ze(i.CULL_FACE),j(Gr);function Ze(Me){d[Me]!==!0&&(i.enable(Me),d[Me]=!0)}function Ae(Me){d[Me]!==!1&&(i.disable(Me),d[Me]=!1)}function Q(Me,qe){return m[Me]!==qe?(i.bindFramebuffer(Me,qe),m[Me]=qe,Me===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=qe),Me===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=qe),!0):!1}function le(Me,qe){let mt=y,Pt=!1;if(Me){mt=v.get(qe),mt===void 0&&(mt=[],v.set(qe,mt));const At=Me.textures;if(mt.length!==At.length||mt[0]!==i.COLOR_ATTACHMENT0){for(let gt=0,Ut=At.length;gt<Ut;gt++)mt[gt]=i.COLOR_ATTACHMENT0+gt;mt.length=At.length,Pt=!0}}else mt[0]!==i.BACK&&(mt[0]=i.BACK,Pt=!0);Pt&&i.drawBuffers(mt)}function me(Me){return _!==Me?(i.useProgram(Me),_=Me,!0):!1}const be={[nh]:i.FUNC_ADD,[MN]:i.FUNC_SUBTRACT,[EN]:i.FUNC_REVERSE_SUBTRACT};be[AN]=i.MIN,be[TN]=i.MAX;const ye={[wN]:i.ZERO,[CN]:i.ONE,[RN]:i.SRC_COLOR,[Qb]:i.SRC_ALPHA,[NN]:i.SRC_ALPHA_SATURATE,[IN]:i.DST_COLOR,[BN]:i.DST_ALPHA,[DN]:i.ONE_MINUS_SRC_COLOR,[eS]:i.ONE_MINUS_SRC_ALPHA,[PN]:i.ONE_MINUS_DST_COLOR,[LN]:i.ONE_MINUS_DST_ALPHA,[ON]:i.CONSTANT_COLOR,[UN]:i.ONE_MINUS_CONSTANT_COLOR,[FN]:i.CONSTANT_ALPHA,[zN]:i.ONE_MINUS_CONSTANT_ALPHA};function j(Me,qe,mt,Pt,At,gt,Ut,Xt,Cn,Tn){if(Me===Gr){A===!0&&(Ae(i.BLEND),A=!1);return}if(A===!1&&(Ze(i.BLEND),A=!0),Me!==SN){if(Me!==S||Tn!==L){if((x!==nh||B!==nh)&&(i.blendEquation(i.FUNC_ADD),x=nh,B=nh),Tn)switch(Me){case Yd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Fw:i.blendFunc(i.ONE,i.ONE);break;case zw:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Hw:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}else switch(Me){case Yd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Fw:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case zw:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Hw:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}E=null,D=null,U=null,w=null,O.set(0,0,0),I=0,S=Me,L=Tn}return}At=At||qe,gt=gt||mt,Ut=Ut||Pt,(qe!==x||At!==B)&&(i.blendEquationSeparate(be[qe],be[At]),x=qe,B=At),(mt!==E||Pt!==D||gt!==U||Ut!==w)&&(i.blendFuncSeparate(ye[mt],ye[Pt],ye[gt],ye[Ut]),E=mt,D=Pt,U=gt,w=Ut),(Xt.equals(O)===!1||Cn!==I)&&(i.blendColor(Xt.r,Xt.g,Xt.b,Cn),O.copy(Xt),I=Cn),S=Me,L=!1}function ze(Me,qe){Me.side===fa?Ae(i.CULL_FACE):Ze(i.CULL_FACE);let mt=Me.side===Zr;qe&&(mt=!mt),Pe(mt),Me.blending===Yd&&Me.transparent===!1?j(Gr):j(Me.blending,Me.blendEquation,Me.blendSrc,Me.blendDst,Me.blendEquationAlpha,Me.blendSrcAlpha,Me.blendDstAlpha,Me.blendColor,Me.blendAlpha,Me.premultipliedAlpha),s.setFunc(Me.depthFunc),s.setTest(Me.depthTest),s.setMask(Me.depthWrite),a.setMask(Me.colorWrite);const Pt=Me.stencilWrite;o.setTest(Pt),Pt&&(o.setMask(Me.stencilWriteMask),o.setFunc(Me.stencilFunc,Me.stencilRef,Me.stencilFuncMask),o.setOp(Me.stencilFail,Me.stencilZFail,Me.stencilZPass)),Ie(Me.polygonOffset,Me.polygonOffsetFactor,Me.polygonOffsetUnits),Me.alphaToCoverage===!0?Ze(i.SAMPLE_ALPHA_TO_COVERAGE):Ae(i.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(Me){R!==Me&&(Me?i.frontFace(i.CW):i.frontFace(i.CCW),R=Me)}function ae(Me){Me!==_N?(Ze(i.CULL_FACE),Me!==F&&(Me===Uw?i.cullFace(i.BACK):Me===xN?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ae(i.CULL_FACE),F=Me}function Z(Me){Me!==G&&(z&&i.lineWidth(Me),G=Me)}function Ie(Me,qe,mt){Me?(Ze(i.POLYGON_OFFSET_FILL),(V!==qe||$!==mt)&&(i.polygonOffset(qe,mt),V=qe,$=mt)):Ae(i.POLYGON_OFFSET_FILL)}function Se(Me){Me?Ze(i.SCISSOR_TEST):Ae(i.SCISSOR_TEST)}function We(Me){Me===void 0&&(Me=i.TEXTURE0+K-1),de!==Me&&(i.activeTexture(Me),de=Me)}function ht(Me,qe,mt){mt===void 0&&(de===null?mt=i.TEXTURE0+K-1:mt=de);let Pt=Y[mt];Pt===void 0&&(Pt={type:void 0,texture:void 0},Y[mt]=Pt),(Pt.type!==Me||Pt.texture!==qe)&&(de!==mt&&(i.activeTexture(mt),de=mt),i.bindTexture(Me,qe||Ge[Me]),Pt.type=Me,Pt.texture=qe)}function te(){const Me=Y[de];Me!==void 0&&Me.type!==void 0&&(i.bindTexture(Me.type,null),Me.type=void 0,Me.texture=void 0)}function k(){try{i.compressedTexImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ie(){try{i.compressedTexImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ee(){try{i.texSubImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Be(){try{i.texSubImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ue(){try{i.compressedTexSubImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function He(){try{i.compressedTexSubImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ft(){try{i.texStorage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Et(){try{i.texStorage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Rt(){try{i.texImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ct(){try{i.texImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function pt(Me){Le.equals(Me)===!1&&(i.scissor(Me.x,Me.y,Me.z,Me.w),Le.copy(Me))}function Nt(Me){oe.equals(Me)===!1&&(i.viewport(Me.x,Me.y,Me.z,Me.w),oe.copy(Me))}function ge(Me,qe){let mt=f.get(qe);mt===void 0&&(mt=new WeakMap,f.set(qe,mt));let Pt=mt.get(Me);Pt===void 0&&(Pt=i.getUniformBlockIndex(qe,Me.name),mt.set(Me,Pt))}function Ve(Me,qe){const Pt=f.get(qe).get(Me);c.get(qe)!==Pt&&(i.uniformBlockBinding(qe,Pt,Me.__bindingPointIndex),c.set(qe,Pt))}function _t(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),s.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},de=null,Y={},m={},v=new WeakMap,y=[],_=null,A=!1,S=null,x=null,E=null,D=null,B=null,U=null,w=null,O=new Bt(0,0,0),I=0,L=!1,R=null,F=null,G=null,V=null,$=null,Le.set(0,0,i.canvas.width,i.canvas.height),oe.set(0,0,i.canvas.width,i.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:Ze,disable:Ae,bindFramebuffer:Q,drawBuffers:le,useProgram:me,setBlending:j,setMaterial:ze,setFlipSided:Pe,setCullFace:ae,setLineWidth:Z,setPolygonOffset:Ie,setScissorTest:Se,activeTexture:We,bindTexture:ht,unbindTexture:te,compressedTexImage2D:k,compressedTexImage3D:ie,texImage2D:Rt,texImage3D:ct,updateUBOMapping:ge,uniformBlockBinding:Ve,texStorage2D:ft,texStorage3D:Et,texSubImage2D:Ee,texSubImage3D:Be,compressedTexSubImage2D:Ue,compressedTexSubImage3D:He,scissor:pt,viewport:Nt,reset:_t}}function J7(i,e,t,n,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new ot,d=new WeakMap;let m;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(te,k){return y?new OffscreenCanvas(te,k):Hy("canvas")}function A(te,k,ie){let Ee=1;const Be=ht(te);if((Be.width>ie||Be.height>ie)&&(Ee=ie/Math.max(Be.width,Be.height)),Ee<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Ue=Math.floor(Ee*Be.width),He=Math.floor(Ee*Be.height);m===void 0&&(m=_(Ue,He));const ft=k?_(Ue,He):m;return ft.width=Ue,ft.height=He,ft.getContext("2d").drawImage(te,0,0,Ue,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Be.width+"x"+Be.height+") to ("+Ue+"x"+He+")."),ft}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Be.width+"x"+Be.height+")."),te;return te}function S(te){return te.generateMipmaps}function x(te){i.generateMipmap(te)}function E(te){return te.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?i.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function D(te,k,ie,Ee,Be=!1){if(te!==null){if(i[te]!==void 0)return i[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Ue=k;if(k===i.RED&&(ie===i.FLOAT&&(Ue=i.R32F),ie===i.HALF_FLOAT&&(Ue=i.R16F),ie===i.UNSIGNED_BYTE&&(Ue=i.R8)),k===i.RED_INTEGER&&(ie===i.UNSIGNED_BYTE&&(Ue=i.R8UI),ie===i.UNSIGNED_SHORT&&(Ue=i.R16UI),ie===i.UNSIGNED_INT&&(Ue=i.R32UI),ie===i.BYTE&&(Ue=i.R8I),ie===i.SHORT&&(Ue=i.R16I),ie===i.INT&&(Ue=i.R32I)),k===i.RG&&(ie===i.FLOAT&&(Ue=i.RG32F),ie===i.HALF_FLOAT&&(Ue=i.RG16F),ie===i.UNSIGNED_BYTE&&(Ue=i.RG8)),k===i.RG_INTEGER&&(ie===i.UNSIGNED_BYTE&&(Ue=i.RG8UI),ie===i.UNSIGNED_SHORT&&(Ue=i.RG16UI),ie===i.UNSIGNED_INT&&(Ue=i.RG32UI),ie===i.BYTE&&(Ue=i.RG8I),ie===i.SHORT&&(Ue=i.RG16I),ie===i.INT&&(Ue=i.RG32I)),k===i.RGB_INTEGER&&(ie===i.UNSIGNED_BYTE&&(Ue=i.RGB8UI),ie===i.UNSIGNED_SHORT&&(Ue=i.RGB16UI),ie===i.UNSIGNED_INT&&(Ue=i.RGB32UI),ie===i.BYTE&&(Ue=i.RGB8I),ie===i.SHORT&&(Ue=i.RGB16I),ie===i.INT&&(Ue=i.RGB32I)),k===i.RGBA_INTEGER&&(ie===i.UNSIGNED_BYTE&&(Ue=i.RGBA8UI),ie===i.UNSIGNED_SHORT&&(Ue=i.RGBA16UI),ie===i.UNSIGNED_INT&&(Ue=i.RGBA32UI),ie===i.BYTE&&(Ue=i.RGBA8I),ie===i.SHORT&&(Ue=i.RGBA16I),ie===i.INT&&(Ue=i.RGBA32I)),k===i.RGB&&ie===i.UNSIGNED_INT_5_9_9_9_REV&&(Ue=i.RGB9_E5),k===i.RGBA){const He=Be?Uy:ai.getTransfer(Ee);ie===i.FLOAT&&(Ue=i.RGBA32F),ie===i.HALF_FLOAT&&(Ue=i.RGBA16F),ie===i.UNSIGNED_BYTE&&(Ue=He===Ti?i.SRGB8_ALPHA8:i.RGBA8),ie===i.UNSIGNED_SHORT_4_4_4_4&&(Ue=i.RGBA4),ie===i.UNSIGNED_SHORT_5_5_5_1&&(Ue=i.RGB5_A1)}return(Ue===i.R16F||Ue===i.R32F||Ue===i.RG16F||Ue===i.RG32F||Ue===i.RGBA16F||Ue===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ue}function B(te,k){let ie;return te?k===null||k===zl||k===ip?ie=i.DEPTH24_STENCIL8:k===Yi?ie=i.DEPTH32F_STENCIL8:k===Bg&&(ie=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===zl||k===ip?ie=i.DEPTH_COMPONENT24:k===Yi?ie=i.DEPTH_COMPONENT32F:k===Bg&&(ie=i.DEPTH_COMPONENT16),ie}function U(te,k){return S(te)===!0||te.isFramebufferTexture&&te.minFilter!==Mr&&te.minFilter!==Qn?Math.log2(Math.max(k.width,k.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?k.mipmaps.length:1}function w(te){const k=te.target;k.removeEventListener("dispose",w),I(k),k.isVideoTexture&&d.delete(k)}function O(te){const k=te.target;k.removeEventListener("dispose",O),R(k)}function I(te){const k=n.get(te);if(k.__webglInit===void 0)return;const ie=te.source,Ee=v.get(ie);if(Ee){const Be=Ee[k.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&L(te),Object.keys(Ee).length===0&&v.delete(ie)}n.remove(te)}function L(te){const k=n.get(te);i.deleteTexture(k.__webglTexture);const ie=te.source,Ee=v.get(ie);delete Ee[k.__cacheKey],s.memory.textures--}function R(te){const k=n.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),n.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(k.__webglFramebuffer[Ee]))for(let Be=0;Be<k.__webglFramebuffer[Ee].length;Be++)i.deleteFramebuffer(k.__webglFramebuffer[Ee][Be]);else i.deleteFramebuffer(k.__webglFramebuffer[Ee]);k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer[Ee])}else{if(Array.isArray(k.__webglFramebuffer))for(let Ee=0;Ee<k.__webglFramebuffer.length;Ee++)i.deleteFramebuffer(k.__webglFramebuffer[Ee]);else i.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&i.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let Ee=0;Ee<k.__webglColorRenderbuffer.length;Ee++)k.__webglColorRenderbuffer[Ee]&&i.deleteRenderbuffer(k.__webglColorRenderbuffer[Ee]);k.__webglDepthRenderbuffer&&i.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const ie=te.textures;for(let Ee=0,Be=ie.length;Ee<Be;Ee++){const Ue=n.get(ie[Ee]);Ue.__webglTexture&&(i.deleteTexture(Ue.__webglTexture),s.memory.textures--),n.remove(ie[Ee])}n.remove(te)}let F=0;function G(){F=0}function V(){const te=F;return te>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+r.maxTextures),F+=1,te}function $(te){const k=[];return k.push(te.wrapS),k.push(te.wrapT),k.push(te.wrapR||0),k.push(te.magFilter),k.push(te.minFilter),k.push(te.anisotropy),k.push(te.internalFormat),k.push(te.format),k.push(te.type),k.push(te.generateMipmaps),k.push(te.premultiplyAlpha),k.push(te.flipY),k.push(te.unpackAlignment),k.push(te.colorSpace),k.join()}function K(te,k){const ie=n.get(te);if(te.isVideoTexture&&Se(te),te.isRenderTargetTexture===!1&&te.version>0&&ie.__version!==te.version){const Ee=te.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ge(ie,te,k);return}}t.bindTexture(i.TEXTURE_2D,ie.__webglTexture,i.TEXTURE0+k)}function z(te,k){const ie=n.get(te);if(te.version>0&&ie.__version!==te.version){Ge(ie,te,k);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ie.__webglTexture,i.TEXTURE0+k)}function ee(te,k){const ie=n.get(te);if(te.version>0&&ie.__version!==te.version){Ge(ie,te,k);return}t.bindTexture(i.TEXTURE_3D,ie.__webglTexture,i.TEXTURE0+k)}function ne(te,k){const ie=n.get(te);if(te.version>0&&ie.__version!==te.version){Ze(ie,te,k);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ie.__webglTexture,i.TEXTURE0+k)}const de={[gh]:i.REPEAT,[Br]:i.CLAMP_TO_EDGE,[Dg]:i.MIRRORED_REPEAT},Y={[Mr]:i.NEAREST,[fM]:i.NEAREST_MIPMAP_NEAREST,[Gd]:i.NEAREST_MIPMAP_LINEAR,[Qn]:i.LINEAR,[Sg]:i.LINEAR_MIPMAP_NEAREST,[Ho]:i.LINEAR_MIPMAP_LINEAR},fe={[tO]:i.NEVER,[oO]:i.ALWAYS,[nO]:i.LESS,[J2]:i.LEQUAL,[iO]:i.EQUAL,[sO]:i.GEQUAL,[rO]:i.GREATER,[aO]:i.NOTEQUAL};function Re(te,k){if(k.type===Yi&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===Qn||k.magFilter===Sg||k.magFilter===Gd||k.magFilter===Ho||k.minFilter===Qn||k.minFilter===Sg||k.minFilter===Gd||k.minFilter===Ho)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(te,i.TEXTURE_WRAP_S,de[k.wrapS]),i.texParameteri(te,i.TEXTURE_WRAP_T,de[k.wrapT]),(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY)&&i.texParameteri(te,i.TEXTURE_WRAP_R,de[k.wrapR]),i.texParameteri(te,i.TEXTURE_MAG_FILTER,Y[k.magFilter]),i.texParameteri(te,i.TEXTURE_MIN_FILTER,Y[k.minFilter]),k.compareFunction&&(i.texParameteri(te,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(te,i.TEXTURE_COMPARE_FUNC,fe[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Mr||k.minFilter!==Gd&&k.minFilter!==Ho||k.type===Yi&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||n.get(k).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");i.texParameterf(te,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy}}}function Le(te,k){let ie=!1;te.__webglInit===void 0&&(te.__webglInit=!0,k.addEventListener("dispose",w));const Ee=k.source;let Be=v.get(Ee);Be===void 0&&(Be={},v.set(Ee,Be));const Ue=$(k);if(Ue!==te.__cacheKey){Be[Ue]===void 0&&(Be[Ue]={texture:i.createTexture(),usedTimes:0},s.memory.textures++,ie=!0),Be[Ue].usedTimes++;const He=Be[te.__cacheKey];He!==void 0&&(Be[te.__cacheKey].usedTimes--,He.usedTimes===0&&L(k)),te.__cacheKey=Ue,te.__webglTexture=Be[Ue].texture}return ie}function oe(te,k,ie){return Math.floor(Math.floor(te/ie)/k)}function ke(te,k,ie,Ee){const Ue=te.updateRanges;if(Ue.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,k.width,k.height,ie,Ee,k.data);else{Ue.sort((ct,pt)=>ct.start-pt.start);let He=0;for(let ct=1;ct<Ue.length;ct++){const pt=Ue[He],Nt=Ue[ct],ge=pt.start+pt.count,Ve=oe(Nt.start,k.width,4),_t=oe(pt.start,k.width,4);Nt.start<=ge+1&&Ve===_t&&oe(Nt.start+Nt.count-1,k.width,4)===Ve?pt.count=Math.max(pt.count,Nt.start+Nt.count-pt.start):(++He,Ue[He]=Nt)}Ue.length=He+1;const ft=i.getParameter(i.UNPACK_ROW_LENGTH),Et=i.getParameter(i.UNPACK_SKIP_PIXELS),Rt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,k.width);for(let ct=0,pt=Ue.length;ct<pt;ct++){const Nt=Ue[ct],ge=Math.floor(Nt.start/4),Ve=Math.ceil(Nt.count/4),_t=ge%k.width,Me=Math.floor(ge/k.width),qe=Ve,mt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,_t),i.pixelStorei(i.UNPACK_SKIP_ROWS,Me),t.texSubImage2D(i.TEXTURE_2D,0,_t,Me,qe,mt,ie,Ee,k.data)}te.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,ft),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Et),i.pixelStorei(i.UNPACK_SKIP_ROWS,Rt)}}function Ge(te,k,ie){let Ee=i.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Ee=i.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Ee=i.TEXTURE_3D);const Be=Le(te,k),Ue=k.source;t.bindTexture(Ee,te.__webglTexture,i.TEXTURE0+ie);const He=n.get(Ue);if(Ue.version!==He.__version||Be===!0){t.activeTexture(i.TEXTURE0+ie);const ft=ai.getPrimaries(ai.workingColorSpace),Et=k.colorSpace===Il?null:ai.getPrimaries(k.colorSpace),Rt=k.colorSpace===Il||ft===Et?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);let ct=A(k.image,!1,r.maxTextureSize);ct=We(k,ct);const pt=a.convert(k.format,k.colorSpace),Nt=a.convert(k.type);let ge=D(k.internalFormat,pt,Nt,k.colorSpace,k.isVideoTexture);Re(Ee,k);let Ve;const _t=k.mipmaps,Me=k.isVideoTexture!==!0,qe=He.__version===void 0||Be===!0,mt=Ue.dataReady,Pt=U(k,ct);if(k.isDepthTexture)ge=B(k.format===rp,k.type),qe&&(Me?t.texStorage2D(i.TEXTURE_2D,1,ge,ct.width,ct.height):t.texImage2D(i.TEXTURE_2D,0,ge,ct.width,ct.height,0,pt,Nt,null));else if(k.isDataTexture)if(_t.length>0){Me&&qe&&t.texStorage2D(i.TEXTURE_2D,Pt,ge,_t[0].width,_t[0].height);for(let At=0,gt=_t.length;At<gt;At++)Ve=_t[At],Me?mt&&t.texSubImage2D(i.TEXTURE_2D,At,0,0,Ve.width,Ve.height,pt,Nt,Ve.data):t.texImage2D(i.TEXTURE_2D,At,ge,Ve.width,Ve.height,0,pt,Nt,Ve.data);k.generateMipmaps=!1}else Me?(qe&&t.texStorage2D(i.TEXTURE_2D,Pt,ge,ct.width,ct.height),mt&&ke(k,ct,pt,Nt)):t.texImage2D(i.TEXTURE_2D,0,ge,ct.width,ct.height,0,pt,Nt,ct.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Me&&qe&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Pt,ge,_t[0].width,_t[0].height,ct.depth);for(let At=0,gt=_t.length;At<gt;At++)if(Ve=_t[At],k.format!==Lr)if(pt!==null)if(Me){if(mt)if(k.layerUpdates.size>0){const Ut=Zw(Ve.width,Ve.height,k.format,k.type);for(const Xt of k.layerUpdates){const Cn=Ve.data.subarray(Xt*Ut/Ve.data.BYTES_PER_ELEMENT,(Xt+1)*Ut/Ve.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,At,0,0,Xt,Ve.width,Ve.height,1,pt,Cn)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,At,0,0,0,Ve.width,Ve.height,ct.depth,pt,Ve.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,At,ge,Ve.width,Ve.height,ct.depth,0,Ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Me?mt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,At,0,0,0,Ve.width,Ve.height,ct.depth,pt,Nt,Ve.data):t.texImage3D(i.TEXTURE_2D_ARRAY,At,ge,Ve.width,Ve.height,ct.depth,0,pt,Nt,Ve.data)}else{Me&&qe&&t.texStorage2D(i.TEXTURE_2D,Pt,ge,_t[0].width,_t[0].height);for(let At=0,gt=_t.length;At<gt;At++)Ve=_t[At],k.format!==Lr?pt!==null?Me?mt&&t.compressedTexSubImage2D(i.TEXTURE_2D,At,0,0,Ve.width,Ve.height,pt,Ve.data):t.compressedTexImage2D(i.TEXTURE_2D,At,ge,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Me?mt&&t.texSubImage2D(i.TEXTURE_2D,At,0,0,Ve.width,Ve.height,pt,Nt,Ve.data):t.texImage2D(i.TEXTURE_2D,At,ge,Ve.width,Ve.height,0,pt,Nt,Ve.data)}else if(k.isDataArrayTexture)if(Me){if(qe&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Pt,ge,ct.width,ct.height,ct.depth),mt)if(k.layerUpdates.size>0){const At=Zw(ct.width,ct.height,k.format,k.type);for(const gt of k.layerUpdates){const Ut=ct.data.subarray(gt*At/ct.data.BYTES_PER_ELEMENT,(gt+1)*At/ct.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,gt,ct.width,ct.height,1,pt,Nt,Ut)}k.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ct.width,ct.height,ct.depth,pt,Nt,ct.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ge,ct.width,ct.height,ct.depth,0,pt,Nt,ct.data);else if(k.isData3DTexture)Me?(qe&&t.texStorage3D(i.TEXTURE_3D,Pt,ge,ct.width,ct.height,ct.depth),mt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ct.width,ct.height,ct.depth,pt,Nt,ct.data)):t.texImage3D(i.TEXTURE_3D,0,ge,ct.width,ct.height,ct.depth,0,pt,Nt,ct.data);else if(k.isFramebufferTexture){if(qe)if(Me)t.texStorage2D(i.TEXTURE_2D,Pt,ge,ct.width,ct.height);else{let At=ct.width,gt=ct.height;for(let Ut=0;Ut<Pt;Ut++)t.texImage2D(i.TEXTURE_2D,Ut,ge,At,gt,0,pt,Nt,null),At>>=1,gt>>=1}}else if(_t.length>0){if(Me&&qe){const At=ht(_t[0]);t.texStorage2D(i.TEXTURE_2D,Pt,ge,At.width,At.height)}for(let At=0,gt=_t.length;At<gt;At++)Ve=_t[At],Me?mt&&t.texSubImage2D(i.TEXTURE_2D,At,0,0,pt,Nt,Ve):t.texImage2D(i.TEXTURE_2D,At,ge,pt,Nt,Ve);k.generateMipmaps=!1}else if(Me){if(qe){const At=ht(ct);t.texStorage2D(i.TEXTURE_2D,Pt,ge,At.width,At.height)}mt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,pt,Nt,ct)}else t.texImage2D(i.TEXTURE_2D,0,ge,pt,Nt,ct);S(k)&&x(Ee),He.__version=Ue.version,k.onUpdate&&k.onUpdate(k)}te.__version=k.version}function Ze(te,k,ie){if(k.image.length!==6)return;const Ee=Le(te,k),Be=k.source;t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+ie);const Ue=n.get(Be);if(Be.version!==Ue.__version||Ee===!0){t.activeTexture(i.TEXTURE0+ie);const He=ai.getPrimaries(ai.workingColorSpace),ft=k.colorSpace===Il?null:ai.getPrimaries(k.colorSpace),Et=k.colorSpace===Il||He===ft?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Et);const Rt=k.isCompressedTexture||k.image[0].isCompressedTexture,ct=k.image[0]&&k.image[0].isDataTexture,pt=[];for(let gt=0;gt<6;gt++)!Rt&&!ct?pt[gt]=A(k.image[gt],!0,r.maxCubemapSize):pt[gt]=ct?k.image[gt].image:k.image[gt],pt[gt]=We(k,pt[gt]);const Nt=pt[0],ge=a.convert(k.format,k.colorSpace),Ve=a.convert(k.type),_t=D(k.internalFormat,ge,Ve,k.colorSpace),Me=k.isVideoTexture!==!0,qe=Ue.__version===void 0||Ee===!0,mt=Be.dataReady;let Pt=U(k,Nt);Re(i.TEXTURE_CUBE_MAP,k);let At;if(Rt){Me&&qe&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Pt,_t,Nt.width,Nt.height);for(let gt=0;gt<6;gt++){At=pt[gt].mipmaps;for(let Ut=0;Ut<At.length;Ut++){const Xt=At[Ut];k.format!==Lr?ge!==null?Me?mt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut,0,0,Xt.width,Xt.height,ge,Xt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut,_t,Xt.width,Xt.height,0,Xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Me?mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut,0,0,Xt.width,Xt.height,ge,Ve,Xt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut,_t,Xt.width,Xt.height,0,ge,Ve,Xt.data)}}}else{if(At=k.mipmaps,Me&&qe){At.length>0&&Pt++;const gt=ht(pt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Pt,_t,gt.width,gt.height)}for(let gt=0;gt<6;gt++)if(ct){Me?mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,0,0,pt[gt].width,pt[gt].height,ge,Ve,pt[gt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,_t,pt[gt].width,pt[gt].height,0,ge,Ve,pt[gt].data);for(let Ut=0;Ut<At.length;Ut++){const Cn=At[Ut].image[gt].image;Me?mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut+1,0,0,Cn.width,Cn.height,ge,Ve,Cn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut+1,_t,Cn.width,Cn.height,0,ge,Ve,Cn.data)}}else{Me?mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,0,0,ge,Ve,pt[gt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,_t,ge,Ve,pt[gt]);for(let Ut=0;Ut<At.length;Ut++){const Xt=At[Ut];Me?mt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut+1,0,0,ge,Ve,Xt.image[gt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Ut+1,_t,ge,Ve,Xt.image[gt])}}}S(k)&&x(i.TEXTURE_CUBE_MAP),Ue.__version=Be.version,k.onUpdate&&k.onUpdate(k)}te.__version=k.version}function Ae(te,k,ie,Ee,Be,Ue){const He=a.convert(ie.format,ie.colorSpace),ft=a.convert(ie.type),Et=D(ie.internalFormat,He,ft,ie.colorSpace),Rt=n.get(k),ct=n.get(ie);if(ct.__renderTarget=k,!Rt.__hasExternalTextures){const pt=Math.max(1,k.width>>Ue),Nt=Math.max(1,k.height>>Ue);Be===i.TEXTURE_3D||Be===i.TEXTURE_2D_ARRAY?t.texImage3D(Be,Ue,Et,pt,Nt,k.depth,0,He,ft,null):t.texImage2D(Be,Ue,Et,pt,Nt,0,He,ft,null)}t.bindFramebuffer(i.FRAMEBUFFER,te),Ie(k)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ee,Be,ct.__webglTexture,0,Z(k)):(Be===i.TEXTURE_2D||Be>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ee,Be,ct.__webglTexture,Ue),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Q(te,k,ie){if(i.bindRenderbuffer(i.RENDERBUFFER,te),k.depthBuffer){const Ee=k.depthTexture,Be=Ee&&Ee.isDepthTexture?Ee.type:null,Ue=B(k.stencilBuffer,Be),He=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ft=Z(k);Ie(k)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ft,Ue,k.width,k.height):ie?i.renderbufferStorageMultisample(i.RENDERBUFFER,ft,Ue,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,Ue,k.width,k.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,He,i.RENDERBUFFER,te)}else{const Ee=k.textures;for(let Be=0;Be<Ee.length;Be++){const Ue=Ee[Be],He=a.convert(Ue.format,Ue.colorSpace),ft=a.convert(Ue.type),Et=D(Ue.internalFormat,He,ft,Ue.colorSpace),Rt=Z(k);ie&&Ie(k)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Rt,Et,k.width,k.height):Ie(k)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Rt,Et,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,Et,k.width,k.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function le(te,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,te),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ee=n.get(k.depthTexture);Ee.__renderTarget=k,(!Ee.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),K(k.depthTexture,0);const Be=Ee.__webglTexture,Ue=Z(k);if(k.depthTexture.format===Lg)Ie(k)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Be,0,Ue):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Be,0);else if(k.depthTexture.format===rp)Ie(k)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Be,0,Ue):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Be,0);else throw new Error("Unknown depthTexture format")}function me(te){const k=n.get(te),ie=te.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==te.depthTexture){const Ee=te.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),Ee){const Be=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,Ee.removeEventListener("dispose",Be)};Ee.addEventListener("dispose",Be),k.__depthDisposeCallback=Be}k.__boundDepthTexture=Ee}if(te.depthTexture&&!k.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");const Ee=te.texture.mipmaps;Ee&&Ee.length>0?le(k.__webglFramebuffer[0],te):le(k.__webglFramebuffer,te)}else if(ie){k.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[Ee]),k.__webglDepthbuffer[Ee]===void 0)k.__webglDepthbuffer[Ee]=i.createRenderbuffer(),Q(k.__webglDepthbuffer[Ee],te,!1);else{const Be=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ue=k.__webglDepthbuffer[Ee];i.bindRenderbuffer(i.RENDERBUFFER,Ue),i.framebufferRenderbuffer(i.FRAMEBUFFER,Be,i.RENDERBUFFER,Ue)}}else{const Ee=te.texture.mipmaps;if(Ee&&Ee.length>0?t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=i.createRenderbuffer(),Q(k.__webglDepthbuffer,te,!1);else{const Be=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ue=k.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ue),i.framebufferRenderbuffer(i.FRAMEBUFFER,Be,i.RENDERBUFFER,Ue)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function be(te,k,ie){const Ee=n.get(te);k!==void 0&&Ae(Ee.__webglFramebuffer,te,te.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ie!==void 0&&me(te)}function ye(te){const k=te.texture,ie=n.get(te),Ee=n.get(k);te.addEventListener("dispose",O);const Be=te.textures,Ue=te.isWebGLCubeRenderTarget===!0,He=Be.length>1;if(He||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=i.createTexture()),Ee.__version=k.version,s.memory.textures++),Ue){ie.__webglFramebuffer=[];for(let ft=0;ft<6;ft++)if(k.mipmaps&&k.mipmaps.length>0){ie.__webglFramebuffer[ft]=[];for(let Et=0;Et<k.mipmaps.length;Et++)ie.__webglFramebuffer[ft][Et]=i.createFramebuffer()}else ie.__webglFramebuffer[ft]=i.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){ie.__webglFramebuffer=[];for(let ft=0;ft<k.mipmaps.length;ft++)ie.__webglFramebuffer[ft]=i.createFramebuffer()}else ie.__webglFramebuffer=i.createFramebuffer();if(He)for(let ft=0,Et=Be.length;ft<Et;ft++){const Rt=n.get(Be[ft]);Rt.__webglTexture===void 0&&(Rt.__webglTexture=i.createTexture(),s.memory.textures++)}if(te.samples>0&&Ie(te)===!1){ie.__webglMultisampledFramebuffer=i.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let ft=0;ft<Be.length;ft++){const Et=Be[ft];ie.__webglColorRenderbuffer[ft]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ie.__webglColorRenderbuffer[ft]);const Rt=a.convert(Et.format,Et.colorSpace),ct=a.convert(Et.type),pt=D(Et.internalFormat,Rt,ct,Et.colorSpace,te.isXRRenderTarget===!0),Nt=Z(te);i.renderbufferStorageMultisample(i.RENDERBUFFER,Nt,pt,te.width,te.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ft,i.RENDERBUFFER,ie.__webglColorRenderbuffer[ft])}i.bindRenderbuffer(i.RENDERBUFFER,null),te.depthBuffer&&(ie.__webglDepthRenderbuffer=i.createRenderbuffer(),Q(ie.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ue){t.bindTexture(i.TEXTURE_CUBE_MAP,Ee.__webglTexture),Re(i.TEXTURE_CUBE_MAP,k);for(let ft=0;ft<6;ft++)if(k.mipmaps&&k.mipmaps.length>0)for(let Et=0;Et<k.mipmaps.length;Et++)Ae(ie.__webglFramebuffer[ft][Et],te,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ft,Et);else Ae(ie.__webglFramebuffer[ft],te,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0);S(k)&&x(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(He){for(let ft=0,Et=Be.length;ft<Et;ft++){const Rt=Be[ft],ct=n.get(Rt);t.bindTexture(i.TEXTURE_2D,ct.__webglTexture),Re(i.TEXTURE_2D,Rt),Ae(ie.__webglFramebuffer,te,Rt,i.COLOR_ATTACHMENT0+ft,i.TEXTURE_2D,0),S(Rt)&&x(i.TEXTURE_2D)}t.unbindTexture()}else{let ft=i.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(ft=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ft,Ee.__webglTexture),Re(ft,k),k.mipmaps&&k.mipmaps.length>0)for(let Et=0;Et<k.mipmaps.length;Et++)Ae(ie.__webglFramebuffer[Et],te,k,i.COLOR_ATTACHMENT0,ft,Et);else Ae(ie.__webglFramebuffer,te,k,i.COLOR_ATTACHMENT0,ft,0);S(k)&&x(ft),t.unbindTexture()}te.depthBuffer&&me(te)}function j(te){const k=te.textures;for(let ie=0,Ee=k.length;ie<Ee;ie++){const Be=k[ie];if(S(Be)){const Ue=E(te),He=n.get(Be).__webglTexture;t.bindTexture(Ue,He),x(Ue),t.unbindTexture()}}}const ze=[],Pe=[];function ae(te){if(te.samples>0){if(Ie(te)===!1){const k=te.textures,ie=te.width,Ee=te.height;let Be=i.COLOR_BUFFER_BIT;const Ue=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,He=n.get(te),ft=k.length>1;if(ft)for(let Rt=0;Rt<k.length;Rt++)t.bindFramebuffer(i.FRAMEBUFFER,He.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,He.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer);const Et=te.texture.mipmaps;Et&&Et.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,He.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let Rt=0;Rt<k.length;Rt++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Be|=i.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Be|=i.STENCIL_BUFFER_BIT)),ft){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,He.__webglColorRenderbuffer[Rt]);const ct=n.get(k[Rt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ct,0)}i.blitFramebuffer(0,0,ie,Ee,0,0,ie,Ee,Be,i.NEAREST),c===!0&&(ze.length=0,Pe.length=0,ze.push(i.COLOR_ATTACHMENT0+Rt),te.depthBuffer&&te.resolveDepthBuffer===!1&&(ze.push(Ue),Pe.push(Ue),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Pe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ze))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ft)for(let Rt=0;Rt<k.length;Rt++){t.bindFramebuffer(i.FRAMEBUFFER,He.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.RENDERBUFFER,He.__webglColorRenderbuffer[Rt]);const ct=n.get(k[Rt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,He.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.TEXTURE_2D,ct,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&c){const k=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[k])}}}function Z(te){return Math.min(r.maxSamples,te.samples)}function Ie(te){const k=n.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Se(te){const k=s.render.frame;d.get(te)!==k&&(d.set(te,k),te.update())}function We(te,k){const ie=te.colorSpace,Ee=te.format,Be=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||ie!==fo&&ie!==Il&&(ai.getTransfer(ie)===Ti?(Ee!==Lr||Be!==Ji)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),k}function ht(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(f.width=te.naturalWidth||te.width,f.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(f.width=te.displayWidth,f.height=te.displayHeight):(f.width=te.width,f.height=te.height),f}this.allocateTextureUnit=V,this.resetTextureUnits=G,this.setTexture2D=K,this.setTexture2DArray=z,this.setTexture3D=ee,this.setTextureCube=ne,this.rebindTextures=be,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=j,this.updateMultisampleRenderTarget=ae,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=Ae,this.useMultisampledRTT=Ie}function xU(i,e){function t(n,r=Il){let a;const s=ai.getTransfer(r);if(n===Ji)return i.UNSIGNED_BYTE;if(n===pM)return i.UNSIGNED_SHORT_4_4_4_4;if(n===mM)return i.UNSIGNED_SHORT_5_5_5_1;if(n===W2)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===hM)return i.BYTE;if(n===dM)return i.SHORT;if(n===Bg)return i.UNSIGNED_SHORT;if(n===a_)return i.INT;if(n===zl)return i.UNSIGNED_INT;if(n===Yi)return i.FLOAT;if(n===Hr)return i.HALF_FLOAT;if(n===X2)return i.ALPHA;if(n===$2)return i.RGB;if(n===Lr)return i.RGBA;if(n===Lg)return i.DEPTH_COMPONENT;if(n===rp)return i.DEPTH_STENCIL;if(n===s_)return i.RED;if(n===o_)return i.RED_INTEGER;if(n===j2)return i.RG;if(n===gM)return i.RG_INTEGER;if(n===vM)return i.RGBA_INTEGER;if(n===my||n===gy||n===vy||n===yy)if(s===Ti)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===my)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===gy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===vy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===yy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===my)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===gy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===vy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===yy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===lS||n===cS||n===uS||n===fS)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===lS)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===cS)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===uS)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===fS)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===hS||n===dS||n===pS)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===hS||n===dS)return s===Ti?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===pS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===mS||n===gS||n===vS||n===yS||n===_S||n===xS||n===bS||n===SS||n===MS||n===ES||n===AS||n===TS||n===wS||n===CS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===mS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===gS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===vS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===yS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===_S)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===xS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===bS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===SS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===MS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ES)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===AS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===TS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===wS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===CS)return s===Ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===_y||n===RS||n===DS)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===_y)return s===Ti?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===RS)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===DS)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===q2||n===BS||n===LS||n===IS)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===_y)return a.COMPRESSED_RED_RGTC1_EXT;if(n===BS)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===LS)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===IS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===ip?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const Z7=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Q7=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class eW{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new mi,a=e.properties.get(r);a.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Wi({vertexShader:Z7,fragmentShader:Q7,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ki(new qg(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}let tW=class extends po{constructor(e,t){super();const n=this;let r=null,a=1,s=null,o="local-floor",c=1,f=null,d=null,m=null,v=null,y=null,_=null;const A=new eW,S=t.getContextAttributes();let x=null,E=null;const D=[],B=[],U=new ot;let w=null;const O=new rr;O.viewport=new ni;const I=new rr;I.viewport=new ni;const L=[O,I],R=new cU;let F=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let ke=D[oe];return ke===void 0&&(ke=new $b,D[oe]=ke),ke.getTargetRaySpace()},this.getControllerGrip=function(oe){let ke=D[oe];return ke===void 0&&(ke=new $b,D[oe]=ke),ke.getGripSpace()},this.getHand=function(oe){let ke=D[oe];return ke===void 0&&(ke=new $b,D[oe]=ke),ke.getHandSpace()};function V(oe){const ke=B.indexOf(oe.inputSource);if(ke===-1)return;const Ge=D[ke];Ge!==void 0&&(Ge.update(oe.inputSource,oe.frame,f||s),Ge.dispatchEvent({type:oe.type,data:oe.inputSource}))}function $(){r.removeEventListener("select",V),r.removeEventListener("selectstart",V),r.removeEventListener("selectend",V),r.removeEventListener("squeeze",V),r.removeEventListener("squeezestart",V),r.removeEventListener("squeezeend",V),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",K);for(let oe=0;oe<D.length;oe++){const ke=B[oe];ke!==null&&(B[oe]=null,D[oe].disconnect(ke))}F=null,G=null,A.reset(),e.setRenderTarget(x),y=null,v=null,m=null,r=null,E=null,Le.stop(),n.isPresenting=!1,e.setPixelRatio(w),e.setSize(U.width,U.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){a=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){o=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(oe){f=oe},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",V),r.addEventListener("selectstart",V),r.addEventListener("selectend",V),r.addEventListener("squeeze",V),r.addEventListener("squeezestart",V),r.addEventListener("squeezeend",V),r.addEventListener("end",$),r.addEventListener("inputsourceschange",K),S.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(U),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ge=null,Ze=null,Ae=null;S.depth&&(Ae=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ge=S.stencil?rp:Lg,Ze=S.stencil?ip:zl);const Q={colorFormat:t.RGBA8,depthFormat:Ae,scaleFactor:a};m=new XRWebGLBinding(r,t),v=m.createProjectionLayer(Q),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),E=new ar(v.textureWidth,v.textureHeight,{format:Lr,type:Ji,depthTexture:new d_(v.textureWidth,v.textureHeight,Ze,void 0,void 0,void 0,void 0,void 0,void 0,Ge),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Ge={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(r,t,Ge),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),E=new ar(y.framebufferWidth,y.framebufferHeight,{format:Lr,type:Ji,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(c),f=null,s=await r.requestReferenceSpace(o),Le.setContext(r),Le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function K(oe){for(let ke=0;ke<oe.removed.length;ke++){const Ge=oe.removed[ke],Ze=B.indexOf(Ge);Ze>=0&&(B[Ze]=null,D[Ze].disconnect(Ge))}for(let ke=0;ke<oe.added.length;ke++){const Ge=oe.added[ke];let Ze=B.indexOf(Ge);if(Ze===-1){for(let Q=0;Q<D.length;Q++)if(Q>=B.length){B.push(Ge),Ze=Q;break}else if(B[Q]===null){B[Q]=Ge,Ze=Q;break}if(Ze===-1)break}const Ae=D[Ze];Ae&&Ae.connect(Ge)}}const z=new ue,ee=new ue;function ne(oe,ke,Ge){z.setFromMatrixPosition(ke.matrixWorld),ee.setFromMatrixPosition(Ge.matrixWorld);const Ze=z.distanceTo(ee),Ae=ke.projectionMatrix.elements,Q=Ge.projectionMatrix.elements,le=Ae[14]/(Ae[10]-1),me=Ae[14]/(Ae[10]+1),be=(Ae[9]+1)/Ae[5],ye=(Ae[9]-1)/Ae[5],j=(Ae[8]-1)/Ae[0],ze=(Q[8]+1)/Q[0],Pe=le*j,ae=le*ze,Z=Ze/(-j+ze),Ie=Z*-j;if(ke.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(Ie),oe.translateZ(Z),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),Ae[10]===-1)oe.projectionMatrix.copy(ke.projectionMatrix),oe.projectionMatrixInverse.copy(ke.projectionMatrixInverse);else{const Se=le+Z,We=me+Z,ht=Pe-Ie,te=ae+(Ze-Ie),k=be*me/We*Se,ie=ye*me/We*Se;oe.projectionMatrix.makePerspective(ht,te,k,ie,Se,We),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function de(oe,ke){ke===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(ke.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;let ke=oe.near,Ge=oe.far;A.texture!==null&&(A.depthNear>0&&(ke=A.depthNear),A.depthFar>0&&(Ge=A.depthFar)),R.near=I.near=O.near=ke,R.far=I.far=O.far=Ge,(F!==R.near||G!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),F=R.near,G=R.far),O.layers.mask=oe.layers.mask|2,I.layers.mask=oe.layers.mask|4,R.layers.mask=O.layers.mask|I.layers.mask;const Ze=oe.parent,Ae=R.cameras;de(R,Ze);for(let Q=0;Q<Ae.length;Q++)de(Ae[Q],Ze);Ae.length===2?ne(R,O,I):R.projectionMatrix.copy(O.projectionMatrix),Y(oe,R,Ze)};function Y(oe,ke,Ge){Ge===null?oe.matrix.copy(ke.matrixWorld):(oe.matrix.copy(Ge.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(ke.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(ke.projectionMatrix),oe.projectionMatrixInverse.copy(ke.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=Ng*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(oe){c=oe,v!==null&&(v.fixedFoveation=oe),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=oe)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(R)};let fe=null;function Re(oe,ke){if(d=ke.getViewerPose(f||s),_=ke,d!==null){const Ge=d.views;y!==null&&(e.setRenderTargetFramebuffer(E,y.framebuffer),e.setRenderTarget(E));let Ze=!1;Ge.length!==R.cameras.length&&(R.cameras.length=0,Ze=!0);for(let le=0;le<Ge.length;le++){const me=Ge[le];let be=null;if(y!==null)be=y.getViewport(me);else{const j=m.getViewSubImage(v,me);be=j.viewport,le===0&&(e.setRenderTargetTextures(E,j.colorTexture,j.depthStencilTexture),e.setRenderTarget(E))}let ye=L[le];ye===void 0&&(ye=new rr,ye.layers.enable(le),ye.viewport=new ni,L[le]=ye),ye.matrix.fromArray(me.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(me.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(be.x,be.y,be.width,be.height),le===0&&(R.matrix.copy(ye.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Ze===!0&&R.cameras.push(ye)}const Ae=r.enabledFeatures;if(Ae&&Ae.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&m){const le=m.getDepthInformation(Ge[0]);le&&le.isValid&&le.texture&&A.init(e,le,r.renderState)}}for(let Ge=0;Ge<D.length;Ge++){const Ze=B[Ge],Ae=D[Ge];Ze!==null&&Ae!==void 0&&Ae.update(Ze,ke,f||s)}fe&&fe(oe,ke),ke.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ke}),_=null}const Le=new mU;Le.setAnimationLoop(Re),this.setAnimationLoop=function(oe){fe=oe},this.dispose=function(){}}};const Dd=new Hl,nW=new mn;function iW(i,e){function t(S,x){S.matrixAutoUpdate===!0&&S.updateMatrix(),x.value.copy(S.matrix)}function n(S,x){x.color.getRGB(S.fogColor.value,_O(i)),x.isFog?(S.fogNear.value=x.near,S.fogFar.value=x.far):x.isFogExp2&&(S.fogDensity.value=x.density)}function r(S,x,E,D,B){x.isMeshBasicMaterial||x.isMeshLambertMaterial?a(S,x):x.isMeshToonMaterial?(a(S,x),m(S,x)):x.isMeshPhongMaterial?(a(S,x),d(S,x)):x.isMeshStandardMaterial?(a(S,x),v(S,x),x.isMeshPhysicalMaterial&&y(S,x,B)):x.isMeshMatcapMaterial?(a(S,x),_(S,x)):x.isMeshDepthMaterial?a(S,x):x.isMeshDistanceMaterial?(a(S,x),A(S,x)):x.isMeshNormalMaterial?a(S,x):x.isLineBasicMaterial?(s(S,x),x.isLineDashedMaterial&&o(S,x)):x.isPointsMaterial?c(S,x,E,D):x.isSpriteMaterial?f(S,x):x.isShadowMaterial?(S.color.value.copy(x.color),S.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function a(S,x){S.opacity.value=x.opacity,x.color&&S.diffuse.value.copy(x.color),x.emissive&&S.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(S.map.value=x.map,t(x.map,S.mapTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.bumpMap&&(S.bumpMap.value=x.bumpMap,t(x.bumpMap,S.bumpMapTransform),S.bumpScale.value=x.bumpScale,x.side===Zr&&(S.bumpScale.value*=-1)),x.normalMap&&(S.normalMap.value=x.normalMap,t(x.normalMap,S.normalMapTransform),S.normalScale.value.copy(x.normalScale),x.side===Zr&&S.normalScale.value.negate()),x.displacementMap&&(S.displacementMap.value=x.displacementMap,t(x.displacementMap,S.displacementMapTransform),S.displacementScale.value=x.displacementScale,S.displacementBias.value=x.displacementBias),x.emissiveMap&&(S.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,S.emissiveMapTransform)),x.specularMap&&(S.specularMap.value=x.specularMap,t(x.specularMap,S.specularMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest);const E=e.get(x),D=E.envMap,B=E.envMapRotation;D&&(S.envMap.value=D,Dd.copy(B),Dd.x*=-1,Dd.y*=-1,Dd.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Dd.y*=-1,Dd.z*=-1),S.envMapRotation.value.setFromMatrix4(nW.makeRotationFromEuler(Dd)),S.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=x.reflectivity,S.ior.value=x.ior,S.refractionRatio.value=x.refractionRatio),x.lightMap&&(S.lightMap.value=x.lightMap,S.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,S.lightMapTransform)),x.aoMap&&(S.aoMap.value=x.aoMap,S.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,S.aoMapTransform))}function s(S,x){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,x.map&&(S.map.value=x.map,t(x.map,S.mapTransform))}function o(S,x){S.dashSize.value=x.dashSize,S.totalSize.value=x.dashSize+x.gapSize,S.scale.value=x.scale}function c(S,x,E,D){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,S.size.value=x.size*E,S.scale.value=D*.5,x.map&&(S.map.value=x.map,t(x.map,S.uvTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest)}function f(S,x){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,S.rotation.value=x.rotation,x.map&&(S.map.value=x.map,t(x.map,S.mapTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest)}function d(S,x){S.specular.value.copy(x.specular),S.shininess.value=Math.max(x.shininess,1e-4)}function m(S,x){x.gradientMap&&(S.gradientMap.value=x.gradientMap)}function v(S,x){S.metalness.value=x.metalness,x.metalnessMap&&(S.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,S.metalnessMapTransform)),S.roughness.value=x.roughness,x.roughnessMap&&(S.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,S.roughnessMapTransform)),x.envMap&&(S.envMapIntensity.value=x.envMapIntensity)}function y(S,x,E){S.ior.value=x.ior,x.sheen>0&&(S.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),S.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(S.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,S.sheenColorMapTransform)),x.sheenRoughnessMap&&(S.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,S.sheenRoughnessMapTransform))),x.clearcoat>0&&(S.clearcoat.value=x.clearcoat,S.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(S.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,S.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(S.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Zr&&S.clearcoatNormalScale.value.negate())),x.dispersion>0&&(S.dispersion.value=x.dispersion),x.iridescence>0&&(S.iridescence.value=x.iridescence,S.iridescenceIOR.value=x.iridescenceIOR,S.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(S.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,S.iridescenceMapTransform)),x.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),x.transmission>0&&(S.transmission.value=x.transmission,S.transmissionSamplerMap.value=E.texture,S.transmissionSamplerSize.value.set(E.width,E.height),x.transmissionMap&&(S.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,S.transmissionMapTransform)),S.thickness.value=x.thickness,x.thicknessMap&&(S.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=x.attenuationDistance,S.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(S.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(S.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=x.specularIntensity,S.specularColor.value.copy(x.specularColor),x.specularColorMap&&(S.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,S.specularColorMapTransform)),x.specularIntensityMap&&(S.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,S.specularIntensityMapTransform))}function _(S,x){x.matcap&&(S.matcap.value=x.matcap)}function A(S,x){const E=e.get(x).light;S.referencePosition.value.setFromMatrixPosition(E.matrixWorld),S.nearDistance.value=E.shadow.camera.near,S.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function rW(i,e,t,n){let r={},a={},s=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(E,D){const B=D.program;n.uniformBlockBinding(E,B)}function f(E,D){let B=r[E.id];B===void 0&&(_(E),B=d(E),r[E.id]=B,E.addEventListener("dispose",S));const U=D.program;n.updateUBOMapping(E,U);const w=e.render.frame;a[E.id]!==w&&(v(E),a[E.id]=w)}function d(E){const D=m();E.__bindingPointIndex=D;const B=i.createBuffer(),U=E.__size,w=E.usage;return i.bindBuffer(i.UNIFORM_BUFFER,B),i.bufferData(i.UNIFORM_BUFFER,U,w),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,D,B),B}function m(){for(let E=0;E<o;E++)if(s.indexOf(E)===-1)return s.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(E){const D=r[E.id],B=E.uniforms,U=E.__cache;i.bindBuffer(i.UNIFORM_BUFFER,D);for(let w=0,O=B.length;w<O;w++){const I=Array.isArray(B[w])?B[w]:[B[w]];for(let L=0,R=I.length;L<R;L++){const F=I[L];if(y(F,w,L,U)===!0){const G=F.__offset,V=Array.isArray(F.value)?F.value:[F.value];let $=0;for(let K=0;K<V.length;K++){const z=V[K],ee=A(z);typeof z=="number"||typeof z=="boolean"?(F.__data[0]=z,i.bufferSubData(i.UNIFORM_BUFFER,G+$,F.__data)):z.isMatrix3?(F.__data[0]=z.elements[0],F.__data[1]=z.elements[1],F.__data[2]=z.elements[2],F.__data[3]=0,F.__data[4]=z.elements[3],F.__data[5]=z.elements[4],F.__data[6]=z.elements[5],F.__data[7]=0,F.__data[8]=z.elements[6],F.__data[9]=z.elements[7],F.__data[10]=z.elements[8],F.__data[11]=0):(z.toArray(F.__data,$),$+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,G,F.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(E,D,B,U){const w=E.value,O=D+"_"+B;if(U[O]===void 0)return typeof w=="number"||typeof w=="boolean"?U[O]=w:U[O]=w.clone(),!0;{const I=U[O];if(typeof w=="number"||typeof w=="boolean"){if(I!==w)return U[O]=w,!0}else if(I.equals(w)===!1)return I.copy(w),!0}return!1}function _(E){const D=E.uniforms;let B=0;const U=16;for(let O=0,I=D.length;O<I;O++){const L=Array.isArray(D[O])?D[O]:[D[O]];for(let R=0,F=L.length;R<F;R++){const G=L[R],V=Array.isArray(G.value)?G.value:[G.value];for(let $=0,K=V.length;$<K;$++){const z=V[$],ee=A(z),ne=B%U,de=ne%ee.boundary,Y=ne+de;B+=de,Y!==0&&U-Y<ee.storage&&(B+=U-Y),G.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=B,B+=ee.storage}}}const w=B%U;return w>0&&(B+=U-w),E.__size=B,E.__cache={},this}function A(E){const D={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(D.boundary=4,D.storage=4):E.isVector2?(D.boundary=8,D.storage=8):E.isVector3||E.isColor?(D.boundary=16,D.storage=12):E.isVector4?(D.boundary=16,D.storage=16):E.isMatrix3?(D.boundary=48,D.storage=48):E.isMatrix4?(D.boundary=64,D.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),D}function S(E){const D=E.target;D.removeEventListener("dispose",S);const B=s.indexOf(D.__bindingPointIndex);s.splice(B,1),i.deleteBuffer(r[D.id]),delete r[D.id],delete a[D.id]}function x(){for(const E in r)i.deleteBuffer(r[E]);s=[],r={},a={}}return{bind:c,update:f,dispose:x}}let NC=class{constructor(e={}){const{canvas:t=hO(),context:n=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=s;const _=new Uint32Array(4),A=new Int32Array(4);let S=null,x=null;const E=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Nl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let U=!1;this._outputColorSpace=$n;let w=0,O=0,I=null,L=-1,R=null;const F=new ni,G=new ni;let V=null;const $=new Bt(0);let K=0,z=t.width,ee=t.height,ne=1,de=null,Y=null;const fe=new ni(0,0,z,ee),Re=new ni(0,0,z,ee);let Le=!1;const oe=new jg;let ke=!1,Ge=!1;const Ze=new mn,Ae=new mn,Q=new ue,le=new ni,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let be=!1;function ye(){return I===null?ne:1}let j=n;function ze(J,pe){return t.getContext(J,pe)}try{const J={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${xh}`),t.addEventListener("webglcontextlost",Pt,!1),t.addEventListener("webglcontextrestored",At,!1),t.addEventListener("webglcontextcreationerror",gt,!1),j===null){const pe="webgl2";if(j=ze(pe,J),j===null)throw ze(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let Pe,ae,Z,Ie,Se,We,ht,te,k,ie,Ee,Be,Ue,He,ft,Et,Rt,ct,pt,Nt,ge,Ve,_t,Me;function qe(){Pe=new gk(j),Pe.init(),Ve=new xU(j,Pe),ae=new ck(j,Pe,e,Ve),Z=new K7(j,Pe),ae.reverseDepthBuffer&&v&&Z.buffers.depth.setReversed(!0),Ie=new _k(j),Se=new U7,We=new J7(j,Pe,Z,Se,ae,Ve,Ie),ht=new fk(B),te=new mk(B),k=new A8(j),_t=new ok(j,k),ie=new vk(j,k,Ie,_t),Ee=new bk(j,ie,k,Ie),pt=new xk(j,ae,We),Et=new uk(Se),Be=new O7(B,ht,te,Pe,ae,_t,Et),Ue=new iW(B,Se),He=new z7,ft=new X7(Pe),ct=new sk(B,ht,te,Z,Ee,y,c),Rt=new q7(B,Ee,ae),Me=new rW(j,Ie,ae,Z),Nt=new lk(j,Pe,Ie),ge=new yk(j,Pe,Ie),Ie.programs=Be.programs,B.capabilities=ae,B.extensions=Pe,B.properties=Se,B.renderLists=He,B.shadowMap=Rt,B.state=Z,B.info=Ie}qe();const mt=new tW(B,j);this.xr=mt,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const J=Pe.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=Pe.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(J){J!==void 0&&(ne=J,this.setSize(z,ee,!1))},this.getSize=function(J){return J.set(z,ee)},this.setSize=function(J,pe,_e=!0){if(mt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=J,ee=pe,t.width=Math.floor(J*ne),t.height=Math.floor(pe*ne),_e===!0&&(t.style.width=J+"px",t.style.height=pe+"px"),this.setViewport(0,0,J,pe)},this.getDrawingBufferSize=function(J){return J.set(z*ne,ee*ne).floor()},this.setDrawingBufferSize=function(J,pe,_e){z=J,ee=pe,ne=_e,t.width=Math.floor(J*_e),t.height=Math.floor(pe*_e),this.setViewport(0,0,J,pe)},this.getCurrentViewport=function(J){return J.copy(F)},this.getViewport=function(J){return J.copy(fe)},this.setViewport=function(J,pe,_e,we){J.isVector4?fe.set(J.x,J.y,J.z,J.w):fe.set(J,pe,_e,we),Z.viewport(F.copy(fe).multiplyScalar(ne).round())},this.getScissor=function(J){return J.copy(Re)},this.setScissor=function(J,pe,_e,we){J.isVector4?Re.set(J.x,J.y,J.z,J.w):Re.set(J,pe,_e,we),Z.scissor(G.copy(Re).multiplyScalar(ne).round())},this.getScissorTest=function(){return Le},this.setScissorTest=function(J){Z.setScissorTest(Le=J)},this.setOpaqueSort=function(J){de=J},this.setTransparentSort=function(J){Y=J},this.getClearColor=function(J){return J.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor(...arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha(...arguments)},this.clear=function(J=!0,pe=!0,_e=!0){let we=0;if(J){let Oe=!1;if(I!==null){const Je=I.texture.format;Oe=Je===vM||Je===gM||Je===o_}if(Oe){const Je=I.texture.type,ut=Je===Ji||Je===zl||Je===Bg||Je===ip||Je===pM||Je===mM,xt=ct.getClearColor(),St=ct.getClearAlpha(),zt=xt.r,Ot=xt.g,Ht=xt.b;ut?(_[0]=zt,_[1]=Ot,_[2]=Ht,_[3]=St,j.clearBufferuiv(j.COLOR,0,_)):(A[0]=zt,A[1]=Ot,A[2]=Ht,A[3]=St,j.clearBufferiv(j.COLOR,0,A))}else we|=j.COLOR_BUFFER_BIT}pe&&(we|=j.DEPTH_BUFFER_BIT),_e&&(we|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Pt,!1),t.removeEventListener("webglcontextrestored",At,!1),t.removeEventListener("webglcontextcreationerror",gt,!1),ct.dispose(),He.dispose(),ft.dispose(),Se.dispose(),ht.dispose(),te.dispose(),Ee.dispose(),_t.dispose(),Me.dispose(),Be.dispose(),mt.dispose(),mt.removeEventListener("sessionstart",Ye),mt.removeEventListener("sessionend",lt),wt.stop()};function Pt(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function At(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const J=Ie.autoReset,pe=Rt.enabled,_e=Rt.autoUpdate,we=Rt.needsUpdate,Oe=Rt.type;qe(),Ie.autoReset=J,Rt.enabled=pe,Rt.autoUpdate=_e,Rt.needsUpdate=we,Rt.type=Oe}function gt(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function Ut(J){const pe=J.target;pe.removeEventListener("dispose",Ut),Xt(pe)}function Xt(J){Cn(J),Se.remove(J)}function Cn(J){const pe=Se.get(J).programs;pe!==void 0&&(pe.forEach(function(_e){Be.releaseProgram(_e)}),J.isShaderMaterial&&Be.releaseShaderCache(J))}this.renderBufferDirect=function(J,pe,_e,we,Oe,Je){pe===null&&(pe=me);const ut=Oe.isMesh&&Oe.matrixWorld.determinant()<0,xt=Ce(J,pe,_e,we,Oe);Z.setMaterial(we,ut);let St=_e.index,zt=1;if(we.wireframe===!0){if(St=ie.getWireframeAttribute(_e),St===void 0)return;zt=2}const Ot=_e.drawRange,Ht=_e.attributes.position;let rn=Ot.start*zt,en=(Ot.start+Ot.count)*zt;Je!==null&&(rn=Math.max(rn,Je.start*zt),en=Math.min(en,(Je.start+Je.count)*zt)),St!==null?(rn=Math.max(rn,0),en=Math.min(en,St.count)):Ht!=null&&(rn=Math.max(rn,0),en=Math.min(en,Ht.count));const kn=en-rn;if(kn<0||kn===1/0)return;_t.setup(Oe,we,xt,_e,St);let qt,on=Nt;if(St!==null&&(qt=k.get(St),on=ge,on.setIndex(qt)),Oe.isMesh)we.wireframe===!0?(Z.setLineWidth(we.wireframeLinewidth*ye()),on.setMode(j.LINES)):on.setMode(j.TRIANGLES);else if(Oe.isLine){let Yt=we.linewidth;Yt===void 0&&(Yt=1),Z.setLineWidth(Yt*ye()),Oe.isLineSegments?on.setMode(j.LINES):Oe.isLineLoop?on.setMode(j.LINE_LOOP):on.setMode(j.LINE_STRIP)}else Oe.isPoints?on.setMode(j.POINTS):Oe.isSprite&&on.setMode(j.TRIANGLES);if(Oe.isBatchedMesh)if(Oe._multiDrawInstances!==null)Mg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),on.renderMultiDrawInstances(Oe._multiDrawStarts,Oe._multiDrawCounts,Oe._multiDrawCount,Oe._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))on.renderMultiDraw(Oe._multiDrawStarts,Oe._multiDrawCounts,Oe._multiDrawCount);else{const Yt=Oe._multiDrawStarts,gi=Oe._multiDrawCounts,Sn=Oe._multiDrawCount,wn=St?k.get(St).bytesPerElement:1,xi=Se.get(we).currentProgram.getUniforms();for(let un=0;un<Sn;un++)xi.setValue(j,"_gl_DrawID",un),on.render(Yt[un]/wn,gi[un])}else if(Oe.isInstancedMesh)on.renderInstances(rn,kn,Oe.count);else if(_e.isInstancedBufferGeometry){const Yt=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,gi=Math.min(_e.instanceCount,Yt);on.renderInstances(rn,kn,gi)}else on.render(rn,kn)};function Tn(J,pe,_e){J.transparent===!0&&J.side===fa&&J.forceSinglePass===!1?(J.side=Zr,J.needsUpdate=!0,jt(J,pe,_e),J.side=Fl,J.needsUpdate=!0,jt(J,pe,_e),J.side=fa):jt(J,pe,_e)}this.compile=function(J,pe,_e=null){_e===null&&(_e=J),x=ft.get(_e),x.init(pe),D.push(x),_e.traverseVisible(function(Oe){Oe.isLight&&Oe.layers.test(pe.layers)&&(x.pushLight(Oe),Oe.castShadow&&x.pushShadow(Oe))}),J!==_e&&J.traverseVisible(function(Oe){Oe.isLight&&Oe.layers.test(pe.layers)&&(x.pushLight(Oe),Oe.castShadow&&x.pushShadow(Oe))}),x.setupLights();const we=new Set;return J.traverse(function(Oe){if(!(Oe.isMesh||Oe.isPoints||Oe.isLine||Oe.isSprite))return;const Je=Oe.material;if(Je)if(Array.isArray(Je))for(let ut=0;ut<Je.length;ut++){const xt=Je[ut];Tn(xt,_e,Oe),we.add(xt)}else Tn(Je,_e,Oe),we.add(Je)}),x=D.pop(),we},this.compileAsync=function(J,pe,_e=null){const we=this.compile(J,pe,_e);return new Promise(Oe=>{function Je(){if(we.forEach(function(ut){Se.get(ut).currentProgram.isReady()&&we.delete(ut)}),we.size===0){Oe(J);return}setTimeout(Je,10)}Pe.get("KHR_parallel_shader_compile")!==null?Je():setTimeout(Je,10)})};let he=null;function nt(J){he&&he(J)}function Ye(){wt.stop()}function lt(){wt.start()}const wt=new mU;wt.setAnimationLoop(nt),typeof self<"u"&&wt.setContext(self),this.setAnimationLoop=function(J){he=J,mt.setAnimationLoop(J),J===null?wt.stop():wt.start()},mt.addEventListener("sessionstart",Ye),mt.addEventListener("sessionend",lt),this.render=function(J,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),mt.enabled===!0&&mt.isPresenting===!0&&(mt.cameraAutoUpdate===!0&&mt.updateCamera(pe),pe=mt.getCamera()),J.isScene===!0&&J.onBeforeRender(B,J,pe,I),x=ft.get(J,D.length),x.init(pe),D.push(x),Ae.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),oe.setFromProjectionMatrix(Ae),Ge=this.localClippingEnabled,ke=Et.init(this.clippingPlanes,Ge),S=He.get(J,E.length),S.init(),E.push(S),mt.enabled===!0&&mt.isPresenting===!0){const Je=B.xr.getDepthSensingMesh();Je!==null&&hn(Je,pe,-1/0,B.sortObjects)}hn(J,pe,0,B.sortObjects),S.finish(),B.sortObjects===!0&&S.sort(de,Y),be=mt.enabled===!1||mt.isPresenting===!1||mt.hasDepthSensing()===!1,be&&ct.addToRenderList(S,J),this.info.render.frame++,ke===!0&&Et.beginShadows();const _e=x.state.shadowsArray;Rt.render(_e,J,pe),ke===!0&&Et.endShadows(),this.info.autoReset===!0&&this.info.reset();const we=S.opaque,Oe=S.transmissive;if(x.setupLights(),pe.isArrayCamera){const Je=pe.cameras;if(Oe.length>0)for(let ut=0,xt=Je.length;ut<xt;ut++){const St=Je[ut];Qt(we,Oe,J,St)}be&&ct.render(J);for(let ut=0,xt=Je.length;ut<xt;ut++){const St=Je[ut];nn(S,J,St,St.viewport)}}else Oe.length>0&&Qt(we,Oe,J,pe),be&&ct.render(J),nn(S,J,pe);I!==null&&O===0&&(We.updateMultisampleRenderTarget(I),We.updateRenderTargetMipmap(I)),J.isScene===!0&&J.onAfterRender(B,J,pe),_t.resetDefaultState(),L=-1,R=null,D.pop(),D.length>0?(x=D[D.length-1],ke===!0&&Et.setGlobalState(B.clippingPlanes,x.state.camera)):x=null,E.pop(),E.length>0?S=E[E.length-1]:S=null};function hn(J,pe,_e,we){if(J.visible===!1)return;if(J.layers.test(pe.layers)){if(J.isGroup)_e=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(pe);else if(J.isLight)x.pushLight(J),J.castShadow&&x.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||oe.intersectsSprite(J)){we&&le.setFromMatrixPosition(J.matrixWorld).applyMatrix4(Ae);const ut=Ee.update(J),xt=J.material;xt.visible&&S.push(J,ut,xt,_e,le.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||oe.intersectsObject(J))){const ut=Ee.update(J),xt=J.material;if(we&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),le.copy(J.boundingSphere.center)):(ut.boundingSphere===null&&ut.computeBoundingSphere(),le.copy(ut.boundingSphere.center)),le.applyMatrix4(J.matrixWorld).applyMatrix4(Ae)),Array.isArray(xt)){const St=ut.groups;for(let zt=0,Ot=St.length;zt<Ot;zt++){const Ht=St[zt],rn=xt[Ht.materialIndex];rn&&rn.visible&&S.push(J,ut,rn,_e,le.z,Ht)}}else xt.visible&&S.push(J,ut,xt,_e,le.z,null)}}const Je=J.children;for(let ut=0,xt=Je.length;ut<xt;ut++)hn(Je[ut],pe,_e,we)}function nn(J,pe,_e,we){const Oe=J.opaque,Je=J.transmissive,ut=J.transparent;x.setupLightsView(_e),ke===!0&&Et.setGlobalState(B.clippingPlanes,_e),we&&Z.viewport(F.copy(we)),Oe.length>0&&Ft(Oe,pe,_e),Je.length>0&&Ft(Je,pe,_e),ut.length>0&&Ft(ut,pe,_e),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Qt(J,pe,_e,we){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[we.id]===void 0&&(x.state.transmissionRenderTarget[we.id]=new ar(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?Hr:Ji,minFilter:Ho,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ai.workingColorSpace}));const Je=x.state.transmissionRenderTarget[we.id],ut=we.viewport||F;Je.setSize(ut.z*B.transmissionResolutionScale,ut.w*B.transmissionResolutionScale);const xt=B.getRenderTarget();B.setRenderTarget(Je),B.getClearColor($),K=B.getClearAlpha(),K<1&&B.setClearColor(16777215,.5),B.clear(),be&&ct.render(_e);const St=B.toneMapping;B.toneMapping=Nl;const zt=we.viewport;if(we.viewport!==void 0&&(we.viewport=void 0),x.setupLightsView(we),ke===!0&&Et.setGlobalState(B.clippingPlanes,we),Ft(J,_e,we),We.updateMultisampleRenderTarget(Je),We.updateRenderTargetMipmap(Je),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let Ht=0,rn=pe.length;Ht<rn;Ht++){const en=pe[Ht],kn=en.object,qt=en.geometry,on=en.material,Yt=en.group;if(on.side===fa&&kn.layers.test(we.layers)){const gi=on.side;on.side=Zr,on.needsUpdate=!0,tn(kn,_e,we,qt,on,Yt),on.side=gi,on.needsUpdate=!0,Ot=!0}}Ot===!0&&(We.updateMultisampleRenderTarget(Je),We.updateRenderTargetMipmap(Je))}B.setRenderTarget(xt),B.setClearColor($,K),zt!==void 0&&(we.viewport=zt),B.toneMapping=St}function Ft(J,pe,_e){const we=pe.isScene===!0?pe.overrideMaterial:null;for(let Oe=0,Je=J.length;Oe<Je;Oe++){const ut=J[Oe],xt=ut.object,St=ut.geometry,zt=ut.group;let Ot=ut.material;Ot.allowOverride===!0&&we!==null&&(Ot=we),xt.layers.test(_e.layers)&&tn(xt,pe,_e,St,Ot,zt)}}function tn(J,pe,_e,we,Oe,Je){J.onBeforeRender(B,pe,_e,we,Oe,Je),J.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),Oe.onBeforeRender(B,pe,_e,we,J,Je),Oe.transparent===!0&&Oe.side===fa&&Oe.forceSinglePass===!1?(Oe.side=Zr,Oe.needsUpdate=!0,B.renderBufferDirect(_e,pe,we,Oe,J,Je),Oe.side=Fl,Oe.needsUpdate=!0,B.renderBufferDirect(_e,pe,we,Oe,J,Je),Oe.side=fa):B.renderBufferDirect(_e,pe,we,Oe,J,Je),J.onAfterRender(B,pe,_e,we,Oe,Je)}function jt(J,pe,_e){pe.isScene!==!0&&(pe=me);const we=Se.get(J),Oe=x.state.lights,Je=x.state.shadowsArray,ut=Oe.state.version,xt=Be.getParameters(J,Oe.state,Je,pe,_e),St=Be.getProgramCacheKey(xt);let zt=we.programs;we.environment=J.isMeshStandardMaterial?pe.environment:null,we.fog=pe.fog,we.envMap=(J.isMeshStandardMaterial?te:ht).get(J.envMap||we.environment),we.envMapRotation=we.environment!==null&&J.envMap===null?pe.environmentRotation:J.envMapRotation,zt===void 0&&(J.addEventListener("dispose",Ut),zt=new Map,we.programs=zt);let Ot=zt.get(St);if(Ot!==void 0){if(we.currentProgram===Ot&&we.lightsStateVersion===ut)return re(J,xt),Ot}else xt.uniforms=Be.getUniforms(J),J.onBeforeCompile(xt,B),Ot=Be.acquireProgram(xt,St),zt.set(St,Ot),we.uniforms=xt.uniforms;const Ht=we.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Ht.clippingPlanes=Et.uniform),re(J,xt),we.needsLights=Qe(J),we.lightsStateVersion=ut,we.needsLights&&(Ht.ambientLightColor.value=Oe.state.ambient,Ht.lightProbe.value=Oe.state.probe,Ht.directionalLights.value=Oe.state.directional,Ht.directionalLightShadows.value=Oe.state.directionalShadow,Ht.spotLights.value=Oe.state.spot,Ht.spotLightShadows.value=Oe.state.spotShadow,Ht.rectAreaLights.value=Oe.state.rectArea,Ht.ltc_1.value=Oe.state.rectAreaLTC1,Ht.ltc_2.value=Oe.state.rectAreaLTC2,Ht.pointLights.value=Oe.state.point,Ht.pointLightShadows.value=Oe.state.pointShadow,Ht.hemisphereLights.value=Oe.state.hemi,Ht.directionalShadowMap.value=Oe.state.directionalShadowMap,Ht.directionalShadowMatrix.value=Oe.state.directionalShadowMatrix,Ht.spotShadowMap.value=Oe.state.spotShadowMap,Ht.spotLightMatrix.value=Oe.state.spotLightMatrix,Ht.spotLightMap.value=Oe.state.spotLightMap,Ht.pointShadowMap.value=Oe.state.pointShadowMap,Ht.pointShadowMatrix.value=Oe.state.pointShadowMatrix),we.currentProgram=Ot,we.uniformsList=null,Ot}function W(J){if(J.uniformsList===null){const pe=J.currentProgram.getUniforms();J.uniformsList=jb.seqWithValue(pe.seq,J.uniforms)}return J.uniformsList}function re(J,pe){const _e=Se.get(J);_e.outputColorSpace=pe.outputColorSpace,_e.batching=pe.batching,_e.batchingColor=pe.batchingColor,_e.instancing=pe.instancing,_e.instancingColor=pe.instancingColor,_e.instancingMorph=pe.instancingMorph,_e.skinning=pe.skinning,_e.morphTargets=pe.morphTargets,_e.morphNormals=pe.morphNormals,_e.morphColors=pe.morphColors,_e.morphTargetsCount=pe.morphTargetsCount,_e.numClippingPlanes=pe.numClippingPlanes,_e.numIntersection=pe.numClipIntersection,_e.vertexAlphas=pe.vertexAlphas,_e.vertexTangents=pe.vertexTangents,_e.toneMapping=pe.toneMapping}function Ce(J,pe,_e,we,Oe){pe.isScene!==!0&&(pe=me),We.resetTextureUnits();const Je=pe.fog,ut=we.isMeshStandardMaterial?pe.environment:null,xt=I===null?B.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:fo,St=(we.isMeshStandardMaterial?te:ht).get(we.envMap||ut),zt=we.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,Ot=!!_e.attributes.tangent&&(!!we.normalMap||we.anisotropy>0),Ht=!!_e.morphAttributes.position,rn=!!_e.morphAttributes.normal,en=!!_e.morphAttributes.color;let kn=Nl;we.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(kn=B.toneMapping);const qt=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,on=qt!==void 0?qt.length:0,Yt=Se.get(we),gi=x.state.lights;if(ke===!0&&(Ge===!0||J!==R)){const bi=J===R&&we.id===L;Et.setState(we,J,bi)}let Sn=!1;we.version===Yt.__version?(Yt.needsLights&&Yt.lightsStateVersion!==gi.state.version||Yt.outputColorSpace!==xt||Oe.isBatchedMesh&&Yt.batching===!1||!Oe.isBatchedMesh&&Yt.batching===!0||Oe.isBatchedMesh&&Yt.batchingColor===!0&&Oe.colorTexture===null||Oe.isBatchedMesh&&Yt.batchingColor===!1&&Oe.colorTexture!==null||Oe.isInstancedMesh&&Yt.instancing===!1||!Oe.isInstancedMesh&&Yt.instancing===!0||Oe.isSkinnedMesh&&Yt.skinning===!1||!Oe.isSkinnedMesh&&Yt.skinning===!0||Oe.isInstancedMesh&&Yt.instancingColor===!0&&Oe.instanceColor===null||Oe.isInstancedMesh&&Yt.instancingColor===!1&&Oe.instanceColor!==null||Oe.isInstancedMesh&&Yt.instancingMorph===!0&&Oe.morphTexture===null||Oe.isInstancedMesh&&Yt.instancingMorph===!1&&Oe.morphTexture!==null||Yt.envMap!==St||we.fog===!0&&Yt.fog!==Je||Yt.numClippingPlanes!==void 0&&(Yt.numClippingPlanes!==Et.numPlanes||Yt.numIntersection!==Et.numIntersection)||Yt.vertexAlphas!==zt||Yt.vertexTangents!==Ot||Yt.morphTargets!==Ht||Yt.morphNormals!==rn||Yt.morphColors!==en||Yt.toneMapping!==kn||Yt.morphTargetsCount!==on)&&(Sn=!0):(Sn=!0,Yt.__version=we.version);let wn=Yt.currentProgram;Sn===!0&&(wn=jt(we,pe,Oe));let xi=!1,un=!1,zn=!1;const Pn=wn.getUniforms(),Ui=Yt.uniforms;if(Z.useProgram(wn.program)&&(xi=!0,un=!0,zn=!0),we.id!==L&&(L=we.id,un=!0),xi||R!==J){Z.buffers.depth.getReversed()?(Ze.copy(J.projectionMatrix),Q5(Ze),eG(Ze),Pn.setValue(j,"projectionMatrix",Ze)):Pn.setValue(j,"projectionMatrix",J.projectionMatrix),Pn.setValue(j,"viewMatrix",J.matrixWorldInverse);const Ir=Pn.map.cameraPosition;Ir!==void 0&&Ir.setValue(j,Q.setFromMatrixPosition(J.matrixWorld)),ae.logarithmicDepthBuffer&&Pn.setValue(j,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&Pn.setValue(j,"isOrthographic",J.isOrthographicCamera===!0),R!==J&&(R=J,un=!0,zn=!0)}if(Oe.isSkinnedMesh){Pn.setOptional(j,Oe,"bindMatrix"),Pn.setOptional(j,Oe,"bindMatrixInverse");const bi=Oe.skeleton;bi&&(bi.boneTexture===null&&bi.computeBoneTexture(),Pn.setValue(j,"boneTexture",bi.boneTexture,We))}Oe.isBatchedMesh&&(Pn.setOptional(j,Oe,"batchingTexture"),Pn.setValue(j,"batchingTexture",Oe._matricesTexture,We),Pn.setOptional(j,Oe,"batchingIdTexture"),Pn.setValue(j,"batchingIdTexture",Oe._indirectTexture,We),Pn.setOptional(j,Oe,"batchingColorTexture"),Oe._colorsTexture!==null&&Pn.setValue(j,"batchingColorTexture",Oe._colorsTexture,We));const ei=_e.morphAttributes;if((ei.position!==void 0||ei.normal!==void 0||ei.color!==void 0)&&pt.update(Oe,_e,wn),(un||Yt.receiveShadow!==Oe.receiveShadow)&&(Yt.receiveShadow=Oe.receiveShadow,Pn.setValue(j,"receiveShadow",Oe.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(Ui.envMap.value=St,Ui.flipEnvMap.value=St.isCubeTexture&&St.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&&we.envMap===null&&pe.environment!==null&&(Ui.envMapIntensity.value=pe.environmentIntensity),un&&(Pn.setValue(j,"toneMappingExposure",B.toneMappingExposure),Yt.needsLights&&je(Ui,zn),Je&&we.fog===!0&&Ue.refreshFogUniforms(Ui,Je),Ue.refreshMaterialUniforms(Ui,we,ne,ee,x.state.transmissionRenderTarget[J.id]),jb.upload(j,W(Yt),Ui,We)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(jb.upload(j,W(Yt),Ui,We),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&Pn.setValue(j,"center",Oe.center),Pn.setValue(j,"modelViewMatrix",Oe.modelViewMatrix),Pn.setValue(j,"normalMatrix",Oe.normalMatrix),Pn.setValue(j,"modelMatrix",Oe.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const bi=we.uniformsGroups;for(let Ir=0,va=bi.length;Ir<va;Ir++){const go=bi[Ir];Me.update(go,wn),Me.bind(go,wn)}}return wn}function je(J,pe){J.ambientLightColor.needsUpdate=pe,J.lightProbe.needsUpdate=pe,J.directionalLights.needsUpdate=pe,J.directionalLightShadows.needsUpdate=pe,J.pointLights.needsUpdate=pe,J.pointLightShadows.needsUpdate=pe,J.spotLights.needsUpdate=pe,J.spotLightShadows.needsUpdate=pe,J.rectAreaLights.needsUpdate=pe,J.hemisphereLights.needsUpdate=pe}function Qe(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(J,pe,_e){const we=Se.get(J);we.__autoAllocateDepthBuffer=J.resolveDepthBuffer===!1,we.__autoAllocateDepthBuffer===!1&&(we.__useRenderToTexture=!1),Se.get(J.texture).__webglTexture=pe,Se.get(J.depthTexture).__webglTexture=we.__autoAllocateDepthBuffer?void 0:_e,we.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(J,pe){const _e=Se.get(J);_e.__webglFramebuffer=pe,_e.__useDefaultFramebuffer=pe===void 0};const tt=j.createFramebuffer();this.setRenderTarget=function(J,pe=0,_e=0){I=J,w=pe,O=_e;let we=!0,Oe=null,Je=!1,ut=!1;if(J){const St=Se.get(J);if(St.__useDefaultFramebuffer!==void 0)Z.bindFramebuffer(j.FRAMEBUFFER,null),we=!1;else if(St.__webglFramebuffer===void 0)We.setupRenderTarget(J);else if(St.__hasExternalTextures)We.rebindTextures(J,Se.get(J.texture).__webglTexture,Se.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const Ht=J.depthTexture;if(St.__boundDepthTexture!==Ht){if(Ht!==null&&Se.has(Ht)&&(J.width!==Ht.image.width||J.height!==Ht.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");We.setupDepthRenderbuffer(J)}}const zt=J.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(ut=!0);const Ot=Se.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(Ot[pe])?Oe=Ot[pe][_e]:Oe=Ot[pe],Je=!0):J.samples>0&&We.useMultisampledRTT(J)===!1?Oe=Se.get(J).__webglMultisampledFramebuffer:Array.isArray(Ot)?Oe=Ot[_e]:Oe=Ot,F.copy(J.viewport),G.copy(J.scissor),V=J.scissorTest}else F.copy(fe).multiplyScalar(ne).floor(),G.copy(Re).multiplyScalar(ne).floor(),V=Le;if(_e!==0&&(Oe=tt),Z.bindFramebuffer(j.FRAMEBUFFER,Oe)&&we&&Z.drawBuffers(J,Oe),Z.viewport(F),Z.scissor(G),Z.setScissorTest(V),Je){const St=Se.get(J.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+pe,St.__webglTexture,_e)}else if(ut){const St=Se.get(J.texture),zt=pe;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,St.__webglTexture,_e,zt)}else if(J!==null&&_e!==0){const St=Se.get(J.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,St.__webglTexture,_e)}L=-1},this.readRenderTargetPixels=function(J,pe,_e,we,Oe,Je,ut,xt=0){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let St=Se.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&ut!==void 0&&(St=St[ut]),St){Z.bindFramebuffer(j.FRAMEBUFFER,St);try{const zt=J.textures[xt],Ot=zt.format,Ht=zt.type;if(!ae.textureFormatReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ae.textureTypeReadable(Ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=J.width-we&&_e>=0&&_e<=J.height-Oe&&(J.textures.length>1&&j.readBuffer(j.COLOR_ATTACHMENT0+xt),j.readPixels(pe,_e,we,Oe,Ve.convert(Ot),Ve.convert(Ht),Je))}finally{const zt=I!==null?Se.get(I).__webglFramebuffer:null;Z.bindFramebuffer(j.FRAMEBUFFER,zt)}}},this.readRenderTargetPixelsAsync=async function(J,pe,_e,we,Oe,Je,ut,xt=0){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let St=Se.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&ut!==void 0&&(St=St[ut]),St)if(pe>=0&&pe<=J.width-we&&_e>=0&&_e<=J.height-Oe){Z.bindFramebuffer(j.FRAMEBUFFER,St);const zt=J.textures[xt],Ot=zt.format,Ht=zt.type;if(!ae.textureFormatReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ae.textureTypeReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const rn=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,rn),j.bufferData(j.PIXEL_PACK_BUFFER,Je.byteLength,j.STREAM_READ),J.textures.length>1&&j.readBuffer(j.COLOR_ATTACHMENT0+xt),j.readPixels(pe,_e,we,Oe,Ve.convert(Ot),Ve.convert(Ht),0);const en=I!==null?Se.get(I).__webglFramebuffer:null;Z.bindFramebuffer(j.FRAMEBUFFER,en);const kn=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await Z5(j,kn,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,rn),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Je),j.deleteBuffer(rn),j.deleteSync(kn),Je}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(J,pe=null,_e=0){const we=Math.pow(2,-_e),Oe=Math.floor(J.image.width*we),Je=Math.floor(J.image.height*we),ut=pe!==null?pe.x:0,xt=pe!==null?pe.y:0;We.setTexture2D(J,0),j.copyTexSubImage2D(j.TEXTURE_2D,_e,0,0,ut,xt,Oe,Je),Z.unbindTexture()};const Tt=j.createFramebuffer(),dt=j.createFramebuffer();this.copyTextureToTexture=function(J,pe,_e=null,we=null,Oe=0,Je=null){Je===null&&(Oe!==0?(Mg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Je=Oe,Oe=0):Je=0);let ut,xt,St,zt,Ot,Ht,rn,en,kn;const qt=J.isCompressedTexture?J.mipmaps[Je]:J.image;if(_e!==null)ut=_e.max.x-_e.min.x,xt=_e.max.y-_e.min.y,St=_e.isBox3?_e.max.z-_e.min.z:1,zt=_e.min.x,Ot=_e.min.y,Ht=_e.isBox3?_e.min.z:0;else{const ei=Math.pow(2,-Oe);ut=Math.floor(qt.width*ei),xt=Math.floor(qt.height*ei),J.isDataArrayTexture?St=qt.depth:J.isData3DTexture?St=Math.floor(qt.depth*ei):St=1,zt=0,Ot=0,Ht=0}we!==null?(rn=we.x,en=we.y,kn=we.z):(rn=0,en=0,kn=0);const on=Ve.convert(pe.format),Yt=Ve.convert(pe.type);let gi;pe.isData3DTexture?(We.setTexture3D(pe,0),gi=j.TEXTURE_3D):pe.isDataArrayTexture||pe.isCompressedArrayTexture?(We.setTexture2DArray(pe,0),gi=j.TEXTURE_2D_ARRAY):(We.setTexture2D(pe,0),gi=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,pe.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,pe.unpackAlignment);const Sn=j.getParameter(j.UNPACK_ROW_LENGTH),wn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),xi=j.getParameter(j.UNPACK_SKIP_PIXELS),un=j.getParameter(j.UNPACK_SKIP_ROWS),zn=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,qt.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,qt.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,zt),j.pixelStorei(j.UNPACK_SKIP_ROWS,Ot),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Ht);const Pn=J.isDataArrayTexture||J.isData3DTexture,Ui=pe.isDataArrayTexture||pe.isData3DTexture;if(J.isDepthTexture){const ei=Se.get(J),bi=Se.get(pe),Ir=Se.get(ei.__renderTarget),va=Se.get(bi.__renderTarget);Z.bindFramebuffer(j.READ_FRAMEBUFFER,Ir.__webglFramebuffer),Z.bindFramebuffer(j.DRAW_FRAMEBUFFER,va.__webglFramebuffer);for(let go=0;go<St;go++)Pn&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Se.get(J).__webglTexture,Oe,Ht+go),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Se.get(pe).__webglTexture,Je,kn+go)),j.blitFramebuffer(zt,Ot,ut,xt,rn,en,ut,xt,j.DEPTH_BUFFER_BIT,j.NEAREST);Z.bindFramebuffer(j.READ_FRAMEBUFFER,null),Z.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(Oe!==0||J.isRenderTargetTexture||Se.has(J)){const ei=Se.get(J),bi=Se.get(pe);Z.bindFramebuffer(j.READ_FRAMEBUFFER,Tt),Z.bindFramebuffer(j.DRAW_FRAMEBUFFER,dt);for(let Ir=0;Ir<St;Ir++)Pn?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ei.__webglTexture,Oe,Ht+Ir):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,ei.__webglTexture,Oe),Ui?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,bi.__webglTexture,Je,kn+Ir):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,bi.__webglTexture,Je),Oe!==0?j.blitFramebuffer(zt,Ot,ut,xt,rn,en,ut,xt,j.COLOR_BUFFER_BIT,j.NEAREST):Ui?j.copyTexSubImage3D(gi,Je,rn,en,kn+Ir,zt,Ot,ut,xt):j.copyTexSubImage2D(gi,Je,rn,en,zt,Ot,ut,xt);Z.bindFramebuffer(j.READ_FRAMEBUFFER,null),Z.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else Ui?J.isDataTexture||J.isData3DTexture?j.texSubImage3D(gi,Je,rn,en,kn,ut,xt,St,on,Yt,qt.data):pe.isCompressedArrayTexture?j.compressedTexSubImage3D(gi,Je,rn,en,kn,ut,xt,St,on,qt.data):j.texSubImage3D(gi,Je,rn,en,kn,ut,xt,St,on,Yt,qt):J.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,Je,rn,en,ut,xt,on,Yt,qt.data):J.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,Je,rn,en,qt.width,qt.height,on,qt.data):j.texSubImage2D(j.TEXTURE_2D,Je,rn,en,ut,xt,on,Yt,qt);j.pixelStorei(j.UNPACK_ROW_LENGTH,Sn),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,wn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,xi),j.pixelStorei(j.UNPACK_SKIP_ROWS,un),j.pixelStorei(j.UNPACK_SKIP_IMAGES,zn),Je===0&&pe.generateMipmaps&&j.generateMipmap(gi),Z.unbindTexture()},this.copyTextureToTexture3D=function(J,pe,_e=null,we=null,Oe=0){return Mg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(J,pe,_e,we,Oe)},this.initRenderTarget=function(J){Se.get(J).__webglFramebuffer===void 0&&We.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?We.setTextureCube(J,0):J.isData3DTexture?We.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?We.setTexture2DArray(J,0):We.setTexture2D(J,0),Z.unbindTexture()},this.resetState=function(){w=0,O=0,I=null,Z.reset(),_t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Go}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=ai._getDrawingBufferColorSpace(e),t.unpackColorSpace=ai._getUnpackColorSpace()}};const aW=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:k2,AddEquation:nh,AddOperation:GN,AdditiveAnimationBlendMode:Y2,AdditiveBlending:Fw,AgXToneMapping:$N,AlphaFormat:X2,AlwaysCompare:oO,AlwaysDepth:nS,AlwaysStencilFunc:kw,AmbientLight:nU,AnimationAction:hU,AnimationClip:Hg,AnimationLoader:A6,AnimationMixer:dU,AnimationObjectGroup:q6,AnimationUtils:b6,ArcCurve:RO,ArrayCamera:cU,ArrowHelper:g8,AttachedBindMode:Gw,Audio:uU,AudioAnalyser:F6,AudioContext:CC,AudioListener:N6,AudioLoader:L6,AxesHelper:v8,BackSide:Zr,BasicDepthPacking:Vc,BasicShadowMap:bN,BatchedMesh:TO,Bone:MM,BooleanKeyframeTrack:mp,Box2:n8,Box3:Ba,Box3Helper:p8,BoxGeometry:l_,BoxHelper:d8,BufferAttribute:si,BufferGeometry:Fn,BufferGeometryLoader:oU,ByteType:hM,Cache:Nu,Camera:c_,CameraHelper:h8,CanvasTexture:WG,CapsuleGeometry:wM,CatmullRomCurve3:DO,CineonToneMapping:WN,CircleGeometry:CM,ClampToEdgeWrapping:Br,Clock:RC,Color:Bt,ColorKeyframeTrack:SC,ColorManagement:ai,CompressedArrayTexture:VG,CompressedCubeTexture:kG,CompressedTexture:TM,CompressedTextureLoader:T6,ConeGeometry:m_,ConstantAlphaFactor:FN,ConstantColorFactor:ON,Controls:_8,CubeCamera:bO,CubeReflectionMapping:zc,CubeRefractionMapping:mh,CubeTexture:u_,CubeTextureLoader:eU,CubeUVReflectionMapping:$g,CubicBezierCurve:cC,CubicBezierCurve3:BO,CubicInterpolant:JO,CullFaceBack:Uw,CullFaceFront:xN,CullFaceFrontBack:n5,CullFaceNone:_N,Curve:$l,CurvePath:IO,CustomBlending:SN,CustomToneMapping:XN,CylinderGeometry:p_,Cylindrical:t8,Data3DTexture:xM,DataArrayTexture:_M,DataTexture:Ol,DataTextureLoader:MC,DataUtils:Wd,DecrementStencilOp:h5,DecrementWrapStencilOp:p5,DefaultLoadingManager:gg,DepthFormat:Lg,DepthStencilFormat:rp,DepthTexture:d_,DetachedBindMode:qN,DirectionalLight:wC,DirectionalLightHelper:f8,DiscreteInterpolant:ZO,DodecahedronGeometry:RM,DoubleSide:fa,DstAlphaFactor:BN,DstColorFactor:IN,DynamicCopyUsage:R5,DynamicDrawUsage:M5,DynamicReadUsage:T5,EdgesGeometry:CO,EllipseCurve:DM,EqualCompare:iO,EqualDepth:rS,EqualStencilFunc:y5,EquirectangularReflectionMapping:Rg,EquirectangularRefractionMapping:Ny,Euler:Hl,EventDispatcher:po,ExtrudeGeometry:zO,FileLoader:La,Float16BufferAttribute:bG,Float32BufferAttribute:Zt,FloatType:Yi,Fog:SM,FogExp2:bM,FramebufferTexture:GG,FrontSide:Fl,Frustum:jg,FrustumArray:EM,GLBufferAttribute:e8,GLSL1:B5,GLSL3:Ww,GreaterCompare:rO,GreaterDepth:sS,GreaterEqualCompare:sO,GreaterEqualDepth:aS,GreaterEqualStencilFunc:S5,GreaterStencilFunc:x5,GridHelper:c8,Group:Iu,HalfFloatType:Hr,HemisphereLight:tU,HemisphereLightHelper:l8,IcosahedronGeometry:g_,ImageBitmapLoader:lU,ImageLoader:Wy,ImageUtils:dO,IncrementStencilOp:f5,IncrementWrapStencilOp:d5,InstancedBufferAttribute:Hu,InstancedBufferGeometry:sU,InstancedInterleavedBuffer:Q6,InstancedMesh:aC,Int16BufferAttribute:_G,Int32BufferAttribute:xG,Int8BufferAttribute:gG,IntType:a_,InterleavedBuffer:f_,InterleavedBufferAttribute:Fg,Interpolant:Kg,InterpolateDiscrete:Ig,InterpolateLinear:Pg,InterpolateSmooth:kb,InterpolationSamplingMode:P5,InterpolationSamplingType:I5,InvertStencilOp:m5,KeepStencilOp:Ud,KeyframeTrack:Yo,LOD:AO,LatheGeometry:BM,Layers:Og,LessCompare:nO,LessDepth:iS,LessEqualCompare:J2,LessEqualDepth:np,LessEqualStencilFunc:_5,LessStencilFunc:v5,Light:Mh,LightProbe:aU,Line:Gu,Line3:i8,LineBasicMaterial:Ka,LineCurve:uC,LineCurve3:LO,LineDashedMaterial:qO,LineLoop:sC,LineSegments:Xl,LinearFilter:Qn,LinearInterpolant:bC,LinearMipMapLinearFilter:Vw,LinearMipMapNearestFilter:a5,LinearMipmapLinearFilter:Ho,LinearMipmapNearestFilter:Sg,LinearSRGBColorSpace:fo,LinearToneMapping:VN,LinearTransfer:Uy,Loader:Pa,LoaderUtils:sh,LoadingManager:UM,LoopOnce:YN,LoopPingPong:JN,LoopRepeat:KN,MOUSE:Nd,Material:vr,MaterialLoader:FM,MathUtils:Sr,Matrix2:IC,Matrix3:Un,Matrix4:mn,MaxEquation:TN,Mesh:Ki,MeshBasicMaterial:xs,MeshDepthMaterial:yC,MeshDistanceMaterial:_C,MeshLambertMaterial:vC,MeshMatcapMaterial:jO,MeshNormalMaterial:gC,MeshPhongMaterial:pC,MeshPhysicalMaterial:mo,MeshStandardMaterial:Yg,MeshToonMaterial:mC,MinEquation:AN,MirroredRepeatWrapping:Dg,MixOperation:HN,MultiplyBlending:Hw,MultiplyOperation:r_,NearestFilter:Mr,NearestMipMapLinearFilter:r5,NearestMipMapNearestFilter:i5,NearestMipmapLinearFilter:Gd,NearestMipmapNearestFilter:fM,NeutralToneMapping:jN,NeverCompare:tO,NeverDepth:tS,NeverStencilFunc:g5,NoBlending:Gr,NoColorSpace:Il,NoToneMapping:Nl,NormalAnimationBlendMode:yM,NormalBlending:Yd,NotEqualCompare:aO,NotEqualDepth:oS,NotEqualStencilFunc:b5,NumberKeyframeTrack:op,Object3D:ci,ObjectLoader:D6,ObjectSpaceNormalMap:eO,OctahedronGeometry:v_,OneFactor:CN,OneMinusConstantAlphaFactor:zN,OneMinusConstantColorFactor:UN,OneMinusDstAlphaFactor:LN,OneMinusDstColorFactor:PN,OneMinusSrcAlphaFactor:eS,OneMinusSrcColorFactor:DN,OrthographicCamera:Uc,PCFShadowMap:uM,PCFSoftShadowMap:py,PMREMGenerator:Qw,Path:FS,PerspectiveCamera:rr,Plane:Ru,PlaneGeometry:qg,PlaneHelper:m8,PointLight:TC,PointLightHelper:s8,Points:oC,PointsMaterial:AM,PolarGridHelper:u8,PolyhedronGeometry:Sh,PositionalAudio:U6,PropertyBinding:Pi,PropertyMixer:fU,QuadraticBezierCurve:fC,QuadraticBezierCurve3:hC,Quaternion:ha,QuaternionKeyframeTrack:lp,QuaternionLinearInterpolant:QO,RED_GREEN_RGTC2_Format:LS,RED_RGTC1_Format:q2,REVISION:xh,RGBADepthPacking:QN,RGBAFormat:Lr,RGBAIntegerFormat:vM,RGBA_ASTC_10x10_Format:TS,RGBA_ASTC_10x5_Format:MS,RGBA_ASTC_10x6_Format:ES,RGBA_ASTC_10x8_Format:AS,RGBA_ASTC_12x10_Format:wS,RGBA_ASTC_12x12_Format:CS,RGBA_ASTC_4x4_Format:mS,RGBA_ASTC_5x4_Format:gS,RGBA_ASTC_5x5_Format:vS,RGBA_ASTC_6x5_Format:yS,RGBA_ASTC_6x6_Format:_S,RGBA_ASTC_8x5_Format:xS,RGBA_ASTC_8x6_Format:bS,RGBA_ASTC_8x8_Format:SS,RGBA_BPTC_Format:_y,RGBA_ETC2_EAC_Format:pS,RGBA_PVRTC_2BPPV1_Format:fS,RGBA_PVRTC_4BPPV1_Format:uS,RGBA_S3TC_DXT1_Format:gy,RGBA_S3TC_DXT3_Format:vy,RGBA_S3TC_DXT5_Format:yy,RGBDepthPacking:o5,RGBFormat:$2,RGBIntegerFormat:s5,RGB_BPTC_SIGNED_Format:RS,RGB_BPTC_UNSIGNED_Format:DS,RGB_ETC1_Format:hS,RGB_ETC2_Format:dS,RGB_PVRTC_2BPPV1_Format:cS,RGB_PVRTC_4BPPV1_Format:lS,RGB_S3TC_DXT1_Format:my,RGDepthPacking:l5,RGFormat:j2,RGIntegerFormat:gM,RawShaderMaterial:$O,Ray:pp,Raycaster:LC,RectAreaLight:iU,RedFormat:s_,RedIntegerFormat:o_,ReinhardToneMapping:kN,RenderTarget:Q2,RenderTarget3D:K6,RepeatWrapping:gh,ReplaceStencilOp:u5,ReverseSubtractEquation:EN,RingGeometry:LM,SIGNED_RED_GREEN_RGTC2_Format:IS,SIGNED_RED_RGTC1_Format:BS,SRGBColorSpace:$n,SRGBTransfer:Ti,Scene:ap,ShaderChunk:On,ShaderLib:Ll,ShaderMaterial:Wi,ShadowMaterial:XO,Shape:Jd,ShapeGeometry:VO,ShapePath:y8,ShapeUtils:Pu,ShortType:dM,Skeleton:h_,SkeletonHelper:a8,SkinnedMesh:rC,Source:rh,Sphere:da,SphereGeometry:y_,Spherical:Jw,SphericalHarmonics3:rU,SplineCurve:dC,SpotLight:AC,SpotLightHelper:r8,Sprite:EO,SpriteMaterial:iC,SrcAlphaFactor:Qb,SrcAlphaSaturateFactor:NN,SrcColorFactor:RN,StaticCopyUsage:C5,StaticDrawUsage:Fy,StaticReadUsage:A5,StereoCamera:I6,StreamCopyUsage:D5,StreamDrawUsage:E5,StreamReadUsage:w5,StringKeyframeTrack:gp,SubtractEquation:MN,SubtractiveBlending:zw,TOUCH:Od,TangentSpaceNormalMap:bh,TetrahedronGeometry:IM,Texture:mi,TextureLoader:__,TextureUtils:E8,TimestampQuery:L5,TorusGeometry:PM,TorusKnotGeometry:NM,Triangle:Du,TriangleFanDrawMode:PS,TriangleStripDrawMode:K2,TrianglesDrawMode:ZN,TubeGeometry:OM,UVMapping:ph,Uint16BufferAttribute:eC,Uint32BufferAttribute:tC,Uint8BufferAttribute:vG,Uint8ClampedBufferAttribute:yG,Uniform:sn,UniformsGroup:Z6,UniformsLib:Vt,UniformsUtils:xO,UnsignedByteType:Ji,UnsignedInt248Type:ip,UnsignedInt5999Type:W2,UnsignedIntType:zl,UnsignedShort4444Type:pM,UnsignedShort5551Type:mM,UnsignedShortType:Bg,VSMShadowMap:Bl,Vector2:ot,Vector3:ue,Vector4:ni,VectorKeyframeTrack:cp,VideoFrameTexture:HG,VideoTexture:wO,WebGL3DRenderTarget:aG,WebGLArrayRenderTarget:rG,WebGLCoordinateSystem:Go,WebGLCubeRenderTarget:nC,WebGLRenderTarget:ar,WebGLRenderer:NC,WebGLUtils:xU,WebGPUCoordinateSystem:zy,WebXRController:$b,WireframeGeometry:WO,WrapAroundEnding:Oy,ZeroCurvatureEnding:Vd,ZeroFactor:wN,ZeroSlopeEnding:kd,ZeroStencilOp:c5,createCanvasElement:hO},Symbol.toStringTag,{value:"Module"}));var zA={exports:{}},bu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cB;function sW(){return cB||(cB=1,bu.ConcurrentRoot=1,bu.ContinuousEventPriority=8,bu.DefaultEventPriority=32,bu.DiscreteEventPriority=2,bu.IdleEventPriority=268435456,bu.LegacyRoot=0,bu.NoEventPriority=0),bu}var uB;function oW(){return uB||(uB=1,zA.exports=sW()),zA.exports}var qb=oW(),HA={exports:{}},GA={},VA={exports:{}},kA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fB;function lW(){if(fB)return kA;fB=1;var i=Xg();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,r=i.useEffect,a=i.useLayoutEffect,s=i.useDebugValue;function o(m,v){var y=v(),_=n({inst:{value:y,getSnapshot:v}}),A=_[0].inst,S=_[1];return a(function(){A.value=y,A.getSnapshot=v,c(A)&&S({inst:A})},[m,y,v]),r(function(){return c(A)&&S({inst:A}),m(function(){c(A)&&S({inst:A})})},[m]),s(y),y}function c(m){var v=m.getSnapshot;m=m.value;try{var y=v();return!t(m,y)}catch{return!0}}function f(m,v){return v()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:o;return kA.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,kA}var hB;function cW(){return hB||(hB=1,VA.exports=lW()),VA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dB;function uW(){if(dB)return GA;dB=1;var i=Xg(),e=cW();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=i.useRef,s=i.useEffect,o=i.useMemo,c=i.useDebugValue;return GA.useSyncExternalStoreWithSelector=function(f,d,m,v,y){var _=a(null);if(_.current===null){var A={hasValue:!1,value:null};_.current=A}else A=_.current;_=o(function(){function x(w){if(!E){if(E=!0,D=w,w=v(w),y!==void 0&&A.hasValue){var O=A.value;if(y(O,w))return B=O}return B=w}if(O=B,n(D,w))return O;var I=v(w);return y!==void 0&&y(O,I)?(D=w,O):(D=w,B=I)}var E=!1,D,B,U=m===void 0?null:m;return[function(){return x(d())},U===null?void 0:function(){return x(U())}]},[d,m,v,y]);var S=r(f,_[0],_[1]);return s(function(){A.hasValue=!0,A.value=S},[S]),c(S),S},GA}var pB;function fW(){return pB||(pB=1,HA.exports=uW()),HA.exports}var hW=fW();const dW=ho(hW),mB=i=>{let e;const t=new Set,n=(f,d)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const v=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},r=()=>e,o={setState:n,getState:r,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=i(n,r,o);return o},bU=i=>i?mB(i):mB,{useSyncExternalStoreWithSelector:pW}=dW,mW=i=>i;function gW(i,e=mW,t){const n=pW(i.subscribe,i.getState,i.getInitialState,e,t);return xe.useDebugValue(n),n}const gB=(i,e)=>{const t=bU(i),n=(r,a=e)=>gW(t,r,a);return Object.assign(n,t),n},SU=(i,e)=>i?gB(i,e):gB;var WA={exports:{}},XA={exports:{}},$A={exports:{}},jA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vB;function vW(){return vB||(vB=1,function(i){function e(z,ee){var ne=z.length;z.push(ee);e:for(;0<ne;){var de=ne-1>>>1,Y=z[de];if(0<r(Y,ee))z[de]=ee,z[ne]=Y,ne=de;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var ee=z[0],ne=z.pop();if(ne!==ee){z[0]=ne;e:for(var de=0,Y=z.length,fe=Y>>>1;de<fe;){var Re=2*(de+1)-1,Le=z[Re],oe=Re+1,ke=z[oe];if(0>r(Le,ne))oe<Y&&0>r(ke,Le)?(z[de]=ke,z[oe]=ne,de=oe):(z[de]=Le,z[Re]=ne,de=Re);else if(oe<Y&&0>r(ke,ne))z[de]=ke,z[oe]=ne,de=oe;else break e}}return ee}function r(z,ee){var ne=z.sortIndex-ee.sortIndex;return ne!==0?ne:z.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();i.unstable_now=function(){return s.now()-o}}var c=[],f=[],d=1,m=null,v=3,y=!1,_=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var ee=t(f);ee!==null;){if(ee.callback===null)n(f);else if(ee.startTime<=z)n(f),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=t(f)}}function B(z){if(A=!1,D(z),!_)if(t(c)!==null)_=!0,$();else{var ee=t(f);ee!==null&&K(B,ee.startTime-z)}}var U=!1,w=-1,O=5,I=-1;function L(){return!(i.unstable_now()-I<O)}function R(){if(U){var z=i.unstable_now();I=z;var ee=!0;try{e:{_=!1,A&&(A=!1,x(w),w=-1),y=!0;var ne=v;try{t:{for(D(z),m=t(c);m!==null&&!(m.expirationTime>z&&L());){var de=m.callback;if(typeof de=="function"){m.callback=null,v=m.priorityLevel;var Y=de(m.expirationTime<=z);if(z=i.unstable_now(),typeof Y=="function"){m.callback=Y,D(z),ee=!0;break t}m===t(c)&&n(c),D(z)}else n(c);m=t(c)}if(m!==null)ee=!0;else{var fe=t(f);fe!==null&&K(B,fe.startTime-z),ee=!1}}break e}finally{m=null,v=ne,y=!1}ee=void 0}}finally{ee?F():U=!1}}}var F;if(typeof E=="function")F=function(){E(R)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,V=G.port2;G.port1.onmessage=R,F=function(){V.postMessage(null)}}else F=function(){S(R,0)};function $(){U||(U=!0,F())}function K(z,ee){w=S(function(){z(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){_||y||(_=!0,$())},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ne=v;v=ee;try{return z()}finally{v=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=v;v=z;try{return ee()}finally{v=ne}},i.unstable_scheduleCallback=function(z,ee,ne){var de=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ne+Y,z={id:d++,callback:ee,priorityLevel:z,startTime:ne,expirationTime:Y,sortIndex:-1},ne>de?(z.sortIndex=ne,e(f,z),t(c)===null&&z===t(f)&&(A?(x(w),w=-1):A=!0,K(B,ne-de))):(z.sortIndex=Y,e(c,z),_||y||(_=!0,$())),z},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(z){var ee=v;return function(){var ne=v;v=ee;try{return z.apply(this,arguments)}finally{v=ne}}}}(jA)),jA}var yB;function MU(){return yB||(yB=1,$A.exports=vW()),$A.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _B;function yW(){return _B||(_B=1,function(i){i.exports=function(e){function t(h,p,M,C){return new kv(h,p,M,C)}function n(){}function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)p+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return h===null||typeof h!="object"?null:(h=ul&&h[ul]||h["@@iterator"],typeof h=="function"?h:null)}function s(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===jv?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case uc:return"Fragment";case Cs:return"Portal";case Xp:return"Profiler";case Qh:return"StrictMode";case $p:return"Suspense";case ff:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case $s:return(h.displayName||"Context")+".Provider";case Xv:return(h._context.displayName||"Context")+".Consumer";case td:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case jp:return p=h.displayName||null,p!==null?p:s(h.type)||"Memo";case Rs:p=h._payload,h=h._init;try{return s(h(p))}catch{}}return null}function o(h){if(bo===void 0)try{throw Error()}catch(M){var p=M.stack.trim().match(/\n( *(at )?)/);bo=p&&p[1]||"",fl=-1<M.stack.indexOf(`
    at`)?" (<anonymous>)":-1<M.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bo+h+fl}function c(h,p){if(!h||Kc)return"";Kc=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var Gt=function(){throw Error()};if(Object.defineProperty(Gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Gt,[])}catch(Dn){var Wt=Dn}Reflect.construct(h,[],Gt)}else{try{Gt.call()}catch(Dn){Wt=Dn}h.call(Gt.prototype)}}else{try{throw Error()}catch(Dn){Wt=Dn}(Gt=h())&&typeof Gt.catch=="function"&&Gt.catch(function(){})}}catch(Dn){if(Dn&&Wt&&typeof Dn.stack=="string")return[Dn.stack,Wt.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=C.DetermineComponentFrameRoot(),ce=H[0],De=H[1];if(ce&&De){var $e=ce.split(`
`),vt=De.split(`
`);for(N=C=0;C<$e.length&&!$e[C].includes("DetermineComponentFrameRoot");)C++;for(;N<vt.length&&!vt[N].includes("DetermineComponentFrameRoot");)N++;if(C===$e.length||N===vt.length)for(C=$e.length-1,N=vt.length-1;1<=C&&0<=N&&$e[C]!==vt[N];)N--;for(;1<=C&&0<=N;C--,N--)if($e[C]!==vt[N]){if(C!==1||N!==1)do if(C--,N--,0>N||$e[C]!==vt[N]){var Lt=`
`+$e[C].replace(" at new "," at ");return h.displayName&&Lt.includes("<anonymous>")&&(Lt=Lt.replace("<anonymous>",h.displayName)),Lt}while(1<=C&&0<=N);break}}}finally{Kc=!1,Error.prepareStackTrace=M}return(M=h?h.displayName||h.name:"")?o(M):""}function f(h){switch(h.tag){case 26:case 27:case 5:return o(h.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return h=c(h.type,!1),h;case 11:return h=c(h.type.render,!1),h;case 1:return h=c(h.type,!0),h;default:return""}}function d(h){try{var p="";do p+=f(h),h=h.return;while(h);return p}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}function m(h){var p=h,M=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(M=p.return),h=p.return;while(h)}return p.tag===3?M:null}function v(h){if(m(h)!==h)throw Error(r(188))}function y(h){var p=h.alternate;if(!p){if(p=m(h),p===null)throw Error(r(188));return p!==h?null:h}for(var M=h,C=p;;){var N=M.return;if(N===null)break;var H=N.alternate;if(H===null){if(C=N.return,C!==null){M=C;continue}break}if(N.child===H.child){for(H=N.child;H;){if(H===M)return v(N),h;if(H===C)return v(N),p;H=H.sibling}throw Error(r(188))}if(M.return!==C.return)M=N,C=H;else{for(var ce=!1,De=N.child;De;){if(De===M){ce=!0,M=N,C=H;break}if(De===C){ce=!0,C=N,M=H;break}De=De.sibling}if(!ce){for(De=H.child;De;){if(De===M){ce=!0,M=H,C=N;break}if(De===C){ce=!0,C=H,M=N;break}De=De.sibling}if(!ce)throw Error(r(189))}}if(M.alternate!==C)throw Error(r(190))}if(M.tag!==3)throw Error(r(188));return M.stateNode.current===M?h:p}function _(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=_(h),p!==null)return p;h=h.sibling}return null}function A(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(p=A(h),p!==null))return p;h=h.sibling}return null}function S(h){return{current:h}}function x(h){0>ml||(h.current=lr[ml],lr[ml]=null,ml--)}function E(h,p){ml++,lr[ml]=h.current,h.current=p}function D(h){return h>>>=0,h===0?32:31-(Ox(h)/Ux|0)|0}function B(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function U(h,p){var M=h.pendingLanes;if(M===0)return 0;var C=0,N=h.suspendedLanes,H=h.pingedLanes,ce=h.warmLanes;h=h.finishedLanes!==0;var De=M&134217727;return De!==0?(M=De&~N,M!==0?C=B(M):(H&=De,H!==0?C=B(H):h||(ce=De&~ce,ce!==0&&(C=B(ce))))):(De=M&~N,De!==0?C=B(De):H!==0?C=B(H):h||(ce=M&~ce,ce!==0&&(C=B(ce)))),C===0?0:p!==0&&p!==C&&(p&N)===0&&(N=C&-C,ce=p&-p,N>=ce||N===32&&(ce&4194176)!==0)?p:C}function w(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function O(h,p){switch(h){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I(){var h=Mo;return Mo<<=1,(Mo&4194176)===0&&(Mo=128),h}function L(){var h=Qc;return Qc<<=1,(Qc&62914560)===0&&(Qc=4194304),h}function R(h){for(var p=[],M=0;31>M;M++)p.push(h);return p}function F(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function G(h,p,M,C,N,H){var ce=h.pendingLanes;h.pendingLanes=M,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=M,h.entangledLanes&=M,h.errorRecoveryDisabledLanes&=M,h.shellSuspendCounter=0;var De=h.entanglements,$e=h.expirationTimes,vt=h.hiddenUpdates;for(M=ce&~M;0<M;){var Lt=31-Ma(M),Gt=1<<Lt;De[Lt]=0,$e[Lt]=-1;var Wt=vt[Lt];if(Wt!==null)for(vt[Lt]=null,Lt=0;Lt<Wt.length;Lt++){var Dn=Wt[Lt];Dn!==null&&(Dn.lane&=-536870913)}M&=~Gt}C!==0&&V(h,C,0),H!==0&&N===0&&h.tag!==0&&(h.suspendedLanes|=H&~(ce&~p))}function V(h,p,M){h.pendingLanes|=p,h.suspendedLanes&=~p;var C=31-Ma(p);h.entangledLanes|=p,h.entanglements[C]=h.entanglements[C]|1073741824|M&4194218}function $(h,p){var M=h.entangledLanes|=p;for(h=h.entanglements;M;){var C=31-Ma(M),N=1<<C;N&p|h[C]&p&&(h[C]|=p),M&=~N}}function K(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function z(h){if(Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(cr,h,void 0,(h.current.flags&128)===128)}catch{}}function ee(h){if(typeof Hx=="function"&&Or(h),Ga&&typeof Ga.setStrictMode=="function")try{Ga.setStrictMode(cr,h)}catch{}}function ne(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}function de(h,p){if(typeof h=="object"&&h!==null){var M=h0.get(h);return M!==void 0?M:(p={value:h,source:p,stack:d(p)},h0.set(h,p),p)}return{value:h,source:p,stack:d(p)}}function Y(h,p){eu[tu++]=xf,eu[tu++]=nu,nu=h,xf=p}function fe(h,p,M){ns[is++]=Ys,ns[is++]=Ks,ns[is++]=vc,vc=h;var C=Ys;h=Ks;var N=32-Ma(C)-1;C&=~(1<<N),M+=1;var H=32-Ma(p)+N;if(30<H){var ce=N-N%5;H=(C&(1<<ce)-1).toString(32),C>>=ce,N-=ce,Ys=1<<32-Ma(p)+N|M<<N|C,Ks=H+h}else Ys=1<<H|M<<N|C,Ks=h}function Re(h){h.return!==null&&(Y(h,1),fe(h,1,0))}function Le(h){for(;h===nu;)nu=eu[--tu],eu[tu]=null,xf=eu[--tu],eu[tu]=null;for(;h===vc;)vc=ns[--is],ns[is]=null,Ks=ns[--is],ns[is]=null,Ys=ns[--is],ns[is]=null}function oe(h,p){E(Eo,p),E(bf,h),E(Tr,null),h=tx(p),x(Tr),E(Tr,h)}function ke(){x(Tr),x(bf),x(Eo)}function Ge(h){h.memoizedState!==null&&E(iu,h);var p=Tr.current,M=mf(p,h.type);p!==M&&(E(bf,h),E(Tr,M))}function Ze(h){bf.current===h&&(x(Tr),x(bf)),iu.current===h&&(x(iu),ba?js._currentValue=hc:js._currentValue2=hc)}function Ae(h){var p=Error(r(418,""));throw ye(de(p,h)),ud}function Q(h,p){if(!qr)throw Error(r(175));Tx(h.stateNode,h.type,h.memoizedProps,p,h)||Ae(h)}function le(h){for(Yr=h.return;Yr;)switch(Yr.tag){case 3:case 27:Ur=!0;return;case 5:case 13:Ur=!1;return;default:Yr=Yr.return}}function me(h){if(!qr||h!==Yr)return!1;if(!ti)return le(h),ti=!0,!1;var p=!1;if(Si?h.tag!==3&&h.tag!==27&&(h.tag!==5||nm(h.type)&&!Ln(h.type,h.memoizedProps))&&(p=!0):h.tag!==3&&(h.tag!==5||nm(h.type)&&!Ln(h.type,h.memoizedProps))&&(p=!0),p&&Kr&&Ae(h),le(h),h.tag===13){if(!qr)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));Kr=Cx(h)}else Kr=Yr?l0(h.stateNode):null;return!0}function be(){qr&&(Kr=Yr=null,ti=!1)}function ye(h){Ls===null?Ls=[h]:Ls.push(h)}function j(){for(var h=ru,p=Js=ru=0;p<h;){var M=Is[p];Is[p++]=null;var C=Is[p];Is[p++]=null;var N=Is[p];Is[p++]=null;var H=Is[p];if(Is[p++]=null,C!==null&&N!==null){var ce=C.pending;ce===null?N.next=N:(N.next=ce.next,ce.next=N),C.pending=N}H!==0&&Z(M,N,H)}}function ze(h,p,M,C){Is[ru++]=h,Is[ru++]=p,Is[ru++]=M,Is[ru++]=C,Js|=C,h.lanes|=C,h=h.alternate,h!==null&&(h.lanes|=C)}function Pe(h,p,M,C){return ze(h,p,M,C),Ie(h)}function ae(h,p){return ze(h,null,null,p),Ie(h)}function Z(h,p,M){h.lanes|=M;var C=h.alternate;C!==null&&(C.lanes|=M);for(var N=!1,H=h.return;H!==null;)H.childLanes|=M,C=H.alternate,C!==null&&(C.childLanes|=M),H.tag===22&&(h=H.stateNode,h===null||h._visibility&1||(N=!0)),h=H,H=H.return;N&&p!==null&&h.tag===3&&(H=h.stateNode,N=31-Ma(M),H=H.hiddenUpdates,h=H[N],h===null?H[N]=[p]:h.push(p),p.lane=M|536870912)}function Ie(h){if(50<Df)throw Df=0,vm=null,Error(r(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}function Se(h){h!==gl&&h.next===null&&(gl===null?fd=gl=h:gl=gl.next=h),Ci=!0,au||(au=!0,Ee(ht))}function We(h,p){if(!d0&&Ci){d0=!0;do for(var M=!1,C=fd;C!==null;){if(h!==0){var N=C.pendingLanes;if(N===0)var H=0;else{var ce=C.suspendedLanes,De=C.pingedLanes;H=(1<<31-Ma(42|h)+1)-1,H&=N&~(ce&~De),H=H&201326677?H&201326677|1:H?H|2:0}H!==0&&(M=!0,ie(C,H))}else H=jn,H=U(C,C===hi?H:0),(H&3)===0||w(C,H)||(M=!0,ie(C,H));C=C.next}while(M);d0=!1}}function ht(){Ci=au=!1;var h=0;Sf!==0&&(ax()&&(h=Sf),Sf=0);for(var p=Bs(),M=null,C=fd;C!==null;){var N=C.next,H=te(C,p);H===0?(C.next=null,M===null?fd=N:M.next=N,N===null&&(gl=M)):(M=C,(h!==0||(H&3)!==0)&&(Ci=!0)),C=N}We(h)}function te(h,p){for(var M=h.suspendedLanes,C=h.pingedLanes,N=h.expirationTimes,H=h.pendingLanes&-62914561;0<H;){var ce=31-Ma(H),De=1<<ce,$e=N[ce];$e===-1?((De&M)===0||(De&C)!==0)&&(N[ce]=O(De,p)):$e<=p&&(h.expiredLanes|=De),H&=~De}if(p=hi,M=jn,M=U(h,h===p?M:0),C=h.callbackNode,M===0||h===p&&yi===2||h.cancelPendingCommit!==null)return C!==null&&C!==null&&sm(C),h.callbackNode=null,h.callbackPriority=0;if((M&3)===0||w(h,M)){if(p=M&-M,p===h.callbackPriority)return p;switch(C!==null&&sm(C),K(M)){case 2:case 8:M=zx;break;case 32:M=cm;break;case 268435456:M=_E;break;default:M=cm}return C=k.bind(null,h),M=cd(M,C),h.callbackPriority=p,h.callbackNode=M,p}return C!==null&&C!==null&&sm(C),h.callbackPriority=2,h.callbackNode=null,2}function k(h,p){var M=h.callbackNode;if(Xs()&&h.callbackNode!==M)return null;var C=jn;return C=U(h,h===hi?C:0),C===0?null:(ac(h,C,p),te(h,Bs()),h.callbackNode!=null&&h.callbackNode===M?k.bind(null,h):null)}function ie(h,p){if(Xs())return null;ac(h,p,!0)}function Ee(h){Zv?pl(function(){(ri&6)!==0?cd(lm,h):h()}):cd(lm,h)}function Be(){return Sf===0&&(Sf=I()),Sf}function Ue(h,p){if(Mf===null){var M=Mf=[];su=0,rs=Be(),ou={status:"pending",value:void 0,then:function(C){M.push(C)}}}return su++,p.then(He,He),p}function He(){if(--su===0&&Mf!==null){ou!==null&&(ou.status="fulfilled");var h=Mf;Mf=null,rs=0,ou=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function ft(h,p){var M=[],C={status:"pending",value:null,reason:null,then:function(N){M.push(N)}};return h.then(function(){C.status="fulfilled",C.value=p;for(var N=0;N<M.length;N++)(0,M[N])(p)},function(N){for(C.status="rejected",C.reason=N,N=0;N<M.length;N++)(0,M[N])(void 0)}),C}function Et(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rt(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function ct(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function pt(h,p,M){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(ri&2)!==0){var N=C.pending;return N===null?p.next=p:(p.next=N.next,N.next=p),C.pending=p,p=Ie(h),Z(h,null,M),p}return ze(h,C,p,M),Ie(h)}function Nt(h,p,M){if(p=p.updateQueue,p!==null&&(p=p.shared,(M&4194176)!==0)){var C=p.lanes;C&=h.pendingLanes,M|=C,p.lanes=M,$(h,M)}}function ge(h,p){var M=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,M===C)){var N=null,H=null;if(M=M.firstBaseUpdate,M!==null){do{var ce={lane:M.lane,tag:M.tag,payload:M.payload,callback:null,next:null};H===null?N=H=ce:H=H.next=ce,M=M.next}while(M!==null);H===null?N=H=p:H=H.next=p}else N=H=p;M={baseState:C.baseState,firstBaseUpdate:N,lastBaseUpdate:H,shared:C.shared,callbacks:C.callbacks},h.updateQueue=M;return}h=M.lastBaseUpdate,h===null?M.firstBaseUpdate=p:h.next=p,M.lastBaseUpdate=p}function Ve(){if(lu){var h=ou;if(h!==null)throw h}}function _t(h,p,M,C){lu=!1;var N=h.updateQueue;vl=!1;var H=N.firstBaseUpdate,ce=N.lastBaseUpdate,De=N.shared.pending;if(De!==null){N.shared.pending=null;var $e=De,vt=$e.next;$e.next=null,ce===null?H=vt:ce.next=vt,ce=$e;var Lt=h.alternate;Lt!==null&&(Lt=Lt.updateQueue,De=Lt.lastBaseUpdate,De!==ce&&(De===null?Lt.firstBaseUpdate=vt:De.next=vt,Lt.lastBaseUpdate=$e))}if(H!==null){var Gt=N.baseState;ce=0,Lt=vt=$e=null,De=H;do{var Wt=De.lane&-536870913,Dn=Wt!==De.lane;if(Dn?(jn&Wt)===Wt:(C&Wt)===Wt){Wt!==0&&Wt===rs&&(lu=!0),Lt!==null&&(Lt=Lt.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var hs=h,Tc=De;Wt=p;var wc=M;switch(Tc.tag){case 1:if(hs=Tc.payload,typeof hs=="function"){Gt=hs.call(wc,Gt,Wt);break e}Gt=hs;break e;case 3:hs.flags=hs.flags&-65537|128;case 0:if(hs=Tc.payload,Wt=typeof hs=="function"?hs.call(wc,Gt,Wt):hs,Wt==null)break e;Gt=Wp({},Gt,Wt);break e;case 2:vl=!0}}Wt=De.callback,Wt!==null&&(h.flags|=64,Dn&&(h.flags|=8192),Dn=N.callbacks,Dn===null?N.callbacks=[Wt]:Dn.push(Wt))}else Dn={lane:Wt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Lt===null?(vt=Lt=Dn,$e=Gt):Lt=Lt.next=Dn,ce|=Wt;if(De=De.next,De===null){if(De=N.shared.pending,De===null)break;Dn=De,De=Dn.next,Dn.next=null,N.lastBaseUpdate=Dn,N.shared.pending=null}}while(!0);Lt===null&&($e=Gt),N.baseState=$e,N.firstBaseUpdate=vt,N.lastBaseUpdate=Lt,H===null&&(N.shared.lanes=0),us|=ce,h.lanes=ce,h.memoizedState=Gt}}function Me(h,p){if(typeof h!="function")throw Error(r(191,h));h.call(p)}function qe(h,p){var M=h.callbacks;if(M!==null)for(h.callbacks=null,h=0;h<M.length;h++)Me(M[h],p)}function mt(h,p){if(Va(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var M=Object.keys(h),C=Object.keys(p);if(M.length!==C.length)return!1;for(C=0;C<M.length;C++){var N=M[C];if(!Ao.call(p,N)||!Va(h[N],p[N]))return!1}return!0}function Pt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function At(){}function gt(h,p,M){switch(M=h[M],M===void 0?h.push(p):M!==p&&(p.then(At,At),p=M),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===Ef?Error(r(483)):h;default:if(typeof p.status=="string")p.then(At,At);else{if(h=hi,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=p,h.status="pending",h.then(function(C){if(p.status==="pending"){var N=p;N.status="fulfilled",N.value=C}},function(C){if(p.status==="pending"){var N=p;N.status="rejected",N.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===Ef?Error(r(483)):h}throw yc=p,Ef}}function Ut(){if(yc===null)throw Error(r(459));var h=yc;return yc=null,h}function Xt(h){var p=xc;return xc+=1,_c===null&&(_c=[]),gt(_c,h,p)}function Cn(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function Tn(h,p){throw p.$$typeof===hE?Error(r(525)):(h=Object.prototype.toString.call(p),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function he(h){var p=h._init;return p(h._payload)}function nt(h){function p(it,Ne){if(h){var st=it.deletions;st===null?(it.deletions=[Ne],it.flags|=16):st.push(Ne)}}function M(it,Ne){if(!h)return null;for(;Ne!==null;)p(it,Ne),Ne=Ne.sibling;return null}function C(it){for(var Ne=new Map;it!==null;)it.key!==null?Ne.set(it.key,it):Ne.set(it.index,it),it=it.sibling;return Ne}function N(it,Ne){return it=ws(it,Ne),it.index=0,it.sibling=null,it}function H(it,Ne,st){return it.index=st,h?(st=it.alternate,st!==null?(st=st.index,st<Ne?(it.flags|=33554434,Ne):st):(it.flags|=33554434,Ne)):(it.flags|=1048576,Ne)}function ce(it){return h&&it.alternate===null&&(it.flags|=33554434),it}function De(it,Ne,st,Dt){return Ne===null||Ne.tag!==6?(Ne=Vp(st,it.mode,Dt),Ne.return=it,Ne):(Ne=N(Ne,st),Ne.return=it,Ne)}function $e(it,Ne,st,Dt){var an=st.type;return an===uc?Lt(it,Ne,st.props.children,Dt,st.key):Ne!==null&&(Ne.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===Rs&&he(an)===Ne.type)?(Ne=N(Ne,st.props),Cn(Ne,st),Ne.return=it,Ne):(Ne=xo(st.type,st.key,st.props,null,it.mode,Dt),Cn(Ne,st),Ne.return=it,Ne)}function vt(it,Ne,st,Dt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==st.containerInfo||Ne.stateNode.implementation!==st.implementation?(Ne=Wv(st,it.mode,Dt),Ne.return=it,Ne):(Ne=N(Ne,st.children||[]),Ne.return=it,Ne)}function Lt(it,Ne,st,Dt,an){return Ne===null||Ne.tag!==7?(Ne=Zi(st,it.mode,Dt,an),Ne.return=it,Ne):(Ne=N(Ne,st),Ne.return=it,Ne)}function Gt(it,Ne,st){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=Vp(""+Ne,it.mode,st),Ne.return=it,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Zh:return st=xo(Ne.type,Ne.key,Ne.props,null,it.mode,st),Cn(st,Ne),st.return=it,st;case Cs:return Ne=Wv(Ne,it.mode,st),Ne.return=it,Ne;case Rs:var Dt=Ne._init;return Ne=Dt(Ne._payload),Gt(it,Ne,st)}if(hf(Ne)||a(Ne))return Ne=Zi(Ne,it.mode,st,null),Ne.return=it,Ne;if(typeof Ne.then=="function")return Gt(it,Xt(Ne),st);if(Ne.$$typeof===$s)return Gt(it,Uh(it,Ne),st);Tn(it,Ne)}return null}function Wt(it,Ne,st,Dt){var an=Ne!==null?Ne.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return an!==null?null:De(it,Ne,""+st,Dt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Zh:return st.key===an?$e(it,Ne,st,Dt):null;case Cs:return st.key===an?vt(it,Ne,st,Dt):null;case Rs:return an=st._init,st=an(st._payload),Wt(it,Ne,st,Dt)}if(hf(st)||a(st))return an!==null?null:Lt(it,Ne,st,Dt,null);if(typeof st.then=="function")return Wt(it,Ne,Xt(st),Dt);if(st.$$typeof===$s)return Wt(it,Ne,Uh(it,st),Dt);Tn(it,st)}return null}function Dn(it,Ne,st,Dt,an){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return it=it.get(st)||null,De(Ne,it,""+Dt,an);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Zh:return it=it.get(Dt.key===null?st:Dt.key)||null,$e(Ne,it,Dt,an);case Cs:return it=it.get(Dt.key===null?st:Dt.key)||null,vt(Ne,it,Dt,an);case Rs:var zi=Dt._init;return Dt=zi(Dt._payload),Dn(it,Ne,st,Dt,an)}if(hf(Dt)||a(Dt))return it=it.get(st)||null,Lt(Ne,it,Dt,an,null);if(typeof Dt.then=="function")return Dn(it,Ne,st,Xt(Dt),an);if(Dt.$$typeof===$s)return Dn(it,Ne,st,Uh(Ne,Dt),an);Tn(Ne,Dt)}return null}function hs(it,Ne,st,Dt){for(var an=null,zi=null,En=Ne,li=Ne=0,ur=null;En!==null&&li<st.length;li++){En.index>li?(ur=En,En=null):ur=En.sibling;var Xn=Wt(it,En,st[li],Dt);if(Xn===null){En===null&&(En=ur);break}h&&En&&Xn.alternate===null&&p(it,En),Ne=H(Xn,Ne,li),zi===null?an=Xn:zi.sibling=Xn,zi=Xn,En=ur}if(li===st.length)return M(it,En),ti&&Y(it,li),an;if(En===null){for(;li<st.length;li++)En=Gt(it,st[li],Dt),En!==null&&(Ne=H(En,Ne,li),zi===null?an=En:zi.sibling=En,zi=En);return ti&&Y(it,li),an}for(En=C(En);li<st.length;li++)ur=Dn(En,it,li,st[li],Dt),ur!==null&&(h&&ur.alternate!==null&&En.delete(ur.key===null?li:ur.key),Ne=H(ur,Ne,li),zi===null?an=ur:zi.sibling=ur,zi=ur);return h&&En.forEach(function(Io){return p(it,Io)}),ti&&Y(it,li),an}function Tc(it,Ne,st,Dt){if(st==null)throw Error(r(151));for(var an=null,zi=null,En=Ne,li=Ne=0,ur=null,Xn=st.next();En!==null&&!Xn.done;li++,Xn=st.next()){En.index>li?(ur=En,En=null):ur=En.sibling;var Io=Wt(it,En,Xn.value,Dt);if(Io===null){En===null&&(En=ur);break}h&&En&&Io.alternate===null&&p(it,En),Ne=H(Io,Ne,li),zi===null?an=Io:zi.sibling=Io,zi=Io,En=ur}if(Xn.done)return M(it,En),ti&&Y(it,li),an;if(En===null){for(;!Xn.done;li++,Xn=st.next())Xn=Gt(it,Xn.value,Dt),Xn!==null&&(Ne=H(Xn,Ne,li),zi===null?an=Xn:zi.sibling=Xn,zi=Xn);return ti&&Y(it,li),an}for(En=C(En);!Xn.done;li++,Xn=st.next())Xn=Dn(En,it,li,Xn.value,Dt),Xn!==null&&(h&&Xn.alternate!==null&&En.delete(Xn.key===null?li:Xn.key),Ne=H(Xn,Ne,li),zi===null?an=Xn:zi.sibling=Xn,zi=Xn);return h&&En.forEach(function(ym){return p(it,ym)}),ti&&Y(it,li),an}function wc(it,Ne,st,Dt){if(typeof st=="object"&&st!==null&&st.type===uc&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case Zh:e:{for(var an=st.key;Ne!==null;){if(Ne.key===an){if(an=st.type,an===uc){if(Ne.tag===7){M(it,Ne.sibling),Dt=N(Ne,st.props.children),Dt.return=it,it=Dt;break e}}else if(Ne.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===Rs&&he(an)===Ne.type){M(it,Ne.sibling),Dt=N(Ne,st.props),Cn(Dt,st),Dt.return=it,it=Dt;break e}M(it,Ne);break}else p(it,Ne);Ne=Ne.sibling}st.type===uc?(Dt=Zi(st.props.children,it.mode,Dt,st.key),Dt.return=it,it=Dt):(Dt=xo(st.type,st.key,st.props,null,it.mode,Dt),Cn(Dt,st),Dt.return=it,it=Dt)}return ce(it);case Cs:e:{for(an=st.key;Ne!==null;){if(Ne.key===an)if(Ne.tag===4&&Ne.stateNode.containerInfo===st.containerInfo&&Ne.stateNode.implementation===st.implementation){M(it,Ne.sibling),Dt=N(Ne,st.children||[]),Dt.return=it,it=Dt;break e}else{M(it,Ne);break}else p(it,Ne);Ne=Ne.sibling}Dt=Wv(st,it.mode,Dt),Dt.return=it,it=Dt}return ce(it);case Rs:return an=st._init,st=an(st._payload),wc(it,Ne,st,Dt)}if(hf(st))return hs(it,Ne,st,Dt);if(a(st)){if(an=a(st),typeof an!="function")throw Error(r(150));return st=an.call(st),Tc(it,Ne,st,Dt)}if(typeof st.then=="function")return wc(it,Ne,Xt(st),Dt);if(st.$$typeof===$s)return wc(it,Ne,Uh(it,st),Dt);Tn(it,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Ne!==null&&Ne.tag===6?(M(it,Ne.sibling),Dt=N(Ne,st),Dt.return=it,it=Dt):(M(it,Ne),Dt=Vp(st,it.mode,Dt),Dt.return=it,it=Dt),ce(it)):M(it,Ne)}return function(it,Ne,st,Dt){try{xc=0;var an=wc(it,Ne,st,Dt);return _c=null,an}catch(En){if(En===Ef)throw En;var zi=t(29,En,null,it.mode);return zi.lanes=Dt,zi.return=it,zi}finally{}}}function Ye(h,p){h=aa,E(Af,h),E(Ri,p),aa=h|p.baseLanes}function lt(){E(Af,aa),E(Ri,Ri.current)}function wt(){aa=Af.current,x(Ri),x(Af)}function hn(h){var p=h.alternate;E(wr,wr.current&1),E(as,h),Mi===null&&(p===null||Ri.current!==null||p.memoizedState!==null)&&(Mi=h)}function nn(h){if(h.tag===22){if(E(wr,wr.current),E(as,h),Mi===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(Mi=h)}}else Qt()}function Qt(){E(wr,wr.current),E(as,as.current)}function Ft(h){x(as),Mi===h&&(Mi=null),x(wr)}function tn(h){for(var p=h;p!==null;){if(p.tag===13){var M=p.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||Qp(M)||em(M)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function jt(){throw Error(r(321))}function W(h,p){if(p===null)return!1;for(var M=0;M<p.length&&M<h.length;M++)if(!Va(h[M],p[M]))return!1;return!0}function re(h,p,M,C,N,H){return yl=H,Hn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Mn.H=h===null||h.memoizedState===null?Mc:Ea,Sc=!1,H=M(C,N),Sc=!1,cu&&(H=je(p,M,C,N)),Ce(h),H}function Ce(h){Mn.H=Qi;var p=fn!==null&&fn.next!==null;if(yl=0,ii=fn=Hn=null,Ps=!1,uu=0,Fr=null,p)throw Error(r(300));h===null||Ei||(h=h.dependencies,h!==null&&Oh(h)&&(Ei=!0))}function je(h,p,M,C){Hn=h;var N=0;do{if(cu&&(Fr=null),uu=0,cu=!1,25<=N)throw Error(r(301));if(N+=1,ii=fn=null,h.updateQueue!=null){var H=h.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Mn.H=ss,H=p(M,C)}while(cu);return H}function Qe(){var h=Mn.H,p=h.useState()[0];return p=typeof p.then=="function"?_e(p):p,h=h.useState()[0],(fn!==null?fn.memoizedState:null)!==h&&(Hn.flags|=1024),p}function tt(){var h=um!==0;return um=0,h}function Tt(h,p,M){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~M}function dt(h){if(Ps){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Ps=!1}yl=0,ii=fn=Hn=null,cu=!1,uu=um=0,Fr=null}function J(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Hn.memoizedState=ii=h:ii=ii.next=h,ii}function pe(){if(fn===null){var h=Hn.alternate;h=h!==null?h.memoizedState:null}else h=fn.next;var p=ii===null?Hn.memoizedState:ii.next;if(p!==null)ii=p,fn=h;else{if(h===null)throw Hn.alternate===null?Error(r(467)):Error(r(310));fn=h,h={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},ii===null?Hn.memoizedState=ii=h:ii=ii.next=h}return ii}function _e(h){var p=uu;return uu+=1,Fr===null&&(Fr=[]),h=gt(Fr,h,p),p=Hn,(ii===null?p.memoizedState:ii.next)===null&&(p=p.alternate,Mn.H=p===null||p.memoizedState===null?Mc:Ea),h}function we(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return _e(h);if(h.$$typeof===$s)return Wr(h)}throw Error(r(438,String(h)))}function Oe(h){var p=null,M=Hn.updateQueue;if(M!==null&&(p=M.memoCache),p==null){var C=Hn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(N){return N.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),M===null&&(M=fm(),Hn.updateQueue=M),M.memoCache=p,M=p.data[p.index],M===void 0)for(M=p.data[p.index]=Array(h),C=0;C<h;C++)M[C]=ex;return p.index++,M}function Je(h,p){return typeof p=="function"?p(h):p}function ut(h){var p=pe();return xt(p,fn,h)}function xt(h,p,M){var C=h.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=M;var N=h.baseQueue,H=C.pending;if(H!==null){if(N!==null){var ce=N.next;N.next=H.next,H.next=ce}p.baseQueue=N=H,C.pending=null}if(H=h.baseState,N===null)h.memoizedState=H;else{p=N.next;var De=ce=null,$e=null,vt=p,Lt=!1;do{var Gt=vt.lane&-536870913;if(Gt!==vt.lane?(jn&Gt)===Gt:(yl&Gt)===Gt){var Wt=vt.revertLane;if(Wt===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),Gt===rs&&(Lt=!0);else if((yl&Wt)===Wt){vt=vt.next,Wt===rs&&(Lt=!0);continue}else Gt={lane:0,revertLane:vt.revertLane,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},$e===null?(De=$e=Gt,ce=H):$e=$e.next=Gt,Hn.lanes|=Wt,us|=Wt;Gt=vt.action,Sc&&M(H,Gt),H=vt.hasEagerState?vt.eagerState:M(H,Gt)}else Wt={lane:Gt,revertLane:vt.revertLane,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},$e===null?(De=$e=Wt,ce=H):$e=$e.next=Wt,Hn.lanes|=Gt,us|=Gt;vt=vt.next}while(vt!==null&&vt!==p);if($e===null?ce=H:$e.next=De,!Va(H,h.memoizedState)&&(Ei=!0,Lt&&(M=ou,M!==null)))throw M;h.memoizedState=H,h.baseState=ce,h.baseQueue=$e,C.lastRenderedState=H}return N===null&&(C.lanes=0),[h.memoizedState,C.dispatch]}function St(h){var p=pe(),M=p.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=h;var C=M.dispatch,N=M.pending,H=p.memoizedState;if(N!==null){M.pending=null;var ce=N=N.next;do H=h(H,ce.action),ce=ce.next;while(ce!==N);Va(H,p.memoizedState)||(Ei=!0),p.memoizedState=H,p.baseQueue===null&&(p.baseState=H),M.lastRenderedState=H}return[H,C]}function zt(h,p,M){var C=Hn,N=pe(),H=ti;if(H){if(M===void 0)throw Error(r(407));M=M()}else M=p();var ce=!Va((fn||N).memoizedState,M);if(ce&&(N.memoizedState=M,Ei=!0),N=N.queue,mv(rn.bind(null,C,N,h),[h]),N.getSnapshot!==p||ce||ii!==null&&ii.memoizedState.tag&1){if(C.flags|=2048,va(9,Ht.bind(null,C,N,M,p),{destroy:void 0},null),hi===null)throw Error(r(349));H||(yl&60)!==0||Ot(C,p,M)}return M}function Ot(h,p,M){h.flags|=16384,h={getSnapshot:p,value:M},p=Hn.updateQueue,p===null?(p=fm(),Hn.updateQueue=p,p.stores=[h]):(M=p.stores,M===null?p.stores=[h]:M.push(h))}function Ht(h,p,M,C){p.value=M,p.getSnapshot=C,en(p)&&kn(h)}function rn(h,p,M){return M(function(){en(p)&&kn(h)})}function en(h){var p=h.getSnapshot;h=h.value;try{var M=p();return!Va(h,M)}catch{return!0}}function kn(h){var p=ae(h,2);p!==null&&Nr(p,h,2)}function qt(h){var p=J();if(typeof h=="function"){var M=h;if(h=M(),Sc){ee(!0);try{M()}finally{ee(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Je,lastRenderedState:h},p}function on(h,p,M,C){return h.baseState=M,xt(h,fn,typeof C=="function"?C:Je)}function Yt(h,p,M,C,N){if(Bh(h))throw Error(r(485));if(h=p.action,h!==null){var H={payload:N,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ce){H.listeners.push(ce)}};Mn.T!==null?M(!0):H.isTransition=!1,C(H),M=p.pending,M===null?(H.next=p.pending=H,gi(p,H)):(H.next=M.next,p.pending=M.next=H)}}function gi(h,p){var M=p.action,C=p.payload,N=h.state;if(p.isTransition){var H=Mn.T,ce={};Mn.T=ce;try{var De=M(N,C),$e=Mn.S;$e!==null&&$e(ce,De),Sn(h,p,De)}catch(vt){xi(h,p,vt)}finally{Mn.T=H}}else try{H=M(N,C),Sn(h,p,H)}catch(vt){xi(h,p,vt)}}function Sn(h,p,M){M!==null&&typeof M=="object"&&typeof M.then=="function"?M.then(function(C){wn(h,p,C)},function(C){return xi(h,p,C)}):wn(h,p,M)}function wn(h,p,M){p.status="fulfilled",p.value=M,un(p),h.state=M,p=h.pending,p!==null&&(M=p.next,M===p?h.pending=null:(M=M.next,p.next=M,gi(h,M)))}function xi(h,p,M){var C=h.pending;if(h.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=M,un(p),p=p.next;while(p!==C)}h.action=null}function un(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function zn(h,p){return p}function Pn(h,p){if(ti){var M=hi.formState;if(M!==null){e:{var C=Hn;if(ti){if(Kr){var N=o0(Kr,Ur);if(N){Kr=l0(N),C=Sx(N);break e}}Ae(C)}C=!1}C&&(p=M[0])}}M=J(),M.memoizedState=M.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:p},M.queue=C,M=_v.bind(null,Hn,C),C.dispatch=M,C=qt(!1);var H=ju.bind(null,Hn,!1,C.queue);return C=J(),N={state:p,dispatch:null,action:h,pending:null},C.queue=N,M=Yt.bind(null,Hn,N,H,M),N.dispatch=M,C.memoizedState=h,[p,M,!1]}function Ui(h){var p=pe();return ei(p,fn,h)}function ei(h,p,M){p=xt(h,p,zn)[0],h=ut(Je)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?_e(p):p;var C=pe(),N=C.queue,H=N.dispatch;return M!==C.memoizedState&&(Hn.flags|=2048,va(9,bi.bind(null,N,M),{destroy:void 0},null)),[p,H,h]}function bi(h,p){h.action=p}function Ir(h){var p=pe(),M=fn;if(M!==null)return ei(p,M,h);pe(),p=p.memoizedState,M=pe();var C=M.queue.dispatch;return M.memoizedState=h,[p,C,!1]}function va(h,p,M,C){return h={tag:h,create:p,inst:M,deps:C,next:null},p=Hn.updateQueue,p===null&&(p=fm(),Hn.updateQueue=p),M=p.lastEffect,M===null?p.lastEffect=h.next=h:(C=M.next,M.next=h,h.next=C,p.lastEffect=h),h}function go(){return pe().memoizedState}function Th(h,p,M,C){var N=J();Hn.flags|=h,N.memoizedState=va(1|p,M,{destroy:void 0},C===void 0?null:C)}function wh(h,p,M,C){var N=pe();C=C===void 0?null:C;var H=N.memoizedState.inst;fn!==null&&C!==null&&W(C,fn.memoizedState.deps)?N.memoizedState=va(p,M,H,C):(Hn.flags|=h,N.memoizedState=va(1|p,M,H,C))}function Sp(h,p){Th(8390656,8,h,p)}function mv(h,p){wh(2048,8,h,p)}function L_(h,p){return wh(4,2,h,p)}function Ch(h,p){return wh(4,4,h,p)}function Mp(h,p){if(typeof p=="function"){h=h();var M=p(h);return function(){typeof M=="function"?M():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Ep(h,p,M){M=M!=null?M.concat([h]):null,wh(4,4,Mp.bind(null,p,h),M)}function Yl(){}function $c(h,p){var M=pe();p=p===void 0?null:p;var C=M.memoizedState;return p!==null&&W(p,C[1])?C[0]:(M.memoizedState=[h,p],h)}function gv(h,p){var M=pe();p=p===void 0?null:p;var C=M.memoizedState;if(p!==null&&W(p,C[1]))return C[0];if(C=h(),Sc){ee(!0);try{h()}finally{ee(!1)}}return M.memoizedState=[C,p],C}function Rh(h,p,M){return M===void 0||(yl&1073741824)!==0?h.memoizedState=p:(h.memoizedState=M,h=Fv(),Hn.lanes|=h,us|=h,M)}function vv(h,p,M,C){return Va(M,p)?M:Ri.current!==null?(h=Rh(h,M,C),Va(h,p)||(Ei=!0),h):(yl&42)===0?(Ei=!0,h.memoizedState=M):(h=Fv(),Hn.lanes|=h,us|=h,p)}function Xu(h,p,M,C,N){var H=dl();ia(H!==0&&8>H?H:8);var ce=Mn.T,De={};Mn.T=De,ju(h,!1,p,M);try{var $e=N(),vt=Mn.S;if(vt!==null&&vt(De,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var Lt=ft($e,C);Kl(h,p,Lt,sr(h))}else Kl(h,p,C,sr(h))}catch(Gt){Kl(h,p,{then:function(){},status:"rejected",reason:Gt},sr())}finally{ia(H),Mn.T=ce}}function vo(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:hc,baseState:hc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Je,lastRenderedState:hc},next:null};var M={};return p.next={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Je,lastRenderedState:M},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function Dh(){return Wr(js)}function $u(){return pe().memoizedState}function Zo(){return pe().memoizedState}function yv(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var M=sr();h=ct(M);var C=pt(p,h,M);C!==null&&(Nr(C,p,M),Nt(C,p,M)),p={cache:ec()},h.payload=p;return}p=p.return}}function Ap(h,p,M){var C=sr();M={lane:C,revertLane:0,action:M,hasEagerState:!1,eagerState:null,next:null},Bh(h)?ya(p,M):(M=Pe(h,p,M,C),M!==null&&(Nr(M,h,C),Jl(M,p,C)))}function _v(h,p,M){var C=sr();Kl(h,p,M,C)}function Kl(h,p,M,C){var N={lane:C,revertLane:0,action:M,hasEagerState:!1,eagerState:null,next:null};if(Bh(h))ya(p,N);else{var H=h.alternate;if(h.lanes===0&&(H===null||H.lanes===0)&&(H=p.lastRenderedReducer,H!==null))try{var ce=p.lastRenderedState,De=H(ce,M);if(N.hasEagerState=!0,N.eagerState=De,Va(De,ce))return ze(h,p,N,0),hi===null&&j(),!1}catch{}finally{}if(M=Pe(h,p,N,C),M!==null)return Nr(M,h,C),Jl(M,p,C),!0}return!1}function ju(h,p,M,C){if(C={lane:2,revertLane:Be(),action:C,hasEagerState:!1,eagerState:null,next:null},Bh(h)){if(p)throw Error(r(479))}else p=Pe(h,M,C,2),p!==null&&Nr(p,h,2)}function Bh(h){var p=h.alternate;return h===Hn||p!==null&&p===Hn}function ya(h,p){cu=Ps=!0;var M=h.pending;M===null?p.next=p:(p.next=M.next,M.next=p),h.pending=p}function Jl(h,p,M){if((M&4194176)!==0){var C=p.lanes;C&=h.pendingLanes,M|=C,p.lanes=M,$(h,M)}}function qu(h,p,M,C){p=h.memoizedState,M=M(C,p),M=M==null?p:Wp({},p,M),h.memoizedState=M,h.lanes===0&&(h.updateQueue.baseState=M)}function Yu(h,p,M,C,N,H,ce){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,H,ce):p.prototype&&p.prototype.isPureReactComponent?!mt(M,C)||!mt(N,H):!0}function I_(h,p,M,C){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(M,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(M,C),p.state!==h&&wo.enqueueReplaceState(p,p.state,null)}function Qo(h,p){var M=p;if("ref"in p){M={};for(var C in p)C!=="ref"&&(M[C]=p[C])}if(h=h.defaultProps){M===p&&(M=Wp({},M));for(var N in h)M[N]===void 0&&(M[N]=h[N])}return M}function Ku(h,p){try{var M=h.onUncaughtError;M(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function Ju(h,p,M){try{var C=h.onCaughtError;C(M.value,{componentStack:M.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function Zu(h,p,M){return M=ct(M),M.tag=3,M.payload={element:null},M.callback=function(){Ku(h,p)},M}function xv(h){return h=ct(h),h.tag=3,h}function P_(h,p,M,C){var N=M.type.getDerivedStateFromError;if(typeof N=="function"){var H=C.value;h.payload=function(){return N(H)},h.callback=function(){Ju(p,M,C)}}var ce=M.stateNode;ce!==null&&typeof ce.componentDidCatch=="function"&&(h.callback=function(){Ju(p,M,C),typeof N!="function"&&(Ec===null?Ec=new Set([this]):Ec.add(this));var De=C.stack;this.componentDidCatch(C.value,{componentStack:De!==null?De:""})})}function lE(h,p,M,C,N){if(M.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=M.alternate,p!==null&&Nh(p,M,N,!0),M=as.current,M!==null){switch(M.tag){case 13:return Mi===null?ol():M.alternate===null&&Ai===0&&(Ai=3),M.flags&=-257,M.flags|=65536,M.lanes=N,C===dd?M.flags|=16384:(p=M.updateQueue,p===null?M.updateQueue=new Set([C]):p.add(C),Yc(h,C,N)),!1;case 22:return M.flags|=65536,C===dd?M.flags|=16384:(p=M.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},M.updateQueue=p):(M=p.retryQueue,M===null?p.retryQueue=new Set([C]):M.add(C)),Yc(h,C,N)),!1}throw Error(r(435,M.tag))}return Yc(h,C,N),ol(),!1}if(ti)return p=as.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=N,C!==ud&&(h=Error(r(422),{cause:C}),ye(de(h,M)))):(C!==ud&&(p=Error(r(423),{cause:C}),ye(de(p,M))),h=h.current.alternate,h.flags|=65536,N&=-N,h.lanes|=N,C=de(C,M),N=Zu(h.stateNode,C,N),ge(h,N),Ai!==4&&(Ai=2)),!1;var H=Error(r(520),{cause:C});if(H=de(H,M),hu===null?hu=[H]:hu.push(H),Ai!==4&&(Ai=2),p===null)return!0;C=de(C,M),M=p;do{switch(M.tag){case 3:return M.flags|=65536,h=N&-N,M.lanes|=h,h=Zu(M.stateNode,C,h),ge(M,h),!1;case 1:if(p=M.type,H=M.stateNode,(M.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ec===null||!Ec.has(H))))return M.flags|=65536,N&=-N,M.lanes|=N,N=xv(N),P_(N,h,M,C),ge(M,N),!1}M=M.return}while(M!==null);return!1}function kr(h,p,M,C){p.child=h===null?To(p,null,M,C):bc(p,h.child,M,C)}function Tp(h,p,M,C,N){M=M.render;var H=p.ref;if("ref"in C){var ce={};for(var De in C)De!=="ref"&&(ce[De]=C[De])}else ce=C;return Ql(p),C=re(h,p,M,ce,H,N),De=tt(),h!==null&&!Ei?(Tt(h,p,N),el(h,p,N)):(ti&&De&&Re(p),p.flags|=1,kr(h,p,C,N),p.child)}function N_(h,p,M,C,N){if(h===null){var H=M.type;return typeof H=="function"&&!qh(H)&&H.defaultProps===void 0&&M.compare===null?(p.tag=15,p.type=H,O_(h,p,H,C,N)):(h=xo(M.type,null,C,p,p.mode,N),h.ref=p.ref,h.return=p,p.child=h)}if(H=h.child,!Av(h,N)){var ce=H.memoizedProps;if(M=M.compare,M=M!==null?M:mt,M(ce,C)&&h.ref===p.ref)return el(h,p,N)}return p.flags|=1,h=ws(H,C),h.ref=p.ref,h.return=p,p.child=h}function O_(h,p,M,C,N){if(h!==null){var H=h.memoizedProps;if(mt(H,C)&&h.ref===p.ref)if(Ei=!1,p.pendingProps=C=H,Av(h,N))(h.flags&131072)!==0&&(Ei=!0);else return p.lanes=h.lanes,el(h,p,N)}return wp(h,p,M,C,N)}function U_(h,p,M){var C=p.pendingProps,N=C.children,H=(p.stateNode._pendingVisibility&2)!==0,ce=h!==null?h.memoizedState:null;if(Lh(h,p),C.mode==="hidden"||H){if((p.flags&128)!==0){if(C=ce!==null?ce.baseLanes|M:M,h!==null){for(N=p.child=h.child,H=0;N!==null;)H=H|N.lanes|N.childLanes,N=N.sibling;p.childLanes=H&~C}else p.childLanes=0,p.child=null;return F_(h,p,C,M)}if((M&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&Rp(p,ce!==null?ce.cachePool:null),ce!==null?Ye(p,ce):lt(),nn(p);else return p.lanes=p.childLanes=536870912,F_(h,p,ce!==null?ce.baseLanes|M:M,M)}else ce!==null?(Rp(p,ce.cachePool),Ye(p,ce),Qt(),p.memoizedState=null):(h!==null&&Rp(p,null),lt(),Qt());return kr(h,p,N,M),p.child}function F_(h,p,M,C){var N=wv();return N=N===null?null:{parent:ba?Di._currentValue:Di._currentValue2,pool:N},p.memoizedState={baseLanes:M,cachePool:N},h!==null&&Rp(p,null),lt(),nn(p),h!==null&&Nh(h,p,C,!0),null}function Lh(h,p){var M=p.ref;if(M===null)h!==null&&h.ref!==null&&(p.flags|=2097664);else{if(typeof M!="function"&&typeof M!="object")throw Error(r(284));(h===null||h.ref!==M)&&(p.flags|=2097664)}}function wp(h,p,M,C,N){return Ql(p),M=re(h,p,M,C,void 0,N),C=tt(),h!==null&&!Ei?(Tt(h,p,N),el(h,p,N)):(ti&&C&&Re(p),p.flags|=1,kr(h,p,M,N),p.child)}function z_(h,p,M,C,N,H){return Ql(p),p.updateQueue=null,M=je(p,C,M,N),Ce(h),C=tt(),h!==null&&!Ei?(Tt(h,p,H),el(h,p,H)):(ti&&C&&Re(p),p.flags|=1,kr(h,p,M,H),p.child)}function H_(h,p,M,C,N){if(Ql(p),p.stateNode===null){var H=gc,ce=M.contextType;typeof ce=="object"&&ce!==null&&(H=Wr(ce)),H=new M(C,H),p.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=wo,p.stateNode=H,H._reactInternals=p,H=p.stateNode,H.props=C,H.state=p.memoizedState,H.refs={},Et(p),ce=M.contextType,H.context=typeof ce=="object"&&ce!==null?Wr(ce):gc,H.state=p.memoizedState,ce=M.getDerivedStateFromProps,typeof ce=="function"&&(qu(p,M,ce,C),H.state=p.memoizedState),typeof M.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(ce=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),ce!==H.state&&wo.enqueueReplaceState(H,H.state,null),_t(p,C,H,N),Ve(),H.state=p.memoizedState),typeof H.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(h===null){H=p.stateNode;var De=p.memoizedProps,$e=Qo(M,De);H.props=$e;var vt=H.context,Lt=M.contextType;ce=gc,typeof Lt=="object"&&Lt!==null&&(ce=Wr(Lt));var Gt=M.getDerivedStateFromProps;Lt=typeof Gt=="function"||typeof H.getSnapshotBeforeUpdate=="function",De=p.pendingProps!==De,Lt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(De||vt!==ce)&&I_(p,H,C,ce),vl=!1;var Wt=p.memoizedState;H.state=Wt,_t(p,C,H,N),Ve(),vt=p.memoizedState,De||Wt!==vt||vl?(typeof Gt=="function"&&(qu(p,M,Gt,C),vt=p.memoizedState),($e=vl||Yu(p,M,$e,C,Wt,vt,ce))?(Lt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(p.flags|=4194308)):(typeof H.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=vt),H.props=C,H.state=vt,H.context=ce,C=$e):(typeof H.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{H=p.stateNode,Rt(h,p),ce=p.memoizedProps,Lt=Qo(M,ce),H.props=Lt,Gt=p.pendingProps,Wt=H.context,vt=M.contextType,$e=gc,typeof vt=="object"&&vt!==null&&($e=Wr(vt)),De=M.getDerivedStateFromProps,(vt=typeof De=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ce!==Gt||Wt!==$e)&&I_(p,H,C,$e),vl=!1,Wt=p.memoizedState,H.state=Wt,_t(p,C,H,N),Ve();var Dn=p.memoizedState;ce!==Gt||Wt!==Dn||vl||h!==null&&h.dependencies!==null&&Oh(h.dependencies)?(typeof De=="function"&&(qu(p,M,De,C),Dn=p.memoizedState),(Lt=vl||Yu(p,M,Lt,C,Wt,Dn,$e)||h!==null&&h.dependencies!==null&&Oh(h.dependencies))?(vt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(C,Dn,$e),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(C,Dn,$e)),typeof H.componentDidUpdate=="function"&&(p.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof H.componentDidUpdate!="function"||ce===h.memoizedProps&&Wt===h.memoizedState||(p.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ce===h.memoizedProps&&Wt===h.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=Dn),H.props=C,H.state=Dn,H.context=$e,C=Lt):(typeof H.componentDidUpdate!="function"||ce===h.memoizedProps&&Wt===h.memoizedState||(p.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ce===h.memoizedProps&&Wt===h.memoizedState||(p.flags|=1024),C=!1)}return H=C,Lh(h,p),C=(p.flags&128)!==0,H||C?(H=p.stateNode,M=C&&typeof M.getDerivedStateFromError!="function"?null:H.render(),p.flags|=1,h!==null&&C?(p.child=bc(p,h.child,null,N),p.child=bc(p,null,M,N)):kr(h,p,M,N),p.memoizedState=H.state,h=p.child):h=el(h,p,N),h}function G_(h,p,M,C){return be(),p.flags|=256,kr(h,p,M,C),p.child}function bv(h){return{baseLanes:h,cachePool:Cv()}}function Ih(h,p,M){return h=h!==null?h.childLanes&~M:0,p&&(h|=fs),h}function V_(h,p,M){var C=p.pendingProps,N=!1,H=(p.flags&128)!==0,ce;if((ce=H)||(ce=h!==null&&h.memoizedState===null?!1:(wr.current&2)!==0),ce&&(N=!0,p.flags&=-129),ce=(p.flags&32)!==0,p.flags&=-33,h===null){if(ti){if(N?hn(p):Qt(),ti){var De=Kr,$e;($e=De)&&(De=Ax(De,Ur),De!==null?(p.memoizedState={dehydrated:De,treeContext:vc!==null?{id:Ys,overflow:Ks}:null,retryLane:536870912},$e=t(18,null,null,0),$e.stateNode=De,$e.return=p,p.child=$e,Yr=p,Kr=null,$e=!0):$e=!1),$e||Ae(p)}if(De=p.memoizedState,De!==null&&(De=De.dehydrated,De!==null))return em(De)?p.lanes=16:p.lanes=536870912,null;Ft(p)}return De=C.children,C=C.fallback,N?(Qt(),N=p.mode,De=Mv({mode:"hidden",children:De},N),C=Zi(C,N,M,null),De.return=p,C.return=p,De.sibling=C,p.child=De,N=p.child,N.memoizedState=bv(M),N.childLanes=Ih(h,ce,M),p.memoizedState=pm,C):(hn(p),Sv(p,De))}if($e=h.memoizedState,$e!==null&&(De=$e.dehydrated,De!==null)){if(H)p.flags&256?(hn(p),p.flags&=-257,p=Cp(h,p,M)):p.memoizedState!==null?(Qt(),p.child=h.child,p.flags|=128,p=null):(Qt(),N=C.fallback,De=p.mode,C=Mv({mode:"visible",children:C.children},De),N=Zi(N,De,M,null),N.flags|=2,C.return=p,N.return=p,C.sibling=N,p.child=C,bc(p,h.child,null,M),C=p.child,C.memoizedState=bv(M),C.childLanes=Ih(h,ce,M),p.memoizedState=pm,p=N);else if(hn(p),em(De))ce=xx(De).digest,C=Error(r(419)),C.stack="",C.digest=ce,ye({value:C,source:null,stack:null}),p=Cp(h,p,M);else if(Ei||Nh(h,p,M,!1),ce=(M&h.childLanes)!==0,Ei||ce){if(ce=hi,ce!==null){if(C=M&-M,(C&42)!==0)C=1;else switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=64;break;case 268435456:C=134217728;break;default:C=0}if(C=(C&(ce.suspendedLanes|M))!==0?0:C,C!==0&&C!==$e.retryLane)throw $e.retryLane=C,ae(h,C),Nr(ce,h,C),dm}Qp(De)||ol(),p=Cp(h,p,M)}else Qp(De)?(p.flags|=128,p.child=h.child,p=ll.bind(null,h),bx(De,p),p=null):(h=$e.treeContext,qr&&(Kr=Ex(De),Yr=p,ti=!0,Ls=null,Ur=!1,h!==null&&(ns[is++]=Ys,ns[is++]=Ks,ns[is++]=vc,Ys=h.id,Ks=h.overflow,vc=p)),p=Sv(p,C.children),p.flags|=4096);return p}return N?(Qt(),N=C.fallback,De=p.mode,$e=h.child,H=$e.sibling,C=ws($e,{mode:"hidden",children:C.children}),C.subtreeFlags=$e.subtreeFlags&31457280,H!==null?N=ws(H,N):(N=Zi(N,De,M,null),N.flags|=2),N.return=p,C.return=p,C.sibling=N,p.child=C,C=N,N=p.child,De=h.child.memoizedState,De===null?De=bv(M):($e=De.cachePool,$e!==null?(H=ba?Di._currentValue:Di._currentValue2,$e=$e.parent!==H?{parent:H,pool:H}:$e):$e=Cv(),De={baseLanes:De.baseLanes|M,cachePool:$e}),N.memoizedState=De,N.childLanes=Ih(h,ce,M),p.memoizedState=pm,C):(hn(p),M=h.child,h=M.sibling,M=ws(M,{mode:"visible",children:C.children}),M.return=p,M.sibling=null,h!==null&&(ce=p.deletions,ce===null?(p.deletions=[h],p.flags|=16):ce.push(h)),p.child=M,p.memoizedState=null,M)}function Sv(h,p){return p=Mv({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function Mv(h,p){return Kh(h,p,0,null)}function Cp(h,p,M){return bc(p,h.child,null,M),h=Sv(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function k_(h,p,M){h.lanes|=p;var C=h.alternate;C!==null&&(C.lanes|=p),Ph(h.return,p,M)}function Ev(h,p,M,C,N){var H=h.memoizedState;H===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:M,tailMode:N}:(H.isBackwards=p,H.rendering=null,H.renderingStartTime=0,H.last=C,H.tail=M,H.tailMode=N)}function W_(h,p,M){var C=p.pendingProps,N=C.revealOrder,H=C.tail;if(kr(h,p,C.children,M),C=wr.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&k_(h,M,p);else if(h.tag===19)k_(h,M,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}switch(E(wr,C),N){case"forwards":for(M=p.child,N=null;M!==null;)h=M.alternate,h!==null&&tn(h)===null&&(N=M),M=M.sibling;M=N,M===null?(N=p.child,p.child=null):(N=M.sibling,M.sibling=null),Ev(p,!1,N,M,H);break;case"backwards":for(M=null,N=p.child,p.child=null;N!==null;){if(h=N.alternate,h!==null&&tn(h)===null){p.child=N;break}h=N.sibling,N.sibling=M,M=N,N=h}Ev(p,!0,M,null,H);break;case"together":Ev(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function el(h,p,M){if(h!==null&&(p.dependencies=h.dependencies),us|=p.lanes,(M&p.childLanes)===0)if(h!==null){if(Nh(h,p,M,!1),(M&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(r(153));if(p.child!==null){for(h=p.child,M=ws(h,h.pendingProps),p.child=M,M.return=p;h.sibling!==null;)h=h.sibling,M=M.sibling=ws(h,h.pendingProps),M.return=p;M.sibling=null}return p.child}function Av(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&Oh(h)))}function cE(h,p,M){switch(p.tag){case 3:oe(p,p.stateNode.containerInfo),Zl(p,Di,h.memoizedState.cache),be();break;case 27:case 5:Ge(p);break;case 4:oe(p,p.stateNode.containerInfo);break;case 10:Zl(p,p.type,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(hn(p),p.flags|=128,null):(M&p.child.childLanes)!==0?V_(h,p,M):(hn(p),h=el(h,p,M),h!==null?h.sibling:null);hn(p);break;case 19:var N=(h.flags&128)!==0;if(C=(M&p.childLanes)!==0,C||(Nh(h,p,M,!1),C=(M&p.childLanes)!==0),N){if(C)return W_(h,p,M);p.flags|=128}if(N=p.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),E(wr,wr.current),C)break;return null;case 22:case 23:return p.lanes=0,U_(h,p,M);case 24:Zl(p,Di,h.memoizedState.cache)}return el(h,p,M)}function X_(h,p,M){if(h!==null)if(h.memoizedProps!==p.pendingProps)Ei=!0;else{if(!Av(h,M)&&(p.flags&128)===0)return Ei=!1,cE(h,p,M);Ei=(h.flags&131072)!==0}else Ei=!1,ti&&(p.flags&1048576)!==0&&fe(p,xf,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var C=p.elementType,N=C._init;if(C=N(C._payload),p.type=C,typeof C=="function")qh(C)?(h=Qo(C,h),p.tag=1,p=H_(null,p,C,h,M)):(p.tag=0,p=wp(null,p,C,h,M));else{if(C!=null){if(N=C.$$typeof,N===td){p.tag=11,p=Tp(null,p,C,h,M);break e}else if(N===jp){p.tag=14,p=N_(null,p,C,h,M);break e}}throw p=s(C)||C,Error(r(306,p,""))}}return p;case 0:return wp(h,p,p.type,p.pendingProps,M);case 1:return C=p.type,N=Qo(C,p.pendingProps),H_(h,p,C,N,M);case 3:e:{if(oe(p,p.stateNode.containerInfo),h===null)throw Error(r(387));var H=p.pendingProps;N=p.memoizedState,C=N.element,Rt(h,p),_t(p,H,null,M);var ce=p.memoizedState;if(H=ce.cache,Zl(p,Di,H),H!==N.cache&&jc(p,[Di],M,!0),Ve(),H=ce.element,qr&&N.isDehydrated)if(N={element:H,isDehydrated:!1,cache:ce.cache},p.updateQueue.baseState=N,p.memoizedState=N,p.flags&256){p=G_(h,p,H,M);break e}else if(H!==C){C=de(Error(r(424)),p),ye(C),p=G_(h,p,H,M);break e}else for(qr&&(Kr=Mx(p.stateNode.containerInfo),Yr=p,ti=!0,Ls=null,Ur=!0),M=To(p,null,H,M),p.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(be(),H===C){p=el(h,p,M);break e}kr(h,p,H,M)}p=p.child}return p;case 26:if(ts)return Lh(h,p),h===null?(M=f0(p.type,null,p.pendingProps,null))?p.memoizedState=M:ti||(p.stateNode=am(p.type,p.pendingProps,Eo.current,p)):p.memoizedState=f0(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:if(Si)return Ge(p),h===null&&Si&&ti&&(C=p.stateNode=qs(p.type,p.pendingProps,Eo.current,Tr.current,!1),Yr=p,Ur=!0,Kr=tm(C)),C=p.pendingProps.children,h!==null||ti?kr(h,p,C,M):p.child=bc(p,null,C,M),Lh(h,p),p.child;case 5:return h===null&&ti&&(im(p.type,p.pendingProps,Tr.current),(N=C=Kr)&&(C=gE(C,p.type,p.pendingProps,Ur),C!==null?(p.stateNode=C,Yr=p,Kr=tm(C),Ur=!1,N=!0):N=!1),N||Ae(p)),Ge(p),N=p.type,H=p.pendingProps,ce=h!==null?h.memoizedProps:null,C=H.children,Ln(N,H)?C=null:ce!==null&&Ln(N,ce)&&(p.flags|=32),p.memoizedState!==null&&(N=re(h,p,Qe,null,null,M),ba?js._currentValue=N:js._currentValue2=N),Lh(h,p),kr(h,p,C,M),p.child;case 6:return h===null&&ti&&(Dx(p.pendingProps,Tr.current),(h=M=Kr)&&(M=c0(M,p.pendingProps,Ur),M!==null?(p.stateNode=M,Yr=p,Kr=null,h=!0):h=!1),h||Ae(p)),null;case 13:return V_(h,p,M);case 4:return oe(p,p.stateNode.containerInfo),C=p.pendingProps,h===null?p.child=bc(p,null,C,M):kr(h,p,C,M),p.child;case 11:return Tp(h,p,p.type,p.pendingProps,M);case 7:return kr(h,p,p.pendingProps,M),p.child;case 8:return kr(h,p,p.pendingProps.children,M),p.child;case 12:return kr(h,p,p.pendingProps.children,M),p.child;case 10:return C=p.pendingProps,Zl(p,p.type,C.value),kr(h,p,C.children,M),p.child;case 9:return N=p.type._context,C=p.pendingProps.children,Ql(p),N=Wr(N),C=C(N),p.flags|=1,kr(h,p,C,M),p.child;case 14:return N_(h,p,p.type,p.pendingProps,M);case 15:return O_(h,p,p.type,p.pendingProps,M);case 19:return W_(h,p,M);case 22:return U_(h,p,M);case 24:return Ql(p),C=Wr(Di),h===null?(N=wv(),N===null&&(N=hi,H=ec(),N.pooledCache=H,H.refCount++,H!==null&&(N.pooledCacheLanes|=M),N=H),p.memoizedState={parent:C,cache:N},Et(p),Zl(p,Di,N)):((h.lanes&M)!==0&&(Rt(h,p),_t(p,null,null,M),Ve()),N=h.memoizedState,H=p.memoizedState,N.parent!==C?(N={parent:C,cache:C},p.memoizedState=N,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=N),Zl(p,Di,C)):(C=H.cache,Zl(p,Di,C),C!==N.cache&&jc(p,[Di],M,!0))),kr(h,p,p.pendingProps.children,M),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function Zl(h,p,M){ba?(E(_l,p._currentValue),p._currentValue=M):(E(_l,p._currentValue2),p._currentValue2=M)}function tl(h){var p=_l.current;ba?h._currentValue=p:h._currentValue2=p,x(_l)}function Ph(h,p,M){for(;h!==null;){var C=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),h===M)break;h=h.return}}function jc(h,p,M,C){var N=h.child;for(N!==null&&(N.return=h);N!==null;){var H=N.dependencies;if(H!==null){var ce=N.child;H=H.firstContext;e:for(;H!==null;){var De=H;H=N;for(var $e=0;$e<p.length;$e++)if(De.context===p[$e]){H.lanes|=M,De=H.alternate,De!==null&&(De.lanes|=M),Ph(H.return,M,h),C||(ce=null);break e}H=De.next}}else if(N.tag===18){if(ce=N.return,ce===null)throw Error(r(341));ce.lanes|=M,H=ce.alternate,H!==null&&(H.lanes|=M),Ph(ce,M,h),ce=null}else ce=N.child;if(ce!==null)ce.return=N;else for(ce=N;ce!==null;){if(ce===h){ce=null;break}if(N=ce.sibling,N!==null){N.return=ce.return,ce=N;break}ce=ce.return}N=ce}}function Nh(h,p,M,C){h=null;for(var N=p,H=!1;N!==null;){if(!H){if((N.flags&524288)!==0)H=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var ce=N.alternate;if(ce===null)throw Error(r(387));if(ce=ce.memoizedProps,ce!==null){var De=N.type;Va(N.pendingProps.value,ce.value)||(h!==null?h.push(De):h=[De])}}else if(N===iu.current){if(ce=N.alternate,ce===null)throw Error(r(387));ce.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(h!==null?h.push(js):h=[js])}N=N.return}h!==null&&jc(p,h,M,C),p.flags|=262144}function Oh(h){for(h=h.firstContext;h!==null;){var p=h.context;if(!Va(ba?p._currentValue:p._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Ql(h){Qs=h,os=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Wr(h){return Tv(Qs,h)}function Uh(h,p){return Qs===null&&Ql(h),Tv(h,p)}function Tv(h,p){var M=ba?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:M,next:null},os===null){if(h===null)throw Error(r(308));os=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else os=os.next=p;return M}function ec(){return{controller:new Tf,data:new Map,refCount:0}}function Fh(h){h.refCount--,h.refCount===0&&Gx(Vx,function(){h.controller.abort()})}function wv(){var h=Co.current;return h!==null?h:hi.pooledCache}function Rp(h,p){p===null?E(Co,Co.current):E(Co,p.pool)}function Cv(){var h=wv();return h===null?null:{parent:ba?Di._currentValue:Di._currentValue2,pool:h}}function Na(h){h.flags|=4}function Qu(h,p){if(h!==null&&h.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(h=p.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function qc(h,p,M,C){if(Ar)for(M=p.child;M!==null;){if(M.tag===5||M.tag===6)id(h,M.stateNode);else if(!(M.tag===4||Si&&M.tag===27)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else if(Ds)for(var N=p.child;N!==null;){if(N.tag===5){var H=N.stateNode;M&&C&&(H=a0(H,N.type,N.memoizedProps)),id(h,H)}else if(N.tag===6)H=N.stateNode,M&&C&&(H=s0(H,N.memoizedProps)),id(h,H);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)H=N.child,H!==null&&(H.return=N),qc(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function $_(h,p,M,C){if(Ds)for(var N=p.child;N!==null;){if(N.tag===5){var H=N.stateNode;M&&C&&(H=a0(H,N.type,N.memoizedProps)),r0(h,H)}else if(N.tag===6)H=N.stateNode,M&&C&&(H=s0(H,N.memoizedProps)),r0(h,H);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)H=N.child,H!==null&&(H.return=N),$_(h,N,!(N.memoizedProps!==null&&N.memoizedProps.mode==="manual"),!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}}function zh(h,p){if(Ds&&Qu(h,p)){h=p.stateNode;var M=h.containerInfo,C=rd();$_(C,p,!1,!1),h.pendingChildren=C,Na(p),Zp(M,C)}}function Dp(h,p,M,C){if(Ar)h.memoizedProps!==C&&Na(p);else if(Ds){var N=h.stateNode,H=h.memoizedProps;if((h=Qu(h,p))||H!==C){var ce=Tr.current;H=vf(N,M,H,C,!h,null),H===N?p.stateNode=N:(hl(H,M,C,ce)&&Na(p),p.stateNode=H,h?qc(H,p,!1,!1):Na(p))}else p.stateNode=N}}function Bp(h,p,M){if(Kv(p,M)){if(h.flags|=16777216,!Kp(p,M))if(sc())h.flags|=8192;else throw yc=dd,hd}else h.flags&=-16777217}function Lp(h,p){if(Ix(p)){if(h.flags|=16777216,!Zc(p))if(sc())h.flags|=8192;else throw yc=dd,hd}else h.flags&=-16777217}function ef(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?L():536870912,h.lanes|=p,Bo|=p)}function tf(h,p){if(!ti)switch(h.tailMode){case"hidden":p=h.tail;for(var M=null;p!==null;)p.alternate!==null&&(M=p),p=p.sibling;M===null?h.tail=null:M.sibling=null;break;case"collapsed":M=h.tail;for(var C=null;M!==null;)M.alternate!==null&&(C=M),M=M.sibling;C===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function Gi(h){var p=h.alternate!==null&&h.alternate.child===h.child,M=0,C=0;if(p)for(var N=h.child;N!==null;)M|=N.lanes|N.childLanes,C|=N.subtreeFlags&31457280,C|=N.flags&31457280,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)M|=N.lanes|N.childLanes,C|=N.subtreeFlags,C|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=C,h.childLanes=M,p}function j_(h,p,M){var C=p.pendingProps;switch(Le(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(p),null;case 1:return Gi(p),null;case 3:return M=p.stateNode,C=null,h!==null&&(C=h.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),tl(Di),ke(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(h===null||h.child===null)&&(me(p)?Na(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Ls!==null&&($h(Ls),Ls=null))),zh(h,p),Gi(p),null;case 26:if(ts){M=p.type;var N=p.memoizedState;return h===null?(Na(p),N!==null?(Gi(p),Lp(p,N)):(Gi(p),Bp(p,M,C))):N?N!==h.memoizedState?(Na(p),Gi(p),Lp(p,N)):(Gi(p),p.flags&=-16777217):(Ar?h.memoizedProps!==C&&Na(p):Dp(h,p,M,C),Gi(p),Bp(p,M,C)),null}case 27:if(Si){if(Ze(p),M=Eo.current,N=p.type,h!==null&&p.stateNode!=null)Ar?h.memoizedProps!==C&&Na(p):Dp(h,p,N,C);else{if(!C){if(p.stateNode===null)throw Error(r(166));return Gi(p),null}h=Tr.current,me(p)?Q(p,h):(h=qs(N,C,M,h,!0),p.stateNode=h,Na(p))}return Gi(p),null}case 5:if(Ze(p),M=p.type,h!==null&&p.stateNode!=null)Dp(h,p,M,C);else{if(!C){if(p.stateNode===null)throw Error(r(166));return Gi(p),null}h=Tr.current,me(p)?Q(p,h):(N=Yv(M,C,Eo.current,h,p),qc(N,p,!1,!1),p.stateNode=N,hl(N,M,C,h)&&Na(p))}return Gi(p),Bp(p,p.type,p.pendingProps),null;case 6:if(h&&p.stateNode!=null)M=h.memoizedProps,Ar?M!==C&&Na(p):Ds&&(M!==C?(p.stateNode=vi(C,Eo.current,Tr.current,p),Na(p)):p.stateNode=h.stateNode);else{if(typeof C!="string"&&p.stateNode===null)throw Error(r(166));if(h=Eo.current,M=Tr.current,me(p)){if(!qr)throw Error(r(176));if(h=p.stateNode,M=p.memoizedProps,C=null,N=Yr,N!==null)switch(N.tag){case 27:case 5:C=N.memoizedProps}u0(h,M,p,C)||Ae(p)}else p.stateNode=vi(C,h,M,p)}return Gi(p),null;case 13:if(C=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(N=me(p),C!==null&&C.dehydrated!==null){if(h===null){if(!N)throw Error(r(318));if(!qr)throw Error(r(344));if(N=p.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));wx(N,p)}else be(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Gi(p),N=!1}else Ls!==null&&($h(Ls),Ls=null),N=!0;if(!N)return p.flags&256?(Ft(p),p):(Ft(p),null)}if(Ft(p),(p.flags&128)!==0)return p.lanes=M,p;if(M=C!==null,h=h!==null&&h.memoizedState!==null,M){C=p.child,N=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(N=C.alternate.memoizedState.cachePool.pool);var H=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(H=C.memoizedState.cachePool.pool),H!==N&&(C.flags|=2048)}return M!==h&&M&&(p.child.flags|=8192),ef(p,p.updateQueue),Gi(p),null;case 4:return ke(),zh(h,p),h===null&&or(p.stateNode.containerInfo),Gi(p),null;case 10:return tl(p.type),Gi(p),null;case 19:if(x(wr),N=p.memoizedState,N===null)return Gi(p),null;if(C=(p.flags&128)!==0,H=N.rendering,H===null)if(C)tf(N,!1);else{if(Ai!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(H=tn(h),H!==null){for(p.flags|=128,tf(N,!1),h=H.updateQueue,p.updateQueue=h,ef(p,h),p.subtreeFlags=0,h=M,M=p.child;M!==null;)Yh(M,h),M=M.sibling;return E(wr,wr.current&1|2),p.child}h=h.sibling}N.tail!==null&&Bs()>Rf&&(p.flags|=128,C=!0,tf(N,!1),p.lanes=4194304)}else{if(!C)if(h=tn(H),h!==null){if(p.flags|=128,C=!0,h=h.updateQueue,p.updateQueue=h,ef(p,h),tf(N,!0),N.tail===null&&N.tailMode==="hidden"&&!H.alternate&&!ti)return Gi(p),null}else 2*Bs()-N.renderingStartTime>Rf&&M!==536870912&&(p.flags|=128,C=!0,tf(N,!1),p.lanes=4194304);N.isBackwards?(H.sibling=p.child,p.child=H):(h=N.last,h!==null?h.sibling=H:p.child=H,N.last=H)}return N.tail!==null?(p=N.tail,N.rendering=p,N.tail=p.sibling,N.renderingStartTime=Bs(),p.sibling=null,h=wr.current,E(wr,C?h&1|2:h&1),p):(Gi(p),null);case 22:case 23:return Ft(p),wt(),C=p.memoizedState!==null,h!==null?h.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(M&536870912)!==0&&(p.flags&128)===0&&(Gi(p),p.subtreeFlags&6&&(p.flags|=8192)):Gi(p),M=p.updateQueue,M!==null&&ef(p,M.retryQueue),M=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(M=h.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==M&&(p.flags|=2048),h!==null&&x(Co),null;case 24:return M=null,h!==null&&(M=h.memoizedState.cache),p.memoizedState.cache!==M&&(p.flags|=2048),tl(Di),Gi(p),null;case 25:return null}throw Error(r(156,p.tag))}function uE(h,p){switch(Le(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return tl(Di),ke(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return Ze(p),null;case 13:if(Ft(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(r(340));be()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return x(wr),null;case 4:return ke(),null;case 10:return tl(p.type),null;case 22:case 23:return Ft(p),wt(),h!==null&&x(Co),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return tl(Di),null;case 25:return null;default:return null}}function q_(h,p){switch(Le(p),p.tag){case 3:tl(Di),ke();break;case 26:case 27:case 5:Ze(p);break;case 4:ke();break;case 13:Ft(p);break;case 19:x(wr);break;case 10:tl(p.type);break;case 22:case 23:Ft(p),wt(),h!==null&&x(Co);break;case 24:tl(Di)}}function Hh(h,p){try{var M=p.updateQueue,C=M!==null?M.lastEffect:null;if(C!==null){var N=C.next;M=N;do{if((M.tag&h)===h){C=void 0;var H=M.create,ce=M.inst;C=H(),ce.destroy=C}M=M.next}while(M!==N)}}catch(De){ui(p,p.return,De)}}function tc(h,p,M){try{var C=p.updateQueue,N=C!==null?C.lastEffect:null;if(N!==null){var H=N.next;C=H;do{if((C.tag&h)===h){var ce=C.inst,De=ce.destroy;if(De!==void 0){ce.destroy=void 0,N=p;var $e=M;try{De()}catch(vt){ui(N,$e,vt)}}}C=C.next}while(C!==H)}}catch(vt){ui(p,p.return,vt)}}function Y_(h){var p=h.updateQueue;if(p!==null){var M=h.stateNode;try{qe(p,M)}catch(C){ui(h,h.return,C)}}}function Oa(h,p,M){M.props=Qo(h.type,h.memoizedProps),M.state=h.memoizedState;try{M.componentWillUnmount()}catch(C){ui(h,p,C)}}function Ws(h,p){try{var M=h.ref;if(M!==null){var C=h.stateNode;switch(h.tag){case 26:case 27:case 5:var N=pf(C);break;default:N=C}typeof M=="function"?h.refCleanup=M(N):M.current=N}}catch(H){ui(h,p,H)}}function Ua(h,p){var M=h.ref,C=h.refCleanup;if(M!==null)if(typeof C=="function")try{C()}catch(N){ui(h,p,N)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof M=="function")try{M(null)}catch(N){ui(h,p,N)}else M.current=null}function Rv(h){var p=h.type,M=h.memoizedProps,C=h.stateNode;try{pE(C,p,M,h)}catch(N){ui(h,h.return,N)}}function Dv(h,p,M){try{hx(h.stateNode,h.type,M,p,h)}catch(C){ui(h,h.return,C)}}function Bv(h){return h.tag===5||h.tag===3||(ts?h.tag===26:!1)||(Si?h.tag===27:!1)||h.tag===4}function Gh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Bv(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!Si||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Lv(h,p,M){var C=h.tag;if(C===5||C===6)h=h.stateNode,p?px(M,h,p):t0(M,h);else if(!(C===4||Si&&C===27)&&(h=h.child,h!==null))for(Lv(h,p,M),h=h.sibling;h!==null;)Lv(h,p,M),h=h.sibling}function nl(h,p,M){var C=h.tag;if(C===5||C===6)h=h.stateNode,p?dx(M,h,p):ux(M,h);else if(!(C===4||Si&&C===27)&&(h=h.child,h!==null))for(nl(h,p,M),h=h.sibling;h!==null;)nl(h,p,M),h=h.sibling}function Ip(h,p,M){h=h.containerInfo;try{yf(h,M)}catch(C){ui(p,p.return,C)}}function Vh(h,p){for(qp(h.containerInfo),Rn=p;Rn!==null;)if(h=Rn,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,Rn=p;else for(;Rn!==null;){h=Rn;var M=h.alternate;switch(p=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&M!==null){p=void 0;var C=h,N=M.memoizedProps;M=M.memoizedState;var H=C.stateNode;try{var ce=Qo(C.type,N,C.elementType===C.type);p=H.getSnapshotBeforeUpdate(ce,M),H.__reactInternalSnapshotBeforeUpdate=p}catch(De){ui(C,C.return,De)}}break;case 3:(p&1024)!==0&&Ar&&_x(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=h.sibling,p!==null){p.return=h.return,Rn=p;break}Rn=h.return}return ce=Wn,Wn=!1,ce}function Pp(h,p,M){var C=M.flags;switch(M.tag){case 0:case 11:case 15:rl(h,M),C&4&&Hh(5,M);break;case 1:if(rl(h,M),C&4)if(h=M.stateNode,p===null)try{h.componentDidMount()}catch(De){ui(M,M.return,De)}else{var N=Qo(M.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(N,p,h.__reactInternalSnapshotBeforeUpdate)}catch(De){ui(M,M.return,De)}}C&64&&Y_(M),C&512&&Ws(M,M.return);break;case 3:if(rl(h,M),C&64&&(C=M.updateQueue,C!==null)){if(h=null,M.child!==null)switch(M.child.tag){case 27:case 5:h=pf(M.child.stateNode);break;case 1:h=M.child.stateNode}try{qe(C,h)}catch(De){ui(M,M.return,De)}}break;case 26:if(ts){rl(h,M),C&512&&Ws(M,M.return);break}case 27:case 5:rl(h,M),p===null&&C&4&&Rv(M),C&512&&Ws(M,M.return);break;case 12:rl(h,M);break;case 13:rl(h,M),C&4&&Np(h,M);break;case 22:if(N=M.memoizedState!==null||Ro,!N){p=p!==null&&p.memoizedState!==null||er;var H=Ro,ce=er;Ro=N,(er=p)&&!ce?al(h,M,(M.subtreeFlags&8772)!==0):rl(h,M),Ro=H,er=ce}C&512&&(M.memoizedProps.mode==="manual"?Ws(M,M.return):Ua(M,M.return));break;default:rl(h,M)}}function Iv(h){var p=h.alternate;p!==null&&(h.alternate=null,Iv(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&dE(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Xr(h,p,M){for(M=M.child;M!==null;)nc(h,p,M),M=M.sibling}function nc(h,p,M){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(cr,M)}catch{}switch(M.tag){case 26:if(ts){er||Ua(M,p),Xr(h,p,M),M.memoizedState?Jc(M.memoizedState):M.stateNode&&_f(M.stateNode);break}case 27:if(Si){er||Ua(M,p);var C=cn,N=Nn;cn=M.stateNode,Xr(h,p,M),mc(M.stateNode),cn=C,Nn=N;break}case 5:er||Ua(M,p);case 6:if(Ar){if(C=cn,N=Nn,cn=null,Xr(h,p,M),cn=C,Nn=N,cn!==null)if(Nn)try{mx(cn,M.stateNode)}catch(H){ui(M,p,H)}else try{n0(cn,M.stateNode)}catch(H){ui(M,p,H)}}else Xr(h,p,M);break;case 18:Ar&&cn!==null&&(Nn?ad(cn,M.stateNode):Rx(cn,M.stateNode));break;case 4:Ar?(C=cn,N=Nn,cn=M.stateNode.containerInfo,Nn=!0,Xr(h,p,M),cn=C,Nn=N):(Ds&&Ip(M.stateNode,M,rd()),Xr(h,p,M));break;case 0:case 11:case 14:case 15:er||tc(2,M,p),er||tc(4,M,p),Xr(h,p,M);break;case 1:er||(Ua(M,p),C=M.stateNode,typeof C.componentWillUnmount=="function"&&Oa(M,p,C)),Xr(h,p,M);break;case 21:Xr(h,p,M);break;case 22:er||Ua(M,p),er=(C=er)||M.memoizedState!==null,Xr(h,p,M),er=C;break;default:Xr(h,p,M)}}function Np(h,p){if(qr&&p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{yE(h)}catch(M){ui(p,p.return,M)}}function K_(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new fi),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new fi),p;default:throw Error(r(435,h.tag))}}function il(h,p){var M=K_(h);p.forEach(function(C){var N=cc.bind(null,h,C);M.has(C)||(M.add(C),C.then(N,N))})}function _a(h,p){var M=p.deletions;if(M!==null)for(var C=0;C<M.length;C++){var N=M[C],H=h,ce=p;if(Ar){var De=ce;e:for(;De!==null;){switch(De.tag){case 27:case 5:cn=De.stateNode,Nn=!1;break e;case 3:cn=De.stateNode.containerInfo,Nn=!0;break e;case 4:cn=De.stateNode.containerInfo,Nn=!0;break e}De=De.return}if(cn===null)throw Error(r(160));nc(H,ce,N),cn=null,Nn=!1}else nc(H,ce,N);H=N.alternate,H!==null&&(H.return=null),N.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)Pv(p,h),p=p.sibling}function Pv(h,p){var M=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:_a(p,h),Fa(h),C&4&&(tc(3,h,h.return),Hh(3,h),tc(5,h,h.return));break;case 1:_a(p,h),Fa(h),C&512&&(er||M===null||Ua(M,M.return)),C&64&&Ro&&(h=h.updateQueue,h!==null&&(C=h.callbacks,C!==null&&(M=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=M===null?C:M.concat(C))));break;case 26:if(ts){var N=ji;_a(p,h),Fa(h),C&512&&(er||M===null||Ua(M,M.return)),C&4&&(C=M!==null?M.memoizedState:null,p=h.memoizedState,M===null?p===null?h.stateNode===null?h.stateNode=od(N,h.type,h.memoizedProps,h):ld(N,h.type,h.stateNode):h.stateNode=Bx(N,p,h.memoizedProps):C!==p?(C===null?M.stateNode!==null&&_f(M.stateNode):Jc(C),p===null?ld(N,h.type,h.stateNode):Bx(N,p,h.memoizedProps)):p===null&&h.stateNode!==null&&Dv(h,h.memoizedProps,M.memoizedProps));break}case 27:if(Si&&C&4&&h.alternate===null){N=h.stateNode;var H=h.memoizedProps;try{pc(N),Nx(h.type,H,N,h)}catch(Lt){ui(h,h.return,Lt)}}case 5:if(_a(p,h),Fa(h),C&512&&(er||M===null||Ua(M,M.return)),Ar){if(h.flags&32){p=h.stateNode;try{i0(p)}catch(Lt){ui(h,h.return,Lt)}}C&4&&h.stateNode!=null&&(p=h.memoizedProps,Dv(h,p,M!==null?M.memoizedProps:p)),C&1024&&(m0=!0)}break;case 6:if(_a(p,h),Fa(h),C&4&&Ar){if(h.stateNode===null)throw Error(r(162));C=h.memoizedProps,M=M!==null?M.memoizedProps:C,p=h.stateNode;try{fx(p,M,C)}catch(Lt){ui(h,h.return,Lt)}}break;case 3:if(ts?(Lx(),N=ji,ji=rm(p.containerInfo),_a(p,h),ji=N):_a(p,h),Fa(h),C&4){if(Ar&&qr&&M!==null&&M.memoizedState.isDehydrated)try{vE(p.containerInfo)}catch(Lt){ui(h,h.return,Lt)}if(Ds){C=p.containerInfo,M=p.pendingChildren;try{yf(C,M)}catch(Lt){ui(h,h.return,Lt)}}}m0&&(m0=!1,J_(h));break;case 4:ts?(M=ji,ji=rm(h.stateNode.containerInfo),_a(p,h),Fa(h),ji=M):(_a(p,h),Fa(h)),C&4&&Ds&&Ip(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:_a(p,h),Fa(h);break;case 13:_a(p,h),Fa(h),h.child.flags&8192&&h.memoizedState!==null!=(M!==null&&M.memoizedState!==null)&&(Aa=Bs()),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,il(h,C)));break;case 22:C&512&&(er||M===null||Ua(M,M.return)),N=h.memoizedState!==null;var ce=M!==null&&M.memoizedState!==null,De=Ro,$e=er;if(Ro=De||N,er=$e||ce,_a(p,h),er=$e,Ro=De,Fa(h),p=h.stateNode,p._current=h,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,C&8192&&(p._visibility=N?p._visibility&-2:p._visibility|1,N&&(p=Ro||er,M===null||ce||p||nf(h)),Ar&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(M=null,Ar)for(p=h;;){if(p.tag===5||ts&&p.tag===26||Si&&p.tag===27){if(M===null){ce=M=p;try{H=ce.stateNode,N?gx(H):yx(ce.stateNode,ce.memoizedProps)}catch(Lt){ui(ce,ce.return,Lt)}}}else if(p.tag===6){if(M===null){ce=p;try{var vt=ce.stateNode;N?vx(vt):mE(vt,ce.memoizedProps)}catch(Lt){ui(ce,ce.return,Lt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;M===p&&(M=null),p=p.return}M===p&&(M=null),p.sibling.return=p.return,p=p.sibling}}C&4&&(C=h.updateQueue,C!==null&&(M=C.retryQueue,M!==null&&(C.retryQueue=null,il(h,M))));break;case 19:_a(p,h),Fa(h),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,il(h,C)));break;case 21:break;default:_a(p,h),Fa(h)}}function Fa(h){var p=h.flags;if(p&2){try{if(Ar&&(!Si||h.tag!==27)){e:{for(var M=h.return;M!==null;){if(Bv(M)){var C=M;break e}M=M.return}throw Error(r(160))}switch(C.tag){case 27:if(Si){var N=C.stateNode,H=Gh(h);nl(h,H,N);break}case 5:var ce=C.stateNode;C.flags&32&&(i0(ce),C.flags&=-33);var De=Gh(h);nl(h,De,ce);break;case 3:case 4:var $e=C.stateNode.containerInfo,vt=Gh(h);Lv(h,vt,$e);break;default:throw Error(r(161))}}}catch(Lt){ui(h,h.return,Lt)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function J_(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;J_(p),p.tag===5&&p.flags&1024&&Jp(p.stateNode),h=h.sibling}}function rl(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Pp(h,p.alternate,p),p=p.sibling}function nf(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:tc(4,p,p.return),nf(p);break;case 1:Ua(p,p.return);var M=p.stateNode;typeof M.componentWillUnmount=="function"&&Oa(p,p.return,M),nf(p);break;case 26:case 27:case 5:Ua(p,p.return),nf(p);break;case 22:Ua(p,p.return),p.memoizedState===null&&nf(p);break;default:nf(p)}h=h.sibling}}function al(h,p,M){for(M=M&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,N=h,H=p,ce=H.flags;switch(H.tag){case 0:case 11:case 15:al(N,H,M),Hh(4,H);break;case 1:if(al(N,H,M),C=H,N=C.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(vt){ui(C,C.return,vt)}if(C=H,N=C.updateQueue,N!==null){var De=C.stateNode;try{var $e=N.shared.hiddenCallbacks;if($e!==null)for(N.shared.hiddenCallbacks=null,N=0;N<$e.length;N++)Me($e[N],De)}catch(vt){ui(C,C.return,vt)}}M&&ce&64&&Y_(H),Ws(H,H.return);break;case 26:case 27:case 5:al(N,H,M),M&&C===null&&ce&4&&Rv(H),Ws(H,H.return);break;case 12:al(N,H,M);break;case 13:al(N,H,M),M&&ce&4&&Np(N,H);break;case 22:H.memoizedState===null&&al(N,H,M),Ws(H,H.return);break;default:al(N,H,M)}p=p.sibling}}function Op(h,p){var M=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(M=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==M&&(h!=null&&h.refCount++,M!=null&&Fh(M))}function kh(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Fh(h))}function Pr(h,p,M,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Nv(h,p,M,C),p=p.sibling}function Nv(h,p,M,C){var N=p.flags;switch(p.tag){case 0:case 11:case 15:Pr(h,p,M,C),N&2048&&Hh(9,p);break;case 3:Pr(h,p,M,C),N&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Fh(h)));break;case 12:if(N&2048){Pr(h,p,M,C),h=p.stateNode;try{var H=p.memoizedProps,ce=H.id,De=H.onPostCommit;typeof De=="function"&&De(ce,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch($e){ui(p,p.return,$e)}}else Pr(h,p,M,C);break;case 23:break;case 22:H=p.stateNode,p.memoizedState!==null?H._visibility&4?Pr(h,p,M,C):na(h,p):H._visibility&4?Pr(h,p,M,C):(H._visibility|=4,$r(h,p,M,C,(p.subtreeFlags&10256)!==0)),N&2048&&Op(p.alternate,p);break;case 24:Pr(h,p,M,C),N&2048&&kh(p.alternate,p);break;default:Pr(h,p,M,C)}}function $r(h,p,M,C,N){for(N=N&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var H=h,ce=p,De=M,$e=C,vt=ce.flags;switch(ce.tag){case 0:case 11:case 15:$r(H,ce,De,$e,N),Hh(8,ce);break;case 23:break;case 22:var Lt=ce.stateNode;ce.memoizedState!==null?Lt._visibility&4?$r(H,ce,De,$e,N):na(H,ce):(Lt._visibility|=4,$r(H,ce,De,$e,N)),N&&vt&2048&&Op(ce.alternate,ce);break;case 24:$r(H,ce,De,$e,N),N&&vt&2048&&kh(ce.alternate,ce);break;default:$r(H,ce,De,$e,N)}p=p.sibling}}function na(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var M=h,C=p,N=C.flags;switch(C.tag){case 22:na(M,C),N&2048&&Op(C.alternate,C);break;case 24:na(M,C),N&2048&&kh(C.alternate,C);break;default:na(M,C)}p=p.sibling}}function As(h){if(h.subtreeFlags&ls)for(h=h.child;h!==null;)Up(h),h=h.sibling}function Up(h){switch(h.tag){case 26:As(h),h.flags&ls&&(h.memoizedState!==null?Px(ji,h.memoizedState,h.memoizedProps):Sa(h.type,h.memoizedProps));break;case 5:As(h),h.flags&ls&&Sa(h.type,h.memoizedProps);break;case 3:case 4:if(ts){var p=ji;ji=rm(h.stateNode.containerInfo),As(h),ji=p}else As(h);break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=ls,ls=16777216,As(h),ls=p):As(h));break;default:As(h)}}function Wh(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function ic(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var M=0;M<p.length;M++){var C=p[M];Rn=C,Ov(C,h)}Wh(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Fp(h),h=h.sibling}function Fp(h){switch(h.tag){case 0:case 11:case 15:ic(h),h.flags&2048&&tc(9,h,h.return);break;case 3:ic(h);break;case 12:ic(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&4&&(h.return===null||h.return.tag!==13)?(p._visibility&=-5,sl(h)):ic(h);break;default:ic(h)}}function sl(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var M=0;M<p.length;M++){var C=p[M];Rn=C,Ov(C,h)}Wh(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:tc(8,p,p.return),sl(p);break;case 22:M=p.stateNode,M._visibility&4&&(M._visibility&=-5,sl(p));break;default:sl(p)}h=h.sibling}}function Ov(h,p){for(;Rn!==null;){var M=Rn;switch(M.tag){case 0:case 11:case 15:tc(8,M,p);break;case 23:case 22:if(M.memoizedState!==null&&M.memoizedState.cachePool!==null){var C=M.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Fh(M.memoizedState.cache)}if(C=M.child,C!==null)C.return=M,Rn=C;else e:for(M=h;Rn!==null;){C=Rn;var N=C.sibling,H=C.return;if(Iv(C),C===M){Rn=null;break e}if(N!==null){N.return=H,Rn=N;break e}Rn=H}}}function rf(h){var p=ix(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(r(364));return p}if(h=Qv(h),h===null)throw Error(r(362));return h.stateNode.current}function rc(h,p){var M=h.tag;switch(p.$$typeof){case Cf:if(h.type===p.value)return!0;break;case Ns:e:{for(p=p.value,h=[h,0],M=0;M<h.length;){var C=h[M++],N=C.tag,H=h[M++],ce=p[H];if(N!==5&&N!==26&&N!==27||!gf(C)){for(;ce!=null&&rc(C,ce);)H++,ce=p[H];if(H===p.length){p=!0;break e}else for(C=C.child;C!==null;)h.push(C,H),C=C.sibling}}p=!1}return p;case Fi:if((M===5||M===26||M===27)&&ox(h.stateNode,p.value))return!0;break;case Do:if((M===5||M===6||M===26||M===27)&&(h=sx(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case eo:if((M===5||M===26||M===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Uv(h){switch(h.$$typeof){case Cf:return"<"+(s(h.value)||"Unknown")+">";case Ns:return":has("+(Uv(h)||"")+")";case Fi:return'[role="'+h.value+'"]';case Do:return'"'+h.value+'"';case eo:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function za(h,p){var M=[];h=[h,0];for(var C=0;C<h.length;){var N=h[C++],H=N.tag,ce=h[C++],De=p[ce];if(H!==5&&H!==26&&H!==27||!gf(N)){for(;De!=null&&rc(N,De);)ce++,De=p[ce];if(ce===p.length)M.push(N);else for(N=N.child;N!==null;)h.push(N,ce),N=N.sibling}}return M}function Xh(h,p){if(!dc)throw Error(r(363));h=rf(h),h=za(h,p),p=[],h=Array.from(h);for(var M=0;M<h.length;){var C=h[M++],N=C.tag;if(N===5||N===26||N===27)gf(C)||p.push(C.stateNode);else for(C=C.child;C!==null;)h.push(C),C=C.sibling}return p}function sr(){if((ri&2)!==0&&jn!==0)return jn&-jn;if(Mn.T!==null){var h=rs;return h!==0?h:Be()}return rx()}function Fv(){fs===0&&(fs=(jn&536870912)===0||ti?I():536870912);var h=as.current;return h!==null&&(h.flags|=32),fs}function Nr(h,p,M){(h===hi&&yi===2||h.cancelPendingCommit!==null)&&(jr(h,0),Ha(h,jn,fs,!1)),F(h,M),((ri&2)===0||h!==hi)&&(h===hi&&((ri&2)===0&&(xl|=M),Ai===4&&Ha(h,jn,fs,!1)),Se(h))}function ac(h,p,M){if((ri&6)!==0)throw Error(r(327));var C=!M&&(p&60)===0&&(p&h.expiredLanes)===0||w(h,p),N=C?Hv(h,p):Hp(h,p,!0),H=C;do{if(N===0){cs&&!C&&Ha(h,p,0,!1);break}else if(N===6)Ha(h,p,0,!Us);else{if(M=h.current.alternate,H&&!af(M)){N=Hp(h,p,!1),H=!1;continue}if(N===2){if(H=p,h.errorRecoveryDisabledLanes&H)var ce=0;else ce=h.pendingLanes&-536870913,ce=ce!==0?ce:ce&536870912?536870912:0;if(ce!==0){p=ce;e:{var De=h;N=hu;var $e=qr&&De.current.memoizedState.isDehydrated;if($e&&(jr(De,ce).flags|=256),ce=Hp(De,ce,!1),ce!==2){if(Cr&&!$e){De.errorRecoveryDisabledLanes|=H,xl|=H,N=4;break e}H=tr,tr=N,H!==null&&$h(H)}N=ce}if(H=!1,N!==2)continue}}if(N===1){jr(h,0),Ha(h,p,0,!0);break}e:{switch(C=h,N){case 0:case 1:throw Error(r(345));case 4:if((p&4194176)===p){Ha(C,p,fs,!Us);break e}break;case 2:tr=null;break;case 3:case 5:break;default:throw Error(r(329))}if(C.finishedWork=M,C.finishedLanes=p,(p&62914560)===p&&(H=Aa+300-Bs(),10<H)){if(Ha(C,p,fs,!Us),U(C,0)!==0)break e;C.timeoutHandle=_r(zp.bind(null,C,M,tr,md,mm,p,fs,xl,Bo,Us,2,-0,0),H);break e}zp(C,M,tr,md,mm,p,fs,xl,Bo,Us,0,-0,0)}}break}while(!0);Se(h)}function $h(h){tr===null?tr=h:tr.push.apply(tr,h)}function zp(h,p,M,C,N,H,ce,De,$e,vt,Lt,Gt,Wt){var Dn=p.subtreeFlags;if((Dn&8192||(Dn&16785408)===16785408)&&(Jv(),Up(p),p=xr(),p!==null)){h.cancelPendingCommit=p(oc.bind(null,h,M,C,N,ce,De,$e,1,Gt,Wt)),Ha(h,H,ce,!vt);return}oc(h,M,C,N,ce,De,$e,Lt,Gt,Wt)}function af(h){for(var p=h;;){var M=p.tag;if((M===0||M===11||M===15)&&p.flags&16384&&(M=p.updateQueue,M!==null&&(M=M.stores,M!==null)))for(var C=0;C<M.length;C++){var N=M[C],H=N.getSnapshot;N=N.value;try{if(!Va(H(),N))return!1}catch{return!1}}if(M=p.child,p.subtreeFlags&16384&&M!==null)M.return=p,p=M;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ha(h,p,M,C){p&=~pd,p&=~xl,h.suspendedLanes|=p,h.pingedLanes&=~p,C&&(h.warmLanes|=p),C=h.expirationTimes;for(var N=p;0<N;){var H=31-Ma(N),ce=1<<H;C[H]=-1,N&=~ce}M!==0&&V(h,M,p)}function jh(){return(ri&6)===0?(We(0),!1):!0}function sf(){if(dn!==null){if(yi===0)var h=dn.return;else h=dn,os=Qs=null,dt(h),_c=null,xc=0,h=dn;for(;h!==null;)q_(h.alternate,h),h=h.return;dn=null}}function jr(h,p){h.finishedWork=null,h.finishedLanes=0;var M=h.timeoutHandle;M!==fc&&(h.timeoutHandle=fc,Yp(M)),M=h.cancelPendingCommit,M!==null&&(h.cancelPendingCommit=null,M()),sf(),hi=h,dn=M=ws(h.current,null),jn=p,yi=0,ra=null,Us=!1,cs=w(h,p),Cr=!1,Bo=fs=pd=xl=us=Ai=0,tr=hu=null,mm=!1,(p&8)!==0&&(p|=p&32);var C=h.entangledLanes;if(C!==0)for(h=h.entanglements,C&=p;0<C;){var N=31-Ma(C),H=1<<N;p|=h[N],C&=~H}return aa=p,j(),M}function Za(h,p){Hn=null,Mn.H=Qi,p===Ef?(p=Ut(),yi=3):p===hd?(p=Ut(),yi=4):yi=p===dm?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ra=p,dn===null&&(Ai=1,Ku(h,de(p,h.current)))}function sc(){var h=as.current;return h===null?!0:(jn&4194176)===jn?Mi===null:(jn&62914560)===jn||(jn&536870912)!==0?h===Mi:!1}function yo(){var h=Mn.H;return Mn.H=Qi,h===null?Qi:h}function _o(){var h=Mn.A;return Mn.A=wf,h}function ol(){Ai=4,Us||(jn&4194176)!==jn&&as.current!==null||(cs=!0),(us&134217727)===0&&(xl&134217727)===0||hi===null||Ha(hi,jn,fs,!1)}function Hp(h,p,M){var C=ri;ri|=2;var N=yo(),H=_o();(hi!==h||jn!==p)&&(md=null,jr(h,p)),p=!1;var ce=Ai;e:do try{if(yi!==0&&dn!==null){var De=dn,$e=ra;switch(yi){case 8:sf(),ce=6;break e;case 3:case 2:case 6:as.current===null&&(p=!0);var vt=yi;if(yi=0,ra=null,Ts(h,De,$e,vt),M&&cs){ce=0;break e}break;default:vt=yi,yi=0,ra=null,Ts(h,De,$e,vt)}}zv(),ce=Ai;break}catch(Lt){Za(h,Lt)}while(!0);return p&&h.shellSuspendCounter++,os=Qs=null,ri=C,Mn.H=N,Mn.A=H,dn===null&&(hi=null,jn=0,j()),ce}function zv(){for(;dn!==null;)$i(dn)}function Hv(h,p){var M=ri;ri|=2;var C=yo(),N=_o();hi!==h||jn!==p?(md=null,Rf=Bs()+500,jr(h,p)):cs=w(h,p);e:do try{if(yi!==0&&dn!==null){p=dn;var H=ra;t:switch(yi){case 1:yi=0,ra=null,Ts(h,p,H,1);break;case 2:if(Pt(H)){yi=0,ra=null,oi(p);break}p=function(){yi===2&&hi===h&&(yi=7),Se(h)},H.then(p,p);break e;case 3:yi=7;break e;case 4:yi=5;break e;case 7:Pt(H)?(yi=0,ra=null,oi(p)):(yi=0,ra=null,Ts(h,p,H,7));break;case 5:var ce=null;switch(dn.tag){case 26:ce=dn.memoizedState;case 5:case 27:var De=dn,$e=De.type,vt=De.pendingProps;if(ce?Zc(ce):Kp($e,vt)){yi=0,ra=null;var Lt=De.sibling;if(Lt!==null)dn=Lt;else{var Gt=De.return;Gt!==null?(dn=Gt,Qa(Gt)):dn=null}break t}}yi=0,ra=null,Ts(h,p,H,5);break;case 6:yi=0,ra=null,Ts(h,p,H,6);break;case 8:sf(),Ai=6;break e;default:throw Error(r(462))}}xa();break}catch(Wt){Za(h,Wt)}while(!0);return os=Qs=null,Mn.H=C,Mn.A=N,ri=M,dn!==null?0:(hi=null,jn=0,j(),Ai)}function xa(){for(;dn!==null&&!Fx();)$i(dn)}function $i(h){var p=X_(h.alternate,h,aa);h.memoizedProps=h.pendingProps,p===null?Qa(h):dn=p}function oi(h){var p=h,M=p.alternate;switch(p.tag){case 15:case 0:p=z_(M,p,p.pendingProps,p.type,void 0,jn);break;case 11:p=z_(M,p,p.pendingProps,p.type.render,p.ref,jn);break;case 5:dt(p);default:q_(M,p),p=dn=Yh(p,aa),p=X_(M,p,aa)}h.memoizedProps=h.pendingProps,p===null?Qa(h):dn=p}function Ts(h,p,M,C){os=Qs=null,dt(p),_c=null,xc=0;var N=p.return;try{if(lE(h,N,p,M,jn)){Ai=1,Ku(h,de(M,h.current)),dn=null;return}}catch(H){if(N!==null)throw dn=N,H;Ai=1,Ku(h,de(M,h.current)),dn=null;return}p.flags&32768?(ti||C===1?h=!0:cs||(jn&536870912)!==0?h=!1:(Us=h=!0,(C===2||C===3||C===6)&&(C=as.current,C!==null&&C.tag===13&&(C.flags|=16384))),Gp(p,h)):Qa(p)}function Qa(h){var p=h;do{if((p.flags&32768)!==0){Gp(p,Us);return}h=p.return;var M=j_(p.alternate,p,aa);if(M!==null){dn=M;return}if(p=p.sibling,p!==null){dn=p;return}dn=p=h}while(p!==null);Ai===0&&(Ai=5)}function Gp(h,p){do{var M=uE(h.alternate,h);if(M!==null){M.flags&=32767,dn=M;return}if(M=h.return,M!==null&&(M.flags|=32768,M.subtreeFlags=0,M.deletions=null),!p&&(h=h.sibling,h!==null)){dn=h;return}dn=h=M}while(h!==null);Ai=6,dn=null}function oc(h,p,M,C,N,H,ce,De,$e,vt){var Lt=Mn.T,Gt=dl();try{ia(2),Mn.T=null,Z_(h,p,M,C,Gt,N,H,ce,De,$e,vt)}finally{Mn.T=Lt,ia(Gt)}}function Z_(h,p,M,C,N,H,ce,De){do Xs();while(Lo!==null);if((ri&6)!==0)throw Error(r(327));var $e=h.finishedWork;if(C=h.finishedLanes,$e===null)return null;if(h.finishedWork=null,h.finishedLanes=0,$e===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var vt=$e.lanes|$e.childLanes;if(vt|=Js,G(h,C,vt,H,ce,De),h===hi&&(dn=hi=null,jn=0),($e.subtreeFlags&10256)===0&&($e.flags&10256)===0||to||(to=!0,Ac=vt,gm=M,cl(cm,function(){return Xs(),null})),M=($e.flags&15990)!==0,($e.subtreeFlags&15990)!==0||M?(M=Mn.T,Mn.T=null,H=dl(),ia(2),ce=ri,ri|=4,Vh(h,$e),Pv($e,h),nx(h.containerInfo),h.current=$e,Pp(h,$e.alternate,$e),om(),ri=ce,ia(H),Mn.T=M):h.current=$e,to?(to=!1,Lo=h,du=C):Gv(h,vt),vt=h.pendingLanes,vt===0&&(Ec=null),z($e.stateNode),Se(h),p!==null)for(N=h.onRecoverableError,$e=0;$e<p.length;$e++)vt=p[$e],N(vt.value,{componentStack:vt.stack});return(du&3)!==0&&Xs(),vt=h.pendingLanes,(C&4194218)!==0&&(vt&42)!==0?h===vm?Df++:(Df=0,vm=h):Df=0,We(0),null}function Gv(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,Fh(p)))}function Xs(){if(Lo!==null){var h=Lo,p=Ac;Ac=0;var M=K(du),C=32>M?32:M;M=Mn.T;var N=dl();try{if(ia(C),Mn.T=null,Lo===null)var H=!1;else{C=gm,gm=null;var ce=Lo,De=du;if(Lo=null,du=0,(ri&6)!==0)throw Error(r(331));var $e=ri;if(ri|=4,Fp(ce.current),Nv(ce,ce.current,De,C),ri=$e,We(0,!1),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(cr,ce)}catch{}H=!0}return H}finally{ia(N),Mn.T=M,Gv(h,p)}}return!1}function of(h,p,M){p=de(M,p),p=Zu(h.stateNode,p,2),h=pt(h,p,2),h!==null&&(F(h,2),Se(h))}function ui(h,p,M){if(h.tag===3)of(h,h,M);else for(;p!==null;){if(p.tag===3){of(p,h,M);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Ec===null||!Ec.has(C))){h=de(M,h),M=xv(2),C=pt(p,M,2),C!==null&&(P_(M,C,p,h),F(C,2),Se(C));break}}p=p.return}}function Yc(h,p,M){var C=h.pingCache;if(C===null){C=h.pingCache=new Os;var N=new Set;C.set(p,N)}else N=C.get(p),N===void 0&&(N=new Set,C.set(p,N));N.has(M)||(Cr=!0,N.add(M),h=Vv.bind(null,h,p,M),p.then(h,h))}function Vv(h,p,M){var C=h.pingCache;C!==null&&C.delete(p),h.pingedLanes|=h.suspendedLanes&M,h.warmLanes&=~M,hi===h&&(jn&M)===M&&(Ai===4||Ai===3&&(jn&62914560)===jn&&300>Bs()-Aa?(ri&2)===0&&jr(h,0):pd|=M,Bo===jn&&(Bo=0)),Se(h)}function lc(h,p){p===0&&(p=L()),h=ae(h,p),h!==null&&(F(h,p),Se(h))}function ll(h){var p=h.memoizedState,M=0;p!==null&&(M=p.retryLane),lc(h,M)}function cc(h,p){var M=0;switch(h.tag){case 13:var C=h.stateNode,N=h.memoizedState;N!==null&&(M=N.retryLane);break;case 19:C=h.stateNode;break;case 22:C=h.stateNode._retryCache;break;default:throw Error(r(314))}C!==null&&C.delete(p),lc(h,M)}function cl(h,p){return cd(h,p)}function kv(h,p,M,C){this.tag=h,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function ws(h,p){var M=h.alternate;return M===null?(M=t(h.tag,p,h.key,h.mode),M.elementType=h.elementType,M.type=h.type,M.stateNode=h.stateNode,M.alternate=h,h.alternate=M):(M.pendingProps=p,M.type=h.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=h.flags&31457280,M.childLanes=h.childLanes,M.lanes=h.lanes,M.child=h.child,M.memoizedProps=h.memoizedProps,M.memoizedState=h.memoizedState,M.updateQueue=h.updateQueue,p=h.dependencies,M.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},M.sibling=h.sibling,M.index=h.index,M.ref=h.ref,M.refCleanup=h.refCleanup,M}function Yh(h,p){h.flags&=31457282;var M=h.alternate;return M===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=M.childLanes,h.lanes=M.lanes,h.child=M.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=M.memoizedProps,h.memoizedState=M.memoizedState,h.updateQueue=M.updateQueue,h.type=M.type,p=M.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function xo(h,p,M,C,N,H){var ce=0;if(C=h,typeof h=="function")qh(h)&&(ce=1);else if(typeof h=="string")ce=ts&&Si?sd(h,M,Tr.current)?26:So(h)?27:5:ts?sd(h,M,Tr.current)?26:5:Si&&So(h)?27:5;else e:switch(h){case uc:return Zi(M.children,N,H,p);case Qh:ce=8,N|=24;break;case Xp:return h=t(12,M,p,N|2),h.elementType=Xp,h.lanes=H,h;case $p:return h=t(13,M,p,N),h.elementType=$p,h.lanes=H,h;case ff:return h=t(19,M,p,N),h.elementType=ff,h.lanes=H,h;case $v:return Kh(M,N,H,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case ed:case $s:ce=10;break e;case Xv:ce=9;break e;case td:ce=11;break e;case jp:ce=14;break e;case Rs:ce=16,C=null;break e}ce=29,M=Error(r(130,h===null?"null":typeof h,"")),C=null}return p=t(ce,M,p,N),p.elementType=h,p.type=C,p.lanes=H,p}function Zi(h,p,M,C){return h=t(7,h,C,p),h.lanes=M,h}function Kh(h,p,M,C){h=t(22,h,C,p),h.elementType=$v,h.lanes=M;var N={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var H=N._current;if(H===null)throw Error(r(456));if((N._pendingVisibility&2)===0){var ce=ae(H,2);ce!==null&&(N._pendingVisibility|=2,Nr(ce,H,2))}},attach:function(){var H=N._current;if(H===null)throw Error(r(456));if((N._pendingVisibility&2)!==0){var ce=ae(H,2);ce!==null&&(N._pendingVisibility&=-3,Nr(ce,H,2))}}};return h.stateNode=N,h}function Vp(h,p,M){return h=t(6,h,null,p),h.lanes=M,h}function Wv(h,p,M){return p=t(4,h.children!==null?h.children:[],h.key,p),p.lanes=M,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function fE(h,p,M,C,N,H,ce,De){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=fc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=R(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R(0),this.hiddenUpdates=R(null),this.identifierPrefix=C,this.onUncaughtError=N,this.onCaughtError=H,this.onRecoverableError=ce,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function Q_(h,p,M,C,N,H,ce,De,$e,vt,Lt,Gt){return h=new fE(h,p,M,ce,De,$e,vt,Gt),p=1,H===!0&&(p|=24),H=t(3,null,null,p),h.current=H,H.stateNode=h,p=ec(),p.refCount++,h.pooledCache=p,p.refCount++,H.memoizedState={element:C,isDehydrated:M,cache:p},Et(H),h}function yr(h){return h?(h=gc,h):gc}function kp(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=y(p),h=h!==null?_(h):null,h===null?null:pf(h.stateNode)}function lf(h,p,M,C,N,H){N=yr(N),C.context===null?C.context=N:C.pendingContext=N,C=ct(p),C.payload={element:M},H=H===void 0?null:H,H!==null&&(C.callback=H),M=pt(h,C,p),M!==null&&(Nr(M,h,p),Nt(M,h,p))}function cf(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var M=h.retryLane;h.retryLane=M!==0&&M<p?M:p}}function Jh(h,p){cf(h,p),(h=h.alternate)&&cf(h,p)}var Bn={},uf=Xg(),es=MU(),Wp=Object.assign,hE=Symbol.for("react.element"),Zh=Symbol.for("react.transitional.element"),Cs=Symbol.for("react.portal"),uc=Symbol.for("react.fragment"),Qh=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),ed=Symbol.for("react.provider"),Xv=Symbol.for("react.consumer"),$s=Symbol.for("react.context"),td=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),ff=Symbol.for("react.suspense_list"),jp=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),$v=Symbol.for("react.offscreen"),ex=Symbol.for("react.memo_cache_sentinel"),ul=Symbol.iterator,jv=Symbol.for("react.client.reference"),Mn=uf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bo,fl,Kc=!1,hf=Array.isArray,qv=e.rendererVersion,nd=e.rendererPackageName,df=e.extraDevToolsConfig,pf=e.getPublicInstance,tx=e.getRootHostContext,mf=e.getChildHostContext,qp=e.prepareForCommit,nx=e.resetAfterCommit,Yv=e.createInstance,id=e.appendInitialChild,hl=e.finalizeInitialChildren,Ln=e.shouldSetTextContent,vi=e.createTextInstance,_r=e.scheduleTimeout,Yp=e.cancelTimeout,fc=e.noTimeout,ba=e.isPrimaryRenderer;e.warnsIfNotActing;var Ar=e.supportsMutation,Ds=e.supportsPersistence,qr=e.supportsHydration,ix=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var or=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ia=e.setCurrentUpdatePriority,dl=e.getCurrentUpdatePriority,rx=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var ax=e.shouldAttemptEagerTransition,dE=e.detachDeletedInstance;e.requestPostPaintCallback;var Kv=e.maySuspendCommit,Kp=e.preloadInstance,Jv=e.startSuspendingCommit,Sa=e.suspendInstance,xr=e.waitForCommitToBeReady,hc=e.NotPendingTransition,js=e.HostTransitionContext,Jp=e.resetFormInstance;e.bindToConsole;var Zv=e.supportsMicrotasks,pl=e.scheduleMicrotask,dc=e.supportsTestSelectors,Qv=e.findFiberRoot,e0=e.getBoundingRect,sx=e.getTextContent,gf=e.isHiddenSubtree,ox=e.matchAccessibilityRole,lx=e.setFocusIfFocusable,cx=e.setupIntersectionObserver,ux=e.appendChild,t0=e.appendChildToContainer,fx=e.commitTextUpdate,pE=e.commitMount,hx=e.commitUpdate,dx=e.insertBefore,px=e.insertInContainerBefore,n0=e.removeChild,mx=e.removeChildFromContainer,i0=e.resetTextContent,gx=e.hideInstance,vx=e.hideTextInstance,yx=e.unhideInstance,mE=e.unhideTextInstance,_x=e.clearContainer,vf=e.cloneInstance,rd=e.createContainerChildSet,r0=e.appendChildToContainerChildSet,Zp=e.finalizeContainerChildren,yf=e.replaceContainerChildren,a0=e.cloneHiddenInstance,s0=e.cloneHiddenTextInstance,Qp=e.isSuspenseInstancePending,em=e.isSuspenseInstanceFallback,xx=e.getSuspenseInstanceFallbackErrorDetails,bx=e.registerSuspenseInstanceRetry,o0=e.canHydrateFormStateMarker,Sx=e.isFormStateMarkerMatching,l0=e.getNextHydratableSibling,tm=e.getFirstHydratableChild,Mx=e.getFirstHydratableChildWithinContainer,Ex=e.getFirstHydratableChildWithinSuspenseInstance,gE=e.canHydrateInstance,c0=e.canHydrateTextInstance,Ax=e.canHydrateSuspenseInstance,Tx=e.hydrateInstance,u0=e.hydrateTextInstance,wx=e.hydrateSuspenseInstance,Cx=e.getNextHydratableInstanceAfterSuspenseInstance,vE=e.commitHydratedContainer,yE=e.commitHydratedSuspenseInstance,Rx=e.clearSuspenseBoundary,ad=e.clearSuspenseBoundaryFromContainer,nm=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var im=e.validateHydratableInstance,Dx=e.validateHydratableTextInstance,ts=e.supportsResources,sd=e.isHostHoistableType,rm=e.getHoistableRoot,f0=e.getResource,Bx=e.acquireResource,Jc=e.releaseResource,od=e.hydrateHoistable,ld=e.mountHoistable,_f=e.unmountHoistable,am=e.createHoistableInstance,Lx=e.prepareToCommitHoistables,Ix=e.mayResourceSuspendCommit,Zc=e.preloadResource,Px=e.suspendResource,Si=e.supportsSingletons,qs=e.resolveSingletonInstance,pc=e.clearSingleton,Nx=e.acquireSingletonInstance,mc=e.releaseSingletonInstance,So=e.isHostSingletonType,lr=[],ml=-1,gc={},Ma=Math.clz32?Math.clz32:D,Ox=Math.log,Ux=Math.LN2,Mo=128,Qc=4194304,cd=es.unstable_scheduleCallback,sm=es.unstable_cancelCallback,Fx=es.unstable_shouldYield,om=es.unstable_requestPaint,Bs=es.unstable_now,lm=es.unstable_ImmediatePriority,zx=es.unstable_UserBlockingPriority,cm=es.unstable_NormalPriority,_E=es.unstable_IdlePriority,Hx=es.log,Or=es.unstable_setDisableYieldValue,cr=null,Ga=null,Va=typeof Object.is=="function"?Object.is:ne,h0=new WeakMap,eu=[],tu=0,nu=null,xf=0,ns=[],is=0,vc=null,Ys=1,Ks="",Tr=S(null),bf=S(null),Eo=S(null),iu=S(null),Yr=null,Kr=null,ti=!1,Ls=null,Ur=!1,ud=Error(r(519)),Is=[],ru=0,Js=0,fd=null,gl=null,au=!1,Ci=!1,d0=!1,Sf=0,Mf=null,su=0,rs=0,ou=null,vl=!1,lu=!1,Ao=Object.prototype.hasOwnProperty,Ef=Error(r(460)),hd=Error(r(474)),dd={then:function(){}},yc=null,_c=null,xc=0,bc=nt(!0),To=nt(!1),Ri=S(null),Af=S(0),as=S(null),Mi=null,wr=S(0),yl=0,Hn=null,fn=null,ii=null,Ps=!1,cu=!1,Sc=!1,um=0,uu=0,Fr=null,Zs=0,fm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Qi={readContext:Wr,use:we,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt};Qi.useCacheRefresh=jt,Qi.useMemoCache=jt,Qi.useHostTransitionStatus=jt,Qi.useFormState=jt,Qi.useActionState=jt,Qi.useOptimistic=jt;var Mc={readContext:Wr,use:we,useCallback:function(h,p){return J().memoizedState=[h,p===void 0?null:p],h},useContext:Wr,useEffect:Sp,useImperativeHandle:function(h,p,M){M=M!=null?M.concat([h]):null,Th(4194308,4,Mp.bind(null,p,h),M)},useLayoutEffect:function(h,p){return Th(4194308,4,h,p)},useInsertionEffect:function(h,p){Th(4,2,h,p)},useMemo:function(h,p){var M=J();p=p===void 0?null:p;var C=h();if(Sc){ee(!0);try{h()}finally{ee(!1)}}return M.memoizedState=[C,p],C},useReducer:function(h,p,M){var C=J();if(M!==void 0){var N=M(p);if(Sc){ee(!0);try{M(p)}finally{ee(!1)}}}else N=p;return C.memoizedState=C.baseState=N,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:N},C.queue=h,h=h.dispatch=Ap.bind(null,Hn,h),[C.memoizedState,h]},useRef:function(h){var p=J();return h={current:h},p.memoizedState=h},useState:function(h){h=qt(h);var p=h.queue,M=_v.bind(null,Hn,p);return p.dispatch=M,[h.memoizedState,M]},useDebugValue:Yl,useDeferredValue:function(h,p){var M=J();return Rh(M,h,p)},useTransition:function(){var h=qt(!1);return h=Xu.bind(null,Hn,h.queue,!0,!1),J().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,M){var C=Hn,N=J();if(ti){if(M===void 0)throw Error(r(407));M=M()}else{if(M=p(),hi===null)throw Error(r(349));(jn&60)!==0||Ot(C,p,M)}N.memoizedState=M;var H={value:M,getSnapshot:p};return N.queue=H,Sp(rn.bind(null,C,H,h),[h]),C.flags|=2048,va(9,Ht.bind(null,C,H,M,p),{destroy:void 0},null),M},useId:function(){var h=J(),p=hi.identifierPrefix;if(ti){var M=Ks,C=Ys;M=(C&~(1<<32-Ma(C)-1)).toString(32)+M,p=":"+p+"R"+M,M=um++,0<M&&(p+="H"+M.toString(32)),p+=":"}else M=Zs++,p=":"+p+"r"+M.toString(32)+":";return h.memoizedState=p},useCacheRefresh:function(){return J().memoizedState=yv.bind(null,Hn)}};Mc.useMemoCache=Oe,Mc.useHostTransitionStatus=Dh,Mc.useFormState=Pn,Mc.useActionState=Pn,Mc.useOptimistic=function(h){var p=J();p.memoizedState=p.baseState=h;var M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=M,p=ju.bind(null,Hn,!0,M),M.dispatch=p,[h,p]};var Ea={readContext:Wr,use:we,useCallback:$c,useContext:Wr,useEffect:mv,useImperativeHandle:Ep,useInsertionEffect:L_,useLayoutEffect:Ch,useMemo:gv,useReducer:ut,useRef:go,useState:function(){return ut(Je)},useDebugValue:Yl,useDeferredValue:function(h,p){var M=pe();return vv(M,fn.memoizedState,h,p)},useTransition:function(){var h=ut(Je)[0],p=pe().memoizedState;return[typeof h=="boolean"?h:_e(h),p]},useSyncExternalStore:zt,useId:$u};Ea.useCacheRefresh=Zo,Ea.useMemoCache=Oe,Ea.useHostTransitionStatus=Dh,Ea.useFormState=Ui,Ea.useActionState=Ui,Ea.useOptimistic=function(h,p){var M=pe();return on(M,fn,h,p)};var ss={readContext:Wr,use:we,useCallback:$c,useContext:Wr,useEffect:mv,useImperativeHandle:Ep,useInsertionEffect:L_,useLayoutEffect:Ch,useMemo:gv,useReducer:St,useRef:go,useState:function(){return St(Je)},useDebugValue:Yl,useDeferredValue:function(h,p){var M=pe();return fn===null?Rh(M,h,p):vv(M,fn.memoizedState,h,p)},useTransition:function(){var h=St(Je)[0],p=pe().memoizedState;return[typeof h=="boolean"?h:_e(h),p]},useSyncExternalStore:zt,useId:$u};ss.useCacheRefresh=Zo,ss.useMemoCache=Oe,ss.useHostTransitionStatus=Dh,ss.useFormState=Ir,ss.useActionState=Ir,ss.useOptimistic=function(h,p){var M=pe();return fn!==null?on(M,fn,h,p):(M.baseState=h,[h,M.queue.dispatch])};var wo={isMounted:function(h){return(h=h._reactInternals)?m(h)===h:!1},enqueueSetState:function(h,p,M){h=h._reactInternals;var C=sr(),N=ct(C);N.payload=p,M!=null&&(N.callback=M),p=pt(h,N,C),p!==null&&(Nr(p,h,C),Nt(p,h,C))},enqueueReplaceState:function(h,p,M){h=h._reactInternals;var C=sr(),N=ct(C);N.tag=1,N.payload=p,M!=null&&(N.callback=M),p=pt(h,N,C),p!==null&&(Nr(p,h,C),Nt(p,h,C))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var M=sr(),C=ct(M);C.tag=2,p!=null&&(C.callback=p),p=pt(h,C,M),p!==null&&(Nr(p,h,M),Nt(p,h,M))}},hm=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},dm=Error(r(461)),Ei=!1,pm={dehydrated:null,treeContext:null,retryLane:0},_l=S(null),Qs=null,os=null,Tf=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(M,C){h.push(C)}};this.abort=function(){p.aborted=!0,h.forEach(function(M){return M()})}},Gx=es.unstable_scheduleCallback,Vx=es.unstable_NormalPriority,Di={$$typeof:$s,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},p0=Mn.S;Mn.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Ue(h,p),p0!==null&&p0(h,p)};var Co=S(null),Ro=!1,er=!1,m0=!1,fi=typeof WeakSet=="function"?WeakSet:Set,Rn=null,Wn=!1,cn=null,Nn=!1,ji=null,ls=8192,wf={getCacheForType:function(h){var p=Wr(Di),M=p.data.get(h);return M===void 0&&(M=h(),p.data.set(h,M)),M}},Cf=0,Ns=1,Fi=2,eo=3,Do=4;if(typeof Symbol=="function"&&Symbol.for){var fu=Symbol.for;Cf=fu("selector.component"),Ns=fu("selector.has_pseudo_class"),Fi=fu("selector.role"),eo=fu("selector.test_id"),Do=fu("selector.text")}var Os=typeof WeakMap=="function"?WeakMap:Map,ri=0,hi=null,dn=null,jn=0,yi=0,ra=null,Us=!1,cs=!1,Cr=!1,aa=0,Ai=0,us=0,xl=0,pd=0,fs=0,Bo=0,hu=null,tr=null,mm=!1,Aa=0,Rf=1/0,md=null,Ec=null,to=!1,Lo=null,du=0,Ac=0,gm=null,Df=0,vm=null;return Bn.attemptContinuousHydration=function(h){if(h.tag===13){var p=ae(h,67108864);p!==null&&Nr(p,h,67108864),Jh(h,67108864)}},Bn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=sr(),M=ae(h,p);M!==null&&Nr(M,h,p),Jh(h,p)}},Bn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=B(h.pendingLanes);if(p!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;p;){var M=1<<31-Ma(p);h.entanglements[1]|=M,p&=~M}Se(h),(ri&6)===0&&(Rf=Bs()+500,We(0))}}break;case 13:p=ae(h,2),p!==null&&Nr(p,h,2),jh(),Jh(h,2)}},Bn.batchedUpdates=function(h,p){return h(p)},Bn.createComponentSelector=function(h){return{$$typeof:Cf,value:h}},Bn.createContainer=function(h,p,M,C,N,H,ce,De,$e,vt){return Q_(h,p,!1,null,M,C,H,ce,De,$e,vt,null)},Bn.createHasPseudoClassSelector=function(h){return{$$typeof:Ns,value:h}},Bn.createHydrationContainer=function(h,p,M,C,N,H,ce,De,$e,vt,Lt,Gt,Wt){return h=Q_(M,C,!0,h,N,H,De,$e,vt,Lt,Gt,Wt),h.context=yr(null),M=h.current,C=sr(),N=ct(C),N.callback=p??null,pt(M,N,C),h.current.lanes=C,F(h,C),Se(h),h},Bn.createPortal=function(h,p,M){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:C==null?null:""+C,children:h,containerInfo:p,implementation:M}},Bn.createRoleSelector=function(h){return{$$typeof:Fi,value:h}},Bn.createTestNameSelector=function(h){return{$$typeof:eo,value:h}},Bn.createTextSelector=function(h){return{$$typeof:Do,value:h}},Bn.defaultOnCaughtError=function(h){console.error(h)},Bn.defaultOnRecoverableError=function(h){hm(h)},Bn.defaultOnUncaughtError=function(h){hm(h)},Bn.deferredUpdates=function(h){var p=Mn.T,M=dl();try{return ia(32),Mn.T=null,h()}finally{ia(M),Mn.T=p}},Bn.discreteUpdates=function(h,p,M,C,N){var H=Mn.T,ce=dl();try{return ia(2),Mn.T=null,h(p,M,C,N)}finally{ia(ce),Mn.T=H,ri===0&&(Rf=Bs()+500)}},Bn.findAllNodes=Xh,Bn.findBoundingRects=function(h,p){if(!dc)throw Error(r(363));p=Xh(h,p),h=[];for(var M=0;M<p.length;M++)h.push(e0(p[M]));for(p=h.length-1;0<p;p--){M=h[p];for(var C=M.x,N=C+M.width,H=M.y,ce=H+M.height,De=p-1;0<=De;De--)if(p!==De){var $e=h[De],vt=$e.x,Lt=vt+$e.width,Gt=$e.y,Wt=Gt+$e.height;if(C>=vt&&H>=Gt&&N<=Lt&&ce<=Wt){h.splice(p,1);break}else if(C!==vt||M.width!==$e.width||Wt<H||Gt>ce){if(!(H!==Gt||M.height!==$e.height||Lt<C||vt>N)){vt>C&&($e.width+=vt-C,$e.x=C),Lt<N&&($e.width=N-vt),h.splice(p,1);break}}else{Gt>H&&($e.height+=Gt-H,$e.y=H),Wt<ce&&($e.height=ce-Gt),h.splice(p,1);break}}}return h},Bn.findHostInstance=kp,Bn.findHostInstanceWithNoPortals=function(h){return h=y(h),h=h!==null?A(h):null,h===null?null:pf(h.stateNode)},Bn.findHostInstanceWithWarning=function(h){return kp(h)},Bn.flushPassiveEffects=Xs,Bn.flushSyncFromReconciler=function(h){var p=ri;ri|=1;var M=Mn.T,C=dl();try{if(ia(2),Mn.T=null,h)return h()}finally{ia(C),Mn.T=M,ri=p,(ri&6)===0&&We(0)}},Bn.flushSyncWork=jh,Bn.focusWithin=function(h,p){if(!dc)throw Error(r(363));for(h=rf(h),p=za(h,p),p=Array.from(p),h=0;h<p.length;){var M=p[h++],C=M.tag;if(!gf(M)){if((C===5||C===26||C===27)&&lx(M.stateNode))return!0;for(M=M.child;M!==null;)p.push(M),M=M.sibling}}return!1},Bn.getFindAllNodesFailureDescription=function(h,p){if(!dc)throw Error(r(363));var M=0,C=[];h=[rf(h),0];for(var N=0;N<h.length;){var H=h[N++],ce=H.tag,De=h[N++],$e=p[De];if((ce!==5&&ce!==26&&ce!==27||!gf(H))&&(rc(H,$e)&&(C.push(Uv($e)),De++,De>M&&(M=De)),De<p.length))for(H=H.child;H!==null;)h.push(H,De),H=H.sibling}if(M<p.length){for(h=[];M<p.length;M++)h.push(Uv(p[M]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},Bn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return pf(h.child.stateNode);default:return h.child.stateNode}},Bn.injectIntoDevTools=function(){var h={bundleType:0,version:qv,rendererPackageName:nd,currentDispatcherRef:Mn,findFiberByHostInstance:ix,reconcilerVersion:"19.0.0"};if(df!==null&&(h.rendererConfig=df),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{cr=p.inject(h),Ga=p}catch{}h=!!p.checkDCE}}return h},Bn.isAlreadyRendering=function(){return!1},Bn.observeVisibleRects=function(h,p,M,C){if(!dc)throw Error(r(363));h=Xh(h,p);var N=cx(h,M,C).disconnect;return{disconnect:function(){N()}}},Bn.shouldError=function(){return null},Bn.shouldSuspend=function(){return!1},Bn.startHostTransition=function(h,p,M,C){if(h.tag!==5)throw Error(r(476));var N=vo(h).queue;Xu(h,N,p,hc,M===null?n:function(){var H=vo(h).next.queue;return Kl(h,H,{},sr()),M(C)})},Bn.updateContainer=function(h,p,M,C){var N=p.current,H=sr();return lf(N,H,h,p,M,C),H},Bn.updateContainerSync=function(h,p,M,C){return p.tag===0&&Xs(),lf(p.current,2,h,p,M,C),2},Bn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(XA)),XA.exports}var xB;function _W(){return xB||(xB=1,WA.exports=yW()),WA.exports}var xW=_W();const bW=ho(xW);var bB=MU();const SW=i=>typeof i=="object"&&typeof i.then=="function",$d=[];function EU(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function AU(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const a of $d)if(EU(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return n.lifespan&&n.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,n.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:n.equal,remove:()=>{const a=$d.indexOf(r);a!==-1&&$d.splice(a,1)},promise:(SW(i)?i:i(...e)).then(a=>{r.response=a,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(a=>r.error=a)};if($d.push(r),!t)throw r.promise}const MW=(i,e,t)=>AU(i,e,!1,t),EW=(i,e,t)=>void AU(i,e,!0,t),AW=i=>{if(i===void 0||i.length===0)$d.splice(0,$d.length);else{const e=$d.find(t=>EU(i,t.keys,t.equal));e&&e.remove()}};function OC(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const r=OC(n,e,t);if(r)return r;n=e?null:n.sibling}}function TU(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const UC=TU(X.createContext(null));let wU=class extends X.Component{render(){return X.createElement(UC.Provider,{value:this._reactInternals},this.props.children)}};function CU(){const i=X.useContext(UC);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=OC(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[i,e])}const TW=Symbol.for("react.context"),wW=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===TW;function CW(){const i=CU(),[e]=X.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;wW(n)&&n!==UC&&!e.has(n)&&e.set(n,X.use(TU(n))),t=t.return}return e}function RW(){const i=CW();return X.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>X.createElement(e,null,X.createElement(t.Provider,{...n,value:i.get(t)})),e=>X.createElement(wU,{...e})),[i])}function RU(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const DU=i=>i&&i.isOrthographicCamera,DW=i=>i&&i.hasOwnProperty("current"),BW=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),x_=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?X.useLayoutEffect:X.useEffect;function FC(i){const e=X.useRef(i);return x_(()=>void(e.current=i),[i]),e}function LW(){const i=CU(),e=RW();return X.useMemo(()=>({children:t})=>{const r=!!OC(i,!0,a=>a.type===X.StrictMode)?X.StrictMode:X.Fragment;return Ct.jsx(r,{children:Ct.jsx(e,{children:t})})},[i,e])}function IW({set:i}){return x_(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const PW=(i=>(i=class extends X.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function BU(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function Gm(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const ir={obj:i=>i===Object(i)&&!ir.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(ir.str(i)||ir.num(i)||ir.boo(i))return i===e;const a=ir.obj(i);if(a&&n==="reference")return i===e;const s=ir.arr(i);if(s&&t==="reference")return i===e;if((s||a)&&i===e)return!0;let o;for(o in i)if(!(o in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(o in r?e:i)if(!ir.equ(i[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:i)if(i[o]!==e[o])return!1;if(ir.und(o)){if(s&&i.length===0&&e.length===0||a&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function NW(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function OW(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const LU=["children","key","ref"];function UW(i){const e={};for(const t in i)LU.includes(t)||(e[t]=i[t]);return e}function zS(i,e,t,n){const r=i;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:UW(n),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function Xy(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const r of e.split("-")){var n;e=r,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const SB=/-\d+$/;function HS(i,e){if(ir.str(e.props.attach)){if(SB.test(e.props.attach)){const r=e.props.attach.replace(SB,""),{root:a,key:s}=Xy(i.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:n}=Xy(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else ir.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function GS(i,e){if(ir.str(e.props.attach)){const{root:t,key:n}=Xy(i.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[n]:t[n]=r}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const t2=[...LU,"args","dispose","attach","object","onUpdate","dispose"],MB=new Map;function FW(i){let e=MB.get(i.constructor);try{e||(e=new i.constructor,MB.set(i.constructor,e))}catch{}return e}function zW(i,e){const t={};for(const n in e)if(!t2.includes(n)&&!ir.equ(e[n],i.props[n])){t[n]=e[n];for(const r in e)r.startsWith(`${n}-`)&&(t[r]=e[r])}for(const n in i.props){if(t2.includes(n)||e.hasOwnProperty(n))continue;const{root:r,key:a}=Xy(i.object,n);if(r.constructor&&r.constructor.length===0){const s=FW(r);ir.und(s)||(t[a]=s[a])}else t[a]=0}return t}const HW=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],GW=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Oc(i,e){var t;const n=i.__r3f,r=n&&RU(n).getState(),a=n==null?void 0:n.eventCount;for(const o in e){let c=e[o];if(t2.includes(o))continue;if(n&&GW.test(o)){typeof c=="function"?n.handlers[o]=c:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(c===void 0)continue;let{root:f,key:d,target:m}=Xy(i,o);if(m instanceof Og&&c instanceof Og)m.mask=c.mask;else if(m instanceof Bt&&BW(c))m.set(c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof m.copy=="function"&&c!=null&&c.constructor&&m.constructor===c.constructor)m.copy(c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&Array.isArray(c))typeof m.fromArray=="function"?m.fromArray(c):m.set(...c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof c=="number")typeof m.setScalar=="function"?m.setScalar(c):m.set(c);else{var s;f[d]=c,r&&!r.linear&&HW.includes(d)&&(s=f[d])!=null&&s.isTexture&&f[d].format===Lr&&f[d].type===Ji&&(f[d].colorSpace=$n)}}if(n!=null&&n.parent&&r!=null&&r.internal&&(t=n.object)!=null&&t.isObject3D&&a!==n.eventCount){const o=n.object,c=r.internal.interaction.indexOf(o);c>-1&&r.internal.interaction.splice(c,1),n.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Zg(n),i}function Zg(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function IU(i,e){i.manual||(DU(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const vs=i=>i==null?void 0:i.isObject3D;function K1(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function PU(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function VW(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{PU(t.capturedMap,e,n,r)})}function kW(i){function e(c){const{internal:f}=i.getState(),d=c.offsetX-f.initialClick[0],m=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var m;return(m=f.__r3f)==null?void 0:m.handlers["onPointer"+d]}))}function n(c,f){const d=i.getState(),m=new Set,v=[],y=f?f(d.internal.interaction):d.internal.interaction;for(let x=0;x<y.length;x++){const E=Gm(y[x]);E&&(E.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function _(x){const E=Gm(x);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var D;E.events.compute==null||E.events.compute(c,E,(D=E.previousRoot)==null?void 0:D.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(x,!0):[]}let A=y.flatMap(_).sort((x,E)=>{const D=Gm(x.object),B=Gm(E.object);return!D||!B?x.distance-E.distance:B.events.priority-D.events.priority||x.distance-E.distance}).filter(x=>{const E=K1(x);return m.has(E)?!1:(m.add(E),!0)});d.events.filter&&(A=d.events.filter(A,d));for(const x of A){let E=x.object;for(;E;){var S;(S=E.__r3f)!=null&&S.eventCount&&v.push({...x,eventObject:E}),E=E.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let x of d.internal.capturedMap.get(c.pointerId).values())m.has(K1(x.intersection))||v.push(x.intersection);return v}function r(c,f,d,m){if(c.length){const v={stopped:!1};for(const y of c){let _=Gm(y.object);if(_||y.object.traverseAncestors(A=>{const S=Gm(A);if(S)return _=S,!1}),_){const{raycaster:A,pointer:S,camera:x,internal:E}=_,D=new ue(S.x,S.y,0).unproject(x),B=L=>{var R,F;return(R=(F=E.capturedMap.get(L))==null?void 0:F.has(y.eventObject))!=null?R:!1},U=L=>{const R={intersection:y,target:f.target};E.capturedMap.has(L)?E.capturedMap.get(L).set(y.eventObject,R):E.capturedMap.set(L,new Map([[y.eventObject,R]])),f.target.setPointerCapture(L)},w=L=>{const R=E.capturedMap.get(L);R&&PU(E.capturedMap,y.eventObject,R,L)};let O={};for(let L in f){let R=f[L];typeof R!="function"&&(O[L]=R)}let I={...y,...O,pointer:S,intersections:c,stopped:v.stopped,delta:d,unprojectedPoint:D,ray:A.ray,camera:x,stopPropagation(){const L="pointerId"in f&&E.capturedMap.get(f.pointerId);if((!L||L.has(y.eventObject))&&(I.stopped=v.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(R=>R.eventObject===y.eventObject))){const R=c.slice(0,c.indexOf(y));a([...R,y])}},target:{hasPointerCapture:B,setPointerCapture:U,releasePointerCapture:w},currentTarget:{hasPointerCapture:B,setPointerCapture:U,releasePointerCapture:w},nativeEvent:f};if(m(I),v.stopped===!0)break}}}return c}function a(c){const{internal:f}=i.getState();for(const d of f.hovered.values())if(!c.length||!c.find(m=>m.object===d.object&&m.index===d.index&&m.instanceId===d.instanceId)){const v=d.eventObject.__r3f;if(f.hovered.delete(K1(d)),v!=null&&v.eventCount){const y=v.handlers,_={...d,intersections:c};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function s(c,f){for(let d=0;d<f.length;d++){const m=f[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:d}=i.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),a([]))})}}return function(d){const{onPointerMissed:m,internal:v}=i.getState();v.lastEvent.current=d;const y=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=n(d,y?t:void 0),x=_?e(d):0;c==="onPointerDown"&&(v.initialClick=[d.offsetX,d.offsetY],v.initialHits=S.map(D=>D.eventObject)),_&&!S.length&&x<=2&&(s(d,v.interaction),m&&m(d)),y&&a(S);function E(D){const B=D.eventObject,U=B.__r3f;if(!(U!=null&&U.eventCount))return;const w=U.handlers;if(y){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const O=K1(D),I=v.hovered.get(O);I?I.stopped&&D.stopPropagation():(v.hovered.set(O,D),w.onPointerOver==null||w.onPointerOver(D),w.onPointerEnter==null||w.onPointerEnter(D))}w.onPointerMove==null||w.onPointerMove(D)}else{const O=w[c];O?(!_||v.initialHits.includes(B))&&(s(d,v.interaction.filter(I=>!v.initialHits.includes(I))),O(D)):_&&v.initialHits.includes(B)&&s(d,v.interaction.filter(I=>!v.initialHits.includes(I)))}}r(S,d,x,E)}}return{handlePointer:o}}const EB=i=>!!(i!=null&&i.render),zC=X.createContext(null),WW=(i,e)=>{const t=SU((o,c)=>{const f=new ue,d=new ue,m=new ue;function v(x=c().camera,E=d,D=c().size){const{width:B,height:U,top:w,left:O}=D,I=B/U;E.isVector3?m.copy(E):m.set(...E);const L=x.getWorldPosition(f).distanceTo(m);if(DU(x))return{width:B/x.zoom,height:U/x.zoom,top:w,left:O,factor:1,distance:L,aspect:I};{const R=x.fov*Math.PI/180,F=2*Math.tan(R/2)*L,G=F*(B/U);return{width:G,height:F,top:w,left:O,factor:B/G,distance:L,aspect:I}}}let y;const _=x=>o(E=>({performance:{...E.performance,current:x}})),A=new ot;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(x=1)=>i(c(),x),advance:(x,E)=>e(x,E,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new RC,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();y&&clearTimeout(y),x.performance.current!==x.performance.min&&_(x.performance.min),y=setTimeout(()=>_(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:x=>o(E=>({...E,events:{...E.events,...x}})),setSize:(x,E,D=0,B=0)=>{const U=c().camera,w={width:x,height:E,top:D,left:B};o(O=>({size:w,viewport:{...O.viewport,...v(U,d,w)}}))},setDpr:x=>o(E=>{const D=BU(x);return{viewport:{...E.viewport,dpr:D,initialDpr:E.viewport.initialDpr||D}}}),setFrameloop:(x="always")=>{const E=c().clock;E.stop(),E.elapsedTime=0,x!=="never"&&(E.start(),E.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:X.createRef(),active:!1,frames:0,priority:0,subscribe:(x,E,D)=>{const B=c().internal;return B.priority=B.priority+(E>0?1:0),B.subscribers.push({ref:x,priority:E,store:D}),B.subscribers=B.subscribers.sort((U,w)=>U.priority-w.priority),()=>{const U=c().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(E>0?1:0),U.subscribers=U.subscribers.filter(w=>w.ref!==x))}}}}}),n=t.getState();let r=n.size,a=n.viewport.dpr,s=n.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:f,gl:d,set:m}=t.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==a){r=c,a=f.dpr,IU(o,c),f.dpr>0&&d.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,v)}o!==s&&(s=o,m(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>i(o)),t};function HC(){const i=X.useContext(zC);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function dr(i=t=>t,e){return HC()(i,e)}function Eh(i,e=0){const t=HC(),n=t.getState().internal.subscribe,r=FC(i);return x_(()=>n(r,e,t),[e,n,t]),null}const AB=new WeakMap,XW=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function NU(i,e){return function(t,...n){let r;return XW(t)?(r=AB.get(t),r||(r=new t,AB.set(t,r))):r=t,i&&i(r),Promise.all(n.map(a=>new Promise((s,o)=>r.load(a,c=>{vs(c==null?void 0:c.scene)&&Object.assign(c,NW(c.scene)),s(c)},e,c=>o(new Error(`Could not load ${a}: ${c==null?void 0:c.message}`))))))}}function Xo(i,e,t,n){const r=Array.isArray(e)?e:[e],a=MW(NU(t,n),[i,...r],{equal:ir.equ});return Array.isArray(e)?a:a[0]}Xo.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return EW(NU(t),[i,...n])};Xo.clear=function(i,e){const t=Array.isArray(e)?e:[e];return AW([i,...t])};function $W(i){const e=bW(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version}),e}const OU=0,Gg={},jW=/^three(?=[A-Z])/,HM=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let qW=0;const YW=i=>typeof i=="function";function vp(i){if(YW(i)){const e=`${qW++}`;return Gg[e]=i,e}else Object.assign(Gg,i)}function UU(i,e){const t=HM(i),n=Gg[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function KW(i,e,t){var n;return i=HM(i)in Gg?i:i.replace(jW,""),UU(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,zS(e.object,t,i,e)}function JW(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?GS(i.parent,i):vs(i.object)&&(i.object.visible=!1),i.isHidden=!0,Zg(i)}}function FU(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?HS(i.parent,i):vs(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Zg(i)}}function GC(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var r,a;const s=Gg[HM(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Oc(e.object,e.props),e.props.attach)HS(i,e);else if(vs(e.object)&&vs(i.object)){const s=i.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const o=i.object.children.indexOf(e.object);if(o!==-1){i.object.children.splice(o,1);const c=o<s?s-1:s;i.object.children.splice(c,0,e.object)}else e.object.parent=i.object,i.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const s of e.children)GC(e,s);Zg(e)}}function qA(i,e){e&&(e.parent=i,i.children.push(e),GC(i,e))}function TB(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),GC(i,e,t)}function zU(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():bB.unstable_scheduleCallback(bB.unstable_IdlePriority,e)}}function n2(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?GS(i,e):vs(e.object)&&vs(i.object)&&(i.object.remove(e.object),VW(RU(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];n2(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&zU(e.object),t===void 0&&Zg(e)}function ZW(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Yb=[];function QW(){for(const[t]of Yb){const n=t.parent;if(n){t.props.attach?GS(n,t):vs(t.object)&&vs(n.object)&&n.object.remove(t.object);for(const r of t.children)r.props.attach?GS(t,r):vs(r.object)&&vs(t.object)&&t.object.remove(r.object)}t.isHidden&&FU(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&zU(t.object)}for(const[t,n,r]of Yb){t.props=n;const a=t.parent;if(a){var i,e;const s=Gg[HM(t.type)];t.object=(i=t.props.object)!=null?i:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,ZW(r,t.object),Oc(t.object,t.props),t.props.attach?HS(a,t):vs(t.object)&&vs(a.object)&&a.object.add(t.object);for(const o of t.children)o.props.attach?HS(t,o):vs(o.object)&&vs(t.object)&&t.object.add(o.object);Zg(t)}}Yb.length=0}const YA=()=>{},wB={};let J1=OU;const eX=0,tX=4,VS=$W({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:KW,removeChild:n2,appendChild:qA,appendInitialChild:qA,insertBefore:TB,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||qA(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||n2(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||TB(n,e,t)},getRootHostContext:()=>wB,getChildHostContext:()=>wB,commitUpdate(i,e,t,n,r){var a,s,o;UU(e,n);let c=!1;if((i.type==="primitive"&&t.object!==n.object||((a=n.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(o=n.args)!=null&&o.some((d,m)=>{var v;return d!==((v=t.args)==null?void 0:v[m])}))&&(c=!0),c)Yb.push([i,{...n},r]);else{const d=zW(i,n);Object.keys(d).length&&(Object.assign(i.props,d),Oc(i.object,d))}(r.sibling===null||(r.flags&tX)===eX)&&QW()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>zS(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:JW,unhideInstance:FU,createTextInstance:YA,hideTextInstance:YA,unhideTextInstance:YA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:X.createContext(null),setCurrentUpdatePriority(i){J1=i},getCurrentUpdatePriority(){return J1},resolveUpdatePriority(){var i;if(J1!==OU)return J1;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qb.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return qb.ContinuousEventPriority;default:return qb.DefaultEventPriority}},resetFormInstance(){}}),up=new Map,Vm={objects:"shallow",strict:!1};function nX(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:r,left:a}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function iX(i){const e=up.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=n||WW(a2,RB),s=t||VS.createContainer(a,qb.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||up.set(i,{fiber:s,store:a});let o,c,f=!1,d=null;return{async configure(m={}){let v;d=new Promise(fe=>v=fe);let{gl:y,size:_,scene:A,events:S,onCreated:x,shadows:E=!1,linear:D=!1,flat:B=!1,legacy:U=!1,orthographic:w=!1,frameloop:O="always",dpr:I=[1,2],performance:L,raycaster:R,camera:F,onPointerMissed:G}=m,V=a.getState(),$=V.gl;if(!V.gl){const fe={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},Re=typeof y=="function"?await y(fe):y;EB(Re)?$=Re:$=new NC({...fe,...y}),V.set({gl:$})}let K=V.raycaster;K||V.set({raycaster:K=new LC});const{params:z,...ee}=R||{};if(ir.equ(ee,K,Vm)||Oc(K,{...ee}),ir.equ(z,K.params,Vm)||Oc(K,{params:{...K.params,...z}}),!V.camera||V.camera===c&&!ir.equ(c,F,Vm)){c=F;const fe=F==null?void 0:F.isCamera,Re=fe?F:w?new Uc(0,0,0,0,.1,1e3):new rr(75,0,.1,1e3);fe||(Re.position.z=5,F&&(Oc(Re,F),Re.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(Re.manual=!0,Re.updateProjectionMatrix())),!V.camera&&!(F!=null&&F.rotation)&&Re.lookAt(0,0,0)),V.set({camera:Re}),K.camera=Re}if(!V.scene){let fe;A!=null&&A.isScene?(fe=A,zS(fe,a,"",{})):(fe=new ap,zS(fe,a,"",{}),A&&Oc(fe,A)),V.set({scene:fe})}S&&!V.events.handlers&&V.set({events:S(a)});const ne=nX(i,_);if(ir.equ(ne,V.size,Vm)||V.setSize(ne.width,ne.height,ne.top,ne.left),I&&V.viewport.dpr!==BU(I)&&V.setDpr(I),V.frameloop!==O&&V.setFrameloop(O),V.onPointerMissed||V.set({onPointerMissed:G}),L&&!ir.equ(L,V.performance,Vm)&&V.set(fe=>({performance:{...fe.performance,...L}})),!V.xr){var de;const fe=(oe,ke)=>{const Ge=a.getState();Ge.frameloop!=="never"&&RB(oe,!0,Ge,ke)},Re=()=>{const oe=a.getState();oe.gl.xr.enabled=oe.gl.xr.isPresenting,oe.gl.xr.setAnimationLoop(oe.gl.xr.isPresenting?fe:null),oe.gl.xr.isPresenting||a2(oe)},Le={connect(){const oe=a.getState().gl;oe.xr.addEventListener("sessionstart",Re),oe.xr.addEventListener("sessionend",Re)},disconnect(){const oe=a.getState().gl;oe.xr.removeEventListener("sessionstart",Re),oe.xr.removeEventListener("sessionend",Re)}};typeof((de=$.xr)==null?void 0:de.addEventListener)=="function"&&Le.connect(),V.set({xr:Le})}if($.shadowMap){const fe=$.shadowMap.enabled,Re=$.shadowMap.type;if($.shadowMap.enabled=!!E,ir.boo(E))$.shadowMap.type=py;else if(ir.str(E)){var Y;const Le={basic:bN,percentage:uM,soft:py,variance:Bl};$.shadowMap.type=(Y=Le[E])!=null?Y:py}else ir.obj(E)&&Object.assign($.shadowMap,E);(fe!==$.shadowMap.enabled||Re!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}return ai.enabled=!U,f||($.outputColorSpace=D?fo:$n,$.toneMapping=B?Nl:k2),V.legacy!==U&&V.set(()=>({legacy:U})),V.linear!==D&&V.set(()=>({linear:D})),V.flat!==B&&V.set(()=>({flat:B})),y&&!ir.fun(y)&&!EB(y)&&!ir.equ(y,$,Vm)&&Oc($,y),o=x,f=!0,v(),this},render(m){return!f&&!d&&this.configure(),d.then(()=>{VS.updateContainer(Ct.jsx(rX,{store:a,children:m,onCreated:o,rootElement:i}),s,null,()=>{})}),a},unmount(){HU(i)}}}function rX({store:i,children:e,onCreated:t,rootElement:n}){return x_(()=>{const r=i.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),Ct.jsx(zC.Provider,{value:i,children:e})}function HU(i,e){const t=up.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),VS.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var a,s,o,c;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),OW(r.scene),up.delete(i)}catch{}},500)})}}function aX(i,e,t){return Ct.jsx(sX,{children:i,container:e,state:t})}function sX({state:i={},children:e,container:t}){const{events:n,size:r,...a}=i,s=HC(),[o]=X.useState(()=>new LC),[c]=X.useState(()=>new ot),f=FC((m,v)=>{let y;if(v.camera&&r){const _=v.camera;y=m.viewport.getCurrentViewport(_,new ue,r),_!==m.camera&&IU(_,r)}return{...m,...v,scene:t,raycaster:o,pointer:c,mouse:c,previousRoot:s,events:{...m.events,...v.events,...n},size:{...m.size,...r},viewport:{...m.viewport,...y},setEvents:_=>v.set(A=>({...A,events:{...A.events,..._}}))}}),d=X.useMemo(()=>{const m=SU((y,_)=>({...a,set:y,get:_})),v=y=>m.setState(_=>f.current(y,_));return v(s.getState()),s.subscribe(v),m},[s,t]);return Ct.jsx(Ct.Fragment,{children:VS.createPortal(Ct.jsx(zC.Provider,{value:d,children:e}),d,null)})}const oX=new Set,lX=new Set,cX=new Set;function KA(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function My(i,e){switch(i){case"before":return KA(oX,e);case"after":return KA(lX,e);case"tail":return KA(cX,e)}}let JA,ZA;function i2(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),JA=e.internal.subscribers;for(let r=0;r<JA.length;r++)ZA=JA[r],ZA.ref.current(ZA.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let kS=!1,r2=!1,QA,CB,km;function GU(i){CB=requestAnimationFrame(GU),kS=!0,QA=0,My("before",i),r2=!0;for(const t of up.values()){var e;km=t.store.getState(),km.internal.active&&(km.frameloop==="always"||km.internal.frames>0)&&!((e=km.gl.xr)!=null&&e.isPresenting)&&(QA+=i2(i,km))}if(r2=!1,My("after",i),QA===0)return My("tail",i),kS=!1,cancelAnimationFrame(CB)}function a2(i,e=1){var t;if(!i)return up.forEach(n=>a2(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):r2?i.internal.frames=2:i.internal.frames=1,kS||(kS=!0,requestAnimationFrame(GU)))}function RB(i,e=!0,t,n){if(e&&My("before",i),t)i2(i,t,n);else for(const r of up.values())i2(i,r.store.getState());e&&My("after",i)}const eT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function uX(i){const{handlePointer:e}=kW(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(eT).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=i.getState();if(r.disconnect==null||r.disconnect(),n(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,c]=eT[a];t.addEventListener(o,s,{passive:c})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const r in n.handlers){const a=n.handlers[r],[s]=eT[r];n.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function DB(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function fX({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=i?typeof i=="number"?i:i.scroll:null,f=i?typeof i=="number"?i:i.resize:null,d=X.useRef(!1);X.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,v,y]=X.useMemo(()=>{const x=()=>{if(!o.current.element)return;const{left:E,top:D,width:B,height:U,bottom:w,right:O,x:I,y:L}=o.current.element.getBoundingClientRect(),R={left:E,top:D,width:B,height:U,bottom:w,right:O,x:I,y:L};o.current.element instanceof HTMLElement&&n&&(R.height=o.current.element.offsetHeight,R.width=o.current.element.offsetWidth),Object.freeze(R),d.current&&!mX(o.current.lastBounds,R)&&s(o.current.lastBounds=R)};return[x,f?DB(x,f):x,c?DB(x,c):x]},[s,n,c,f]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function A(){o.current.element&&(o.current.resizeObserver=new r(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const S=x=>{!x||x===o.current.element||(_(),o.current.element=x,o.current.scrollContainers=VU(x),A())};return dX(y,!!e),hX(v),X.useEffect(()=>{_(),A()},[e,y,v]),X.useEffect(()=>_,[]),[S,a,m]}function hX(i){X.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function dX(i,e){X.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function VU(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(a=>a==="auto"||a==="scroll")&&e.push(i),[...e,...VU(i.parentElement)]}const pX=["x","y","top","bottom","left","right","width","height"],mX=(i,e)=>pX.every(t=>i[t]===e[t]);function gX({ref:i,children:e,fallback:t,resize:n,style:r,gl:a,events:s=uX,eventSource:o,eventPrefix:c,shadows:f,linear:d,flat:m,legacy:v,orthographic:y,frameloop:_,dpr:A,performance:S,raycaster:x,camera:E,scene:D,onPointerMissed:B,onCreated:U,...w}){X.useMemo(()=>vp(aW),[]);const O=LW(),[I,L]=fX({scroll:!0,debounce:{scroll:50,resize:0},...n}),R=X.useRef(null),F=X.useRef(null);X.useImperativeHandle(i,()=>R.current);const G=FC(B),[V,$]=X.useState(!1),[K,z]=X.useState(!1);if(V)throw V;if(K)throw K;const ee=X.useRef(null);x_(()=>{const de=R.current;if(L.width>0&&L.height>0&&de){ee.current||(ee.current=iX(de));async function Y(){await ee.current.configure({gl:a,scene:D,events:s,shadows:f,linear:d,flat:m,legacy:v,orthographic:y,frameloop:_,dpr:A,performance:S,raycaster:x,camera:E,size:L,onPointerMissed:(...fe)=>G.current==null?void 0:G.current(...fe),onCreated:fe=>{fe.events.connect==null||fe.events.connect(o?DW(o)?o.current:o:F.current),c&&fe.setEvents({compute:(Re,Le)=>{const oe=Re[c+"X"],ke=Re[c+"Y"];Le.pointer.set(oe/Le.size.width*2-1,-(ke/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),U==null||U(fe)}}),ee.current.render(Ct.jsx(O,{children:Ct.jsx(PW,{set:z,children:Ct.jsx(X.Suspense,{fallback:Ct.jsx(IW,{set:$}),children:e??null})})}))}Y()}}),X.useEffect(()=>{const de=R.current;if(de)return()=>HU(de)},[]);const ne=o?"none":"auto";return Ct.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ne,...r},...w,children:Ct.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:Ct.jsx("canvas",{ref:R,style:{display:"block"},children:t})})})}function vX(i){return Ct.jsx(wU,{children:Ct.jsx(gX,{...i})})}const yX=i=>i;function _X(i,e=yX){const t=xe.useSyncExternalStore(i.subscribe,()=>e(i.getState()),()=>e(i.getInitialState()));return xe.useDebugValue(t),t}const BB=i=>{const e=bU(i),t=n=>_X(e,n);return Object.assign(t,e),t},xX=i=>i?BB(i):BB;let V0=0;const bX=xX(i=>(gg.onStart=(e,t,n)=>{i({active:!0,item:e,loaded:t,total:n,progress:(t-V0)/(n-V0)*100})},gg.onLoad=()=>{i({active:!1})},gg.onError=e=>i(t=>({errors:[...t.errors,e]})),gg.onProgress=(e,t,n)=>{t===n&&(V0=n),i({active:!0,item:e,loaded:t,total:n,progress:(t-V0)/(n-V0)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),SX=i=>`Loading ${i.toFixed(2)}%`;function MX({containerStyles:i,innerStyles:e,barStyles:t,dataStyles:n,dataInterpolation:r=SX,initialState:a=s=>s}){const{active:s,progress:o}=bX(),c=X.useRef(0),f=X.useRef(0),d=X.useRef(null),[m,v]=X.useState(a(s));X.useEffect(()=>{let _;return s!==m&&(_=setTimeout(()=>v(s),300)),()=>clearTimeout(_)},[m,s]);const y=X.useCallback(()=>{d.current&&(c.current+=(o-c.current)/2,(c.current>.95*o||o===100)&&(c.current=o),d.current.innerText=r(c.current),c.current<o&&(f.current=requestAnimationFrame(y)))},[r,o]);return X.useEffect(()=>(y(),()=>cancelAnimationFrame(f.current)),[y]),m?X.createElement("div",{style:{...Z1.container,opacity:s?1:0,...i}},X.createElement("div",null,X.createElement("div",{style:{...Z1.inner,...e}},X.createElement("div",{style:{...Z1.bar,transform:`scaleX(${o/100})`,...t}}),X.createElement("span",{ref:d,style:{...Z1.data,...n}})))):null}const Z1={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},VC=parseInt(xh.replace(/\D+/g,""));function LB(i,e){if(e===ZN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===PS||e===K2){let t=i.getIndex();if(t===null){const s=[],o=i.getAttribute("position");if(o!==void 0){for(let c=0;c<o.count;c++)s.push(c);i.setIndex(s),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===PS)for(let s=1;s<=n;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<n;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=i.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var zo=Uint8Array,ah=Uint16Array,s2=Uint32Array,kU=new zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),WU=new zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),EX=new zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XU=function(i,e){for(var t=new ah(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new s2(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)r[a]=a-t[n]<<5|n;return[t,r]},$U=XU(kU,2),jU=$U[0],AX=$U[1];jU[28]=258,AX[258]=28;var TX=XU(WU,0),wX=TX[0],o2=new ah(32768);for(var qi=0;qi<32768;++qi){var Wf=(qi&43690)>>>1|(qi&21845)<<1;Wf=(Wf&52428)>>>2|(Wf&13107)<<2,Wf=(Wf&61680)>>>4|(Wf&3855)<<4,o2[qi]=((Wf&65280)>>>8|(Wf&255)<<8)>>>1}var Ey=function(i,e,t){for(var n=i.length,r=0,a=new ah(e);r<n;++r)++a[i[r]-1];var s=new ah(e);for(r=0;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(t){o=new ah(1<<e);var c=15-e;for(r=0;r<n;++r)if(i[r])for(var f=r<<4|i[r],d=e-i[r],m=s[i[r]-1]++<<d,v=m|(1<<d)-1;m<=v;++m)o[o2[m]>>>c]=f}else for(o=new ah(n),r=0;r<n;++r)i[r]&&(o[r]=o2[s[i[r]-1]++]>>>15-i[r]);return o},b_=new zo(288);for(var qi=0;qi<144;++qi)b_[qi]=8;for(var qi=144;qi<256;++qi)b_[qi]=9;for(var qi=256;qi<280;++qi)b_[qi]=7;for(var qi=280;qi<288;++qi)b_[qi]=8;var qU=new zo(32);for(var qi=0;qi<32;++qi)qU[qi]=5;var CX=Ey(b_,9,1),RX=Ey(qU,5,1),tT=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Tl=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},nT=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},DX=function(i){return(i/8|0)+(i&7&&1)},BX=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof ah?ah:i instanceof s2?s2:zo)(t-e);return n.set(i.subarray(e,t)),n},LX=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new zo(0);var r=!e||t,a=!t||t.i;t||(t={}),e||(e=new zo(n*3));var s=function(Ge){var Ze=e.length;if(Ge>Ze){var Ae=new zo(Math.max(Ze*2,Ge));Ae.set(e),e=Ae}},o=t.f||0,c=t.p||0,f=t.b||0,d=t.l,m=t.d,v=t.m,y=t.n,_=n*8;do{if(!d){t.f=o=Tl(i,c,1);var A=Tl(i,c+1,3);if(c+=3,A)if(A==1)d=CX,m=RX,v=9,y=5;else if(A==2){var D=Tl(i,c,31)+257,B=Tl(i,c+10,15)+4,U=D+Tl(i,c+5,31)+1;c+=14;for(var w=new zo(U),O=new zo(19),I=0;I<B;++I)O[EX[I]]=Tl(i,c+I*3,7);c+=B*3;for(var L=tT(O),R=(1<<L)-1,F=Ey(O,L,1),I=0;I<U;){var G=F[Tl(i,c,R)];c+=G&15;var S=G>>>4;if(S<16)w[I++]=S;else{var V=0,$=0;for(S==16?($=3+Tl(i,c,3),c+=2,V=w[I-1]):S==17?($=3+Tl(i,c,7),c+=3):S==18&&($=11+Tl(i,c,127),c+=7);$--;)w[I++]=V}}var K=w.subarray(0,D),z=w.subarray(D);v=tT(K),y=tT(z),d=Ey(K,v,1),m=Ey(z,y,1)}else throw"invalid block type";else{var S=DX(c)+4,x=i[S-4]|i[S-3]<<8,E=S+x;if(E>n){if(a)throw"unexpected EOF";break}r&&s(f+x),e.set(i.subarray(S,E),f),t.b=f+=x,t.p=c=E*8;continue}if(c>_){if(a)throw"unexpected EOF";break}}r&&s(f+131072);for(var ee=(1<<v)-1,ne=(1<<y)-1,de=c;;de=c){var V=d[nT(i,c)&ee],Y=V>>>4;if(c+=V&15,c>_){if(a)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(Y<256)e[f++]=Y;else if(Y==256){de=c,d=null;break}else{var fe=Y-254;if(Y>264){var I=Y-257,Re=kU[I];fe=Tl(i,c,(1<<Re)-1)+jU[I],c+=Re}var Le=m[nT(i,c)&ne],oe=Le>>>4;if(!Le)throw"invalid distance";c+=Le&15;var z=wX[oe];if(oe>3){var Re=WU[oe];z+=nT(i,c)&(1<<Re)-1,c+=Re}if(c>_){if(a)throw"unexpected EOF";break}r&&s(f+131072);for(var ke=f+fe;f<ke;f+=4)e[f]=e[f-z],e[f+1]=e[f+1-z],e[f+2]=e[f+2-z],e[f+3]=e[f+3-z];f=ke}}t.l=d,t.p=de,t.b=f,d&&(o=1,t.m=v,t.d=m,t.n=y)}while(!o);return f==e.length?e:BX(e,0,f)},IX=new zo(0),PX=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Q1(i,e){return LX((PX(i),i.subarray(2,-4)),e)}var NX=typeof TextDecoder<"u"&&new TextDecoder,OX=0;try{NX.decode(IX,{stream:!0}),OX=1}catch{}const UX=i=>i&&i.isCubeTexture;class FX extends Ki{constructor(e,t){var n,r;const a=UX(e),o=((r=a?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?r:1024)/4,c=Math.floor(Math.log2(o)),f=Math.pow(2,c),d=3*Math.max(f,16*7),m=4*f,v=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${c}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=v.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${VC>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},S=new g_(1,16),x=new Wi({uniforms:A,fragmentShader:_,vertexShader:y,side:fa});super(S,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}const wa=new Du,eb=new ue;class zX{constructor(e){let t=e.geometry;t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.positionAttribute,t=this.weightAttribute,n=new Float32Array(e.count/3);for(let a=0;a<e.count;a+=3){let s=1;t&&(s=t.getX(a)+t.getX(a+1)+t.getX(a+2)),wa.a.fromBufferAttribute(e,a),wa.b.fromBufferAttribute(e,a+1),wa.c.fromBufferAttribute(e,a+2),s*=wa.getArea(),n[a/3]=s}this.distribution=new Float32Array(e.count/3);let r=0;for(let a=0;a<n.length;a++)r+=n[a],this.distribution[a]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,n){const r=this.sampleFaceIndex();return this.sampleFace(r,e,t,n)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const t=this.distribution;let n=0,r=t.length-1,a=-1;for(;n<=r;){const s=Math.ceil((n+r)/2);if(s===0||t[s-1]<=e&&t[s]>e){a=s;break}else e<t[s]?r=s-1:n=s+1}return a}sampleFace(e,t,n,r){let a=this.randomFunction(),s=this.randomFunction();return a+s>1&&(a=1-a,s=1-s),wa.a.fromBufferAttribute(this.positionAttribute,e*3),wa.b.fromBufferAttribute(this.positionAttribute,e*3+1),wa.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(wa.a,a).addScaledVector(wa.b,s).addScaledVector(wa.c,1-(a+s)),n!==void 0&&wa.getNormal(n),r!==void 0&&this.colorAttribute!==void 0&&(wa.a.fromBufferAttribute(this.colorAttribute,e*3),wa.b.fromBufferAttribute(this.colorAttribute,e*3+1),wa.c.fromBufferAttribute(this.colorAttribute,e*3+2),eb.set(0,0,0).addScaledVector(wa.a,a).addScaledVector(wa.b,s).addScaledVector(wa.c,1-(a+s)),r.r=eb.x,r.g=eb.y,r.b=eb.z),this}}var HX=Object.defineProperty,GX=(i,e,t)=>e in i?HX(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,VX=(i,e,t)=>(GX(i,e+"",t),t);let kX=class{constructor(){VX(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};var WX=Object.defineProperty,XX=(i,e,t)=>e in i?WX(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,pn=(i,e,t)=>(XX(i,typeof e!="symbol"?e+"":e,t),t);const tb=new pp,IB=new Ru,$X=Math.cos(70*(Math.PI/180)),PB=(i,e)=>(i%e+e)%e;let jX=class extends kX{constructor(e,t){super(),pn(this,"object"),pn(this,"domElement"),pn(this,"enabled",!0),pn(this,"target",new ue),pn(this,"minDistance",0),pn(this,"maxDistance",1/0),pn(this,"minZoom",0),pn(this,"maxZoom",1/0),pn(this,"minPolarAngle",0),pn(this,"maxPolarAngle",Math.PI),pn(this,"minAzimuthAngle",-1/0),pn(this,"maxAzimuthAngle",1/0),pn(this,"enableDamping",!1),pn(this,"dampingFactor",.05),pn(this,"enableZoom",!0),pn(this,"zoomSpeed",1),pn(this,"enableRotate",!0),pn(this,"rotateSpeed",1),pn(this,"enablePan",!0),pn(this,"panSpeed",1),pn(this,"screenSpacePanning",!0),pn(this,"keyPanSpeed",7),pn(this,"zoomToCursor",!1),pn(this,"autoRotate",!1),pn(this,"autoRotateSpeed",2),pn(this,"reverseOrbit",!1),pn(this,"reverseHorizontalOrbit",!1),pn(this,"reverseVerticalOrbit",!1),pn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),pn(this,"mouseButtons",{LEFT:Nd.ROTATE,MIDDLE:Nd.DOLLY,RIGHT:Nd.PAN}),pn(this,"touches",{ONE:Od.ROTATE,TWO:Od.DOLLY_PAN}),pn(this,"target0"),pn(this,"position0"),pn(this,"zoom0"),pn(this,"_domElementKeyEvents",null),pn(this,"getPolarAngle"),pn(this,"getAzimuthalAngle"),pn(this,"setPolarAngle"),pn(this,"setAzimuthalAngle"),pn(this,"getDistance"),pn(this,"getZoomScale"),pn(this,"listenToKeyEvents"),pn(this,"stopListenToKeyEvents"),pn(this,"saveState"),pn(this,"reset"),pn(this,"update"),pn(this,"connect"),pn(this,"dispose"),pn(this,"dollyIn"),pn(this,"dollyOut"),pn(this,"getScale"),pn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ge=>{let Ve=PB(ge,2*Math.PI),_t=d.phi;_t<0&&(_t+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let Me=Math.abs(Ve-_t);2*Math.PI-Me<Me&&(Ve<_t?Ve+=2*Math.PI:_t+=2*Math.PI),m.phi=Ve-_t,n.update()},this.setAzimuthalAngle=ge=>{let Ve=PB(ge,2*Math.PI),_t=d.theta;_t<0&&(_t+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let Me=Math.abs(Ve-_t);2*Math.PI-Me<Me&&(Ve<_t?Ve+=2*Math.PI:_t+=2*Math.PI),m.theta=Ve-_t,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ge=>{ge.addEventListener("keydown",Ue),this._domElementKeyEvents=ge},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ue),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=o.NONE},this.update=(()=>{const ge=new ue,Ve=new ue(0,1,0),_t=new ha().setFromUnitVectors(e.up,Ve),Me=_t.clone().invert(),qe=new ue,mt=new ha,Pt=2*Math.PI;return function(){const gt=n.object.position;_t.setFromUnitVectors(e.up,Ve),Me.copy(_t).invert(),ge.copy(gt).sub(n.target),ge.applyQuaternion(_t),d.setFromVector3(ge),n.autoRotate&&c===o.NONE&&$(G()),n.enableDamping?(d.theta+=m.theta*n.dampingFactor,d.phi+=m.phi*n.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi);let Ut=n.minAzimuthAngle,Xt=n.maxAzimuthAngle;isFinite(Ut)&&isFinite(Xt)&&(Ut<-Math.PI?Ut+=Pt:Ut>Math.PI&&(Ut-=Pt),Xt<-Math.PI?Xt+=Pt:Xt>Math.PI&&(Xt-=Pt),Ut<=Xt?d.theta=Math.max(Ut,Math.min(Xt,d.theta)):d.theta=d.theta>(Ut+Xt)/2?Math.max(Ut,d.theta):Math.min(Xt,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&L||n.object.isOrthographicCamera?d.radius=Le(d.radius):d.radius=Le(d.radius*v),ge.setFromSpherical(d),ge.applyQuaternion(Me),gt.copy(n.target).add(ge),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let Cn=!1;if(n.zoomToCursor&&L){let Tn=null;if(n.object instanceof rr&&n.object.isPerspectiveCamera){const he=ge.length();Tn=Le(he*v);const nt=he-Tn;n.object.position.addScaledVector(O,nt),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const he=new ue(I.x,I.y,0);he.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),Cn=!0;const nt=new ue(I.x,I.y,0);nt.unproject(n.object),n.object.position.sub(nt).add(he),n.object.updateMatrixWorld(),Tn=ge.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Tn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Tn).add(n.object.position):(tb.origin.copy(n.object.position),tb.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(tb.direction))<$X?e.lookAt(n.target):(IB.setFromNormalAndCoplanarPoint(n.object.up,n.target),tb.intersectPlane(IB,n.target))))}else n.object instanceof Uc&&n.object.isOrthographicCamera&&(Cn=v!==1,Cn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,L=!1,Cn||qe.distanceToSquared(n.object.position)>f||8*(1-mt.dot(n.object.quaternion))>f?(n.dispatchEvent(r),qe.copy(n.object.position),mt.copy(n.object.quaternion),Cn=!1,!0):!1}})(),this.connect=ge=>{n.domElement=ge,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Et),n.domElement.addEventListener("pointerdown",ht),n.domElement.addEventListener("pointercancel",k),n.domElement.addEventListener("wheel",Be)},this.dispose=()=>{var ge,Ve,_t,Me,qe,mt;n.domElement&&(n.domElement.style.touchAction="auto"),(ge=n.domElement)==null||ge.removeEventListener("contextmenu",Et),(Ve=n.domElement)==null||Ve.removeEventListener("pointerdown",ht),(_t=n.domElement)==null||_t.removeEventListener("pointercancel",k),(Me=n.domElement)==null||Me.removeEventListener("wheel",Be),(qe=n.domElement)==null||qe.ownerDocument.removeEventListener("pointermove",te),(mt=n.domElement)==null||mt.ownerDocument.removeEventListener("pointerup",k),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ue)};const n=this,r={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const f=1e-6,d=new Jw,m=new Jw;let v=1;const y=new ue,_=new ot,A=new ot,S=new ot,x=new ot,E=new ot,D=new ot,B=new ot,U=new ot,w=new ot,O=new ue,I=new ot;let L=!1;const R=[],F={};function G(){return 2*Math.PI/60/60*n.autoRotateSpeed}function V(){return Math.pow(.95,n.zoomSpeed)}function $(ge){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=ge:m.theta-=ge}function K(ge){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=ge:m.phi-=ge}const z=(()=>{const ge=new ue;return function(_t,Me){ge.setFromMatrixColumn(Me,0),ge.multiplyScalar(-_t),y.add(ge)}})(),ee=(()=>{const ge=new ue;return function(_t,Me){n.screenSpacePanning===!0?ge.setFromMatrixColumn(Me,1):(ge.setFromMatrixColumn(Me,0),ge.crossVectors(n.object.up,ge)),ge.multiplyScalar(_t),y.add(ge)}})(),ne=(()=>{const ge=new ue;return function(_t,Me){const qe=n.domElement;if(qe&&n.object instanceof rr&&n.object.isPerspectiveCamera){const mt=n.object.position;ge.copy(mt).sub(n.target);let Pt=ge.length();Pt*=Math.tan(n.object.fov/2*Math.PI/180),z(2*_t*Pt/qe.clientHeight,n.object.matrix),ee(2*Me*Pt/qe.clientHeight,n.object.matrix)}else qe&&n.object instanceof Uc&&n.object.isOrthographicCamera?(z(_t*(n.object.right-n.object.left)/n.object.zoom/qe.clientWidth,n.object.matrix),ee(Me*(n.object.top-n.object.bottom)/n.object.zoom/qe.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function de(ge){n.object instanceof rr&&n.object.isPerspectiveCamera||n.object instanceof Uc&&n.object.isOrthographicCamera?v=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(ge){de(v/ge)}function fe(ge){de(v*ge)}function Re(ge){if(!n.zoomToCursor||!n.domElement)return;L=!0;const Ve=n.domElement.getBoundingClientRect(),_t=ge.clientX-Ve.left,Me=ge.clientY-Ve.top,qe=Ve.width,mt=Ve.height;I.x=_t/qe*2-1,I.y=-(Me/mt)*2+1,O.set(I.x,I.y,1).unproject(n.object).sub(n.object.position).normalize()}function Le(ge){return Math.max(n.minDistance,Math.min(n.maxDistance,ge))}function oe(ge){_.set(ge.clientX,ge.clientY)}function ke(ge){Re(ge),B.set(ge.clientX,ge.clientY)}function Ge(ge){x.set(ge.clientX,ge.clientY)}function Ze(ge){A.set(ge.clientX,ge.clientY),S.subVectors(A,_).multiplyScalar(n.rotateSpeed);const Ve=n.domElement;Ve&&($(2*Math.PI*S.x/Ve.clientHeight),K(2*Math.PI*S.y/Ve.clientHeight)),_.copy(A),n.update()}function Ae(ge){U.set(ge.clientX,ge.clientY),w.subVectors(U,B),w.y>0?Y(V()):w.y<0&&fe(V()),B.copy(U),n.update()}function Q(ge){E.set(ge.clientX,ge.clientY),D.subVectors(E,x).multiplyScalar(n.panSpeed),ne(D.x,D.y),x.copy(E),n.update()}function le(ge){Re(ge),ge.deltaY<0?fe(V()):ge.deltaY>0&&Y(V()),n.update()}function me(ge){let Ve=!1;switch(ge.code){case n.keys.UP:ne(0,n.keyPanSpeed),Ve=!0;break;case n.keys.BOTTOM:ne(0,-n.keyPanSpeed),Ve=!0;break;case n.keys.LEFT:ne(n.keyPanSpeed,0),Ve=!0;break;case n.keys.RIGHT:ne(-n.keyPanSpeed,0),Ve=!0;break}Ve&&(ge.preventDefault(),n.update())}function be(){if(R.length==1)_.set(R[0].pageX,R[0].pageY);else{const ge=.5*(R[0].pageX+R[1].pageX),Ve=.5*(R[0].pageY+R[1].pageY);_.set(ge,Ve)}}function ye(){if(R.length==1)x.set(R[0].pageX,R[0].pageY);else{const ge=.5*(R[0].pageX+R[1].pageX),Ve=.5*(R[0].pageY+R[1].pageY);x.set(ge,Ve)}}function j(){const ge=R[0].pageX-R[1].pageX,Ve=R[0].pageY-R[1].pageY,_t=Math.sqrt(ge*ge+Ve*Ve);B.set(0,_t)}function ze(){n.enableZoom&&j(),n.enablePan&&ye()}function Pe(){n.enableZoom&&j(),n.enableRotate&&be()}function ae(ge){if(R.length==1)A.set(ge.pageX,ge.pageY);else{const _t=Nt(ge),Me=.5*(ge.pageX+_t.x),qe=.5*(ge.pageY+_t.y);A.set(Me,qe)}S.subVectors(A,_).multiplyScalar(n.rotateSpeed);const Ve=n.domElement;Ve&&($(2*Math.PI*S.x/Ve.clientHeight),K(2*Math.PI*S.y/Ve.clientHeight)),_.copy(A)}function Z(ge){if(R.length==1)E.set(ge.pageX,ge.pageY);else{const Ve=Nt(ge),_t=.5*(ge.pageX+Ve.x),Me=.5*(ge.pageY+Ve.y);E.set(_t,Me)}D.subVectors(E,x).multiplyScalar(n.panSpeed),ne(D.x,D.y),x.copy(E)}function Ie(ge){const Ve=Nt(ge),_t=ge.pageX-Ve.x,Me=ge.pageY-Ve.y,qe=Math.sqrt(_t*_t+Me*Me);U.set(0,qe),w.set(0,Math.pow(U.y/B.y,n.zoomSpeed)),Y(w.y),B.copy(U)}function Se(ge){n.enableZoom&&Ie(ge),n.enablePan&&Z(ge)}function We(ge){n.enableZoom&&Ie(ge),n.enableRotate&&ae(ge)}function ht(ge){var Ve,_t;n.enabled!==!1&&(R.length===0&&((Ve=n.domElement)==null||Ve.ownerDocument.addEventListener("pointermove",te),(_t=n.domElement)==null||_t.ownerDocument.addEventListener("pointerup",k)),Rt(ge),ge.pointerType==="touch"?He(ge):ie(ge))}function te(ge){n.enabled!==!1&&(ge.pointerType==="touch"?ft(ge):Ee(ge))}function k(ge){var Ve,_t,Me;ct(ge),R.length===0&&((Ve=n.domElement)==null||Ve.releasePointerCapture(ge.pointerId),(_t=n.domElement)==null||_t.ownerDocument.removeEventListener("pointermove",te),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",k)),n.dispatchEvent(s),c=o.NONE}function ie(ge){let Ve;switch(ge.button){case 0:Ve=n.mouseButtons.LEFT;break;case 1:Ve=n.mouseButtons.MIDDLE;break;case 2:Ve=n.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case Nd.DOLLY:if(n.enableZoom===!1)return;ke(ge),c=o.DOLLY;break;case Nd.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enablePan===!1)return;Ge(ge),c=o.PAN}else{if(n.enableRotate===!1)return;oe(ge),c=o.ROTATE}break;case Nd.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enableRotate===!1)return;oe(ge),c=o.ROTATE}else{if(n.enablePan===!1)return;Ge(ge),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(a)}function Ee(ge){if(n.enabled!==!1)switch(c){case o.ROTATE:if(n.enableRotate===!1)return;Ze(ge);break;case o.DOLLY:if(n.enableZoom===!1)return;Ae(ge);break;case o.PAN:if(n.enablePan===!1)return;Q(ge);break}}function Be(ge){n.enabled===!1||n.enableZoom===!1||c!==o.NONE&&c!==o.ROTATE||(ge.preventDefault(),n.dispatchEvent(a),le(ge),n.dispatchEvent(s))}function Ue(ge){n.enabled===!1||n.enablePan===!1||me(ge)}function He(ge){switch(pt(ge),R.length){case 1:switch(n.touches.ONE){case Od.ROTATE:if(n.enableRotate===!1)return;be(),c=o.TOUCH_ROTATE;break;case Od.PAN:if(n.enablePan===!1)return;ye(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(n.touches.TWO){case Od.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ze(),c=o.TOUCH_DOLLY_PAN;break;case Od.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Pe(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(a)}function ft(ge){switch(pt(ge),c){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;ae(ge),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;Z(ge),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Se(ge),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;We(ge),n.update();break;default:c=o.NONE}}function Et(ge){n.enabled!==!1&&ge.preventDefault()}function Rt(ge){R.push(ge)}function ct(ge){delete F[ge.pointerId];for(let Ve=0;Ve<R.length;Ve++)if(R[Ve].pointerId==ge.pointerId){R.splice(Ve,1);return}}function pt(ge){let Ve=F[ge.pointerId];Ve===void 0&&(Ve=new ot,F[ge.pointerId]=Ve),Ve.set(ge.pageX,ge.pageY)}function Nt(ge){const Ve=ge.pointerId===R[0].pointerId?R[1]:R[0];return F[Ve.pointerId]}this.dollyIn=(ge=V())=>{fe(ge),n.update()},this.dollyOut=(ge=V())=>{Y(ge),n.update()},this.getScale=()=>v,this.setScale=ge=>{de(ge),n.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};function WS(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const jd="srgb",Uu="srgb-linear",NB=3001,qX=3e3;class kC extends Pa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new QX(t)}),this.register(function(t){return new e$(t)}),this.register(function(t){return new c$(t)}),this.register(function(t){return new u$(t)}),this.register(function(t){return new f$(t)}),this.register(function(t){return new n$(t)}),this.register(function(t){return new i$(t)}),this.register(function(t){return new r$(t)}),this.register(function(t){return new a$(t)}),this.register(function(t){return new ZX(t)}),this.register(function(t){return new s$(t)}),this.register(function(t){return new t$(t)}),this.register(function(t){return new l$(t)}),this.register(function(t){return new o$(t)}),this.register(function(t){return new KX(t)}),this.register(function(t){return new h$(t)}),this.register(function(t){return new d$(t)})}load(e,t,n,r){const a=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const f=sh.extractUrlBase(e);s=sh.resolveURL(f,this.path)}else s=sh.extractUrlBase(e);this.manager.itemStart(e);const o=function(f){r?r(f):console.error(f),a.manager.itemError(e),a.manager.itemEnd(e)},c=new La(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){try{a.parse(f,s,function(d){t(d),a.manager.itemEnd(e)},o)}catch(d){o(d)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let a;const s={},o={};if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(WS(new Uint8Array(e.slice(0,4)))===YU){try{s[Zn.KHR_BINARY_GLTF]=new p$(e)}catch(d){r&&r(d);return}a=JSON.parse(s[Zn.KHR_BINARY_GLTF].content)}else a=JSON.parse(WS(new Uint8Array(e)));else a=e;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new w$(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const d=this.pluginCallbacks[f](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[d.name]=d,s[d.name]=!0}if(a.extensionsUsed)for(let f=0;f<a.extensionsUsed.length;++f){const d=a.extensionsUsed[f],m=a.extensionsRequired||[];switch(d){case Zn.KHR_MATERIALS_UNLIT:s[d]=new JX;break;case Zn.KHR_DRACO_MESH_COMPRESSION:s[d]=new m$(a,this.dracoLoader);break;case Zn.KHR_TEXTURE_TRANSFORM:s[d]=new g$;break;case Zn.KHR_MESH_QUANTIZATION:s[d]=new v$;break;default:m.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(s),c.setPlugins(o),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,a){n.parse(e,t,r,a)})}}function YX(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Zn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class KX{constructor(e){this.parser=e,this.name=Zn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const a=t[n];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const a=t.json,c=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let f;const d=new Bt(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],Uu);const m=c.range!==void 0?c.range:0;switch(c.type){case"directional":f=new wC(d),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new TC(d),f.distance=m;break;case"spot":f=new AC(d),f.distance=m,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,f.angle=c.spot.outerConeAngle,f.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return f.position.set(0,0,0),f.decay=2,Cu(f,c),c.intensity!==void 0&&(f.intensity=c.intensity),f.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(f),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,a=n.json.nodes[e],o=(a.extensions&&a.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(c){return n._getNodeRef(t.cache,o,c)})}}class JX{constructor(){this.name=Zn.KHR_MATERIALS_UNLIT}getMaterialType(){return xs}extendParams(e,t,n){const r=[];e.color=new Bt(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const s=a.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Uu),e.opacity=s[3]}a.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",a.baseColorTexture,jd))}return Promise.all(r)}}class ZX{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class QX{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&a.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(a.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const o=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ot(o,o)}return Promise.all(a)}}class e${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return t.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class t${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&a.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&a.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class n${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new Bt(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const o=s.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Uu)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&a.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,jd)),s.sheenRoughnessTexture!==void 0&&a.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class i${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&a.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class r${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&a.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const o=s.attenuationColor||[1,1,1];return t.attenuationColor=new Bt().setRGB(o[0],o[1],o[2],Uu),Promise.all(a)}}class a${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class s${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&a.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return t.specularColor=new Bt().setRGB(o[0],o[1],o[2],Uu),s.specularColorTexture!==void 0&&a.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,jd)),Promise.all(a)}}class o${constructor(e){this.parser=e,this.name=Zn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&a.push(n.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(a)}}class l${constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&a.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(a)}}class c${constructor(e){this.parser=e,this.name=Zn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,s)}}class u${constructor(e){this.parser=e,this.name=Zn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],o=r.images[s.source];let c=n.textureLoader;if(o.uri){const f=n.options.manager.getHandler(o.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class f${constructor(e){this.parser=e,this.name=Zn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],o=r.images[s.source];let c=n.textureLoader;if(o.uri){const f=n.options.manager.getHandler(o.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class h${constructor(e){this.name=Zn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(o){const c=r.byteOffset||0,f=r.byteLength||0,d=r.count,m=r.byteStride,v=new Uint8Array(o,c,f);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,m,v,r.mode,r.filter).then(function(y){return y.buffer}):s.ready.then(function(){const y=new ArrayBuffer(d*m);return s.decodeGltfBuffer(new Uint8Array(y),d,m,v,r.mode,r.filter),y})})}else return null}}class d${constructor(e){this.name=Zn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const f of r.primitives)if(f.mode!==Uo.TRIANGLES&&f.mode!==Uo.TRIANGLE_STRIP&&f.mode!==Uo.TRIANGLE_FAN&&f.mode!==void 0)return null;const s=n.extensions[this.name].attributes,o=[],c={};for(const f in s)o.push(this.parser.getDependency("accessor",s[f]).then(d=>(c[f]=d,c[f])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(f=>{const d=f.pop(),m=d.isGroup?d.children:[d],v=f[0].count,y=[];for(const _ of m){const A=new mn,S=new ue,x=new ha,E=new ue(1,1,1),D=new aC(_.geometry,_.material,v);for(let B=0;B<v;B++)c.TRANSLATION&&S.fromBufferAttribute(c.TRANSLATION,B),c.ROTATION&&x.fromBufferAttribute(c.ROTATION,B),c.SCALE&&E.fromBufferAttribute(c.SCALE,B),D.setMatrixAt(B,A.compose(S,x,E));for(const B in c)if(B==="_COLOR_0"){const U=c[B];D.instanceColor=new Hu(U.array,U.itemSize,U.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&_.geometry.setAttribute(B,c[B]);ci.prototype.copy.call(D,_),this.parser.assignFinalMaterial(D),y.push(D)}return d.isGroup?(d.clear(),d.add(...y),d):y[0]}))}}const YU="glTF",k0=12,OB={JSON:1313821514,BIN:5130562};class p${constructor(e){this.name=Zn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,k0);if(this.header={magic:WS(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==YU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-k0,r=new DataView(e,k0);let a=0;for(;a<n;){const s=r.getUint32(a,!0);a+=4;const o=r.getUint32(a,!0);if(a+=4,o===OB.JSON){const c=new Uint8Array(e,k0+a,s);this.content=WS(c)}else if(o===OB.BIN){const c=k0+a;this.body=e.slice(c,c+s)}a+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class m${constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Zn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},c={},f={};for(const d in s){const m=l2[d]||d.toLowerCase();o[m]=s[d]}for(const d in e.attributes){const m=l2[d]||d.toLowerCase();if(s[d]!==void 0){const v=n.accessors[e.attributes[d]],y=Ag[v.componentType];f[m]=y.name,c[m]=v.normalized===!0}}return t.getDependency("bufferView",a).then(function(d){return new Promise(function(m,v){r.decodeDracoFile(d,function(y){for(const _ in y.attributes){const A=y.attributes[_],S=c[_];S!==void 0&&(A.normalized=S)}m(y)},o,f,Uu,v)})})}}class g${constructor(){this.name=Zn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class v${constructor(){this.name=Zn.KHR_MESH_QUANTIZATION}}class KU extends Kg{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[a+s];return t}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=o*2,f=o*3,d=r-t,m=(n-t)/d,v=m*m,y=v*m,_=e*f,A=_-f,S=-2*y+3*v,x=y-v,E=1-S,D=x-v+m;for(let B=0;B!==o;B++){const U=s[A+B+o],w=s[A+B+c]*d,O=s[_+B+o],I=s[_+B]*d;a[B]=E*U+D*w+S*O+x*I}return a}}const y$=new ha;class _$ extends KU{interpolate_(e,t,n,r){const a=super.interpolate_(e,t,n,r);return y$.fromArray(a).normalize().toArray(a),a}}const Uo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ag={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},UB={9728:Mr,9729:Qn,9984:fM,9985:Sg,9986:Gd,9987:Ho},FB={33071:Br,33648:Dg,10497:gh},iT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},l2={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...VC>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Xf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},x$={CUBICSPLINE:void 0,LINEAR:Pg,STEP:Ig},rT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function b$(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Yg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fl})),i.DefaultMaterial}function Bd(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Cu(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function S$(i,e,t){let n=!1,r=!1,a=!1;for(let f=0,d=e.length;f<d;f++){const m=e[f];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(r=!0),m.COLOR_0!==void 0&&(a=!0),n&&r&&a)break}if(!n&&!r&&!a)return Promise.resolve(i);const s=[],o=[],c=[];for(let f=0,d=e.length;f<d;f++){const m=e[f];if(n){const v=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):i.attributes.position;s.push(v)}if(r){const v=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):i.attributes.normal;o.push(v)}if(a){const v=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):i.attributes.color;c.push(v)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(c)]).then(function(f){const d=f[0],m=f[1],v=f[2];return n&&(i.morphAttributes.position=d),r&&(i.morphAttributes.normal=m),a&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function M$(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function E$(i){let e;const t=i.extensions&&i.extensions[Zn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+aT(t.attributes):e=i.indices+":"+aT(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+aT(i.targets[n]);return e}function aT(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function c2(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function A$(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const T$=new mn;class w${constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new YX,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&a<98?this.textureLoader=new __(this.options.manager):this.textureLoader=new lU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new La(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){const o={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:n,userData:{}};return Bd(a,o,r),Cu(o,r),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){for(const c of o.scenes)c.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,a=t.length;r<a;r++){const s=t[r].joints;for(let o=0,c=s.length;o<c;o++)e[s[o]].isBone=!0}for(let r=0,a=e.length;r<a;r++){const s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),a=(s,o)=>{const c=this.associations.get(s);c!=null&&this.associations.set(o,c);for(const[f,d]of s.children.entries())a(d,o.children[f])};return a(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const a=e(t[r]);a&&n.push(a)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(a,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Zn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,s){n.load(sh.resolveURL(t.uri,r.path),a,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,a=t.byteOffset||0;return n.slice(a,a+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const s=iT[r.type],o=Ag[r.componentType],c=r.normalized===!0,f=new o(r.count*s);return Promise.resolve(new si(f,s,c))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(s){const o=s[0],c=iT[r.type],f=Ag[r.componentType],d=f.BYTES_PER_ELEMENT,m=d*c,v=r.byteOffset||0,y=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,_=r.normalized===!0;let A,S;if(y&&y!==m){const x=Math.floor(v/y),E="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count;let D=t.cache.get(E);D||(A=new f(o,x*y,r.count*y/d),D=new f_(A,y/d),t.cache.add(E,D)),S=new Fg(D,c,v%y/d,_)}else o===null?A=new f(r.count*c):A=new f(o,v,r.count*c),S=new si(A,c,_);if(r.sparse!==void 0){const x=iT.SCALAR,E=Ag[r.sparse.indices.componentType],D=r.sparse.indices.byteOffset||0,B=r.sparse.values.byteOffset||0,U=new E(s[1],D,r.sparse.count*x),w=new f(s[2],B,r.sparse.count*c);o!==null&&(S=new si(S.array.slice(),S.itemSize,S.normalized));for(let O=0,I=U.length;O<I;O++){const L=U[O];if(S.setX(L,w[O*c]),c>=2&&S.setY(L,w[O*c+1]),c>=3&&S.setZ(L,w[O*c+2]),c>=4&&S.setW(L,w[O*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return S})}loadTexture(e){const t=this.json,n=this.options,a=t.textures[e].source,s=t.images[a];let o=this.textureLoader;if(s.uri){const c=n.manager.getHandler(s.uri);c!==null&&(o=c)}return this.loadTextureImage(e,a,o)}loadTextureImage(e,t,n){const r=this,a=this.json,s=a.textures[e],o=a.images[t],c=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];const f=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=s.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const v=(a.samplers||{})[s.sampler]||{};return d.magFilter=UB[v.magFilter]||Qn,d.minFilter=UB[v.minFilter]||Ho,d.wrapS=FB[v.wrapS]||gh,d.wrapT=FB[v.wrapT]||gh,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=f,f}loadImageSource(e,t){const n=this,r=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const s=r.images[e],o=self.URL||self.webkitURL;let c=s.uri||"",f=!1;if(s.bufferView!==void 0)c=n.getDependency("bufferView",s.bufferView).then(function(m){f=!0;const v=new Blob([m],{type:s.mimeType});return c=o.createObjectURL(v),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(m){return new Promise(function(v,y){let _=v;t.isImageBitmapLoader===!0&&(_=function(A){const S=new mi(A);S.needsUpdate=!0,v(S)}),t.load(sh.resolveURL(m,a.path),_,void 0,y)})}).then(function(m){return f===!0&&o.revokeObjectURL(c),Cu(m,s),m.userData.mimeType=s.mimeType||A$(s.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),m});return this.sourceCache[e]=d,d}assignTexture(e,t,n,r){const a=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(s=s.clone(),s.channel=n.texCoord),a.extensions[Zn.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Zn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=a.associations.get(s);s=a.extensions[Zn.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),a.associations.set(s,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===NB?jd:Uu),"colorSpace"in s?s.colorSpace=r:s.encoding=r===jd?NB:qX),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let c=this.cache.get(o);c||(c=new AM,vr.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(o,c)),n=c}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let c=this.cache.get(o);c||(c=new Ka,vr.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(o,c)),n=c}if(r||a||s){let o="ClonedMaterial:"+n.uuid+":";r&&(o+="derivative-tangents:"),a&&(o+="vertex-colors:"),s&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=n.clone(),a&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return Yg}loadMaterial(e){const t=this,n=this.json,r=this.extensions,a=n.materials[e];let s;const o={},c=a.extensions||{},f=[];if(c[Zn.KHR_MATERIALS_UNLIT]){const m=r[Zn.KHR_MATERIALS_UNLIT];s=m.getMaterialType(),f.push(m.extendParams(o,a,t))}else{const m=a.pbrMetallicRoughness||{};if(o.color=new Bt(1,1,1),o.opacity=1,Array.isArray(m.baseColorFactor)){const v=m.baseColorFactor;o.color.setRGB(v[0],v[1],v[2],Uu),o.opacity=v[3]}m.baseColorTexture!==void 0&&f.push(t.assignTexture(o,"map",m.baseColorTexture,jd)),o.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,o.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(o,"metalnessMap",m.metallicRoughnessTexture)),f.push(t.assignTexture(o,"roughnessMap",m.metallicRoughnessTexture))),s=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,o)})))}a.doubleSided===!0&&(o.side=fa);const d=a.alphaMode||rT.OPAQUE;if(d===rT.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===rT.MASK&&(o.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&s!==xs&&(f.push(t.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new ot(1,1),a.normalTexture.scale!==void 0)){const m=a.normalTexture.scale;o.normalScale.set(m,m)}if(a.occlusionTexture!==void 0&&s!==xs&&(f.push(t.assignTexture(o,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&s!==xs){const m=a.emissiveFactor;o.emissive=new Bt().setRGB(m[0],m[1],m[2],Uu)}return a.emissiveTexture!==void 0&&s!==xs&&f.push(t.assignTexture(o,"emissiveMap",a.emissiveTexture,jd)),Promise.all(f).then(function(){const m=new s(o);return a.name&&(m.name=a.name),Cu(m,a),t.associations.set(m,{materials:e}),a.extensions&&Bd(r,m,a),m})}createUniqueName(e){const t=Pi.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function a(o){return n[Zn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(c){return zB(c,o,t)})}const s=[];for(let o=0,c=e.length;o<c;o++){const f=e[o],d=E$(f),m=r[d];if(m)s.push(m.promise);else{let v;f.extensions&&f.extensions[Zn.KHR_DRACO_MESH_COMPRESSION]?v=a(f):v=zB(new Fn,f,t),r[d]={primitive:f,promise:v},s.push(v)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,r=this.extensions,a=n.meshes[e],s=a.primitives,o=[];for(let c=0,f=s.length;c<f;c++){const d=s[c].material===void 0?b$(this.cache):this.getDependency("material",s[c].material);o.push(d)}return o.push(t.loadGeometries(s)),Promise.all(o).then(function(c){const f=c.slice(0,c.length-1),d=c[c.length-1],m=[];for(let y=0,_=d.length;y<_;y++){const A=d[y],S=s[y];let x;const E=f[y];if(S.mode===Uo.TRIANGLES||S.mode===Uo.TRIANGLE_STRIP||S.mode===Uo.TRIANGLE_FAN||S.mode===void 0)x=a.isSkinnedMesh===!0?new rC(A,E):new Ki(A,E),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),S.mode===Uo.TRIANGLE_STRIP?x.geometry=LB(x.geometry,K2):S.mode===Uo.TRIANGLE_FAN&&(x.geometry=LB(x.geometry,PS));else if(S.mode===Uo.LINES)x=new Xl(A,E);else if(S.mode===Uo.LINE_STRIP)x=new Gu(A,E);else if(S.mode===Uo.LINE_LOOP)x=new sC(A,E);else if(S.mode===Uo.POINTS)x=new oC(A,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(x.geometry.morphAttributes).length>0&&M$(x,a),x.name=t.createUniqueName(a.name||"mesh_"+e),Cu(x,a),S.extensions&&Bd(r,x,S),t.assignFinalMaterial(x),m.push(x)}for(let y=0,_=m.length;y<_;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return a.extensions&&Bd(r,m[0],a),m[0];const v=new Iu;a.extensions&&Bd(r,v,a),t.associations.set(v,{meshes:e});for(let y=0,_=m.length;y<_;y++)v.add(m[y]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new rr(Sr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Uc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Cu(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,a=t.joints.length;r<a;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const a=r.pop(),s=r,o=[],c=[];for(let f=0,d=s.length;f<d;f++){const m=s[f];if(m){o.push(m);const v=new mn;a!==null&&v.fromArray(a.array,f*16),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new h_(o,c)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],a=r.name?r.name:"animation_"+e,s=[],o=[],c=[],f=[],d=[];for(let m=0,v=r.channels.length;m<v;m++){const y=r.channels[m],_=r.samplers[y.sampler],A=y.target,S=A.node,x=r.parameters!==void 0?r.parameters[_.input]:_.input,E=r.parameters!==void 0?r.parameters[_.output]:_.output;A.node!==void 0&&(s.push(this.getDependency("node",S)),o.push(this.getDependency("accessor",x)),c.push(this.getDependency("accessor",E)),f.push(_),d.push(A))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(c),Promise.all(f),Promise.all(d)]).then(function(m){const v=m[0],y=m[1],_=m[2],A=m[3],S=m[4],x=[];for(let E=0,D=v.length;E<D;E++){const B=v[E],U=y[E],w=_[E],O=A[E],I=S[E];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const L=n._createAnimationTracks(B,U,w,O,I);if(L)for(let R=0;R<L.length;R++)x.push(L[R])}return new Hg(a,void 0,x)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(a){const s=n._getNodeRef(n.meshCache,r.mesh,a);return r.weights!==void 0&&s.traverse(function(o){if(o.isMesh)for(let c=0,f=r.weights.length;c<f;c++)o.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],a=n._loadNodeShallow(e),s=[],o=r.children||[];for(let f=0,d=o.length;f<d;f++)s.push(n.getDependency("node",o[f]));const c=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([a,Promise.all(s),c]).then(function(f){const d=f[0],m=f[1],v=f[2];v!==null&&d.traverse(function(y){y.isSkinnedMesh&&y.bind(v,T$)});for(let y=0,_=m.length;y<_;y++)d.add(m[y]);return d})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],s=a.name?r.createUniqueName(a.name):"",o=[],c=r._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return c&&o.push(c),a.camera!==void 0&&o.push(r.getDependency("camera",a.camera).then(function(f){return r._getNodeRef(r.cameraCache,a.camera,f)})),r._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){o.push(f)}),this.nodeCache[e]=Promise.all(o).then(function(f){let d;if(a.isBone===!0?d=new MM:f.length>1?d=new Iu:f.length===1?d=f[0]:d=new ci,d!==f[0])for(let m=0,v=f.length;m<v;m++)d.add(f[m]);if(a.name&&(d.userData.name=a.name,d.name=s),Cu(d,a),a.extensions&&Bd(n,d,a),a.matrix!==void 0){const m=new mn;m.fromArray(a.matrix),d.applyMatrix4(m)}else a.translation!==void 0&&d.position.fromArray(a.translation),a.rotation!==void 0&&d.quaternion.fromArray(a.rotation),a.scale!==void 0&&d.scale.fromArray(a.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,a=new Iu;n.name&&(a.name=r.createUniqueName(n.name)),Cu(a,n),n.extensions&&Bd(t,a,n);const s=n.nodes||[],o=[];for(let c=0,f=s.length;c<f;c++)o.push(r.getDependency("node",s[c]));return Promise.all(o).then(function(c){for(let d=0,m=c.length;d<m;d++)a.add(c[d]);const f=d=>{const m=new Map;for(const[v,y]of r.associations)(v instanceof vr||v instanceof mi)&&m.set(v,y);return d.traverse(v=>{const y=r.associations.get(v);y!=null&&m.set(v,y)}),m};return r.associations=f(a),a})}_createAnimationTracks(e,t,n,r,a){const s=[],o=e.name?e.name:e.uuid,c=[];Xf[a.path]===Xf.weights?e.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(o);let f;switch(Xf[a.path]){case Xf.weights:f=op;break;case Xf.rotation:f=lp;break;case Xf.position:case Xf.scale:f=cp;break;default:switch(n.itemSize){case 1:f=op;break;case 2:case 3:default:f=cp;break}break}const d=r.interpolation!==void 0?x$[r.interpolation]:Pg,m=this._getArrayFromAccessor(n);for(let v=0,y=c.length;v<y;v++){const _=new f(c[v]+"."+Xf[a.path],t.array,m,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),s.push(_)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=c2(t.constructor),r=new Float32Array(t.length);for(let a=0,s=t.length;a<s;a++)r[a]=t[a]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof lp?_$:KU;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function C$(i,e,t){const n=e.attributes,r=new Ba;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],c=o.min,f=o.max;if(c!==void 0&&f!==void 0){if(r.set(new ue(c[0],c[1],c[2]),new ue(f[0],f[1],f[2])),o.normalized){const d=c2(Ag[o.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const o=new ue,c=new ue;for(let f=0,d=a.length;f<d;f++){const m=a[f];if(m.POSITION!==void 0){const v=t.json.accessors[m.POSITION],y=v.min,_=v.max;if(y!==void 0&&_!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(_[2]))),v.normalized){const A=c2(Ag[v.componentType]);c.multiplyScalar(A)}o.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}i.boundingBox=r;const s=new da;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=s}function zB(i,e,t){const n=e.attributes,r=[];function a(s,o){return t.getDependency("accessor",s).then(function(c){i.setAttribute(o,c)})}for(const s in n){const o=l2[s]||s.toLowerCase();o in i.attributes||r.push(a(n[s],o))}if(e.indices!==void 0&&!i.index){const s=t.getDependency("accessor",e.indices).then(function(o){i.setIndex(o)});r.push(s)}return Cu(i,e),C$(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?S$(i,e.targets,t):i})}class R$ extends MC{constructor(e){super(e),this.type=Hr}parse(e){const s=function(I,L){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},d=`
`,m=function(I,L,R){L=L||1024;let G=I.pos,V=-1,$=0,K="",z=String.fromCharCode.apply(null,new Uint16Array(I.subarray(G,G+128)));for(;0>(V=z.indexOf(d))&&$<L&&G<I.byteLength;)K+=z,$+=z.length,G+=128,z+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(G,G+128)));return-1<V?(I.pos+=$+V+1,K+z.slice(0,V)):!1},v=function(I){const L=/^#\?(\S+)/,R=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,$={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let K,z;for((I.pos>=I.byteLength||!(K=m(I)))&&s(1,"no header found"),(z=K.match(L))||s(3,"bad initial token"),$.valid|=1,$.programtype=z[1],$.string+=K+`
`;K=m(I),K!==!1;){if($.string+=K+`
`,K.charAt(0)==="#"){$.comments+=K+`
`;continue}if((z=K.match(R))&&($.gamma=parseFloat(z[1])),(z=K.match(F))&&($.exposure=parseFloat(z[1])),(z=K.match(G))&&($.valid|=2,$.format=z[1]),(z=K.match(V))&&($.valid|=4,$.height=parseInt(z[1],10),$.width=parseInt(z[2],10)),$.valid&2&&$.valid&4)break}return $.valid&2||s(3,"missing format specifier"),$.valid&4||s(3,"missing image size specifier"),$},y=function(I,L,R){const F=L;if(F<8||F>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);F!==(I[2]<<8|I[3])&&s(3,"wrong scanline width");const G=new Uint8Array(4*L*R);G.length||s(4,"unable to allocate buffer space");let V=0,$=0;const K=4*F,z=new Uint8Array(4),ee=new Uint8Array(K);let ne=R;for(;ne>0&&$<I.byteLength;){$+4>I.byteLength&&s(1),z[0]=I[$++],z[1]=I[$++],z[2]=I[$++],z[3]=I[$++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=F)&&s(3,"bad rgbe scanline format");let de=0,Y;for(;de<K&&$<I.byteLength;){Y=I[$++];const Re=Y>128;if(Re&&(Y-=128),(Y===0||de+Y>K)&&s(3,"bad scanline data"),Re){const Le=I[$++];for(let oe=0;oe<Y;oe++)ee[de++]=Le}else ee.set(I.subarray($,$+Y),de),de+=Y,$+=Y}const fe=F;for(let Re=0;Re<fe;Re++){let Le=0;G[V]=ee[Re+Le],Le+=F,G[V+1]=ee[Re+Le],Le+=F,G[V+2]=ee[Re+Le],Le+=F,G[V+3]=ee[Re+Le],V+=4}ne--}return G},_=function(I,L,R,F){const G=I[L+3],V=Math.pow(2,G-128)/255;R[F+0]=I[L+0]*V,R[F+1]=I[L+1]*V,R[F+2]=I[L+2]*V,R[F+3]=1},A=function(I,L,R,F){const G=I[L+3],V=Math.pow(2,G-128)/255;R[F+0]=Wd.toHalfFloat(Math.min(I[L+0]*V,65504)),R[F+1]=Wd.toHalfFloat(Math.min(I[L+1]*V,65504)),R[F+2]=Wd.toHalfFloat(Math.min(I[L+2]*V,65504)),R[F+3]=Wd.toHalfFloat(1)},S=new Uint8Array(e);S.pos=0;const x=v(S),E=x.width,D=x.height,B=y(S.subarray(S.pos),E,D);let U,w,O;switch(this.type){case Yi:O=B.length/4;const I=new Float32Array(O*4);for(let R=0;R<O;R++)_(B,R*4,I,R*4);U=I,w=Yi;break;case Hr:O=B.length/4;const L=new Uint16Array(O*4);for(let R=0;R<O;R++)A(B,R*4,L,R*4);U=L,w=Hr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:E,height:D,data:U,header:x.string,gamma:x.gamma,exposure:x.exposure,type:w}}setDataType(e){return this.type=e,this}load(e,t,n,r){function a(s,o){switch(s.type){case Yi:case Hr:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Qn,s.magFilter=Qn,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,o)}return super.load(e,a,n,r)}}const W0=VC>=152;class D$ extends MC{constructor(e){super(e),this.type=Hr}parse(e){const L=Math.pow(2.7182818,2.2);function R(W,re){for(var Ce=0,je=0;je<65536;++je)(je==0||W[je>>3]&1<<(je&7))&&(re[Ce++]=je);for(var Qe=Ce-1;Ce<65536;)re[Ce++]=0;return Qe}function F(W){for(var re=0;re<16384;re++)W[re]={},W[re].len=0,W[re].lit=0,W[re].p=null}const G={l:0,c:0,lc:0};function V(W,re,Ce,je,Qe){for(;Ce<W;)re=re<<8|Nt(je,Qe),Ce+=8;Ce-=W,G.l=re>>Ce&(1<<W)-1,G.c=re,G.lc=Ce}const $=new Array(59);function K(W){for(var re=0;re<=58;++re)$[re]=0;for(var re=0;re<65537;++re)$[W[re]]+=1;for(var Ce=0,re=58;re>0;--re){var je=Ce+$[re]>>1;$[re]=Ce,Ce=je}for(var re=0;re<65537;++re){var Qe=W[re];Qe>0&&(W[re]=Qe|$[Qe]++<<6)}}function z(W,re,Ce,je,Qe,tt,Tt){for(var dt=Ce,J=0,pe=0;Qe<=tt;Qe++){if(dt.value-Ce.value>je)return!1;V(6,J,pe,W,dt);var _e=G.l;if(J=G.c,pe=G.lc,Tt[Qe]=_e,_e==63){if(dt.value-Ce.value>je)throw"Something wrong with hufUnpackEncTable";V(8,J,pe,W,dt);var we=G.l+6;if(J=G.c,pe=G.lc,Qe+we>tt+1)throw"Something wrong with hufUnpackEncTable";for(;we--;)Tt[Qe++]=0;Qe--}else if(_e>=59){var we=_e-59+2;if(Qe+we>tt+1)throw"Something wrong with hufUnpackEncTable";for(;we--;)Tt[Qe++]=0;Qe--}}K(Tt)}function ee(W){return W&63}function ne(W){return W>>6}function de(W,re,Ce,je){for(;re<=Ce;re++){var Qe=ne(W[re]),tt=ee(W[re]);if(Qe>>tt)throw"Invalid table entry";if(tt>14){var Tt=je[Qe>>tt-14];if(Tt.len)throw"Invalid table entry";if(Tt.lit++,Tt.p){var dt=Tt.p;Tt.p=new Array(Tt.lit);for(var J=0;J<Tt.lit-1;++J)Tt.p[J]=dt[J]}else Tt.p=new Array(1);Tt.p[Tt.lit-1]=re}else if(tt)for(var pe=0,J=1<<14-tt;J>0;J--){var Tt=je[(Qe<<14-tt)+pe];if(Tt.len||Tt.p)throw"Invalid table entry";Tt.len=tt,Tt.lit=re,pe++}}return!0}const Y={c:0,lc:0};function fe(W,re,Ce,je){W=W<<8|Nt(Ce,je),re+=8,Y.c=W,Y.lc=re}const Re={c:0,lc:0};function Le(W,re,Ce,je,Qe,tt,Tt,dt,J,pe){if(W==re){je<8&&(fe(Ce,je,Qe,Tt),Ce=Y.c,je=Y.lc),je-=8;var _e=Ce>>je,_e=new Uint8Array([_e])[0];if(J.value+_e>pe)return!1;for(var we=dt[J.value-1];_e-- >0;)dt[J.value++]=we}else if(J.value<pe)dt[J.value++]=W;else return!1;Re.c=Ce,Re.lc=je}function oe(W){return W&65535}function ke(W){var re=oe(W);return re>32767?re-65536:re}const Ge={a:0,b:0};function Ze(W,re){var Ce=ke(W),je=ke(re),Qe=je,tt=Ce+(Qe&1)+(Qe>>1),Tt=tt,dt=tt-Qe;Ge.a=Tt,Ge.b=dt}function Ae(W,re){var Ce=oe(W),je=oe(re),Qe=Ce-(je>>1)&65535,tt=je+Qe-32768&65535;Ge.a=tt,Ge.b=Qe}function Q(W,re,Ce,je,Qe,tt,Tt){for(var dt=Tt<16384,J=Ce>Qe?Qe:Ce,pe=1,_e;pe<=J;)pe<<=1;for(pe>>=1,_e=pe,pe>>=1;pe>=1;){for(var we=0,Oe=we+tt*(Qe-_e),Je=tt*pe,ut=tt*_e,xt=je*pe,St=je*_e,zt,Ot,Ht,rn;we<=Oe;we+=ut){for(var en=we,kn=we+je*(Ce-_e);en<=kn;en+=St){var qt=en+xt,on=en+Je,Yt=on+xt;dt?(Ze(W[en+re],W[on+re]),zt=Ge.a,Ht=Ge.b,Ze(W[qt+re],W[Yt+re]),Ot=Ge.a,rn=Ge.b,Ze(zt,Ot),W[en+re]=Ge.a,W[qt+re]=Ge.b,Ze(Ht,rn),W[on+re]=Ge.a,W[Yt+re]=Ge.b):(Ae(W[en+re],W[on+re]),zt=Ge.a,Ht=Ge.b,Ae(W[qt+re],W[Yt+re]),Ot=Ge.a,rn=Ge.b,Ae(zt,Ot),W[en+re]=Ge.a,W[qt+re]=Ge.b,Ae(Ht,rn),W[on+re]=Ge.a,W[Yt+re]=Ge.b)}if(Ce&pe){var on=en+Je;dt?Ze(W[en+re],W[on+re]):Ae(W[en+re],W[on+re]),zt=Ge.a,W[on+re]=Ge.b,W[en+re]=zt}}if(Qe&pe)for(var en=we,kn=we+je*(Ce-_e);en<=kn;en+=St){var qt=en+xt;dt?Ze(W[en+re],W[qt+re]):Ae(W[en+re],W[qt+re]),zt=Ge.a,W[qt+re]=Ge.b,W[en+re]=zt}_e=pe,pe>>=1}return we}function le(W,re,Ce,je,Qe,tt,Tt,dt,J,pe){for(var _e=0,we=0,Oe=dt,Je=Math.trunc(Qe.value+(tt+7)/8);Qe.value<Je;)for(fe(_e,we,Ce,Qe),_e=Y.c,we=Y.lc;we>=14;){var ut=_e>>we-14&16383,xt=re[ut];if(xt.len)we-=xt.len,Le(xt.lit,Tt,_e,we,Ce,je,Qe,J,pe,Oe),_e=Re.c,we=Re.lc;else{if(!xt.p)throw"hufDecode issues";var St;for(St=0;St<xt.lit;St++){for(var zt=ee(W[xt.p[St]]);we<zt&&Qe.value<Je;)fe(_e,we,Ce,Qe),_e=Y.c,we=Y.lc;if(we>=zt&&ne(W[xt.p[St]])==(_e>>we-zt&(1<<zt)-1)){we-=zt,Le(xt.p[St],Tt,_e,we,Ce,je,Qe,J,pe,Oe),_e=Re.c,we=Re.lc;break}}if(St==xt.lit)throw"hufDecode issues"}}var Ot=8-tt&7;for(_e>>=Ot,we-=Ot;we>0;){var xt=re[_e<<14-we&16383];if(xt.len)we-=xt.len,Le(xt.lit,Tt,_e,we,Ce,je,Qe,J,pe,Oe),_e=Re.c,we=Re.lc;else throw"hufDecode issues"}return!0}function me(W,re,Ce,je,Qe,tt){var Tt={value:0},dt=Ce.value,J=pt(re,Ce),pe=pt(re,Ce);Ce.value+=4;var _e=pt(re,Ce);if(Ce.value+=4,J<0||J>=65537||pe<0||pe>=65537)throw"Something wrong with HUF_ENCSIZE";var we=new Array(65537),Oe=new Array(16384);F(Oe);var Je=je-(Ce.value-dt);if(z(W,re,Ce,Je,J,pe,we),_e>8*(je-(Ce.value-dt)))throw"Something wrong with hufUncompress";de(we,J,pe,Oe),le(we,Oe,W,re,Ce,_e,pe,tt,Qe,Tt)}function be(W,re,Ce){for(var je=0;je<Ce;++je)re[je]=W[re[je]]}function ye(W){for(var re=1;re<W.length;re++){var Ce=W[re-1]+W[re]-128;W[re]=Ce}}function j(W,re){for(var Ce=0,je=Math.floor((W.length+1)/2),Qe=0,tt=W.length-1;!(Qe>tt||(re[Qe++]=W[Ce++],Qe>tt));)re[Qe++]=W[je++]}function ze(W){for(var re=W.byteLength,Ce=new Array,je=0,Qe=new DataView(W);re>0;){var tt=Qe.getInt8(je++);if(tt<0){var Tt=-tt;re-=Tt+1;for(var dt=0;dt<Tt;dt++)Ce.push(Qe.getUint8(je++))}else{var Tt=tt;re-=2;for(var J=Qe.getUint8(je++),dt=0;dt<Tt+1;dt++)Ce.push(J)}}return Ce}function Pe(W,re,Ce,je,Qe,tt){var qt=new DataView(tt.buffer),Tt=Ce[W.idx[0]].width,dt=Ce[W.idx[0]].height,J=3,pe=Math.floor(Tt/8),_e=Math.ceil(Tt/8),we=Math.ceil(dt/8),Oe=Tt-(_e-1)*8,Je=dt-(we-1)*8,ut={value:0},xt=new Array(J),St=new Array(J),zt=new Array(J),Ot=new Array(J),Ht=new Array(J);for(let wn=0;wn<J;++wn)Ht[wn]=re[W.idx[wn]],xt[wn]=wn<1?0:xt[wn-1]+_e*we,St[wn]=new Float32Array(64),zt[wn]=new Uint16Array(64),Ot[wn]=new Uint16Array(_e*64);for(let wn=0;wn<we;++wn){var rn=8;wn==we-1&&(rn=Je);var en=8;for(let un=0;un<_e;++un){un==_e-1&&(en=Oe);for(let zn=0;zn<J;++zn)zt[zn].fill(0),zt[zn][0]=Qe[xt[zn]++],ae(ut,je,zt[zn]),Z(zt[zn],St[zn]),Ie(St[zn]);Se(St);for(let zn=0;zn<J;++zn)We(St[zn],Ot[zn],un*64)}let xi=0;for(let un=0;un<J;++un){const zn=Ce[W.idx[un]].type;for(let Pn=8*wn;Pn<8*wn+rn;++Pn){xi=Ht[un][Pn];for(let Ui=0;Ui<pe;++Ui){const ei=Ui*64+(Pn&7)*8;qt.setUint16(xi+0*2*zn,Ot[un][ei+0],!0),qt.setUint16(xi+1*2*zn,Ot[un][ei+1],!0),qt.setUint16(xi+2*2*zn,Ot[un][ei+2],!0),qt.setUint16(xi+3*2*zn,Ot[un][ei+3],!0),qt.setUint16(xi+4*2*zn,Ot[un][ei+4],!0),qt.setUint16(xi+5*2*zn,Ot[un][ei+5],!0),qt.setUint16(xi+6*2*zn,Ot[un][ei+6],!0),qt.setUint16(xi+7*2*zn,Ot[un][ei+7],!0),xi+=8*2*zn}}if(pe!=_e)for(let Pn=8*wn;Pn<8*wn+rn;++Pn){const Ui=Ht[un][Pn]+8*pe*2*zn,ei=pe*64+(Pn&7)*8;for(let bi=0;bi<en;++bi)qt.setUint16(Ui+bi*2*zn,Ot[un][ei+bi],!0)}}}for(var kn=new Uint16Array(Tt),qt=new DataView(tt.buffer),on=0;on<J;++on){Ce[W.idx[on]].decoded=!0;var Yt=Ce[W.idx[on]].type;if(Ce[on].type==2)for(var gi=0;gi<dt;++gi){const wn=Ht[on][gi];for(var Sn=0;Sn<Tt;++Sn)kn[Sn]=qt.getUint16(wn+Sn*2*Yt,!0);for(var Sn=0;Sn<Tt;++Sn)qt.setFloat32(wn+Sn*2*Yt,qe(kn[Sn]),!0)}}}function ae(W,re,Ce){for(var je,Qe=1;Qe<64;)je=re[W.value],je==65280?Qe=64:je>>8==255?Qe+=je&255:(Ce[Qe]=je,Qe++),W.value++}function Z(W,re){re[0]=qe(W[0]),re[1]=qe(W[1]),re[2]=qe(W[5]),re[3]=qe(W[6]),re[4]=qe(W[14]),re[5]=qe(W[15]),re[6]=qe(W[27]),re[7]=qe(W[28]),re[8]=qe(W[2]),re[9]=qe(W[4]),re[10]=qe(W[7]),re[11]=qe(W[13]),re[12]=qe(W[16]),re[13]=qe(W[26]),re[14]=qe(W[29]),re[15]=qe(W[42]),re[16]=qe(W[3]),re[17]=qe(W[8]),re[18]=qe(W[12]),re[19]=qe(W[17]),re[20]=qe(W[25]),re[21]=qe(W[30]),re[22]=qe(W[41]),re[23]=qe(W[43]),re[24]=qe(W[9]),re[25]=qe(W[11]),re[26]=qe(W[18]),re[27]=qe(W[24]),re[28]=qe(W[31]),re[29]=qe(W[40]),re[30]=qe(W[44]),re[31]=qe(W[53]),re[32]=qe(W[10]),re[33]=qe(W[19]),re[34]=qe(W[23]),re[35]=qe(W[32]),re[36]=qe(W[39]),re[37]=qe(W[45]),re[38]=qe(W[52]),re[39]=qe(W[54]),re[40]=qe(W[20]),re[41]=qe(W[22]),re[42]=qe(W[33]),re[43]=qe(W[38]),re[44]=qe(W[46]),re[45]=qe(W[51]),re[46]=qe(W[55]),re[47]=qe(W[60]),re[48]=qe(W[21]),re[49]=qe(W[34]),re[50]=qe(W[37]),re[51]=qe(W[47]),re[52]=qe(W[50]),re[53]=qe(W[56]),re[54]=qe(W[59]),re[55]=qe(W[61]),re[56]=qe(W[35]),re[57]=qe(W[36]),re[58]=qe(W[48]),re[59]=qe(W[49]),re[60]=qe(W[57]),re[61]=qe(W[58]),re[62]=qe(W[62]),re[63]=qe(W[63])}function Ie(W){const re=.5*Math.cos(.7853975),Ce=.5*Math.cos(3.14159/16),je=.5*Math.cos(3.14159/8),Qe=.5*Math.cos(3*3.14159/16),tt=.5*Math.cos(5*3.14159/16),Tt=.5*Math.cos(3*3.14159/8),dt=.5*Math.cos(7*3.14159/16);for(var J=new Array(4),pe=new Array(4),_e=new Array(4),we=new Array(4),Oe=0;Oe<8;++Oe){var Je=Oe*8;J[0]=je*W[Je+2],J[1]=Tt*W[Je+2],J[2]=je*W[Je+6],J[3]=Tt*W[Je+6],pe[0]=Ce*W[Je+1]+Qe*W[Je+3]+tt*W[Je+5]+dt*W[Je+7],pe[1]=Qe*W[Je+1]-dt*W[Je+3]-Ce*W[Je+5]-tt*W[Je+7],pe[2]=tt*W[Je+1]-Ce*W[Je+3]+dt*W[Je+5]+Qe*W[Je+7],pe[3]=dt*W[Je+1]-tt*W[Je+3]+Qe*W[Je+5]-Ce*W[Je+7],_e[0]=re*(W[Je+0]+W[Je+4]),_e[3]=re*(W[Je+0]-W[Je+4]),_e[1]=J[0]+J[3],_e[2]=J[1]-J[2],we[0]=_e[0]+_e[1],we[1]=_e[3]+_e[2],we[2]=_e[3]-_e[2],we[3]=_e[0]-_e[1],W[Je+0]=we[0]+pe[0],W[Je+1]=we[1]+pe[1],W[Je+2]=we[2]+pe[2],W[Je+3]=we[3]+pe[3],W[Je+4]=we[3]-pe[3],W[Je+5]=we[2]-pe[2],W[Je+6]=we[1]-pe[1],W[Je+7]=we[0]-pe[0]}for(var ut=0;ut<8;++ut)J[0]=je*W[16+ut],J[1]=Tt*W[16+ut],J[2]=je*W[48+ut],J[3]=Tt*W[48+ut],pe[0]=Ce*W[8+ut]+Qe*W[24+ut]+tt*W[40+ut]+dt*W[56+ut],pe[1]=Qe*W[8+ut]-dt*W[24+ut]-Ce*W[40+ut]-tt*W[56+ut],pe[2]=tt*W[8+ut]-Ce*W[24+ut]+dt*W[40+ut]+Qe*W[56+ut],pe[3]=dt*W[8+ut]-tt*W[24+ut]+Qe*W[40+ut]-Ce*W[56+ut],_e[0]=re*(W[ut]+W[32+ut]),_e[3]=re*(W[ut]-W[32+ut]),_e[1]=J[0]+J[3],_e[2]=J[1]-J[2],we[0]=_e[0]+_e[1],we[1]=_e[3]+_e[2],we[2]=_e[3]-_e[2],we[3]=_e[0]-_e[1],W[0+ut]=we[0]+pe[0],W[8+ut]=we[1]+pe[1],W[16+ut]=we[2]+pe[2],W[24+ut]=we[3]+pe[3],W[32+ut]=we[3]-pe[3],W[40+ut]=we[2]-pe[2],W[48+ut]=we[1]-pe[1],W[56+ut]=we[0]-pe[0]}function Se(W){for(var re=0;re<64;++re){var Ce=W[0][re],je=W[1][re],Qe=W[2][re];W[0][re]=Ce+1.5747*Qe,W[1][re]=Ce-.1873*je-.4682*Qe,W[2][re]=Ce+1.8556*je}}function We(W,re,Ce){for(var je=0;je<64;++je)re[Ce+je]=Wd.toHalfFloat(ht(W[je]))}function ht(W){return W<=1?Math.sign(W)*Math.pow(Math.abs(W),2.2):Math.sign(W)*Math.pow(L,Math.abs(W)-1)}function te(W){return new DataView(W.array.buffer,W.offset.value,W.size)}function k(W){var re=W.viewer.buffer.slice(W.offset.value,W.offset.value+W.size),Ce=new Uint8Array(ze(re)),je=new Uint8Array(Ce.length);return ye(Ce),j(Ce,je),new DataView(je.buffer)}function ie(W){var re=W.array.slice(W.offset.value,W.offset.value+W.size),Ce=Q1(re),je=new Uint8Array(Ce.length);return ye(Ce),j(Ce,je),new DataView(je.buffer)}function Ee(W){for(var re=W.viewer,Ce={value:W.offset.value},je=new Uint16Array(W.width*W.scanlineBlockSize*(W.channels*W.type)),Qe=new Uint8Array(8192),tt=0,Tt=new Array(W.channels),dt=0;dt<W.channels;dt++)Tt[dt]={},Tt[dt].start=tt,Tt[dt].end=Tt[dt].start,Tt[dt].nx=W.width,Tt[dt].ny=W.lines,Tt[dt].size=W.type,tt+=Tt[dt].nx*Tt[dt].ny*Tt[dt].size;var J=mt(re,Ce),pe=mt(re,Ce);if(pe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(J<=pe)for(var dt=0;dt<pe-J+1;dt++)Qe[dt+J]=ge(re,Ce);var _e=new Uint16Array(65536),we=R(Qe,_e),Oe=pt(re,Ce);me(W.array,re,Ce,Oe,je,tt);for(var dt=0;dt<W.channels;++dt)for(var Je=Tt[dt],ut=0;ut<Tt[dt].size;++ut)Q(je,Je.start+ut,Je.nx,Je.size,Je.ny,Je.nx*Je.size,we);be(_e,je,tt);for(var xt=0,St=new Uint8Array(je.buffer.byteLength),zt=0;zt<W.lines;zt++)for(var Ot=0;Ot<W.channels;Ot++){var Je=Tt[Ot],Ht=Je.nx*Je.size,rn=new Uint8Array(je.buffer,Je.end*2,Ht*2);St.set(rn,xt),xt+=Ht*2,Je.end+=Ht}return new DataView(St.buffer)}function Be(W){var re=W.array.slice(W.offset.value,W.offset.value+W.size),Ce=Q1(re);const je=W.lines*W.channels*W.width,Qe=W.type==1?new Uint16Array(je):new Uint32Array(je);let tt=0,Tt=0;const dt=new Array(4);for(let J=0;J<W.lines;J++)for(let pe=0;pe<W.channels;pe++){let _e=0;switch(W.type){case 1:dt[0]=tt,dt[1]=dt[0]+W.width,tt=dt[1]+W.width;for(let we=0;we<W.width;++we){const Oe=Ce[dt[0]++]<<8|Ce[dt[1]++];_e+=Oe,Qe[Tt]=_e,Tt++}break;case 2:dt[0]=tt,dt[1]=dt[0]+W.width,dt[2]=dt[1]+W.width,tt=dt[2]+W.width;for(let we=0;we<W.width;++we){const Oe=Ce[dt[0]++]<<24|Ce[dt[1]++]<<16|Ce[dt[2]++]<<8;_e+=Oe,Qe[Tt]=_e,Tt++}break}}return new DataView(Qe.buffer)}function Ue(W){var re=W.viewer,Ce={value:W.offset.value},je=new Uint8Array(W.width*W.lines*(W.channels*W.type*2)),Qe={version:Ve(re,Ce),unknownUncompressedSize:Ve(re,Ce),unknownCompressedSize:Ve(re,Ce),acCompressedSize:Ve(re,Ce),dcCompressedSize:Ve(re,Ce),rleCompressedSize:Ve(re,Ce),rleUncompressedSize:Ve(re,Ce),rleRawSize:Ve(re,Ce),totalAcUncompressedCount:Ve(re,Ce),totalDcUncompressedCount:Ve(re,Ce),acCompression:Ve(re,Ce)};if(Qe.version<2)throw"EXRLoader.parse: "+Qt.compression+" version "+Qe.version+" is unsupported";for(var tt=new Array,Tt=mt(re,Ce)-2;Tt>0;){var dt=He(re.buffer,Ce),J=ge(re,Ce),pe=J>>2&3,_e=(J>>4)-1,we=new Int8Array([_e])[0],Oe=ge(re,Ce);tt.push({name:dt,index:we,type:Oe,compression:pe}),Tt-=dt.length+3}for(var Je=Qt.channels,ut=new Array(W.channels),xt=0;xt<W.channels;++xt){var St=ut[xt]={},zt=Je[xt];St.name=zt.name,St.compression=0,St.decoded=!1,St.type=zt.pixelType,St.pLinear=zt.pLinear,St.width=W.width,St.height=W.lines}for(var Ot={idx:new Array(3)},Ht=0;Ht<W.channels;++Ht)for(var St=ut[Ht],xt=0;xt<tt.length;++xt){var rn=tt[xt];St.name==rn.name&&(St.compression=rn.compression,rn.index>=0&&(Ot.idx[rn.index]=Ht),St.offset=Ht)}if(Qe.acCompressedSize>0)switch(Qe.acCompression){case 0:var qt=new Uint16Array(Qe.totalAcUncompressedCount);me(W.array,re,Ce,Qe.acCompressedSize,qt,Qe.totalAcUncompressedCount);break;case 1:var en=W.array.slice(Ce.value,Ce.value+Qe.totalAcUncompressedCount),kn=Q1(en),qt=new Uint16Array(kn.buffer);Ce.value+=Qe.totalAcUncompressedCount;break}if(Qe.dcCompressedSize>0){var on={array:W.array,offset:Ce,size:Qe.dcCompressedSize},Yt=new Uint16Array(ie(on).buffer);Ce.value+=Qe.dcCompressedSize}if(Qe.rleRawSize>0){var en=W.array.slice(Ce.value,Ce.value+Qe.rleCompressedSize),kn=Q1(en),gi=ze(kn.buffer);Ce.value+=Qe.rleCompressedSize}for(var Sn=0,wn=new Array(ut.length),xt=0;xt<wn.length;++xt)wn[xt]=new Array;for(var xi=0;xi<W.lines;++xi)for(var un=0;un<ut.length;++un)wn[un].push(Sn),Sn+=ut[un].width*W.type*2;Pe(Ot,wn,ut,qt,Yt,je);for(var xt=0;xt<ut.length;++xt){var St=ut[xt];if(!St.decoded)switch(St.compression){case 2:for(var zn=0,Pn=0,xi=0;xi<W.lines;++xi){for(var Ui=wn[xt][zn],ei=0;ei<St.width;++ei){for(var bi=0;bi<2*St.type;++bi)je[Ui++]=gi[Pn+bi*St.width*St.height];Pn++}zn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(je.buffer)}function He(W,re){for(var Ce=new Uint8Array(W),je=0;Ce[re.value+je]!=0;)je+=1;var Qe=new TextDecoder().decode(Ce.slice(re.value,re.value+je));return re.value=re.value+je+1,Qe}function ft(W,re,Ce){var je=new TextDecoder().decode(new Uint8Array(W).slice(re.value,re.value+Ce));return re.value=re.value+Ce,je}function Et(W,re){var Ce=ct(W,re),je=pt(W,re);return[Ce,je]}function Rt(W,re){var Ce=pt(W,re),je=pt(W,re);return[Ce,je]}function ct(W,re){var Ce=W.getInt32(re.value,!0);return re.value=re.value+4,Ce}function pt(W,re){var Ce=W.getUint32(re.value,!0);return re.value=re.value+4,Ce}function Nt(W,re){var Ce=W[re.value];return re.value=re.value+1,Ce}function ge(W,re){var Ce=W.getUint8(re.value);return re.value=re.value+1,Ce}const Ve=function(W,re){let Ce;return"getBigInt64"in DataView.prototype?Ce=Number(W.getBigInt64(re.value,!0)):Ce=W.getUint32(re.value+4,!0)+Number(W.getUint32(re.value,!0)<<32),re.value+=8,Ce};function _t(W,re){var Ce=W.getFloat32(re.value,!0);return re.value+=4,Ce}function Me(W,re){return Wd.toHalfFloat(_t(W,re))}function qe(W){var re=(W&31744)>>10,Ce=W&1023;return(W>>15?-1:1)*(re?re===31?Ce?NaN:1/0:Math.pow(2,re-15)*(1+Ce/1024):6103515625e-14*(Ce/1024))}function mt(W,re){var Ce=W.getUint16(re.value,!0);return re.value+=2,Ce}function Pt(W,re){return qe(mt(W,re))}function At(W,re,Ce,je){for(var Qe=Ce.value,tt=[];Ce.value<Qe+je-1;){var Tt=He(re,Ce),dt=ct(W,Ce),J=ge(W,Ce);Ce.value+=3;var pe=ct(W,Ce),_e=ct(W,Ce);tt.push({name:Tt,pixelType:dt,pLinear:J,xSampling:pe,ySampling:_e})}return Ce.value+=1,tt}function gt(W,re){var Ce=_t(W,re),je=_t(W,re),Qe=_t(W,re),tt=_t(W,re),Tt=_t(W,re),dt=_t(W,re),J=_t(W,re),pe=_t(W,re);return{redX:Ce,redY:je,greenX:Qe,greenY:tt,blueX:Tt,blueY:dt,whiteX:J,whiteY:pe}}function Ut(W,re){var Ce=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],je=ge(W,re);return Ce[je]}function Xt(W,re){var Ce=pt(W,re),je=pt(W,re),Qe=pt(W,re),tt=pt(W,re);return{xMin:Ce,yMin:je,xMax:Qe,yMax:tt}}function Cn(W,re){var Ce=["INCREASING_Y"],je=ge(W,re);return Ce[je]}function Tn(W,re){var Ce=_t(W,re),je=_t(W,re);return[Ce,je]}function he(W,re){var Ce=_t(W,re),je=_t(W,re),Qe=_t(W,re);return[Ce,je,Qe]}function nt(W,re,Ce,je,Qe){if(je==="string"||je==="stringvector"||je==="iccProfile")return ft(re,Ce,Qe);if(je==="chlist")return At(W,re,Ce,Qe);if(je==="chromaticities")return gt(W,Ce);if(je==="compression")return Ut(W,Ce);if(je==="box2i")return Xt(W,Ce);if(je==="lineOrder")return Cn(W,Ce);if(je==="float")return _t(W,Ce);if(je==="v2f")return Tn(W,Ce);if(je==="v3f")return he(W,Ce);if(je==="int")return ct(W,Ce);if(je==="rational")return Et(W,Ce);if(je==="timecode")return Rt(W,Ce);if(je==="preview")return Ce.value+=Qe,"skipped";Ce.value+=Qe}function Ye(W,re,Ce){const je={};if(W.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";je.version=W.getUint8(4);const Qe=W.getUint8(5);je.spec={singleTile:!!(Qe&2),longName:!!(Qe&4),deepFormat:!!(Qe&8),multiPart:!!(Qe&16)},Ce.value=8;for(var tt=!0;tt;){var Tt=He(re,Ce);if(Tt==0)tt=!1;else{var dt=He(re,Ce),J=pt(W,Ce),pe=nt(W,re,Ce,dt,J);pe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${dt}'.`):je[Tt]=pe}}if((Qe&-5)!=0)throw console.error("EXRHeader:",je),"THREE.EXRLoader: provided file is currently unsupported.";return je}function lt(W,re,Ce,je,Qe){const tt={size:0,viewer:re,array:Ce,offset:je,width:W.dataWindow.xMax-W.dataWindow.xMin+1,height:W.dataWindow.yMax-W.dataWindow.yMin+1,channels:W.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:W.channels[0].pixelType,uncompress:null,getter:null,format:null,[W0?"colorSpace":"encoding"]:null};switch(W.compression){case"NO_COMPRESSION":tt.lines=1,tt.uncompress=te;break;case"RLE_COMPRESSION":tt.lines=1,tt.uncompress=k;break;case"ZIPS_COMPRESSION":tt.lines=1,tt.uncompress=ie;break;case"ZIP_COMPRESSION":tt.lines=16,tt.uncompress=ie;break;case"PIZ_COMPRESSION":tt.lines=32,tt.uncompress=Ee;break;case"PXR24_COMPRESSION":tt.lines=16,tt.uncompress=Be;break;case"DWAA_COMPRESSION":tt.lines=32,tt.uncompress=Ue;break;case"DWAB_COMPRESSION":tt.lines=256,tt.uncompress=Ue;break;default:throw"EXRLoader.parse: "+W.compression+" is unsupported"}if(tt.scanlineBlockSize=tt.lines,tt.type==1)switch(Qe){case Yi:tt.getter=Pt,tt.inputSize=2;break;case Hr:tt.getter=mt,tt.inputSize=2;break}else if(tt.type==2)switch(Qe){case Yi:tt.getter=_t,tt.inputSize=4;break;case Hr:tt.getter=Me,tt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+tt.type+" for "+W.compression+".";tt.blockCount=(W.dataWindow.yMax+1)/tt.scanlineBlockSize;for(var Tt=0;Tt<tt.blockCount;Tt++)Ve(re,je);tt.outputChannels=tt.channels==3?4:tt.channels;const dt=tt.width*tt.height*tt.outputChannels;switch(Qe){case Yi:tt.byteArray=new Float32Array(dt),tt.channels<tt.outputChannels&&tt.byteArray.fill(1,0,dt);break;case Hr:tt.byteArray=new Uint16Array(dt),tt.channels<tt.outputChannels&&tt.byteArray.fill(15360,0,dt);break;default:console.error("THREE.EXRLoader: unsupported type: ",Qe);break}return tt.bytesPerLine=tt.width*tt.inputSize*tt.channels,tt.outputChannels==4?tt.format=Lr:tt.format=s_,W0?tt.colorSpace="srgb-linear":tt.encoding=3e3,tt}const wt=new DataView(e),hn=new Uint8Array(e),nn={value:0},Qt=Ye(wt,e,nn),Ft=lt(Qt,wt,hn,nn,this.type),tn={value:0},jt={R:0,G:1,B:2,A:3,Y:0};for(let W=0;W<Ft.height/Ft.scanlineBlockSize;W++){const re=pt(wt,nn);Ft.size=pt(wt,nn),Ft.lines=re+Ft.scanlineBlockSize>Ft.height?Ft.height-re:Ft.scanlineBlockSize;const je=Ft.size<Ft.lines*Ft.bytesPerLine?Ft.uncompress(Ft):te(Ft);nn.value+=Ft.size;for(let Qe=0;Qe<Ft.scanlineBlockSize;Qe++){const tt=Qe+W*Ft.scanlineBlockSize;if(tt>=Ft.height)break;for(let Tt=0;Tt<Ft.channels;Tt++){const dt=jt[Qt.channels[Tt].name];for(let J=0;J<Ft.width;J++){tn.value=(Qe*(Ft.channels*Ft.width)+Tt*Ft.width+J)*Ft.inputSize;const pe=(Ft.height-1-tt)*(Ft.width*Ft.outputChannels)+J*Ft.outputChannels+dt;Ft.byteArray[pe]=Ft.getter(je,tn)}}}}return{header:Qt,width:Ft.width,height:Ft.height,data:Ft.byteArray,format:Ft.format,[W0?"colorSpace":"encoding"]:Ft[W0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){function a(s,o){W0?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Qn,s.magFilter=Qn,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,o)}return super.load(e,a,n,r)}}const sT=new WeakMap;class B$ extends Pa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const a=new La(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,s=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,o).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const f=t.attributeTypes[c];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=f.name)}const n=JSON.stringify(t);if(sT.has(e)){const c=sT.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const a=this.workerNextTaskID++,s=e.byteLength,o=this._getWorker(a,s).then(c=>(r=c,new Promise((f,d)=>{r._callbacks[a]={resolve:f,reject:d},r.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return o.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),sT.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new Fn;e.index&&t.setIndex(new si(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],a=r.name,s=r.array,o=r.itemSize;t.setAttribute(a,new si(s,o))}return t}_loadLibrary(e,t){const n=new La(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,a)=>{n.load(e,r,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const a=L$.toString(),s=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){const s=a.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,a){return r._taskLoad>a._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function L$(){let i,e;onmessage=function(s){const o=s.data;switch(o.type){case"init":i=o.decoderConfig,e=new Promise(function(d){i.onModuleLoaded=function(m){d({draco:m})},DracoDecoderModule(i)});break;case"decode":const c=o.buffer,f=o.taskConfig;e.then(d=>{const m=d.draco,v=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(c),c.byteLength);try{const _=t(m,v,y,f),A=_.attributes.map(S=>S.array.buffer);_.index&&A.push(_.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:_},A)}catch(_){console.error(_),self.postMessage({type:"error",id:o.id,error:_.message})}finally{m.destroy(y),m.destroy(v)}});break}};function t(s,o,c,f){const d=f.attributeIDs,m=f.attributeTypes;let v,y;const _=o.GetEncodedGeometryType(c);if(_===s.TRIANGULAR_MESH)v=new s.Mesh,y=o.DecodeBufferToMesh(c,v);else if(_===s.POINT_CLOUD)v=new s.PointCloud,y=o.DecodeBufferToPointCloud(c,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const A={index:null,attributes:[]};for(const S in d){const x=self[m[S]];let E,D;if(f.useUniqueIDs)D=d[S],E=o.GetAttributeByUniqueId(v,D);else{if(D=o.GetAttributeId(v,s[d[S]]),D===-1)continue;E=o.GetAttribute(v,D)}A.attributes.push(r(s,o,v,S,x,E))}return _===s.TRIANGULAR_MESH&&(A.index=n(s,o,v)),s.destroy(v),A}function n(s,o,c){const d=c.num_faces()*3,m=d*4,v=s._malloc(m);o.GetTrianglesUInt32Array(c,m,v);const y=new Uint32Array(s.HEAPF32.buffer,v,d).slice();return s._free(v),{array:y,itemSize:1}}function r(s,o,c,f,d,m){const v=m.num_components(),_=c.num_points()*v,A=_*d.BYTES_PER_ELEMENT,S=a(s,d),x=s._malloc(A);o.GetAttributeDataArrayForAllPoints(c,m,S,A,x);const E=new d(s.HEAPF32.buffer,x,_).slice();return s._free(x),{name:f,array:E,itemSize:v}}function a(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}let nb;const oT=()=>{if(nb)return nb;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let a;const s=WebAssembly.instantiate(o(r),{}).then(m=>{a=m.instance,a.exports.__wasm_call_ctors()});function o(m){const v=new Uint8Array(m.length);for(let _=0;_<m.length;++_){const A=m.charCodeAt(_);v[_]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let y=0;for(let _=0;_<m.length;++_)v[y++]=v[_]<60?n[v[_]]:(v[_]-60)*64+v[++_];return v.buffer.slice(0,y)}function c(m,v,y,_,A,S){const x=a.exports.sbrk,E=y+3&-4,D=x(E*_),B=x(A.length),U=new Uint8Array(a.exports.memory.buffer);U.set(A,B);const w=m(D,y,_,B,A.length);if(w===0&&S&&S(D,E,_),v.set(U.subarray(D,D+y*_)),x(D-x(0)),w!==0)throw new Error(`Malformed buffer data: ${w}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return nb={ready:s,supported:!0,decodeVertexBuffer(m,v,y,_,A){c(a.exports.meshopt_decodeVertexBuffer,m,v,y,_,a.exports[f[A]])},decodeIndexBuffer(m,v,y,_){c(a.exports.meshopt_decodeIndexBuffer,m,v,y,_)},decodeIndexSequence(m,v,y,_){c(a.exports.meshopt_decodeIndexSequence,m,v,y,_)},decodeGltfBuffer(m,v,y,_,A,S){c(a.exports[d[A]],m,v,y,_,a.exports[f[S]])}},nb},lT=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function WC(i,e){const t=dr(a=>a.gl),n=Xo(__,lT(i)?Object.values(i):i);return X.useLayoutEffect(()=>{e==null||e(n)},[e]),X.useEffect(()=>{if("initTexture"in t){let a=[];Array.isArray(n)?a=n:n instanceof mi?a=[n]:lT(n)&&(a=Object.values(n)),a.forEach(s=>{s instanceof mi&&t.initTexture(s)})}},[t,n]),X.useMemo(()=>{if(lT(i)){const a={};let s=0;for(const o in i)a[o]=n[s++];return a}else return n},[i,n])}WC.preload=i=>Xo.preload(__,i);WC.clear=i=>Xo.clear(__,i);const I$=()=>parseInt(xh.replace(/\D+/g,"")),P$=I$();function N$(i,e=16,t,n,r){const[a,s]=X.useState(()=>{const o=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new Hu(Float32Array.from(o),16)});return X.useLayoutEffect(()=>{if(typeof i.current>"u")return;const o=new zX(i.current);n&&o.setWeightAttribute(n),o.build();const c=new ue,f=new ue,d=new Bt,m=new ci;i.current.updateMatrixWorld(!0);for(let v=0;v<e;v++)o.sample(c,f,d),typeof t=="function"?t({dummy:m,sampledMesh:i.current,position:c,normal:f,color:d},v):m.position.copy(c),m.updateMatrix(),r!=null&&r.current&&r.current.setMatrixAt(v,m.matrix),m.matrix.toArray(a.array,v*16);r!=null&&r.current&&(r.current.instanceMatrix.needsUpdate=!0),a.needsUpdate=!0,s(new Hu(a.array,a.itemSize).copy(a))},[i,r,n,e,t]),a}function O$({children:i,weight:e,transform:t,instances:n,mesh:r,count:a=16,...s}){const o=X.useRef(null),c=X.useRef(null),f=X.useRef(null);return X.useLayoutEffect(()=>{var d,m;c.current=(d=n==null?void 0:n.current)!==null&&d!==void 0?d:o.current.children.find(v=>v.hasOwnProperty("instanceMatrix")),f.current=(m=r==null?void 0:r.current)!==null&&m!==void 0?m:o.current.children.find(v=>v.type==="Mesh")},[i,r==null?void 0:r.current,n==null?void 0:n.current]),N$(f,a,t,e,c),X.createElement("group",dh({ref:o},s),i)}let ib=null,JU="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function ZU(i=!0,e=!0,t){return n=>{t&&t(n),i&&(ib||(ib=new B$),ib.setDecoderPath(typeof i=="string"?i:JU),n.setDRACOLoader(ib)),e&&n.setMeshoptDecoder(typeof oT=="function"?oT():oT)}}const Qg=(i,e,t,n)=>Xo(kC,i,ZU(e,t,n));Qg.preload=(i,e,t,n)=>Xo.preload(kC,i,ZU(e,t,n));Qg.clear=i=>Xo.clear(kC,i);Qg.setDecoderPath=i=>{JU=i};function U$(i,e,t){const n=dr(v=>v.size),r=dr(v=>v.viewport),a=typeof i=="number"?i:n.width*r.dpr,s=n.height*r.dpr,o=(typeof i=="number"?t:i)||{},{samples:c=0,depth:f,...d}=o,m=X.useMemo(()=>{const v=new ar(a,s,{minFilter:Qn,magFilter:Qn,type:Hr,...d});return f&&(v.depthTexture=new d_(a,s,Yi)),v.samples=c,v},[]);return X.useLayoutEffect(()=>{m.setSize(a,s),c&&(m.samples=c)},[c,m,a,s]),X.useEffect(()=>()=>m.dispose(),[]),m}const F$=i=>typeof i=="function",z$=X.forwardRef(({envMap:i,resolution:e=256,frames:t=1/0,makeDefault:n,children:r,...a},s)=>{const o=dr(({set:S})=>S),c=dr(({camera:S})=>S),f=dr(({size:S})=>S),d=X.useRef(null);X.useImperativeHandle(s,()=>d.current,[]);const m=X.useRef(null),v=U$(e);X.useLayoutEffect(()=>{a.manual||(d.current.aspect=f.width/f.height)},[f,a]),X.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let y=0,_=null;const A=F$(r);return Eh(S=>{A&&(t===1/0||y<t)&&(m.current.visible=!1,S.gl.setRenderTarget(v),_=S.scene.background,i&&(S.scene.background=i),S.gl.render(S.scene,d.current),S.scene.background=_,S.gl.setRenderTarget(null),m.current.visible=!0,y++)}),X.useLayoutEffect(()=>{if(n){const S=c;return o(()=>({camera:d.current})),()=>o(()=>({camera:S}))}},[d,n,o]),X.createElement(X.Fragment,null,X.createElement("perspectiveCamera",dh({ref:d},a),!A&&r),X.createElement("group",{ref:m},A&&r(v.texture)))}),H$=X.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:c,...f},d)=>{const m=dr(w=>w.invalidate),v=dr(w=>w.camera),y=dr(w=>w.gl),_=dr(w=>w.events),A=dr(w=>w.setEvents),S=dr(w=>w.set),x=dr(w=>w.get),E=dr(w=>w.performance),D=e||v,B=n||_.connected||y.domElement,U=X.useMemo(()=>new jX(D),[D]);return Eh(()=>{U.enabled&&U.update()},-1),X.useEffect(()=>(a&&U.connect(a===!0?B:a),U.connect(B),()=>void U.dispose()),[a,B,t,U,m]),X.useEffect(()=>{const w=L=>{m(),t&&E.regress(),s&&s(L)},O=L=>{o&&o(L)},I=L=>{c&&c(L)};return U.addEventListener("change",w),U.addEventListener("start",O),U.addEventListener("end",I),()=>{U.removeEventListener("start",O),U.removeEventListener("end",I),U.removeEventListener("change",w)}},[s,o,c,U,m,A]),X.useEffect(()=>{if(i){const w=x().controls;return S({controls:U}),()=>S({controls:w})}},[i,U]),X.createElement("primitive",dh({ref:d,object:U,enableDamping:r},f))});function G$(i,e){const t=X.useRef(null),[n]=X.useState(()=>e?e instanceof ci?{current:e}:e:t),[r]=X.useState(()=>new dU(void 0));X.useLayoutEffect(()=>{e&&(n.current=e instanceof ci?e:e.current),r._root=n.current});const a=X.useRef({}),s=X.useMemo(()=>{const o={};return i.forEach(c=>Object.defineProperty(o,c.name,{enumerable:!0,get(){if(n.current)return a.current[c.name]||(a.current[c.name]=r.clipAction(c,n.current))},configurable:!0})),{ref:n,clips:i,actions:o,names:i.map(c=>c.name),mixer:r}},[i]);return Eh((o,c)=>r.update(c)),X.useEffect(()=>{const o=n.current;return()=>{a.current={},r.stopAllAction(),Object.values(s.actions).forEach(c=>{o&&r.uncacheAction(c,o)})}},[i]),s}function V$(i,e){const t=i+"Geometry";return X.forwardRef(({args:n,children:r,...a},s)=>{const o=X.useRef(null);return X.useImperativeHandle(s,()=>o.current),X.useLayoutEffect(()=>void(e==null?void 0:e(o.current))),X.createElement("mesh",dh({ref:o},a),X.createElement(t,{attach:"geometry",args:n}),r)})}const k$=V$("circle"),QU=(i,e,t)=>{let n;switch(i){case Ji:n=new Uint8ClampedArray(e*t*4);break;case Hr:n=new Uint16Array(e*t*4);break;case zl:n=new Uint32Array(e*t*4);break;case hM:n=new Int8Array(e*t*4);break;case dM:n=new Int16Array(e*t*4);break;case a_:n=new Int32Array(e*t*4);break;case Yi:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let rb;const W$=(i,e,t,n)=>{if(rb!==void 0)return rb;const r=new ar(1,1,n);e.setRenderTarget(r);const a=new Ki(new qg,new xs({color:16777215}));e.render(a,t),e.setRenderTarget(null);const s=QU(i,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,s),r.dispose(),a.geometry.dispose(),a.material.dispose(),rb=s[0]!==0,rb};class XC{constructor(e){var t,n,r,a,s,o,c,f,d,m,v,y,_,A,S,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(D){throw this._renderer.setRenderTarget(null),D}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const E={format:Lr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps:!1,magFilter:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:Qn,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter:Qn,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples:void 0,wrapS:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapS)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS:Br,wrapT:((_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapT)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT:Br};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=XC.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new ap,this._camera=new Uc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!W$(this._type,this._renderer,this._camera,E)){let D;switch(this._type){case Hr:D=this._renderer.extensions.has("EXT_color_buffer_float")?Yi:void 0;break}D!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Yi}`),this._type=D):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ki(new qg,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ar(this.width,this.height,E),this._renderTarget.texture.mapping=((S=e.renderTargetOptions)===null||S===void 0?void 0:S.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:ph}static instantiateRenderer(){const e=new NC;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=QU(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Ol(this.toArray(),this.width,this.height,Lr,this._type,(e==null?void 0:e.mapping)||ph,(e==null?void 0:e.wrapS)||Br,(e==null?void 0:e.wrapT)||Br,(e==null?void 0:e.magFilter)||Qn,(e==null?void 0:e.minFilter)||Qn,(e==null?void 0:e.anisotropy)||1,fo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Wi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof mi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof mi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const X$=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,$$=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class j$ extends Wi{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:o,hdrCapacityMax:c,sdr:f,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:X$,fragmentShader:$$,uniforms:{sdr:{value:f},gainMap:{value:d},gamma:{value:new ue(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ue().fromArray(t)},offsetSdr:{value:new ue().fromArray(n)},gainMapMin:{value:new ue().fromArray(r)},gainMapMax:{value:new ue().fromArray(a)},weightFactor:{value:(Math.log2(s)-o)/(c-o)}},blending:Gr,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=o,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class e4 extends Error{}class t4 extends Error{}const X0=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},q$=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),r=e.slice(t,n+10);try{const a=X0(r,"hdrgm:GainMapMin","0"),s=X0(r,"hdrgm:GainMapMax"),o=X0(r,"hdrgm:Gamma","1"),c=X0(r,"hdrgm:OffsetSDR","0.015625"),f=X0(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),m=d?d[1]:"0",v=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!v)throw new Error("Incomplete gainmap metadata");const y=v[1];return{gainMapMin:Array.isArray(a)?a.map(_=>parseFloat(_)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(_=>parseFloat(_)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(_=>parseFloat(_)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(c)?c.map(_=>parseFloat(_)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(f)?f.map(_=>parseFloat(_)):[parseFloat(f),parseFloat(f),parseFloat(f)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class Y${constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,c=0,f;for(;o<s;){if(++c>250){n(new Error(`Found no marker after ${c} loops `));return}if(a.getUint8(o)!==255){n(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(f=a.getUint8(o+1),r&&console.log(`Marker: ${f.toString(16)}`),f===226){r&&console.log("Found APP2 marker (0xffe2)");const d=o+4;if(a.getUint32(d)===1297106432){const m=d+4;let v;if(a.getUint16(m)===18761)v=!1;else if(a.getUint16(m)===19789)v=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(m+2,!v)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=a.getUint32(m+4,!v);if(y<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=m+y,A=a.getUint16(_,!v),S=_+2;let x=0;for(let U=S;U<S+12*A;U+=12)a.getUint16(U,!v)===45057&&(x=a.getUint32(U+8,!v));const D=_+2+A*12+4,B=[];for(let U=D;U<D+x*16;U+=16){const w={MPType:a.getUint32(U,!v),size:a.getUint32(U+4,!v),dataOffset:a.getUint32(U+8,!v),dependantImages:a.getUint32(U+12,!v),start:-1,end:-1,isFII:!1};w.dataOffset?(w.start=m+w.dataOffset,w.isFII=!1):(w.start=0,w.isFII=!0),w.end=w.start+w.size,B.push(w)}if(this.options.extractNonFII&&B.length){const U=new Blob([a]),w=[];for(const O of B){if(O.isFII&&!this.options.extractFII)continue;const I=U.slice(O.start,O.end+1,"image/jpeg");w.push(I)}t(w)}}}o+=2+a.getUint16(o+2)}})}}const K$=async i=>{const e=q$(i);if(!e)throw new t4("Gain map XMP metadata not found");const n=await new Y$({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new e4("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},HB=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=r=>{t(r)},n.src=URL.createObjectURL(i)});class n4 extends Pa{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new UM}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new j$({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new mi,sdr:new mi});return new XC({width:16,height:16,type:Hr,colorSpace:fo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const a=r?new Blob([r],{type:"image/jpeg"}):void 0,s=new Blob([n],{type:"image/jpeg"});let o,c,f=!1;if(typeof createImageBitmap>"u"){const v=await Promise.all([a?HB(a):Promise.resolve(void 0),HB(s)]);c=v[0],o=v[1],f=!0}else{const v=await Promise.all([a?createImageBitmap(a,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:"flipY"})]);c=v[0],o=v[1]}const d=new mi(c||new ImageData(2,2),ph,Br,Br,Qn,Vw,Lr,Ji,1,fo);d.flipY=f,d.needsUpdate=!0;const m=new mi(o,ph,Br,Br,Qn,Vw,Lr,Ji,1,$n);m.flipY=f,m.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=d,e.material.sdr=m,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class J$ extends n4{load([e,t,n],r,a,s){const o=this.prepareQuadRenderer();let c,f,d;const m=async()=>{if(c&&f&&d){try{await this.render(o,d,c,f)}catch(L){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof s=="function"&&s(L),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),o.disposeOnDemandRenderer()}};let v=!0,y=0,_=0,A=!0,S=0,x=0,E=!0,D=0,B=0;const U=()=>{if(typeof a=="function"){const L=y+S+D,R=_+x+B,F=v&&A&&E;a(new ProgressEvent("progress",{lengthComputable:F,loaded:R,total:L}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const w=new La(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(e,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");c=L,await m()},L=>{v=L.lengthComputable,_=L.loaded,y=L.total,U()},L=>{this.manager.itemError(e),typeof s=="function"&&s(L)});const O=new La(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(t,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");f=L,await m()},L=>{A=L.lengthComputable,x=L.loaded,S=L.total,U()},L=>{this.manager.itemError(t),typeof s=="function"&&s(L)});const I=new La(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(n,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");d=JSON.parse(L),await m()},L=>{E=L.lengthComputable,B=L.loaded,D=L.total,U()},L=>{this.manager.itemError(n),typeof s=="function"&&s(L)}),o}}class Z$ extends n4{load(e,t,n,r){const a=this.prepareQuadRenderer(),s=new La(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(o);let f,d,m;try{const v=await K$(c);f=v.sdr,d=v.gainMap,m=v.metadata}catch(v){if(v instanceof t4||v instanceof e4)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},f=c;else throw v}try{await this.render(a,m,f,d)}catch(v){this.manager.itemError(e),typeof r=="function"&&r(v),a.disposeOnDemandRenderer();return}typeof t=="function"&&t(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},n,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),a}}const $y={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},i4="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Tg=i=>Array.isArray(i),$C=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function GM({files:i=$C,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:r}={}){t&&(jC(t),i=$y[t],e=i4);const a=Tg(i),{extension:s,isCubemap:o}=qC(i),c=YC(s);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+i);const f=dr(y=>y.gl);X.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function y(){Xo.clear(c,a?[i]:i)}f.domElement.addEventListener("webglcontextlost",y,{once:!0})},[i,f.domElement]);const d=Xo(c,a?[i]:i,y=>{(s==="webp"||s==="jpg"||s==="jpeg")&&y.setRenderer(f),y.setPath==null||y.setPath(e),r&&r(y)});let m=a?d[0]:d;if(s==="jpg"||s==="jpeg"||s==="webp"){var v;m=(v=m.renderTarget)==null?void 0:v.texture}return m.mapping=o?zc:Rg,m.colorSpace=n??(o?"srgb":"srgb-linear"),m}const Q$={files:$C,path:"",preset:void 0,extensions:void 0};GM.preload=i=>{const e={...Q$,...i};let{files:t,path:n=""}=e;const{preset:r,extensions:a}=e;r&&(jC(r),t=$y[r],n=i4);const{extension:s}=qC(t);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=YC(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);Xo.preload(o,Tg(t)?[t]:t,c=>{c.setPath==null||c.setPath(n),a&&a(c)})};const ej={files:$C,preset:void 0};GM.clear=i=>{const e={...ej,...i};let{files:t}=e;const{preset:n}=e;n&&(jC(n),t=$y[n]);const{extension:r}=qC(t),a=YC(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Xo.clear(a,Tg(t)?[t]:t)};function jC(i){if(!(i in $y))throw new Error("Preset must be one of: "+Object.keys($y).join(", "))}function qC(i){var e;const t=Tg(i)&&i.length===6,n=Tg(i)&&i.length===3&&i.some(s=>s.endsWith("json")),r=Tg(i)?i[0]:i;return{extension:t?"cube":n?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function YC(i){return i==="cube"?eU:i==="hdr"?R$:i==="exr"?D$:i==="jpg"||i==="jpeg"?Z$:i==="webp"?J$:null}const tj=i=>i.current&&i.current.isScene,nj=i=>tj(i)?i.current:i;function KC(i,e,t,n,r={}){var a,s,o,c;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const f=nj(e||t),d=f.background,m=f.environment,v={backgroundBlurriness:f.backgroundBlurriness,backgroundIntensity:f.backgroundIntensity,backgroundRotation:(a=(s=f.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:f.environmentIntensity,environmentRotation:(o=(c=f.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&o!==void 0?o:[0,0,0]};return i!=="only"&&(f.environment=n),i&&(f.background=n),Oc(f,r),()=>{i!=="only"&&(f.environment=m),i&&(f.background=d),Oc(f,v)}}function JC({scene:i,background:e=!1,map:t,...n}){const r=dr(a=>a.scene);return X.useLayoutEffect(()=>{if(t)return KC(e,i,r,t,n)}),null}function r4({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...c}){const f=GM(c),d=dr(m=>m.scene);return X.useLayoutEffect(()=>KC(i,e,d,f,{backgroundBlurriness:t??n,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),X.useEffect(()=>()=>{f.dispose()},[f]),null}function ij({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:r=1,map:a,background:s=!1,blur:o,backgroundBlurriness:c,backgroundIntensity:f,backgroundRotation:d,environmentIntensity:m,environmentRotation:v,scene:y,files:_,path:A,preset:S=void 0,extensions:x}){const E=dr(I=>I.gl),D=dr(I=>I.scene),B=X.useRef(null),[U]=X.useState(()=>new ap),w=X.useMemo(()=>{const I=new nC(n);return I.texture.type=Hr,I},[n]);X.useEffect(()=>()=>{w.dispose()},[w]),X.useLayoutEffect(()=>{if(r===1){const I=E.autoClear;E.autoClear=!0,B.current.update(E,U),E.autoClear=I}return KC(s,y,D,w.texture,{backgroundBlurriness:o??c,backgroundIntensity:f,backgroundRotation:d,environmentIntensity:m,environmentRotation:v})},[i,U,w.texture,y,D,s,r,E]);let O=1;return Eh(()=>{if(r===1/0||O<r){const I=E.autoClear;E.autoClear=!0,B.current.update(E,U),E.autoClear=I,O++}}),X.createElement(X.Fragment,null,aX(X.createElement(X.Fragment,null,i,X.createElement("cubeCamera",{ref:B,args:[e,t,w]}),_||S?X.createElement(r4,{background:!0,files:_,preset:S,path:A,extensions:x}):a?X.createElement(JC,{background:!0,map:a,extensions:x}):null),U))}function rj(i){var e,t,n,r;const a=GM(i),s=i.map||a;X.useMemo(()=>vp({GroundProjectedEnvImpl:FX}),[]),X.useEffect(()=>()=>{a.dispose()},[a]);const o=X.useMemo(()=>[s],[s]),c=(e=i.ground)==null?void 0:e.height,f=(t=i.ground)==null?void 0:t.radius,d=(n=(r=i.ground)==null?void 0:r.scale)!==null&&n!==void 0?n:1e3;return X.createElement(X.Fragment,null,X.createElement(JC,dh({},i,{map:s})),X.createElement("groundProjectedEnvImpl",{args:o,scale:d,height:c,radius:f}))}function aj(i){return i.ground?X.createElement(rj,i):i.map?X.createElement(JC,i):i.children?X.createElement(ij,i):X.createElement(r4,i)}class sj extends Wi{constructor(){super({uniforms:{time:{value:0},pixelRatio:{value:1}},vertexShader:`
        uniform float pixelRatio;
        uniform float time;
        attribute float size;  
        attribute float speed;  
        attribute float opacity;
        attribute vec3 noise;
        attribute vec3 color;
        varying vec3 vColor;
        varying float vOpacity;

        void main() {
          vec4 modelPosition = modelMatrix * vec4(position, 1.0);
          modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
          modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
          modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
          vec4 viewPosition = viewMatrix * modelPosition;
          vec4 projectionPostion = projectionMatrix * viewPosition;
          gl_Position = projectionPostion;
          gl_PointSize = size * 25. * pixelRatio;
          gl_PointSize *= (1.0 / - viewPosition.z);
          vColor = color;
          vOpacity = opacity;
        }
      `,fragmentShader:`
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
          float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
          float strength = 0.05 / distanceToCenter - 0.1;
          gl_FragColor = vec4(vColor, strength * vOpacity);
          #include <tonemapping_fragment>
          #include <${P$>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}get pixelRatio(){return this.uniforms.pixelRatio.value}set pixelRatio(e){this.uniforms.pixelRatio.value=e}}const a4=i=>i&&i.constructor===Float32Array,oj=i=>[i.r,i.g,i.b],s4=i=>i instanceof ot||i instanceof ue||i instanceof ni,o4=i=>Array.isArray(i)?i:s4(i)?i.toArray():[i,i,i];function $0(i,e,t){return X.useMemo(()=>{if(e!==void 0){if(a4(e))return e;if(e instanceof Bt){const n=Array.from({length:i*3},()=>oj(e)).flat();return Float32Array.from(n)}else if(s4(e)||Array.isArray(e)){const n=Array.from({length:i*3},()=>o4(e)).flat();return Float32Array.from(n)}return Float32Array.from({length:i},()=>e)}return Float32Array.from({length:i},t)},[e])}const lj=X.forwardRef(({noise:i=1,count:e=100,speed:t=1,opacity:n=1,scale:r=1,size:a,color:s,children:o,...c},f)=>{X.useMemo(()=>vp({SparklesImplMaterial:sj}),[]);const d=X.useRef(null),m=dr(D=>D.viewport.dpr),v=o4(r),y=X.useMemo(()=>Float32Array.from(Array.from({length:e},()=>v.map(Sr.randFloatSpread)).flat()),[e,...v]),_=$0(e,a,Math.random),A=$0(e,n),S=$0(e,t),x=$0(e*3,i),E=$0(s===void 0?e*3:e,a4(s)?s:new Bt(s),()=>1);return Eh(D=>{d.current&&d.current.material&&(d.current.material.time=D.clock.elapsedTime)}),X.useImperativeHandle(f,()=>d.current,[]),X.createElement("points",dh({key:`particle-${e}-${JSON.stringify(r)}`},c,{ref:d}),X.createElement("bufferGeometry",null,X.createElement("bufferAttribute",{attach:"attributes-position",args:[y,3]}),X.createElement("bufferAttribute",{attach:"attributes-size",args:[_,1]}),X.createElement("bufferAttribute",{attach:"attributes-opacity",args:[A,1]}),X.createElement("bufferAttribute",{attach:"attributes-speed",args:[S,1]}),X.createElement("bufferAttribute",{attach:"attributes-color",args:[E,3]}),X.createElement("bufferAttribute",{attach:"attributes-noise",args:[x,3]})),o||X.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:m,depthWrite:!1}))});/**
 * postprocessing v6.37.4 build Sat Jun 07 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var cT=1/1e3,cj=1e3,uj=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*cT}get fixedDelta(){return this._fixedDelta*cT}set fixedDelta(i){this._fixedDelta=i*cj}get elapsed(){return this._elapsed*cT}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},fj=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new Fn;return t.setAttribute("position",new si(i,3)),t.setAttribute("uv",new si(e,2)),t})(),Es=class u2{static get fullscreenGeometry(){return fj}constructor(e="Pass",t=new ap,n=new c_){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ki(u2.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new ap),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Vc){}render(e,t,n,r,a){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof ar||t instanceof vr||t instanceof mi||t instanceof u2)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},hj=class extends Es{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,e,t,n,r){const a=i.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},dj=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,S_="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",l4=class extends Wi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new sn(null),opacity:new sn(1)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dj,vertexShader:S_})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},pj=class extends Es{constructor(i,e=!0){super("CopyPass"),this.fullscreenMaterial=new l4,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new ar(1,1,{minFilter:Qn,magFilter:Qn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,e,t,n,r){this.fullscreenMaterial.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){this.autoResize&&this.renderTarget.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Ji?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===$n&&(this.renderTarget.texture.colorSpace=$n))}},GB=new Bt,c4=class extends Es{constructor(i=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,e,t){this.color=i,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,e,t,n,r){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=i.getClearAlpha(),c=a!==null,f=s>=0;c?(i.getClearColor(GB),i.setClearColor(a,f?s:o)):f&&i.setClearAlpha(s),i.setRenderTarget(this.renderToScreen?null:e),i.clear(this.color,this.depth,this.stencil),c?i.setClearColor(GB,o):f&&i.setClearAlpha(o)}},mj=class extends Es{constructor(i,e){super("MaskPass",i,e),this.needsSwap=!1,this.clearPass=new c4(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,e,t,n,r){const a=i.getContext(),s=i.state.buffers,o=this.scene,c=this.camera,f=this.clearPass,d=this.inverted?0:1,m=1-d;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,d,4294967295),s.stencil.setClear(m),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(i,null):(f.render(i,e),f.render(i,t))),this.renderToScreen?(i.setRenderTarget(null),i.render(o,c)):(i.setRenderTarget(e),i.render(o,c),i.setRenderTarget(t),i.render(o,c)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},gj=class{constructor(i=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:n=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,r,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new pj,this.depthTexture=null,this.passes=[],this.timer=new uj,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const e=this.inputBuffer,t=this.multisampling;t>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const e=i.getSize(new ot),t=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Ji&&i.outputColorSpace===$n&&(this.inputBuffer.texture.colorSpace=$n,this.outputBuffer.texture.colorSpace=$n,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(i,t,n)}}replaceRenderer(i,e=!0){const t=this.renderer,n=t.domElement.parentNode;return this.setRenderer(i),e&&n!==null&&(n.removeChild(t.domElement),n.appendChild(i.domElement)),t}createDepthTexture(){const i=this.depthTexture=new d_;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=rp,i.type=ip):i.type=zl,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,e,t,n){const r=this.renderer,a=r===null?new ot:r.getDrawingBufferSize(new ot),s={minFilter:Qn,magFilter:Qn,stencilBuffer:e,depthBuffer:i,type:t},o=new ar(a.width,a.height,s);return n>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=n),t===Ji&&r!==null&&r.outputColorSpace===$n&&(o.texture.colorSpace=$n),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(i){for(const e of this.passes)e.mainScene=i}setMainCamera(i){for(const e of this.passes)e.mainCamera=i}addPass(i,e){const t=this.passes,n=this.renderer,r=n.getDrawingBufferSize(new ot),a=n.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(r.width,r.height),i.initialize(n,a,s),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,i):t.push(i),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(i of t)i.setDepthTexture(o)}else i.setDepthTexture(this.depthTexture)}removePass(i){const e=this.passes,t=e.indexOf(i);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const a=(o,c)=>o||c.needsDepthTexture;e.reduce(a,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(i.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const e=this.renderer,t=this.copyPass;let n=this.inputBuffer,r=this.outputBuffer,a=!1,s,o,c;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(e,n,r,i,a),f.needsSwap&&(a&&(t.renderToScreen=f.renderToScreen,s=e.getContext(),o=e.state.buffers.stencil,o.setFunc(s.NOTEQUAL,1,4294967295),t.render(e,n,r,i,a),o.setFunc(s.EQUAL,1,4294967295)),c=n,n=r,r=c),f instanceof mj?a=!0:f instanceof hj&&(a=!1))}setSize(i,e,t){const n=this.renderer,r=n.getSize(new ot);(i===void 0||e===void 0)&&(i=r.width,e=r.height),(r.width!==i||r.height!==e)&&n.setSize(i,e,t);const a=n.getDrawingBufferSize(new ot);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const s of this.passes)s.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Es.fullscreenGeometry.dispose()}},oh={NONE:0,DEPTH:1,CONVOLUTION:2},pi={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},vj=class{constructor(){this.shaderParts=new Map([[pi.FRAGMENT_HEAD,null],[pi.FRAGMENT_MAIN_UV,null],[pi.FRAGMENT_MAIN_IMAGE,null],[pi.VERTEX_HEAD,null],[pi.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=oh.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=fo}},uT=!1,VB=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case fa:t=this.materialsFlatShadedDoubleSide;break;case Zr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case fa:t=this.materialsDoubleSide;break;case Zr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof Wi))return i.clone();const e=i.uniforms,t=new Map;for(const r in e){const a=e[r].value;a.isRenderTargetTexture&&(e[r].value=null,t.set(r,a))}const n=i.clone();for(const r of t)e[r[0]].value=r[1],n.uniforms[r[0]].value=r[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const e=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const t of e)t.uniforms=Object.assign({},i.uniforms),t.side=Fl;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=Zr,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=fa,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=Zr,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=fa,n})}}render(i,e,t){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,uT){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),i.render(e,t);for(const a of r)a[0].material=a[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,i.render(e,t),e.overrideMaterial=r}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of i)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return uT}static set workaroundEnabled(i){uT=i}},$f=-1,Qr=class extends po{constructor(i,e=$f,t=$f,n=1){super(),this.resizable=i,this.baseSize=new ot(1,1),this.preferredSize=new ot(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new ot,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==$f?t.width=e.width:e.height!==$f?t.width=Math.round(e.height*(i.width/Math.max(i.height,1))):t.width=Math.round(i.width*n),e.height!==$f?t.height=e.height:e.width!==$f?t.height=Math.round(e.width/Math.max(i.width/Math.max(i.height,1),1)):t.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar($f),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,e){(this.baseSize.width!==i||this.baseSize.height!==e)&&(this.baseSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,e){(this.preferredSize.width!==i||this.preferredSize.height!==e)&&(this.preferredSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return $f}},Yn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},yj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",_j="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",xj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",bj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Sj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Mj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Ej="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Aj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Tj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",wj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Cj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Rj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Dj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Bj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Lj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Ij="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Pj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Nj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Oj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Uj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Fj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",zj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Hj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Gj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Vj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",kj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Wj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Xj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",$j="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",jj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",qj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Yj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Kj=new Map([[Yn.ADD,yj],[Yn.ALPHA,_j],[Yn.AVERAGE,xj],[Yn.COLOR,bj],[Yn.COLOR_BURN,Sj],[Yn.COLOR_DODGE,Mj],[Yn.DARKEN,Ej],[Yn.DIFFERENCE,Aj],[Yn.DIVIDE,Tj],[Yn.DST,null],[Yn.EXCLUSION,wj],[Yn.HARD_LIGHT,Cj],[Yn.HARD_MIX,Rj],[Yn.HUE,Dj],[Yn.INVERT,Bj],[Yn.INVERT_RGB,Lj],[Yn.LIGHTEN,Ij],[Yn.LINEAR_BURN,Pj],[Yn.LINEAR_DODGE,Nj],[Yn.LINEAR_LIGHT,Oj],[Yn.LUMINOSITY,Uj],[Yn.MULTIPLY,Fj],[Yn.NEGATION,zj],[Yn.NORMAL,Hj],[Yn.OVERLAY,Gj],[Yn.PIN_LIGHT,Vj],[Yn.REFLECT,kj],[Yn.SATURATION,Wj],[Yn.SCREEN,Xj],[Yn.SOFT_LIGHT,$j],[Yn.SRC,jj],[Yn.SUBTRACT,qj],[Yn.VIVID_LIGHT,Yj]]),Jj=class extends po{constructor(i,e=1){super(),this._blendFunction=i,this.opacity=new sn(e)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return Kj.get(this.blendFunction)}},fp=class extends po{constructor(i,e,{attributes:t=oh.NONE,blendFunction:n=Yn.NORMAL,defines:r=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=i,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=a,this.extensions=s,this.blendMode=new Jj(n),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=fo,this._outputColorSpace=Il}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,e=Vc){}update(i,e,t){}setSize(i,e){}initialize(i,e,t){}dispose(){for(const i of Object.keys(this)){const e=this[i];(e instanceof ar||e instanceof vr||e instanceof mi||e instanceof Es)&&this[i].dispose()}}},VM={MEDIUM:2,LARGE:3},Zj=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Qj="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",eq=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],tq=class extends Wi{constructor(i=new ni){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new sn(null),texelSize:new sn(new ni),scale:new sn(1),kernel:new sn(0)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Zj,vertexShader:Qj}),this.setTexelSize(i.x,i.y),this.kernelSize=VM.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return eq[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e,i*.5,e*.5)}setSize(i,e){const t=1/i,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},u4=class extends Es{constructor({kernelSize:i=VM.MEDIUM,resolutionScale:e=.5,width:t=Qr.AUTO_SIZE,height:n=Qr.AUTO_SIZE,resolutionX:r=t,resolutionY:a=n}={}){super("KawaseBlurPass"),this.renderTargetA=new ar(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new Qr(this,r,a,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight)),this._blurMaterial=new tq,this._blurMaterial.kernelSize=i,this.copyMaterial=new l4}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,r){const a=this.scene,s=this.camera,o=this.renderTargetA,c=this.renderTargetB,f=this.blurMaterial,d=f.kernelSequence;let m=e;this.fullscreenMaterial=f;for(let v=0,y=d.length;v<y;++v){const _=(v&1)===0?o:c;f.kernel=d[v],f.inputBuffer=m.texture,i.setRenderTarget(_),i.render(a,s),m=_}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=m.texture,i.setRenderTarget(this.renderToScreen?null:t),i.render(a,s)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e);const n=t.width,r=t.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Ji?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===$n&&(this.renderTargetA.texture.colorSpace=$n,this.renderTargetB.texture.colorSpace=$n))}static get AUTO_SIZE(){return Qr.AUTO_SIZE}},nq=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,iq=class extends Wi{constructor(i=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:xh.replace(/\D+/g,"")},uniforms:{inputBuffer:new sn(null),threshold:new sn(0),smoothing:new sn(1),range:new sn(null)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:nq,vertexShader:S_}),this.colorOutput=i,this.luminanceRange=e}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},rq=class extends Es{constructor({renderTarget:i,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:r=Qr.AUTO_SIZE,height:a=Qr.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("LuminancePass"),this.fullscreenMaterial=new iq(t,e),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new Qr(this,s,o,n);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,e,t,n,r){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}initialize(i,e,t){t!==void 0&&t!==Ji&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},aq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,sq="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",oq=class extends Wi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new sn(null),texelSize:new sn(new ot)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:aq,vertexShader:sq})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},lq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,cq="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",uq=class extends Wi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new sn(null),supportBuffer:new sn(null),texelSize:new sn(new ot),radius:new sn(.85)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:lq,vertexShader:cq})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},fq=class extends Es{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new oq,this.upsamplingMaterial=new uq,this.resolution=new ot}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<i;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=i-1;t<n;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,e,t,n,r){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:c}=this,{downsamplingMipmaps:f,upsamplingMipmaps:d}=this;let m=e;this.fullscreenMaterial=o;for(let v=0,y=f.length;v<y;++v){const _=f[v];o.setSize(m.width,m.height),o.inputBuffer=m.texture,i.setRenderTarget(_),i.render(a,s),m=_}this.fullscreenMaterial=c;for(let v=d.length-1;v>=0;--v){const y=d[v];c.setSize(m.width,m.height),c.inputBuffer=m.texture,c.supportBuffer=f[v].texture,i.setRenderTarget(y),i.render(a,s),m=y}}setSize(i,e){const t=this.resolution;t.set(i,e);let n=t.width,r=t.height;for(let a=0,s=this.downsamplingMipmaps.length;a<s;++a)n=Math.round(n*.5),r=Math.round(r*.5),this.downsamplingMipmaps[a].setSize(n,r),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(n,r)}initialize(i,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of n)r.texture.type=t;if(t!==Ji)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===$n)for(const r of n)r.texture.colorSpace=$n}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},hq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,dq=class extends fp{constructor({blendFunction:i=Yn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:n=!1,intensity:r=1,radius:a=.85,levels:s=8,kernelSize:o=VM.LARGE,resolutionScale:c=.5,width:f=Qr.AUTO_SIZE,height:d=Qr.AUTO_SIZE,resolutionX:m=f,resolutionY:v=d}={}){super("BloomEffect",hq,{blendFunction:i,uniforms:new Map([["map",new sn(null)],["intensity",new sn(r)]])}),this.renderTarget=new ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new u4({kernelSize:o}),this.luminancePass=new rq({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new fq,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const y=this.resolution=new Qr(this,m,v,c);y.addEventListener("change",_=>this.setSize(y.baseWidth,y.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,e,t){const n=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(i,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,r.renderTarget):this.blurPass.render(i,r.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,e):this.blurPass.render(i,e,n)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(i,e),this.mipmapBlurPass.setSize(i,e)}initialize(i,e,t){this.blurPass.initialize(i,e,t),this.luminancePass.initialize(i,e,t),this.mipmapBlurPass.initialize(i,e,t),t!==void 0&&(this.renderTarget.texture.type=t,i!==null&&i.outputColorSpace===$n&&(this.renderTarget.texture.colorSpace=$n))}},pq="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",mq=class extends fp{constructor({blendFunction:i=Yn.SRC,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",pq,{blendFunction:i,uniforms:new Map([["brightness",new sn(e)],["contrast",new sn(t)]])}),this.inputColorSpace=$n}get brightness(){return this.uniforms.get("brightness").value}set brightness(i){this.uniforms.get("brightness").value=i}getBrightness(){return this.brightness}setBrightness(i){this.brightness=i}get contrast(){return this.uniforms.get("contrast").value}set contrast(i){this.uniforms.get("contrast").value=i}getContrast(){return this.contrast}setContrast(i){this.contrast=i}},f4={RED:0,GREEN:1},ZC={DISCARD:0,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},gq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,ab=class extends Wi{constructor(i=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:i?"2":"1"},uniforms:{inputBuffer:new sn(null),cocBuffer:new sn(null),texelSize:new sn(new ot),kernel64:new sn(null),kernel16:new sn(null),scale:new sn(1)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:gq,vertexShader:S_}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}set cocBuffer(i){this.uniforms.cocBuffer.value=i}setCoCBuffer(i){this.uniforms.cocBuffer.value=i}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(i){return this.scale}setScale(i){this.scale=i}generateKernel(){const i=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let n=0,r=0;for(let a=0,s=Math.sqrt(80);a<80;++a){const o=a*i,c=Math.sqrt(a)/s,f=c*Math.cos(o),d=c*Math.sin(o);a%5===0?(t[r++]=f,t[r++]=d):(e[n++]=f,e[n++]=d)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e)}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}};function kB(i,e,t){return i*(e-t)-e}function f2(i,e,t){return Math.min(Math.max((i+e)/(e-t),0),1)}var vq=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,yq=class extends Wi{constructor(i){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new sn(null),focusDistance:new sn(0),focusRange:new sn(0),cameraNear:new sn(.3),cameraFar:new sn(1e3)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vq,vertexShader:S_}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(i)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=Vc){this.depthBuffer=i,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(i){this.uniforms.focusDistance.value=i}get worldFocusDistance(){return-kB(this.focusDistance,this.near,this.far)}set worldFocusDistance(i){this.focusDistance=f2(-i,this.near,this.far)}getFocusDistance(i){this.uniforms.focusDistance.value=i}setFocusDistance(i){this.uniforms.focusDistance.value=i}get focalLength(){return this.focusRange}set focalLength(i){this.focusRange=i}get focusRange(){return this.uniforms.focusRange.value}set focusRange(i){this.uniforms.focusRange.value=i}get worldFocusRange(){return-kB(this.focusRange,this.near,this.far)}set worldFocusRange(i){this.focusRange=f2(-i,this.near,this.far)}getFocalLength(i){return this.focusRange}setFocalLength(i){this.focusRange=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof rr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},_q=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,xq=class extends Wi{constructor(i=null){super({name:"MaskMaterial",uniforms:{maskTexture:new sn(i),inputBuffer:new sn(null),strength:new sn(1)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_q,vertexShader:S_}),this.colorChannel=f4.RED,this.maskFunction=ZC.DISCARD}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}set maskTexture(i){this.uniforms.maskTexture.value=i,delete this.defines.MASK_PRECISION_HIGH,i.type!==Ji&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(i){this.maskTexture=i}set colorChannel(i){this.defines.COLOR_CHANNEL=i.toFixed(0),this.needsUpdate=!0}setColorChannel(i){this.colorChannel=i}set maskFunction(i){this.defines.MASK_FUNCTION=i.toFixed(0),this.needsUpdate=!0}setMaskFunction(i){this.maskFunction=i}get inverted(){return this.defines.INVERTED!==void 0}set inverted(i){this.inverted&&!i?delete this.defines.INVERTED:i&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(i){this.inverted=i}get strength(){return this.uniforms.strength.value}set strength(i){this.uniforms.strength.value=i}getStrength(){return this.strength}setStrength(i){this.strength=i}},Wm=class extends Es{constructor(i,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=i,this.input=e}setInput(i){this.input=i}render(i,e,t,n,r){const a=this.fullscreenMaterial.uniforms;e!==null&&a!==void 0&&a[this.input]!==void 0&&(a[this.input].value=e.texture),i.setRenderTarget(this.renderToScreen?null:t),i.render(this.scene,this.camera)}initialize(i,e,t){t!==void 0&&t!==Ji&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},bq=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,Sq=class extends fp{constructor(i,{blendFunction:e,worldFocusDistance:t,worldFocusRange:n,focusDistance:r=0,focalLength:a=.1,focusRange:s=a,bokehScale:o=1,resolutionScale:c=1,width:f=Qr.AUTO_SIZE,height:d=Qr.AUTO_SIZE,resolutionX:m=f,resolutionY:v=d}={}){super("DepthOfFieldEffect",bq,{blendFunction:e,attributes:oh.DEPTH,uniforms:new Map([["nearColorBuffer",new sn(null)],["farColorBuffer",new sn(null)],["nearCoCBuffer",new sn(null)],["farCoCBuffer",new sn(null)],["scale",new sn(1)]])}),this.camera=i,this.renderTarget=new ar(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Wm(new yq(i));const y=this.cocMaterial;y.focusDistance=r,y.focusRange=s,t!==void 0&&(y.worldFocusDistance=t),n!==void 0&&(y.worldFocusRange=n),this.blurPass=new u4({resolutionScale:c,resolutionX:m,resolutionY:v,kernelSize:VM.MEDIUM}),this.maskPass=new Wm(new xq(this.renderTargetCoC.texture));const _=this.maskPass.fullscreenMaterial;_.colorChannel=f4.GREEN,this.maskFunction=ZC.MULTIPLY_RGB,this.bokehNearBasePass=new Wm(new ab(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Wm(new ab(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Wm(new ab(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Wm(new ab(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const A=this.resolution=new Qr(this,m,v,c);A.addEventListener("change",S=>this.setSize(A.baseWidth,A.baseHeight)),this.bokehScale=o}set mainCamera(i){this.camera=i,this.cocMaterial.copyCameraSettings(i)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(i){this.maskFunction!==i&&(this.defines.set("MASK_FUNCTION",i.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=i,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(i){this.bokehNearBasePass.fullscreenMaterial.scale=i,this.bokehNearFillPass.fullscreenMaterial.scale=i,this.bokehFarBasePass.fullscreenMaterial.scale=i,this.bokehFarFillPass.fullscreenMaterial.scale=i,this.maskPass.fullscreenMaterial.strength=i,this.uniforms.get("scale").value=i}getBokehScale(){return this.bokehScale}setBokehScale(i){this.bokehScale=i}getTarget(){return this.target}setTarget(i){this.target=i}calculateFocusDistance(i){const e=this.camera,t=e.position.distanceTo(i);return f2(-t,e.near,e.far)}setDepthTexture(i,e=Vc){this.cocMaterial.depthBuffer=i,this.cocMaterial.depthPacking=e}update(i,e,t){const n=this.renderTarget,r=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(this.target!==null){const o=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=o}this.cocPass.render(i,null,r),this.blurPass.render(i,r,a),this.maskPass.render(i,e,s),this.bokehFarBasePass.render(i,s,n),this.bokehFarFillPass.render(i,n,this.renderTargetFar),this.bokehNearBasePass.render(i,e,n),this.bokehNearFillPass.render(i,n,this.renderTargetNear)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e);const n=t.width,r=t.height;this.cocPass.setSize(i,e),this.blurPass.setSize(i,e),this.maskPass.setSize(i,e),this.renderTargetFar.setSize(i,e),this.renderTargetCoC.setSize(i,e),this.renderTargetMasked.setSize(i,e),this.renderTarget.setSize(n,r),this.renderTargetNear.setSize(n,r),this.renderTargetCoCBlurred.setSize(n,r),this.bokehNearBasePass.fullscreenMaterial.setSize(i,e),this.bokehNearFillPass.fullscreenMaterial.setSize(i,e),this.bokehFarBasePass.fullscreenMaterial.setSize(i,e),this.bokehFarFillPass.fullscreenMaterial.setSize(i,e)}initialize(i,e,t){this.cocPass.initialize(i,e,t),this.maskPass.initialize(i,e,t),this.bokehNearBasePass.initialize(i,e,t),this.bokehNearFillPass.initialize(i,e,t),this.bokehFarBasePass.initialize(i,e,t),this.bokehFarFillPass.initialize(i,e,t),this.blurPass.initialize(i,e,Ji),i.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,i!==null&&i.outputColorSpace===$n&&(this.renderTarget.texture.colorSpace=$n,this.renderTargetNear.texture.colorSpace=$n,this.renderTargetFar.texture.colorSpace=$n,this.renderTargetMasked.texture.colorSpace=$n))}},h4=class extends Es{constructor(i,e,t=null){super("RenderPass",i,e),this.needsSwap=!1,this.clearPass=new c4,this.overrideMaterialManager=t===null?null:new VB(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const e=this.overrideMaterialManager;i!==null?e!==null?e.setMaterial(i):this.overrideMaterialManager=new VB(i):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,e,t,n,r){const a=this.scene,s=this.camera,o=this.selection,c=s.layers.mask,f=a.background,d=i.shadowMap.autoUpdate,m=this.renderToScreen?null:e;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(i,e),i.setRenderTarget(m),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,a,s):i.render(a,s),s.layers.mask=c,a.background=f,i.shadowMap.autoUpdate=d}},Mq="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",Eq=class extends fp{constructor({blendFunction:i=Yn.SRC,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",Mq,{blendFunction:i,uniforms:new Map([["hue",new sn(new ue)],["saturation",new sn(t)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(i){this.uniforms.get("saturation").value=i}getSaturation(){return this.saturation}setSaturation(i){this.saturation=i}get hue(){const i=this.uniforms.get("hue").value;return Math.acos((i.x*3-1)/2)}set hue(i){const e=Math.sin(i),t=Math.cos(i);this.uniforms.get("hue").value.set((2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3)}getHue(){return this.hue}setHue(i){this.hue=i}},j0={DEFAULT:0,ESKIL:1},Aq=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Tq="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",wq=class extends Wi{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new sn(null),normalBuffer:new sn(null),texelSize:new sn(new ot)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Aq,vertexShader:Tq})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=Vc){this.depthBuffer=i,this.depthPacking=e}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e)}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Cq=class extends Es{constructor({normalBuffer:i=null,resolutionScale:e=.5,width:t=Qr.AUTO_SIZE,height:n=Qr.AUTO_SIZE,resolutionX:r=t,resolutionY:a=n}={}){super("DepthDownsamplingPass");const s=new wq;s.normalBuffer=i,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new ar(1,1,{minFilter:Mr,magFilter:Mr,depthBuffer:!1,type:Yi}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Qr(this,r,a,e);o.addEventListener("change",c=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,e=Vc){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e}render(i,e,t,n,r){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(i,e)}initialize(i,e,t){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},Rq=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Dq=class extends fp{constructor({blendFunction:i,eskil:e=!1,technique:t=e?j0.ESKIL:j0.DEFAULT,offset:n=.5,darkness:r=.5}={}){super("VignetteEffect",Rq,{blendFunction:i,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new sn(n)],["darkness",new sn(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(i){this.technique!==i&&(this.defines.set("VIGNETTE_TECHNIQUE",i.toFixed(0)),this.setChanged())}get eskil(){return this.technique===j0.ESKIL}set eskil(i){this.technique=i?j0.ESKIL:j0.DEFAULT}getTechnique(){return this.technique}setTechnique(i){this.technique=i}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}get darkness(){return this.uniforms.get("darkness").value}set darkness(i){this.uniforms.get("darkness").value=i}getDarkness(){return this.darkness}setDarkness(i){this.darkness=i}},Bq=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Lq="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Iq=class extends Wi{constructor(i,e,t,n,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:xh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new sn(null),depthBuffer:new sn(null),resolution:new sn(new ot),texelSize:new sn(new ot),cameraNear:new sn(.3),cameraFar:new sn(1e3),aspect:new sn(1),time:new sn(0)},blending:Gr,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),i&&this.setShaderParts(i),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=Vc){this.depthBuffer=i,this.depthPacking=e}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=Bq.replace(pi.FRAGMENT_HEAD,i.get(pi.FRAGMENT_HEAD)||"").replace(pi.FRAGMENT_MAIN_UV,i.get(pi.FRAGMENT_MAIN_UV)||"").replace(pi.FRAGMENT_MAIN_IMAGE,i.get(pi.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Lq.replace(pi.VERTEX_HEAD,i.get(pi.VERTEX_HEAD)||"").replace(pi.VERTEX_MAIN_SUPPORT,i.get(pi.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const e of i.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(i){for(const e of i.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(i){this.extensions={};for(const e of i)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof rr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,e){const t=this.uniforms;t.resolution.value.set(i,e),t.texelSize.value.set(1/i,1/e),t.aspect.value=i/e}static get Section(){return pi}};function WB(i,e,t){for(const n of e){const r="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),a=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const s of t.entries())s[1]!==null&&t.set(s[0],s[1].replace(a,r))}}function Pq(i,e,t){let n=e.getFragmentShader(),r=e.getVertexShader();const a=n!==void 0&&/mainImage/.test(n),s=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(s&&(t.attributes&oh.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!a&&!s)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let f=c.get(pi.FRAGMENT_HEAD)||"",d=c.get(pi.FRAGMENT_MAIN_UV)||"",m=c.get(pi.FRAGMENT_MAIN_IMAGE)||"",v=c.get(pi.VERTEX_HEAD)||"",y=c.get(pi.VERTEX_MAIN_SUPPORT)||"";const _=new Set,A=new Set;if(s&&(d+=`	${i}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const E=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);y+=`	${i}MainSupport(`,y+=E?`vUv);
`:`);
`;for(const D of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const B of D[1].split(/\s*,\s*/))t.varyings.add(B),_.add(B),A.add(B);for(const D of r.matchAll(o))A.add(D[1])}for(const E of n.matchAll(o))A.add(E[1]);for(const E of e.defines.keys())A.add(E.replace(/\([\w\s,]*\)/g,""));for(const E of e.uniforms.keys())A.add(E);A.delete("while"),A.delete("for"),A.delete("if"),e.uniforms.forEach((E,D)=>t.uniforms.set(i+D.charAt(0).toUpperCase()+D.slice(1),E)),e.defines.forEach((E,D)=>t.defines.set(i+D.charAt(0).toUpperCase()+D.slice(1),E));const S=new Map([["fragment",n],["vertex",r]]);WB(i,A,t.defines),WB(i,A,S),n=S.get("fragment"),r=S.get("vertex");const x=e.blendMode;if(t.blendModes.set(x.blendFunction,x),a){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(m+=e.inputColorSpace===$n?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Il?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const E=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;m+=`${i}MainImage(color0, UV, `,(t.attributes&oh.DEPTH)!==0&&E.test(n)&&(m+="depth, ",t.readDepth=!0),m+=`color1);
	`;const D=i+"BlendOpacity";t.uniforms.set(D,x.opacity),m+=`color0 = blend${x.blendFunction}(color0, color1, ${D});

	`,f+=`uniform float ${D};

`}if(f+=n+`
`,r!==null&&(v+=r+`
`),c.set(pi.FRAGMENT_HEAD,f),c.set(pi.FRAGMENT_MAIN_UV,d),c.set(pi.FRAGMENT_MAIN_IMAGE,m),c.set(pi.VERTEX_HEAD,v),c.set(pi.VERTEX_MAIN_SUPPORT,y),e.extensions!==null)for(const E of e.extensions)t.extensions.add(E)}}var Nq=class extends Es{constructor(i,...e){super("EffectPass"),this.fullscreenMaterial=new Iq(null,null,null,i),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const e of this.effects)e.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const e of this.effects)e.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const e=this.fullscreenMaterial;e.dithering=i,e.needsUpdate=!0}setEffects(i){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=i.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const i=new vj;let e=0;for(const s of this.effects)if(s.blendMode.blendFunction===Yn.DST)i.attributes|=s.getAttributes()&oh.DEPTH;else{if((i.attributes&s.getAttributes()&oh.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${s.name})`);Pq("e"+e++,s,i)}let t=i.shaderParts.get(pi.FRAGMENT_HEAD),n=i.shaderParts.get(pi.FRAGMENT_MAIN_IMAGE),r=i.shaderParts.get(pi.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const s of i.blendModes.values())t+=s.getShaderCode().replace(a,`blend${s.blendFunction}`)+`
`;(i.attributes&oh.DEPTH)!==0?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===$n&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(pi.FRAGMENT_HEAD,t),i.shaderParts.set(pi.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(pi.FRAGMENT_MAIN_UV,r);for(const[s,o]of i.shaderParts)o!==null&&i.shaderParts.set(s,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,e=Vc){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(i,e)}render(i,e,t,n,r){for(const a of this.effects)a.update(i,e,n);if(!this.skipRendering||this.renderToScreen){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,a.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:t),i.render(this.scene,this.camera)}}setSize(i,e){this.fullscreenMaterial.setSize(i,e);for(const t of this.effects)t.setSize(i,e)}initialize(i,e,t){this.renderer=i;for(const n of this.effects)n.initialize(i,e,t);this.updateMaterial(),t!==void 0&&t!==Ji&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},Oq=class extends Es{constructor(i,e,{renderTarget:t,resolutionScale:n=1,width:r=Qr.AUTO_SIZE,height:a=Qr.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new h4(i,e,new gC);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const f=c.getClearPass();f.overrideClearColor=new Bt(7829503),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new ar(1,1,{minFilter:Mr,magFilter:Mr}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new Qr(this,s,o,n);d.addEventListener("change",m=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,a,a)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}};function Ay(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}new ot;new ot;function d4(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var Oo=function i(e,t,n){var r=this;d4(this,i),Ay(this,"dot2",function(a,s){return r.x*a+r.y*s}),Ay(this,"dot3",function(a,s,o){return r.x*a+r.y*s+r.z*o}),this.x=e,this.y=t,this.z=n},Uq=[new Oo(1,1,0),new Oo(-1,1,0),new Oo(1,-1,0),new Oo(-1,-1,0),new Oo(1,0,1),new Oo(-1,0,1),new Oo(1,0,-1),new Oo(-1,0,-1),new Oo(0,1,1),new Oo(0,-1,1),new Oo(0,1,-1),new Oo(0,-1,-1)],XB=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],$B=new Array(512),jB=new Array(512),Fq=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=XB[t]^e&255:n=XB[t]^e>>8&255,$B[t]=$B[t+256]=n,jB[t]=jB[t+256]=Uq[n%12]}};Fq(0);function zq(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function qB(i){var e=zq(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Hq=function i(e){var t=this;d4(this,i),Ay(this,"seed",0),Ay(this,"init",function(n){t.seed=n,t.value=qB(n)}),Ay(this,"value",qB(this.seed)),this.init(e)};new Hq(Math.random());const p4=X.createContext(null),YB=i=>(i.getAttributes()&2)===2,Gq=X.memo(X.forwardRef(({children:i,camera:e,scene:t,resolutionScale:n,enabled:r=!0,renderPriority:a=1,autoClear:s=!0,depthBuffer:o,enableNormalPass:c,stencilBuffer:f,multisampling:d=8,frameBufferType:m=Hr},v)=>{const{gl:y,scene:_,camera:A,size:S}=dr(),x=t||_,E=e||A,[D,B,U]=X.useMemo(()=>{const I=new gj(y,{depthBuffer:o,stencilBuffer:f,multisampling:d,frameBufferType:m});I.addPass(new h4(x,E));let L=null,R=null;return c&&(R=new Oq(x,E),R.enabled=!1,I.addPass(R),n!==void 0&&(L=new Cq({normalBuffer:R.texture,resolutionScale:n}),L.enabled=!1,I.addPass(L))),[I,R,L]},[E,y,o,f,d,m,x,c,n]);X.useEffect(()=>D==null?void 0:D.setSize(S.width,S.height),[D,S]),Eh((I,L)=>{if(r){const R=y.autoClear;y.autoClear=s,f&&!s&&y.clearStencil(),D.render(L),y.autoClear=R}},r?a:0);const w=X.useRef(null);X.useLayoutEffect(()=>{var R;const I=[],L=w.current.__r3f;if(L&&D){const F=L.children;for(let G=0;G<F.length;G++){const V=F[G].object;if(V instanceof fp){const $=[V];if(!YB(V)){let z=null;for(;(z=(R=F[G+1])==null?void 0:R.object)instanceof fp&&!YB(z);)$.push(z),G++}const K=new Nq(E,...$);I.push(K)}else V instanceof Es&&I.push(V)}for(const G of I)D==null||D.addPass(G);B&&(B.enabled=!0),U&&(U.enabled=!0)}return()=>{for(const F of I)D==null||D.removePass(F);B&&(B.enabled=!1),U&&(U.enabled=!1)}},[D,i,E,B,U]),X.useEffect(()=>{const I=y.toneMapping;return y.toneMapping=Nl,()=>{y.toneMapping=I}},[y]);const O=X.useMemo(()=>({composer:D,normalPass:B,downSamplingPass:U,resolutionScale:n,camera:E,scene:x}),[D,B,U,n,E,x]);return X.useImperativeHandle(v,()=>D,[D]),Ct.jsx(p4.Provider,{value:O,children:Ct.jsx("group",{ref:w,children:i})})}));let Vq=0;const KB=new WeakMap,kM=(i,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:n=e==null?void 0:e.opacity,...r}){let a=KB.get(i);if(!a){const c=`@react-three/postprocessing/${i.name}-${Vq++}`;vp({[c]:i}),KB.set(i,a=c)}const s=dr(c=>c.camera),o=xe.useMemo(()=>[...(e==null?void 0:e.args)??[],...r.args??[{...e,...r}]],[JSON.stringify(r)]);return Ct.jsx(a,{camera:s,"blendMode-blendFunction":t,"blendMode-opacity-value":n,...r,args:o})},kq=X.forwardRef(function({blendFunction:i,worldFocusDistance:e,worldFocusRange:t,focusDistance:n,focusRange:r,focalLength:a,bokehScale:s,resolutionScale:o,resolutionX:c,resolutionY:f,width:d,height:m,target:v,depthTexture:y,..._},A){const{camera:S}=X.useContext(p4),x=v!=null,E=X.useMemo(()=>{const D=new Sq(S,{blendFunction:i,worldFocusDistance:e,worldFocusRange:t,focusDistance:n,focusRange:r,focalLength:a,bokehScale:s,resolutionScale:o,resolutionX:c,resolutionY:f,width:d,height:m});x&&(D.target=new ue),y&&D.setDepthTexture(y.texture,y.packing);const B=D.maskPass;return B.maskFunction=ZC.MULTIPLY_RGB_SET_ALPHA,D},[S,i,e,t,n,r,a,s,o,c,f,d,m,x,y]);return X.useEffect(()=>()=>{E.dispose()},[E]),Ct.jsx("primitive",{..._,ref:A,object:E,target:v})}),Wq=kM(dq,{blendFunction:0}),Xq=kM(mq),$q=kM(Eq),jq=kM(Dq);function m4(...i){return e=>i.forEach(t=>function(n,r){typeof n=="function"?n(r):n!=null&&(n.current=r)}(t,e))}function WM(...i){return X.useCallback(m4(...i),i)}function Vr(){return Vr=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Vr.apply(this,arguments)}const QC=X.forwardRef((i,e)=>{const{children:t,...n}=i;return X.Children.toArray(t).some(JB)?X.createElement(X.Fragment,null,X.Children.map(t,r=>JB(r)?X.createElement(h2,Vr({},n,{ref:e}),r.props.children):r)):X.createElement(h2,Vr({},n,{ref:e}),t)});QC.displayName="Slot";const h2=X.forwardRef((i,e)=>{const{children:t,...n}=i;return X.isValidElement(t)?X.cloneElement(t,{...qq(n,t.props),ref:m4(e,t.ref)}):X.Children.count(t)>1?X.Children.only(null):null});h2.displayName="SlotClone";const g4=({children:i})=>X.createElement(X.Fragment,null,i);function JB(i){return X.isValidElement(i)&&i.type===g4}function qq(i,e){const t={...e};for(const n in e){const r=i[n],a=e[n];/^on[A-Z]/.test(n)?t[n]=(...s)=>{a==null||a(...s),r==null||r(...s)}:n==="style"?t[n]={...r,...a}:n==="className"&&(t[n]=[r,a].filter(Boolean).join(" "))}return{...i,...t}}const Yq=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((i,e)=>({...i,[e]:X.forwardRef((t,n)=>{const{asChild:r,...a}=t,s=r?QC:e;return X.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),X.createElement(s,Vr({},a,{ref:n}))})}),{}),jy=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{};var Kq=yN();const eR=ho(Kq),Jq=X.forwardRef((i,e)=>{var t,n;const{containerRef:r,style:a,...s}=i,o=(t=r==null?void 0:r.current)!==null&&t!==void 0?t:globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,[,c]=X.useState({});return jy(()=>{c({})},[]),o?eR.createPortal(X.createElement(Yq.div,Vr({"data-radix-portal":""},s,{ref:e,style:o===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...a}:void 0})),o):null}),Zq=Jq;var ZB=Object.prototype.hasOwnProperty;function qy(i,e){var t,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&qy(i[n],e[n]););return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(ZB.call(i,t)&&++n&&!ZB.call(e,t)||!(t in e)||!qy(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}function XM(i,e){if(Object.is(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(i[t[n]],e[t[n]]))return!1;return!0}var $M=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};$M.prototype._test=function(e){var t=this.fn;try{wg(this.modifiers.slice(),t)(e)}catch{t=function(){return!1}}try{return wg(this.modifiers.slice(),t)(e)}catch{return!1}};$M.prototype._check=function(e){try{wg(this.modifiers.slice(),this.fn)(e)}catch{if(wg(this.modifiers.slice(),function(n){return n})(!1))return}if(!wg(this.modifiers.slice(),this.fn)(e))throw null};$M.prototype._testAsync=function(e){var t=this;return new Promise(function(n,r){y4(t.modifiers.slice(),t.fn)(e).then(function(a){a?n(e):r(null)}).catch(function(a){return r(a)})})};function v4(i,e){return e===void 0&&(e="simple"),typeof i=="object"?i[e]:i}function wg(i,e){if(i.length){var t=i.shift(),n=wg(i,e);return t.perform(n)}else return v4(e)}function y4(i,e){if(i.length){var t=i.shift(),n=y4(i,e);return t.performAsync(n)}else return function(r){return Promise.resolve(v4(e,"async")(r))}}var Qq=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},tR=function(i){function e(t,n,r,a){for(var s=[],o=arguments.length-4;o-- >0;)s[o]=arguments[o+4];i.call(this,s),i.captureStackTrace&&i.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=r,this.target=a}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e}(Error),Hc=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Hc.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];return n.chain.push(new $M(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}};Hc.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new Qq(t,e.simple,e.async)),this};Hc.prototype._clone=function(){return new Hc(this.chain.slice(),this.nextRuleModifiers.slice())};Hc.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Hc.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(r){t.push(new tR(n,e,r))}}),t};Hc.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new tR(t,e,n)}})};Hc.prototype.testAsync=function(e){var t=this;return new Promise(function(n,r){_4(e,t.chain.slice(),n,r)})};function _4(i,e,t,n){if(e.length){var r=e.shift();r._testAsync(i).then(function(){_4(i,e,t,n)},function(a){n(new tR(r,i,a))})}else t(i)}function Vs(){return typeof Proxy!==void 0?x4(new Hc):d2(new Hc)}var Yy={};Vs.extend=function(i){Object.assign(Yy,i)};Vs.clearCustomRules=function(){Yy={}};function x4(i){return new Proxy(i,{get:function(t,n){if(n in t)return t[n];var r=x4(i._clone());if(n in XS)return r._applyModifier(XS[n],n);if(n in Yy)return r._applyRule(Yy[n],n);if(n in p2)return r._applyRule(p2[n],n)}})}function d2(i){var e=function(r,a){return Object.keys(r).forEach(function(s){a[s]=function(){for(var o=[],c=arguments.length;c--;)o[c]=arguments[c];var f=d2(a._clone()),d=f._applyRule(r[s],s).apply(void 0,o);return d}}),a},t=e(p2,i),n=e(Yy,t);return Object.keys(XS).forEach(function(r){Object.defineProperty(n,r,{get:function(){var a=d2(n._clone());return a._applyModifier(XS[r],r)}})}),n}var XS={not:{simple:function(i){return function(e){return!i(e)}},async:function(i){return function(e){return Promise.resolve(i(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(i){return function(e){return sb(e).some(function(t){try{return i(t)}catch{return!1}})}},async:function(i){return function(e){return Promise.all(sb(e).map(function(t){try{return i(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(i){return function(e){return e!==!1&&sb(e).every(i)}},async:function(i){return function(e){return Promise.all(sb(e).map(i)).then(function(t){return t.every(Boolean)})}}}};function sb(i){return typeof i=="string"?i.split(""):i}var p2={equal:function(i){return function(e){return e==i}},exact:function(i){return function(e){return e===i}},number:function(i){return i===void 0&&(i=!0),function(e){return typeof e=="number"&&(i||isFinite(e))}},integer:function(){return function(i){var e=Number.isInteger||eY;return e(i)}},numeric:function(){return function(i){return!isNaN(parseFloat(i))&&isFinite(i)}},string:function(){return Xm("string")},boolean:function(){return Xm("boolean")},undefined:function(){return Xm("undefined")},null:function(){return Xm("null")},array:function(){return Xm("array")},object:function(){return Xm("object")},instanceOf:function(i){return function(e){return e instanceof i}},pattern:function(i){return function(e){return i.test(e)}},lowercase:function(){return function(i){return/^([a-z]+\s*)+$/.test(i)}},uppercase:function(){return function(i){return/^([A-Z]+\s*)+$/.test(i)}},vowel:function(){return function(i){return/^[aeiou]+$/i.test(i)}},consonant:function(){return function(i){return/^(?=[^aeiou])([a-z]+)$/i.test(i)}},first:function(i){return function(e){return e[0]==i}},last:function(i){return function(e){return e[e.length-1]==i}},empty:function(){return function(i){return i.length===0}},length:function(i,e){return function(t){return t.length>=i&&t.length<=(e||i)}},minLength:function(i){return function(e){return e.length>=i}},maxLength:function(i){return function(e){return e.length<=i}},negative:function(){return function(i){return i<0}},positive:function(){return function(i){return i>=0}},between:function(i,e){return function(t){return t>=i&&t<=e}},range:function(i,e){return function(t){return t>=i&&t<=e}},lessThan:function(i){return function(e){return e<i}},lessThanOrEqual:function(i){return function(e){return e<=i}},greaterThan:function(i){return function(e){return e>i}},greaterThanOrEqual:function(i){return function(e){return e>=i}},even:function(){return function(i){return i%2===0}},odd:function(){return function(i){return i%2!==0}},includes:function(i){return function(e){return~e.indexOf(i)}},schema:function(i){return tY(i)},passesAnyOf:function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];return function(t){return i.some(function(n){return n.test(t)})}},optional:function(i,e){return e===void 0&&(e=!1),function(t){return e&&typeof t=="string"&&t.trim()===""||t!=null&&i.check(t),!0}}};function Xm(i){return function(e){return Array.isArray(e)&&i==="array"||e===null&&i==="null"||typeof e===i}}function eY(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}function tY(i){return{simple:function(e){var t=[];if(Object.keys(i).forEach(function(n){var r=i[n];try{r.check((e||{})[n])}catch(a){a.target=n,t.push(a)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(i).map(function(r){var a=i[r];return a.testAsync((e||{})[r]).catch(function(s){s.target=r,t.push(s)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}var Ii="colors",ps="sizes",Kt="space",nY={gap:Kt,gridGap:Kt,columnGap:Kt,gridColumnGap:Kt,rowGap:Kt,gridRowGap:Kt,inset:Kt,insetBlock:Kt,insetBlockEnd:Kt,insetBlockStart:Kt,insetInline:Kt,insetInlineEnd:Kt,insetInlineStart:Kt,margin:Kt,marginTop:Kt,marginRight:Kt,marginBottom:Kt,marginLeft:Kt,marginBlock:Kt,marginBlockEnd:Kt,marginBlockStart:Kt,marginInline:Kt,marginInlineEnd:Kt,marginInlineStart:Kt,padding:Kt,paddingTop:Kt,paddingRight:Kt,paddingBottom:Kt,paddingLeft:Kt,paddingBlock:Kt,paddingBlockEnd:Kt,paddingBlockStart:Kt,paddingInline:Kt,paddingInlineEnd:Kt,paddingInlineStart:Kt,top:Kt,right:Kt,bottom:Kt,left:Kt,scrollMargin:Kt,scrollMarginTop:Kt,scrollMarginRight:Kt,scrollMarginBottom:Kt,scrollMarginLeft:Kt,scrollMarginX:Kt,scrollMarginY:Kt,scrollMarginBlock:Kt,scrollMarginBlockEnd:Kt,scrollMarginBlockStart:Kt,scrollMarginInline:Kt,scrollMarginInlineEnd:Kt,scrollMarginInlineStart:Kt,scrollPadding:Kt,scrollPaddingTop:Kt,scrollPaddingRight:Kt,scrollPaddingBottom:Kt,scrollPaddingLeft:Kt,scrollPaddingX:Kt,scrollPaddingY:Kt,scrollPaddingBlock:Kt,scrollPaddingBlockEnd:Kt,scrollPaddingBlockStart:Kt,scrollPaddingInline:Kt,scrollPaddingInlineEnd:Kt,scrollPaddingInlineStart:Kt,fontSize:"fontSizes",background:Ii,backgroundColor:Ii,backgroundImage:Ii,borderImage:Ii,border:Ii,borderBlock:Ii,borderBlockEnd:Ii,borderBlockStart:Ii,borderBottom:Ii,borderBottomColor:Ii,borderColor:Ii,borderInline:Ii,borderInlineEnd:Ii,borderInlineStart:Ii,borderLeft:Ii,borderLeftColor:Ii,borderRight:Ii,borderRightColor:Ii,borderTop:Ii,borderTopColor:Ii,caretColor:Ii,color:Ii,columnRuleColor:Ii,fill:Ii,outline:Ii,outlineColor:Ii,stroke:Ii,textDecorationColor:Ii,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:ps,minBlockSize:ps,maxBlockSize:ps,inlineSize:ps,minInlineSize:ps,maxInlineSize:ps,width:ps,minWidth:ps,maxWidth:ps,height:ps,minHeight:ps,maxHeight:ps,flexBasis:ps,gridTemplateColumns:ps,gridTemplateRows:ps,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},iY=(i,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,ev=()=>{const i=Object.create(null);return(e,t,...n)=>{const r=(a=>JSON.stringify(a,iY))(e);return r in i?i[r]:i[r]=t(e,...n)}},Zd=Symbol.for("sxs.internal"),nR=(i,e)=>Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),QB=i=>{for(const e in i)return!0;return!1},{hasOwnProperty:rY}=Object.prototype,m2=i=>i.includes("-")?i:i.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),aY=/\s+(?![^()]*\))/,$m=i=>e=>i(...typeof e=="string"?String(e).split(aY):[e]),eL={appearance:i=>({WebkitAppearance:i,appearance:i}),backfaceVisibility:i=>({WebkitBackfaceVisibility:i,backfaceVisibility:i}),backdropFilter:i=>({WebkitBackdropFilter:i,backdropFilter:i}),backgroundClip:i=>({WebkitBackgroundClip:i,backgroundClip:i}),boxDecorationBreak:i=>({WebkitBoxDecorationBreak:i,boxDecorationBreak:i}),clipPath:i=>({WebkitClipPath:i,clipPath:i}),content:i=>({content:i.includes('"')||i.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(i)?i:`"${i}"`}),hyphens:i=>({WebkitHyphens:i,hyphens:i}),maskImage:i=>({WebkitMaskImage:i,maskImage:i}),maskSize:i=>({WebkitMaskSize:i,maskSize:i}),tabSize:i=>({MozTabSize:i,tabSize:i}),textSizeAdjust:i=>({WebkitTextSizeAdjust:i,textSizeAdjust:i}),userSelect:i=>({WebkitUserSelect:i,userSelect:i}),marginBlock:$m((i,e)=>({marginBlockStart:i,marginBlockEnd:e||i})),marginInline:$m((i,e)=>({marginInlineStart:i,marginInlineEnd:e||i})),maxSize:$m((i,e)=>({maxBlockSize:i,maxInlineSize:e||i})),minSize:$m((i,e)=>({minBlockSize:i,minInlineSize:e||i})),paddingBlock:$m((i,e)=>({paddingBlockStart:i,paddingBlockEnd:e||i})),paddingInline:$m((i,e)=>({paddingInlineStart:i,paddingInlineEnd:e||i}))},fT=/([\d.]+)([^]*)/,sY=(i,e)=>i.length?i.reduce((t,n)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(r)?`:is(${n})`:n):n+" "+r)),t),[]):e,oY=(i,e)=>i in lY&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,r,a)=>n+(r==="stretch"?`-moz-available${a};${m2(i)}:${n}-webkit-fill-available`:`-moz-fit-content${a};${m2(i)}:${n}fit-content`)+a):String(e),lY={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Vu=i=>i?i+"-":"",b4=(i,e,t)=>i.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,r,a,s,o)=>s=="$"==!!a?n:(r||s=="--"?"calc(":"")+"var(--"+(s==="$"?Vu(e)+(o.includes("$")?"":Vu(t))+o.replace(/\$/g,"-"):o)+")"+(r||s=="--"?"*"+(r||"")+(a||"1")+")":"")),cY=/\s*,\s*(?![^()]*\))/,uY=Object.prototype.toString,yg=(i,e,t,n,r)=>{let a,s,o;const c=(f,d,m)=>{let v,y;const _=A=>{for(v in A){const E=v.charCodeAt(0)===64,D=E&&Array.isArray(A[v])?A[v]:[A[v]];for(y of D){const B=/[A-Z]/.test(x=v)?x:x.replace(/-[^]/g,w=>w[1].toUpperCase()),U=typeof y=="object"&&y&&y.toString===uY&&(!n.utils[B]||!d.length);if(B in n.utils&&!U){const w=n.utils[B];if(w!==s){s=w,_(w(y)),s=null;continue}}else if(B in eL){const w=eL[B];if(w!==o){o=w,_(w(y)),o=null;continue}}if(E&&(S=v.slice(1)in n.media?"@media "+n.media[v.slice(1)]:v,v=S.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(w,O,I,L,R,F)=>{const G=fT.test(O),V=.0625*(G?-1:1),[$,K]=G?[L,O]:[O,L];return"("+(I[0]==="="?"":I[0]===">"===G?"max-":"min-")+$+":"+(I[0]!=="="&&I.length===1?K.replace(fT,(z,ee,ne)=>Number(ee)+V*(I===">"?1:-1)+ne):K)+(R?") and ("+(R[0]===">"?"min-":"max-")+$+":"+(R.length===1?F.replace(fT,(z,ee,ne)=>Number(ee)+V*(R===">"?-1:1)+ne):F):"")+")"})),U){const w=E?m.concat(v):[...m],O=E?[...d]:sY(d,v.split(cY));a!==void 0&&r(tL(...a)),a=void 0,c(y,O,w)}else a===void 0&&(a=[[],d,m]),v=E||v.charCodeAt(0)!==36?v:`--${Vu(n.prefix)}${v.slice(1).replace(/\$/g,"-")}`,y=U?y:typeof y=="number"?y&&B in fY?String(y)+"px":String(y):b4(oY(B,y??""),n.prefix,n.themeMap[B]),a[0].push(`${E?`${v} `:`${m2(v)}:`}${y}`)}}var S,x};_(f),a!==void 0&&r(tL(...a)),a=void 0};c(i,e,t)},tL=(i,e,t)=>`${t.map(n=>`${n}{`).join("")}${e.length?`${e.join(",")}{`:""}${i.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,fY={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},nL=i=>String.fromCharCode(i+(i>25?39:97)),Qd=i=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=nL(t%52)+n;return nL(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(i))>>>0),uy=["themed","global","styled","onevar","resonevar","allvar","inline"],hY=i=>{if(i.href&&!i.href.startsWith(location.origin))return!1;try{return!!i.cssRules}catch{return!1}},dY=i=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(a,s)=>{const{cssText:o}=a;let c="";if(o.startsWith("--sxs"))return"";if(r[s-1]&&(c=r[s-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const f in e.rules)if(e.rules[f].group===a)return`--sxs{--sxs:${[...e.rules[f].cache].join(" ")}}${o}`;return a.cssRules.length?`${c}${o}`:""}return o}).join("")},n=()=>{if(e){const{rules:o,sheet:c}=e;if(!c.deleteRule){for(;Object(Object(c.cssRules)[0]).type===3;)c.cssRules.splice(0,1);c.cssRules=[]}for(const f in o)delete o[f]}const r=Object(i).styleSheets||[];for(const o of r)if(hY(o)){for(let c=0,f=o.cssRules;f[c];++c){const d=Object(f[c]);if(d.type!==1)continue;const m=Object(f[c+1]);if(m.type!==4)continue;++c;const{cssText:v}=d;if(!v.startsWith("--sxs"))continue;const y=v.slice(14,-3).trim().split(/\s+/),_=uy[y[0]];_&&(e||(e={sheet:o,reset:n,rules:{},toString:t}),e.rules[_]={group:m,index:c,cache:new Set(y)})}if(e)break}if(!e){const o=(c,f)=>({type:f,cssRules:[],insertRule(d,m){this.cssRules.splice(m,0,o(d,{import:3,undefined:1}[(d.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return c==="@media{}"?`@media{${[].map.call(this.cssRules,d=>d.cssText).join("")}}`:c}});e={sheet:i?(i.head||i).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:n,toString:t}}const{sheet:a,rules:s}=e;for(let o=uy.length-1;o>=0;--o){const c=uy[o];if(!s[c]){const f=uy[o+1],d=s[f]?s[f].index:a.cssRules.length;a.insertRule("@media{}",d),a.insertRule(`--sxs{--sxs:${o}}`,d),s[c]={group:a.cssRules[d+1],index:d,cache:new Set([o])}}pY(s[c])}};return n(),e},pY=i=>{const e=i.group;let t=e.cssRules.length;i.apply=n=>{try{e.insertRule(n,t),++t}catch{}}},q0=Symbol(),mY=ev(),iL=(i,e)=>mY(i,()=>(...t)=>{let n={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Zd]){n.type==null&&(n.type=r[Zd].type);for(const a of r[Zd].composers)n.composers.add(a)}else r.constructor!==Object||r.$$typeof?n.type==null&&(n.type=r):n.composers.add(gY(r,i));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),vY(i,n,e)}),gY=({variants:i,compoundVariants:e,defaultVariants:t,...n},r)=>{const a=`${Vu(r.prefix)}c-${Qd(n)}`,s=[],o=[],c=Object.create(null),f=[];for(const v in t)c[v]=String(t[v]);if(typeof i=="object"&&i)for(const v in i){d=c,m=v,rY.call(d,m)||(c[v]="undefined");const y=i[v];for(const _ in y){const A={[v]:String(_)};String(_)==="undefined"&&f.push(v);const S=y[_],x=[A,S,!QB(S)];s.push(x)}}var d,m;if(typeof e=="object"&&e)for(const v of e){let{css:y,..._}=v;y=typeof y=="object"&&y||{};for(const S in _)_[S]=String(_[S]);const A=[_,y,!QB(y)];o.push(A)}return[a,n,s,o,c,f]},vY=(i,e,t)=>{const[n,r,a,s]=yY(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(m=>{function v(){for(let y=0;y<v[q0].length;y++){const[_,A]=v[q0][y];m.rules[_].apply(A)}return v[q0]=[],null}return v[q0]=[],v.rules={},uy.forEach(y=>v.rules[y]={apply:_=>v[q0].push([y,_])}),v})(t):null,c=(o||t).rules,f=`.${n}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,d=m=>{m=typeof m=="object"&&m||_Y;const{css:v,...y}=m,_={};for(const x in a)if(delete y[x],x in m){let E=m[x];typeof E=="object"&&E?_[x]={"@initial":a[x],...E}:(E=String(E),_[x]=E!=="undefined"||s.has(x)?E:a[x])}else _[x]=a[x];const A=new Set([...r]);for(const[x,E,D,B]of e.composers){t.rules.styled.cache.has(x)||(t.rules.styled.cache.add(x),yg(E,[`.${x}`],[],i,O=>{c.styled.apply(O)}));const U=rL(D,_,i.media),w=rL(B,_,i.media,!0);for(const O of U)if(O!==void 0)for(const[I,L,R]of O){const F=`${x}-${Qd(L)}-${I}`;A.add(F);const G=(R?t.rules.resonevar:t.rules.onevar).cache,V=R?c.resonevar:c.onevar;G.has(F)||(G.add(F),yg(L,[`.${F}`],[],i,$=>{V.apply($)}))}for(const O of w)if(O!==void 0)for(const[I,L]of O){const R=`${x}-${Qd(L)}-${I}`;A.add(R),t.rules.allvar.cache.has(R)||(t.rules.allvar.cache.add(R),yg(L,[`.${R}`],[],i,F=>{c.allvar.apply(F)}))}}if(typeof v=="object"&&v){const x=`${n}-i${Qd(v)}-css`;A.add(x),t.rules.inline.cache.has(x)||(t.rules.inline.cache.add(x),yg(v,[`.${x}`],[],i,E=>{c.inline.apply(E)}))}for(const x of String(m.className||"").trim().split(/\s+/))x&&A.add(x);const S=y.className=[...A].join(" ");return{type:e.type,className:S,selector:f,props:y,toString:()=>S,deferredInjector:o}};return nR(d,{className:n,selector:f,[Zd]:e,toString:()=>(t.rules.styled.cache.has(n)||d(),n)})},yY=i=>{let e="";const t=[],n={},r=[];for(const[a,,,,s,o]of i){e===""&&(e=a),t.push(a),r.push(...o);for(const c in s){const f=s[c];(n[c]===void 0||f!=="undefined"||o.includes(f))&&(n[c]=f)}}return[e,t,n,new Set(r)]},rL=(i,e,t,n)=>{const r=[];e:for(let[a,s,o]of i){if(o)continue;let c,f=0,d=!1;for(c in a){const m=a[c];let v=e[c];if(v!==m){if(typeof v!="object"||!v)continue e;{let y,_,A=0;for(const S in v){if(m===String(v[S])){if(S!=="@initial"){const x=S.slice(1);(_=_||[]).push(x in t?t[x]:S.replace(/^@media ?/,"")),d=!0}f+=A,y=!0}++A}if(_&&_.length&&(s={["@media "+_.join(", ")]:s}),!y)continue e}}}(r[f]=r[f]||[]).push([n?"cv":`${c}-${a[c]}`,s,d])}return r},_Y={},xY=ev(),bY=(i,e)=>xY(i,()=>(...t)=>{const n=()=>{for(let r of t){r=typeof r=="object"&&r||{};let a=Qd(r);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in r){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(r["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,s++);delete r["@import"]}yg(r,[],[],i,s=>{e.rules.global.apply(s)})}}return""};return nR(n,{toString:n})}),SY=ev(),MY=(i,e)=>SY(i,()=>t=>{const n=`${Vu(i.prefix)}k-${Qd(t)}`,r=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);const a=[];yg(t,[],[],i,o=>a.push(o));const s=`@keyframes ${n}{${a.join("")}}`;e.rules.global.apply(s)}return n};return nR(r,{get name(){return r()},toString:r})}),EY=class{constructor(i,e,t,n){this.token=i==null?"":String(i),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Vu(this.prefix)+Vu(this.scale)+this.token}toString(){return this.computedValue}},AY=ev(),TY=(i,e)=>AY(i,()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);const r=`.${t=(t=typeof t=="string"?t:"")||`${Vu(i.prefix)}t-${Qd(n)}`}`,a={},s=[];for(const c in n){a[c]={};for(const f in n[c]){const d=`--${Vu(i.prefix)}${c}-${f}`,m=b4(String(n[c][f]),i.prefix,c);a[c][f]=new EY(f,m,c,i.prefix),s.push(`${d}:${m}`)}}const o=()=>{if(s.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const c=`${n===i.theme?":root,":""}.${t}{${s.join(";")}}`;e.rules.themed.apply(c)}return t};return{...a,get className(){return o()},selector:r,toString:o}}),wY=ev(),CY=ev(),RY=i=>{const e=(t=>{let n=!1;const r=wY(t,a=>{n=!0;const s="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",o=typeof a.media=="object"&&a.media||{},c=typeof a.root=="object"?a.root||null:globalThis.document||null,f=typeof a.theme=="object"&&a.theme||{},d={prefix:s,media:o,theme:f,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...nY},utils:typeof a.utils=="object"&&a.utils||{}},m=dY(c),v={css:iL(d,m),globalCss:bY(d,m),keyframes:MY(d,m),createTheme:TY(d,m),reset(){m.reset(),v.theme.toString()},theme:{},sheet:m,config:d,prefix:s,getCssText:m.toString,toString:m.toString};return String(v.theme=v.createTheme(f)),v});return n||r.reset(),r})(i);return e.styled=(({config:t,sheet:n})=>CY(t,()=>{const r=iL(t,n);return(...a)=>{const s=r(...a),o=s[Zd].type,c=xe.forwardRef((f,d)=>{const m=f&&f.as||o,{props:v,deferredInjector:y}=s(f);return delete v.as,v.ref=d,y?xe.createElement(xe.Fragment,null,xe.createElement(m,v),xe.createElement(y,null)):xe.createElement(m,v)});return c.className=s.className,c.displayName=`Styled.${o.displayName||o.name||o}`,c.selector=s.selector,c.toString=()=>s.selector,c[Zd]=s[Zd],c}}))(e),e};function DY(i,e,t){return Math.max(e,Math.min(i,t))}const qa={toVector(i,e){return i===void 0&&(i=e),Array.isArray(i)?i:[i,i]},add(i,e){return[i[0]+e[0],i[1]+e[1]]},sub(i,e){return[i[0]-e[0],i[1]-e[1]]},addTo(i,e){i[0]+=e[0],i[1]+=e[1]},subTo(i,e){i[0]-=e[0],i[1]-=e[1]}};function aL(i,e,t){return e===0||Math.abs(e)===1/0?Math.pow(i,t*5):i*e*t/(e+t*i)}function sL(i,e,t,n=.15){return n===0?DY(i,e,t):i<e?-aL(e-i,t-e,n)+e:i>t?+aL(i-t,t-e,n)+t:i}function BY(i,[e,t],[n,r]){const[[a,s],[o,c]]=i;return[sL(e,a,s,n),sL(t,o,c,r)]}function Gs(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function oL(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function gr(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oL(Object(t),!0).forEach(function(n){Gs(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):oL(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const S4={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function lL(i){return i?i[0].toUpperCase()+i.slice(1):""}const LY=["enter","leave"];function IY(i=!1,e){return i&&!LY.includes(e)}function PY(i,e="",t=!1){const n=S4[i],r=n&&n[e]||e;return"on"+lL(i)+lL(r)+(IY(t,r)?"Capture":"")}const NY=["gotpointercapture","lostpointercapture"];function OY(i){let e=i.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=NY.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(n);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function UY(i,e=""){const t=S4[i],n=t&&t[e]||e;return i+n}function jM(i){return"touches"in i}function M4(i){return jM(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function FY(i){return Array.from(i.touches).filter(e=>{var t,n;return e.target===i.currentTarget||((t=i.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function zY(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function E4(i){return jM(i)?zY(i)[0]:i}function HY(i){return FY(i).map(e=>e.identifier)}function hT(i){const e=E4(i);return jM(i)?e.identifier:e.pointerId}function cL(i){const e=E4(i);return[e.clientX,e.clientY]}function GY(i){const e={};if("buttons"in i&&(e.buttons=i.buttons),"shiftKey"in i){const{shiftKey:t,altKey:n,metaKey:r,ctrlKey:a}=i;Object.assign(e,{shiftKey:t,altKey:n,metaKey:r,ctrlKey:a})}return e}function $S(i,...e){return typeof i=="function"?i(...e):i}function VY(){}function kY(...i){return i.length===0?VY:i.length===1?i[0]:function(){let e;for(const t of i)e=t.apply(this,arguments)||e;return e}}function uL(i,e){return Object.assign({},e,i||{})}const WY=32;class XY{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?$S(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,GY(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const w=t._delta.map(Math.abs);qa.addTo(t._distance,w)}this.axisIntent&&this.axisIntent(e);const[s,o]=t._movement,[c,f]=n.threshold,{_step:d,values:m}=t;if(n.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(s)>=c&&m[0]),d[1]===!1&&(d[1]=Math.abs(o)>=f&&m[1])):(d[0]===!1&&(d[0]=Math.abs(s)>=c&&Math.sign(s)*c),d[1]===!1&&(d[1]=Math.abs(o)>=f&&Math.sign(o)*f)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const v=[0,0];if(n.hasCustomTransform){const[w,O]=m;v[0]=d[0]!==!1?w-d[0]:0,v[1]=d[1]!==!1?O-d[1]:0}else v[0]=d[0]!==!1?s-d[0]:0,v[1]=d[1]!==!1?o-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);const y=t.offset,_=t._active&&!t._blocked||t.active;_&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=$S(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));const[A,S]=t.offset,[[x,E],[D,B]]=t._bounds;t.overflow=[A<x?-1:A>E?1:0,S<D?-1:S>B?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const U=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=BY(t._bounds,t.offset,U),t.delta=qa.sub(t.offset,y),this.computeMovement(),_&&(!t.last||a>WY)){t.delta=qa.sub(t.offset,y);const w=t.delta.map(Math.abs);qa.addTo(t.distance,w),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[w[0]/a,w[1]/a])}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(gr(gr(gr({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function $Y([i,e],t){const n=Math.abs(i),r=Math.abs(e);if(n>r&&n>t)return"x";if(r>n&&r>t)return"y"}class jY extends XY{constructor(...e){super(...e),Gs(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=qa.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=qa.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r=typeof n.axisThreshold=="object"?n.axisThreshold[M4(e)]:n.axisThreshold;t.axis=$Y(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const qY=i=>i,fL=.15,A4={enabled(i=!0){return i},eventOptions(i,e,t){return gr(gr({},t.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[fL,fL];case!1:return[0,0];default:return qa.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return qa.toVector(i)},transform(i,e,t){const n=i||t.shared.transform;return this.hasCustomTransform=!!n,n||qY},threshold(i){return qa.toVector(i,0)}},YY=0,M_=gr(gr({},A4),{},{axis(i,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(i=YY){return i},bounds(i={}){if(typeof i=="function")return a=>M_.bounds(i(a));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:r=1/0}=i;return[[e,t],[n,r]]}}),ob=10,hL={ArrowRight:(i=1)=>[ob*i,0],ArrowLeft:(i=1)=>[-ob*i,0],ArrowUp:(i=1)=>[0,-ob*i],ArrowDown:(i=1)=>[0,ob*i]};class KY extends jY{constructor(...e){super(...e),Gs(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=M_.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=hT(e),n._pointerActive=!0,this.computeValues(cL(e)),this.computeInitial(),t.preventScrollAxis&&M4(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const r=hT(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const a=cL(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=qa.sub(a,t._values),this.computeValues(a)),qa.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=hT(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,s]=t._distance;if(t.tap=a<=n.tapsThreshold&&s<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[o,c]=t.direction,[f,d]=t.velocity,[m,v]=t.movement,[y,_]=n.swipe.velocity,[A,S]=n.swipe.distance,x=n.swipe.duration;t.elapsedTime<x&&(Math.abs(f)>y&&Math.abs(m)>A&&(t.swipe[0]=o),Math.abs(d)>_&&Math.abs(v)>S&&(t.swipe[1]=c))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,JY(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=hL[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(r),n._keyboardActive=!0,qa.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in hL&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function JY(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const E_=typeof window<"u"&&window.document&&window.document.createElement;function ZY(){return E_&&"ontouchstart"in window}function dL(){return ZY()||E_&&window.navigator.maxTouchPoints>1}function QY(){return E_&&"onpointerdown"in window}function eK(){return E_&&"exitPointerLock"in window.document}function tK(){try{return"constructor"in GestureEvent}catch{return!1}}const Fo={isBrowser:E_,gesture:tK(),touch:dL(),touchscreen:dL(),pointer:QY(),pointerLock:eK()},nK=250,iK=180,rK=.5,aK=50,sK=250,pL={mouse:0,touch:0,pen:8},oK=gr(gr({},M_),{},{device(i,e,{pointer:{touch:t=!1,lock:n=!1,mouse:r=!1}={}}){return this.pointerLock=n&&Fo.pointerLock,Fo.touch&&t?"touch":this.pointerLock?"mouse":Fo.pointer&&!r?"pointer":Fo.touch?"touch":"mouse"},preventScrollAxis(i,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&i?nK:void 0,!(!Fo.touchscreen||t===!1))return i||(t!==void 0?"y":void 0)},pointerCapture(i,e,{pointer:{capture:t=!0,buttons:n=1}={}}){return this.pointerButtons=n,!this.pointerLock&&this.device==="pointer"&&t},threshold(i,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:r=void 0}){const a=qa.toVector(i,t?n:r?1:0);return this.filterTaps=t,this.tapsThreshold=n,a},swipe({velocity:i=rK,distance:e=aK,duration:t=sK}={}){return{velocity:this.transform(qa.toVector(i)),distance:this.transform(qa.toVector(e)),duration:t}},delay(i=0){switch(i){case!0:return iK;case!1:return 0;default:return i}},axisThreshold(i){return i?gr(gr({},pL),i):pL}});gr(gr({},A4),{},{device(i,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!Fo.touch&&Fo.gesture)return"gesture";if(Fo.touch&&n)return"touch";if(Fo.touchscreen){if(Fo.pointer)return"pointer";if(Fo.touch)return"touch"}},bounds(i,e,{scaleBounds:t={},angleBounds:n={}}){const r=s=>{const o=uL($S(t,s),{min:-1/0,max:1/0});return[o.min,o.max]},a=s=>{const o=uL($S(n,s),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof n!="function"?[r(),a()]:s=>[r(s),a(s)]},threshold(i,e,t){return this.lockDirection=t.axis==="lock",qa.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i}});gr(gr({},M_),{},{mouseOnly:(i=!0)=>i});gr(gr({},M_),{},{mouseOnly:(i=!0)=>i});const T4=new Map,g2=new Map;function lK(i){T4.set(i.key,i.engine),g2.set(i.key,i.resolver)}const cK={key:"drag",engine:KY,resolver:oK};function uK(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,a;for(a=0;a<n.length;a++)r=n[a],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function fK(i,e){if(i==null)return{};var t=uK(i,e),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}const hK={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=Fo.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:e=!1}={}){return{passive:i,capture:e}},transform(i){return i}},dK=["target","eventOptions","window","enabled","transform"];function Kb(i={},e){const t={};for(const[n,r]of Object.entries(e))switch(typeof r){case"function":t[n]=r.call(t,i[n],n,i);break;case"object":t[n]=Kb(i[n],r);break;case"boolean":r&&(t[n]=i[n]);break}return t}function pK(i,e){const t=i,{target:n,eventOptions:r,window:a,enabled:s,transform:o}=t,c=fK(t,dK),f={shared:Kb({target:n,eventOptions:r,window:a,enabled:s,transform:o},hK)};if(e){const d=g2.get(e);f[e]=Kb(gr({shared:f.shared},c),d)}else for(const d in c){const m=g2.get(d);m&&(f[d]=Kb(gr({shared:f.shared},c[d]),m))}return f}class w4{constructor(e,t){Gs(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,a){const s=this._listeners,o=UY(t,n),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=gr(gr({},c),a);e.addEventListener(o,r,f);const d=()=>{e.removeEventListener(o,r,f),s.delete(d)};return s.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class mK{constructor(){Gs(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class gK{constructor(e){Gs(this,"gestures",new Set),Gs(this,"_targetEventStore",new w4(this)),Gs(this,"gestureEventStores",{}),Gs(this,"gestureTimeoutStores",{}),Gs(this,"handlers",{}),Gs(this,"config",{}),Gs(this,"pointerIds",new Set),Gs(this,"touchIds",new Set),Gs(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),vK(this,e)}setEventIds(e){if(jM(e))return this.touchIds=new Set(HY(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=pK(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const s of this.gestures){const o=this.config[s],c=mL(n,o.eventOptions,!!r);if(o.enabled){const f=T4.get(s);new f(this,e,s).bind(c)}}const a=mL(n,t.eventOptions,!!r);for(const s in this.nativeHandlers)a(s,"",o=>this.nativeHandlers[s](gr(gr({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const a in n)n[a]=kY(...n[a]);if(!r)return n;for(const a in n){const{device:s,capture:o,passive:c}=OY(a);this._targetEventStore.add(r,s,"",n[a],{capture:o,passive:c})}}}}function jm(i,e){i.gestures.add(e),i.gestureEventStores[e]=new w4(i,e),i.gestureTimeoutStores[e]=new mK}function vK(i,e){e.drag&&jm(i,"drag"),e.wheel&&jm(i,"wheel"),e.scroll&&jm(i,"scroll"),e.move&&jm(i,"move"),e.pinch&&jm(i,"pinch"),e.hover&&jm(i,"hover")}const mL=(i,e,t)=>(n,r,a,s={},o=!1)=>{var c,f;const d=(c=s.capture)!==null&&c!==void 0?c:e.capture,m=(f=s.passive)!==null&&f!==void 0?f:e.passive;let v=o?n:PY(n,r,d);t&&m&&(v+="Passive"),i[v]=i[v]||[],i[v].push(a)};function yK(i,e={},t,n){const r=xe.useMemo(()=>new gK(i),[]);if(r.applyHandlers(i,n),r.applyConfig(e,t),xe.useEffect(r.effect.bind(r)),xe.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function _K(i,e){return lK(cK),yK({drag:i},e||{},"drag")}const xK=t5.useId||(()=>{});let bK=0;function SK(i){const[e,t]=X.useState(xK());return jy(()=>{t(n=>n??String(bK++))},[i]),e?`radix-${e}`:""}const tv=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((i,e)=>({...i,[e]:X.forwardRef((t,n)=>{const{asChild:r,...a}=t,s=r?QC:e;return X.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(MK),X.createElement(s,Vr({},a,{ref:n}))})}),{}),MK="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",EK=X.forwardRef((i,e)=>X.createElement(tv.span,Vr({},i,{ref:e,style:{...i.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),AK=EK,TK=X.forwardRef((i,e)=>{var t,n;const{containerRef:r,style:a,...s}=i,o=(t=r==null?void 0:r.current)!==null&&t!==void 0?t:globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,[,c]=X.useState({});return jy(()=>{c({})},[]),o?eR.createPortal(X.createElement(tv.div,Vr({"data-radix-portal":""},s,{ref:e,style:o===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...a}:void 0})),o):null}),wK=X.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...a}=i;return X.createElement(tv.svg,Vr({},a,{ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),i.asChild?t:X.createElement("polygon",{points:"0,0 30,0 15,10"}))}),CK=wK;function gL(i){const[e,t]=X.useState(void 0);return X.useEffect(()=>{if(i){const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let s,o;if("borderBoxSize"in a){const c=a.borderBoxSize,f=Array.isArray(c)?c[0]:c;s=f.inlineSize,o=f.blockSize}else{const c=i.getBoundingClientRect();s=c.width,o=c.height}t({width:s,height:o})});return n.observe(i,{box:"border-box"}),()=>{t(void 0),n.unobserve(i)}}},[i]),e}function RK(i,e){const t=zd.get(i);return t===void 0?(zd.set(i,{rect:{},callbacks:[e]}),zd.size===1&&(v2=requestAnimationFrame(C4))):(t.callbacks.push(e),e(i.getBoundingClientRect())),()=>{const n=zd.get(i);if(n===void 0)return;const r=n.callbacks.indexOf(e);r>-1&&n.callbacks.splice(r,1),n.callbacks.length===0&&(zd.delete(i),zd.size===0&&cancelAnimationFrame(v2))}}let v2;const zd=new Map;function C4(){const i=[];zd.forEach((e,t)=>{const n=t.getBoundingClientRect();var r,a;r=e.rect,a=n,(r.width!==a.width||r.height!==a.height||r.top!==a.top||r.right!==a.right||r.bottom!==a.bottom||r.left!==a.left)&&(e.rect=n,i.push(e))}),i.forEach(e=>{e.callbacks.forEach(t=>t(e.rect))}),v2=requestAnimationFrame(C4)}function R4(i){const[e,t]=X.useState();return X.useEffect(()=>{if(i){const n=RK(i,t);return()=>{t(void 0),n()}}},[i]),e}function D4(i,e=[]){let t=[];const n=()=>{const r=t.map(a=>X.createContext(a));return function(a){const s=(a==null?void 0:a[i])||r;return X.useMemo(()=>({[`__scope${i}`]:{...a,[i]:s}}),[a,s])}};return n.scopeName=i,[function(r,a){const s=X.createContext(a),o=t.length;function c(f){const{scope:d,children:m,...v}=f,y=(d==null?void 0:d[i][o])||s,_=X.useMemo(()=>v,Object.values(v));return X.createElement(y.Provider,{value:_},m)}return t=[...t,a],c.displayName=r+"Provider",[c,function(f,d){const m=(d==null?void 0:d[i][o])||s,v=X.useContext(m);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${r}\``)}]},DK(n,...e)]}function DK(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(r){const a=n.reduce((s,{useScope:o,scopeName:c})=>({...s,...o(r)[`__scope${c}`]}),{});return X.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function BK({anchorRect:i,popperSize:e,arrowSize:t,arrowOffset:n=0,side:r,sideOffset:a=0,align:s,alignOffset:o=0,shouldAvoidCollisions:c=!0,collisionBoundariesRect:f,collisionTolerance:d=0}){if(!i||!e||!f)return{popperStyles:LK,arrowStyles:dT};const m=function(O,I,L=0,R=0,F){const G=F?F.height:0,V=vL(I,O,"x"),$=vL(I,O,"y"),K=$.before-L-G,z=$.after+L+G,ee=V.before-L-G,ne=V.after+L+G;return{top:{start:{x:V.start+R,y:K},center:{x:V.center,y:K},end:{x:V.end-R,y:K}},right:{start:{x:ne,y:$.start+R},center:{x:ne,y:$.center},end:{x:ne,y:$.end-R}},bottom:{start:{x:V.start+R,y:z},center:{x:V.center,y:z},end:{x:V.end-R,y:z}},left:{start:{x:ee,y:$.start+R},center:{x:ee,y:$.center},end:{x:ee,y:$.end-R}}}}(e,i,a,o,t),v=m[r][s];if(c===!1){const O=yL(v);let I=dT;return t&&(I=xL({popperSize:e,arrowSize:t,arrowOffset:n,side:r,align:s})),{popperStyles:{...O,"--radix-popper-transform-origin":_L(e,r,s,n,t)},arrowStyles:I,placedSide:r,placedAlign:s}}const y=DOMRect.fromRect({...e,...v}),_=(A=f,S=d,DOMRect.fromRect({width:A.width-2*S,height:A.height-2*S,x:A.left+S,y:A.top+S}));var A,S;const x=SL(y,_),E=m[bL(r)][s],D=function(O,I,L){const R=bL(O);return I[O]&&!L[R]?R:O}(r,x,SL(DOMRect.fromRect({...e,...E}),_)),B=function(O,I,L,R,F){const G=L==="top"||L==="bottom",V=G?"left":"top",$=G?"right":"bottom",K=G?"width":"height",z=I[K]>O[K];return(R==="start"||R==="center")&&(F[V]&&z||F[$]&&!z)?"end":(R==="end"||R==="center")&&(F[$]&&z||F[V]&&!z)?"start":R}(e,i,r,s,x),U=yL(m[D][B]);let w=dT;return t&&(w=xL({popperSize:e,arrowSize:t,arrowOffset:n,side:D,align:B})),{popperStyles:{...U,"--radix-popper-transform-origin":_L(e,D,B,n,t)},arrowStyles:w,placedSide:D,placedAlign:B}}function vL(i,e,t){const n=i[t==="x"?"left":"top"],r=t==="x"?"width":"height",a=i[r],s=e[r];return{before:n-s,start:n,center:n+(a-s)/2,end:n+a-s,after:n+a}}function yL(i){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(i.x+window.scrollX)}px, ${Math.round(i.y+window.scrollY)}px, 0)`}}function _L(i,e,t,n,r){const a=e==="top"||e==="bottom",s=r?r.width:0,o=r?r.height:0,c=s/2+n;let f="",d="";return a?(f={start:`${c}px`,center:"center",end:i.width-c+"px"}[t],d=e==="top"?`${i.height+o}px`:-o+"px"):(f=e==="left"?`${i.width+o}px`:-o+"px",d={start:`${c}px`,center:"center",end:i.height-c+"px"}[t]),`${f} ${d}`}const LK={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},dT={position:"absolute",opacity:0};function xL({popperSize:i,arrowSize:e,arrowOffset:t,side:n,align:r}){const a=(i.width-e.width)/2,s=(i.height-e.width)/2,o={top:0,right:90,bottom:180,left:-90}[n],c=Math.max(e.width,e.height),f={width:`${c}px`,height:`${c}px`,transform:`rotate(${o}deg)`,willChange:"transform",position:"absolute",[n]:"100%",direction:IK(n,r)};return n!=="top"&&n!=="bottom"||(r==="start"&&(f.left=`${t}px`),r==="center"&&(f.left=`${a}px`),r==="end"&&(f.right=`${t}px`)),n!=="left"&&n!=="right"||(r==="start"&&(f.top=`${t}px`),r==="center"&&(f.top=`${s}px`),r==="end"&&(f.bottom=`${t}px`)),f}function IK(i,e){return(i!=="top"&&i!=="right"||e!=="end")&&(i!=="bottom"&&i!=="left"||e==="end")?"ltr":"rtl"}function bL(i){return{top:"bottom",right:"left",bottom:"top",left:"right"}[i]}function SL(i,e){return{top:i.top<e.top,right:i.right>e.right,bottom:i.bottom>e.bottom,left:i.left<e.left}}const[B4,L4]=D4("Popper"),[PK,I4]=B4("Popper"),NK=i=>{const{__scopePopper:e,children:t}=i,[n,r]=X.useState(null);return X.createElement(PK,{scope:e,anchor:n,onAnchorChange:r},t)},OK=X.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,a=I4("PopperAnchor",t),s=X.useRef(null),o=WM(e,s);return X.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||s.current)}),n?null:X.createElement(tv.div,Vr({},r,{ref:o}))}),[UK,FK]=B4("PopperContent"),zK=X.forwardRef((i,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:r,align:a="center",alignOffset:s,collisionTolerance:o,avoidCollisions:c=!0,...f}=i,d=I4("PopperContent",t),[m,v]=X.useState(),y=R4(d.anchor),[_,A]=X.useState(null),S=gL(_),[x,E]=X.useState(null),D=gL(x),B=WM(e,G=>A(G)),U=function(){const[G,V]=X.useState(void 0);return X.useEffect(()=>{let $;function K(){V({width:window.innerWidth,height:window.innerHeight})}function z(){window.clearTimeout($),$=window.setTimeout(K,100)}return K(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),G}(),w=U?DOMRect.fromRect({...U,x:0,y:0}):void 0,{popperStyles:O,arrowStyles:I,placedSide:L,placedAlign:R}=BK({anchorRect:y,popperSize:S,arrowSize:D,arrowOffset:m,side:n,sideOffset:r,align:a,alignOffset:s,shouldAvoidCollisions:c,collisionBoundariesRect:w,collisionTolerance:o}),F=L!==void 0;return X.createElement("div",{style:O,"data-radix-popper-content-wrapper":""},X.createElement(UK,{scope:t,arrowStyles:I,onArrowChange:E,onArrowOffsetChange:v},X.createElement(tv.div,Vr({"data-side":L,"data-align":R},f,{style:{...f.style,animation:F?void 0:"none"},ref:B}))))}),HK=X.forwardRef(function(i,e){const{__scopePopper:t,offset:n,...r}=i,a=FK("PopperArrow",t),{onArrowOffsetChange:s}=a;return X.useEffect(()=>s(n),[s,n]),X.createElement("span",{style:{...a.arrowStyles,pointerEvents:"none"}},X.createElement("span",{ref:a.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},X.createElement(CK,Vr({},r,{ref:e,style:{...r.style,display:"block"}}))))}),GK=NK,VK=OK,kK=zK,WK=HK,P4=i=>{const{present:e,children:t}=i,n=function(s){const[o,c]=X.useState(),f=X.useRef({}),d=X.useRef(s),m=X.useRef("none"),v=s?"mounted":"unmounted",[y,_]=function(A,S){return X.useReducer((x,E)=>{const D=S[x][E];return D??x},A)}(v,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return X.useEffect(()=>{const A=lb(f.current);m.current=y==="mounted"?A:"none"},[y]),jy(()=>{const A=f.current,S=d.current;if(S!==s){const x=m.current,E=lb(A);s?_("MOUNT"):E==="none"||(A==null?void 0:A.display)==="none"?_("UNMOUNT"):_(S&&x!==E?"ANIMATION_OUT":"UNMOUNT"),d.current=s}},[s,_]),jy(()=>{if(o){const A=x=>{const E=lb(f.current).includes(x.animationName);x.target===o&&E&&_("ANIMATION_END")},S=x=>{x.target===o&&(m.current=lb(f.current))};return o.addEventListener("animationstart",S),o.addEventListener("animationcancel",A),o.addEventListener("animationend",A),()=>{o.removeEventListener("animationstart",S),o.removeEventListener("animationcancel",A),o.removeEventListener("animationend",A)}}},[o,_]),{isPresent:["mounted","unmountSuspended"].includes(y),ref:X.useCallback(A=>{A&&(f.current=getComputedStyle(A)),c(A)},[])}}(e),r=typeof t=="function"?t({present:n.isPresent}):X.Children.only(t),a=WM(n.ref,r.ref);return typeof t=="function"||n.isPresent?X.cloneElement(r,{ref:a}):null};function lb(i){return(i==null?void 0:i.animationName)||"none"}P4.displayName="Presence";function ML(i){const e=X.useRef(i);return X.useEffect(()=>{e.current=i},[i]),e.current}function y2(i){const e=X.useRef(i);return X.useEffect(()=>{e.current=i}),X.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function XK(i){const e=y2(i);X.useEffect(()=>{const t=n=>{n.key==="Escape"&&e(n)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function $K({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,r]=function({defaultProp:c,onChange:f}){const d=X.useState(c),[m]=d,v=X.useRef(m),y=y2(f);return X.useEffect(()=>{v.current!==m&&(y(m),v.current=m)},[m,v,y]),d}({defaultProp:e,onChange:t}),a=i!==void 0,s=a?i:n,o=y2(t);return[s,X.useCallback(c=>{if(a){const f=c,d=typeof c=="function"?f(i):c;d!==i&&o(d)}else r(c)},[a,i,r,o])]}function qm(i,e,{checkForDefaultPrevented:t=!0}={}){return function(n){if(i==null||i(n),t===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}const[N4,kde]=D4("Tooltip",[L4]),qM=L4(),jK=700,[Wde,qK]=N4("TooltipProvider",{isOpenDelayed:!0,delayDuration:jK,onOpen:()=>{},onClose:()=>{}}),[YK,YM]=N4("Tooltip"),KK=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:r=!1,onOpenChange:a,delayDuration:s}=i,o=qK("Tooltip",e),c=qM(e),[f,d]=X.useState(null),m=SK(),v=X.useRef(0),y=s??o.delayDuration,_=X.useRef(!1),{onOpen:A,onClose:S}=o,[x=!1,E]=$K({prop:n,defaultProp:r,onChange:w=>{w&&(document.dispatchEvent(new CustomEvent("tooltip.open")),A()),a==null||a(w)}}),D=X.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),B=X.useCallback(()=>{window.clearTimeout(v.current),_.current=!1,E(!0)},[E]),U=X.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{_.current=!0,E(!0)},y)},[y,E]);return X.useEffect(()=>()=>window.clearTimeout(v.current),[]),X.createElement(GK,c,X.createElement(YK,{scope:e,contentId:m,open:x,stateAttribute:D,trigger:f,onTriggerChange:d,onTriggerEnter:X.useCallback(()=>{o.isOpenDelayed?U():B()},[o.isOpenDelayed,U,B]),onOpen:X.useCallback(B,[B]),onClose:X.useCallback(()=>{window.clearTimeout(v.current),E(!1),S()},[E,S])},t))},JK=X.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=YM("TooltipTrigger",t),a=qM(t),s=WM(e,r.onTriggerChange),o=X.useRef(!1),c=X.useCallback(()=>o.current=!1,[]);return X.useEffect(()=>()=>document.removeEventListener("mouseup",c),[c]),X.createElement(VK,Vr({asChild:!0},a),X.createElement(tv.button,Vr({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},n,{ref:s,onMouseEnter:qm(i.onMouseEnter,r.onTriggerEnter),onMouseLeave:qm(i.onMouseLeave,r.onClose),onMouseDown:qm(i.onMouseDown,()=>{r.onClose(),o.current=!0,document.addEventListener("mouseup",c,{once:!0})}),onFocus:qm(i.onFocus,()=>{o.current||r.onOpen()}),onBlur:qm(i.onBlur,r.onClose),onClick:qm(i.onClick,r.onClose)})))}),ZK=X.forwardRef((i,e)=>{const{forceMount:t,...n}=i,r=YM("TooltipContent",i.__scopeTooltip);return X.createElement(P4,{present:t||r.open},X.createElement(QK,Vr({ref:e},n)))}),QK=X.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":r,portalled:a=!0,...s}=i,o=YM("TooltipContent",t),c=qM(t),f=a?TK:X.Fragment,{onClose:d}=o;return XK(()=>d()),X.useEffect(()=>(document.addEventListener("tooltip.open",d),()=>document.removeEventListener("tooltip.open",d)),[d]),X.createElement(f,null,X.createElement(tJ,{__scopeTooltip:t}),X.createElement(kK,Vr({"data-state":o.stateAttribute},c,s,{ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),X.createElement(g4,null,n),X.createElement(AK,{id:o.contentId,role:"tooltip"},r||n)))}),eJ=X.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=qM(t);return X.createElement(WK,Vr({},r,n,{ref:e}))});function tJ(i){const{__scopeTooltip:e}=i,t=YM("CheckTriggerMoved",e),n=R4(t.trigger),r=n==null?void 0:n.left,a=ML(r),s=n==null?void 0:n.top,o=ML(s),c=t.onClose;return X.useEffect(()=>{(a!==void 0&&a!==r||o!==void 0&&o!==s)&&c()},[c,a,o,r,s]),null}const nJ=KK,iJ=JK,rJ=ZK,aJ=eJ;function sJ(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,a;for(a=0;a<n.length;a++)r=n[a],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function Oi(i,e){if(i==null)return{};var t=sJ(i,e),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}let hr;(function(i){i[i.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",i[i.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",i[i.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",i[i.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",i[i.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",i[i.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",i[i.THEME_ERROR=6]="THEME_ERROR",i[i.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",i[i.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",i[i.EMPTY_KEY=9]="EMPTY_KEY"})(hr||(hr={}));const oJ={[hr.UNSUPPORTED_INPUT]:(i,e)=>[`An input with type \`${i}\` input was found at path \`${e}\` but it's not supported yet.`],[hr.NO_COMPONENT_FOR_TYPE]:(i,e)=>[`Type \`${i}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[hr.UNKNOWN_INPUT]:(i,e)=>[`input at path \`${i}\` is not recognized.`,e],[hr.DUPLICATE_KEYS]:(i,e,t)=>[`Key \`${i}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[hr.ALREADY_REGISTERED_TYPE]:i=>[`Type ${i} has already been registered. You can't register a component with the same type.`],[hr.CLIPBOARD_ERROR]:i=>["Error copying the value",i],[hr.THEME_ERROR]:(i,e)=>[`Error accessing the theme \`${i}.${e}\` value.`],[hr.PATH_DOESNT_EXIST]:i=>[`Error getting the value at path \`${i}\`. There is probably an error in your \`render\` function.`],[hr.PATH_DOESNT_EXIST]:i=>[`Error accessing the value at path \`${i}\``],[hr.INPUT_TYPE_OVERRIDE]:(i,e,t)=>[`Input at path \`${i}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[hr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function O4(i,e,...t){const[n,...r]=oJ[e](...t);console[i]("LEVA: "+n,...r)}const Lu=O4.bind(null,"warn"),lJ=O4.bind(null,"log"),cJ=["value"],uJ=["schema"],fJ=["value"],U4=[],hp={};function EL(i){let{value:e}=i,t=Oi(i,cJ);for(let n of U4){const r=n(e,t);if(r)return r}}function ku(i,e){let{schema:t}=e,n=Oi(e,uJ);if(i in hp){Lu(hr.ALREADY_REGISTERED_TYPE,i);return}U4.push((r,a)=>t(r,a)&&i),hp[i]=n}function pT(i,e,t,n){const{normalize:r}=hp[i];if(r)return r(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,s=Oi(e,fJ);return{value:a,settings:s}}function hJ(i,e,t,n,r,a){const{sanitize:s}=hp[i];return s?s(e,t,n,r,a):e}function AL(i,e,t){const{format:n}=hp[i];return n?n(e,t):e}function dJ(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function TL(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function yn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TL(Object(t),!0).forEach(function(n){dJ(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):TL(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const vh=(i,e,t)=>i>t?t:i<e?e:i,pJ=i=>{if(i===""||typeof i=="number")return i;try{const e=th(i);if(!isNaN(e))return e}catch{}return parseFloat(i)},mJ=Math.log(10);function wL(i){let e=Math.abs(+String(i).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/mJ)+1,n=Math.floor(Math.log10(Math.abs(i))),r=Math.pow(10,n-t);return Math.max(r,.001)}const jS=(i,e,t)=>t===e?0:(vh(i,e,t)-e)/(t-e),qS=(i,e,t)=>i*(t-e)+e,gJ=()=>"_"+Math.random().toString(36).substr(2,9),CL=/\(([0-9+\-*/^ .]+)\)/,RL=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,DL=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,BL=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,LL=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,IL=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function th(i){if(isNaN(Number(i)))if(CL.test(i)){const e=i.replace(CL,(t,n)=>String(th(n)));return th(e)}else if(RL.test(i)){const e=i.replace(RL,(t,n,r)=>String(Math.pow(Number(n),Number(r))));return th(e)}else if(DL.test(i)){const e=i.replace(DL,(t,n,r)=>String(Number(n)*Number(r)));return th(e)}else if(BL.test(i)){const e=i.replace(BL,(t,n,r)=>{if(r!=0)return String(Number(n)/Number(r));throw new Error("Division by zero")});return th(e)}else if(LL.test(i)){const e=i.replace(LL,(t,n,r)=>String(Number(n)+Number(r)));return th(e)}else if(IL.test(i)){const e=i.replace(IL,(t,n,r)=>String(Number(n)-Number(r)));return th(e)}else return Number(i);return Number(i)}function vJ(i,e){return e.reduce((t,n)=>(i&&i.hasOwnProperty(n)&&(t[n]=i[n]),t),{})}function yJ(i,e){const t=yn({},i);return e.forEach(n=>n in i&&delete t[n]),t}function _J(i,e){return i.reduce((t,n,r)=>Object.assign(t,{[e[r]]:n}),{})}function F4(i){return Object.prototype.toString.call(i)==="[object Object]"}const xJ=i=>F4(i)&&Object.keys(i).length===0;let Wo;(function(i){i.BUTTON="BUTTON",i.BUTTON_GROUP="BUTTON_GROUP",i.MONITOR="MONITOR",i.FOLDER="FOLDER"})(Wo||(Wo={}));let Gl;(function(i){i.SELECT="SELECT",i.IMAGE="IMAGE",i.NUMBER="NUMBER",i.COLOR="COLOR",i.STRING="STRING",i.BOOLEAN="BOOLEAN",i.INTERVAL="INTERVAL",i.VECTOR3D="VECTOR3D",i.VECTOR2D="VECTOR2D"})(Gl||(Gl={}));const bJ=["type","__customInput"],SJ=["render","label","optional","disabled","hint","onChange","onEditStart","onEditEnd","transient"],MJ=["type"];function z4(i,e,t={},n){var r,a;if(typeof i!="object"||Array.isArray(i))return{type:n,input:i,options:yn({key:e,label:e,optional:!1,disabled:!1},t)};if("__customInput"in i){const{type:B,__customInput:U}=i,w=Oi(i,bJ);return z4(U,e,w,B)}const{render:s,label:o,optional:c,disabled:f,hint:d,onChange:m,onEditStart:v,onEditEnd:y,transient:_}=i,A=Oi(i,SJ),S=yn({render:s,key:e,label:o??e,hint:d,transient:_??!!m,onEditStart:v,onEditEnd:y,disabled:f,optional:c},t);let{type:x}=A,E=Oi(A,MJ);if(x=n??x,x in Wo)return{type:x,input:E,options:S};let D;return n&&F4(E)&&"value"in E?D=E.value:D=xJ(E)?void 0:E,{type:x,input:D,options:yn(yn({},S),{},{onChange:m,optional:(r=S.optional)!==null&&r!==void 0?r:!1,disabled:(a=S.disabled)!==null&&a!==void 0?a:!1})}}function EJ(i,e,t,n){const r=z4(i,e),{type:a,input:s,options:o}=r;if(a)return a in Wo?r:{type:a,input:pT(a,s,t,n),options:o};let c=EL(s);return c?{type:c,input:pT(c,s,t,n),options:o}:(c=EL({value:s}),c?{type:c,input:pT(c,{value:s},t,n),options:o}:!1)}function PL(i,e,t,n,r){const{value:a,type:s,settings:o}=i;i.value=H4({type:s,value:a,settings:o},e,t,n),i.fromPanel=r}const NL=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function H4({type:i,value:e,settings:t},n,r,a){const s=i!=="SELECT"&&typeof n=="function"?n(e):n;let o;try{o=hJ(i,s,t,e,r,a)}catch(c){throw new NL(`The value \`${n}\` did not result in a correct value.`,e,c)}if(qy(o,e))throw new NL(`The value \`${n}\` did not result in a value update, which remained the same: \`${e}\`.
        You can ignore this warning if this is the intended behavior.`,e);return o}const G4=(i,e,t=!1)=>{let n=0;return function(){const r=arguments,a=t&&!n,s=()=>i.apply(this,r);window.clearTimeout(n),n=window.setTimeout(s,e),a&&s()}},V4=i=>i.shiftKey?5:i.altKey?1/5:1,AJ=["value"],TJ=["min","max"],wJ=i=>typeof i=="number"||typeof i=="string"&&!isNaN(parseFloat(i)),k4=(i,{min:e=-1/0,max:t=1/0,suffix:n})=>{const r=parseFloat(i);if(i===""||isNaN(r))throw Error("Invalid number");const a=vh(r,e,t);return n?a+n:a},CJ=(i,{pad:e=0,suffix:t})=>{const n=parseFloat(i).toFixed(e);return t?n+t:n},W4=i=>{let{value:e}=i,t=Oi(i,AJ);const{min:n=-1/0,max:r=1/0}=t,a=Oi(t,TJ),s=vh(parseFloat(e),n,r);let o;if(!Number.isFinite(e)){const m=String(e).match(/[A-Z]+/i);m&&(o=m[0])}let c=t.step;c||(Number.isFinite(n)?Number.isFinite(r)?c=+(Math.abs(r-n)/100).toPrecision(1):c=+(Math.abs(s-n)/100).toPrecision(1):Number.isFinite(r)&&(c=+(Math.abs(r-s)/100).toPrecision(1)));const f=c?wL(c)*10:wL(s);c=c||f/10;const d=Math.round(vh(Math.log10(1/f),0,2));return{value:o?s+o:s,settings:yn({initialValue:s,step:c,pad:d,min:n,max:r,suffix:o},a)}},X4=(i,{step:e,initialValue:t})=>{const n=Math.round((i-t)/e);return t+n*e};var $4=Object.freeze({__proto__:null,schema:wJ,sanitize:k4,format:CJ,normalize:W4,sanitizeStep:X4});function Er(){return Er=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Er.apply(this,arguments)}const j4=X.createContext({});function Ja(){return X.useContext(j4)}const iR=X.createContext(null),q4=X.createContext(null),Y4=X.createContext(null);function KM(){return X.useContext(q4)}function RJ(){return X.useContext(Y4)}const K4=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function cb(i,e){const[t,n]=i.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(r.backgroundColor=n),r}const Y0={$inputStyle:()=>i=>cb(i,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>i=>cb(i,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>i=>cb(i,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>i=>cb(i,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:gn,css:Xde,createTheme:DJ,globalCss:BJ,keyframes:$de}=RY({prefix:"leva",theme:K4(),utils:yn(yn({},Y0),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:i=>({"&:focus":Y0.$focusStyle()(i)}),$focusWithin:i=>({"&:focus-within":Y0.$focusStyle()(i)}),$hover:i=>({"&:hover":Y0.$hoverStyle()(i)}),$active:i=>({"&:active":Y0.$activeStyle()(i)})})}),LJ=BJ({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function IJ(i){const e=K4();if(!i)return{theme:e,className:""};Object.keys(i).forEach(n=>{Object.assign(e[n],i[n])});const t=DJ(e);return{theme:e,className:t.className}}function Fu(i,e){const{theme:t}=X.useContext(iR);if(!(i in t)||!(e in t[i]))return Lu(hr.THEME_ERROR,i,e),"";let n=e;for(;;){let r=t[i][n];if(typeof r=="string"&&r.charAt(0)==="$")n=r.substr(1);else return r}}const J4=gn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Z4=gn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${J4}`]:{paddingLeft:0}}),PJ=gn(Z4,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),NJ=gn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),OJ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],UJ=["onUpdate"];function rR(i){let{innerLabel:e,value:t,onUpdate:n,onChange:r,onKeyDown:a,type:s,id:o,inputType:c="text",rows:f=0}=i,d=Oi(i,OJ);const{id:m,emitOnEditStart:v,emitOnEditEnd:y,disabled:_}=Ja(),A=o||m,S=X.useRef(null),x=f>0,E=x?"textarea":"input",D=X.useCallback(w=>O=>{const I=O.currentTarget.value;w(I)},[]);xe.useEffect(()=>{const w=S.current,O=D(I=>{n(I),y()});return w==null||w.addEventListener("blur",O),()=>w==null?void 0:w.removeEventListener("blur",O)},[D,n,y]);const B=X.useCallback(w=>{w.key==="Enter"&&D(n)(w)},[D,n]),U=Object.assign({as:E},x?{rows:f}:{},d);return xe.createElement(NJ,{textArea:x},e&&typeof e=="string"?xe.createElement(Z4,null,e):e,xe.createElement(J4,Er({levaType:s,ref:S,id:A,type:c,autoComplete:"off",spellCheck:"false",value:t,onChange:D(r),onFocus:()=>v(),onKeyPress:B,onKeyDown:a,disabled:_},U)))}function FJ(i){let{onUpdate:e}=i,t=Oi(i,UJ);const n=X.useCallback(a=>e(pJ(a)),[e]),r=X.useCallback(a=>{const s=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(s){a.preventDefault();const o=a.altKey?.1:a.shiftKey?10:1;e(c=>parseFloat(c)+s*o)}},[e]);return xe.createElement(rR,Er({},t,{onUpdate:n,onKeyDown:r,type:"number"}))}const YS=gn("div",{}),_2=gn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),zJ=gn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${_2}::after`]:{opacity:.6},[`${YS}:hover > & + ${_2}::after`]:{opacity:.6},[`${YS}:hover > & > svg`]:{opacity:1}}),Q4=gn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${YS}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),eF=gn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${Q4} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),tF=gn(eF,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),HJ=gn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),GJ=gn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),x2=gn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),VJ=gn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${x2}`]:{pointerEvents:"auto"}}}}}),nF=gn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),kJ=gn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),WJ=gn(aJ,{fill:"$toolTipBackground"});function aR({children:i}){const{className:e}=X.useContext(iR);return xe.createElement(Zq,{className:e},i)}const XJ=["align"];function $J(){const{id:i,disable:e,disabled:t}=Ja();return xe.createElement(xe.Fragment,null,xe.createElement(GJ,{id:i+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),xe.createElement("label",{htmlFor:i+"__disable"}))}function jJ(i){const{id:e,optional:t,hint:n}=Ja(),r=i.htmlFor||(e?{htmlFor:e}:null),a=!n&&typeof i.children=="string"?{title:i.children}:null;return xe.createElement(xe.Fragment,null,t&&xe.createElement($J,null),n!==void 0?xe.createElement(nJ,null,xe.createElement(iJ,{asChild:!0},xe.createElement(x2,Er({},r,i))),xe.createElement(rJ,{side:"top",sideOffset:2},xe.createElement(kJ,null,n,xe.createElement(WJ,null)))):xe.createElement(x2,Er({},r,a,i)))}function jl(i){let{align:e}=i,t=Oi(i,XJ);const{value:n,label:r,key:a,disabled:s}=Ja(),{hideCopyButton:o}=RJ(),c=!o&&a!==void 0,[f,d]=X.useState(!1),m=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:n??""})),d(!0)}catch{Lu(hr.CLIPBOARD_ERROR,{[a]:n})}};return xe.createElement(HJ,{align:e,onPointerLeave:()=>d(!1)},xe.createElement(jJ,t),c&&!s&&xe.createElement("div",{title:`Click to copy ${typeof r=="string"?r:a} value`},f?xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},xe.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),xe.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):xe.createElement("svg",{onClick:m,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},xe.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),xe.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const qJ=["toggled"],YJ=gn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function sR(i){let{toggled:e}=i,t=Oi(i,qJ);return xe.createElement(YJ,Er({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),xe.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const KJ=["input"];function Ko(i){let{input:e}=i,t=Oi(i,KJ);return e?xe.createElement(tF,t):xe.createElement(eF,t)}function iF({value:i,type:e,settings:t,setValue:n}){const[r,a]=X.useState(AL(e,i,t)),s=X.useRef(i),o=X.useRef(t);o.current=t;const c=X.useCallback(d=>a(AL(e,d,o.current)),[e]),f=X.useCallback(d=>{try{n(d)}catch(m){const{type:v,previousValue:y}=m;if(v!=="LEVA_ERROR")throw m;c(y)}},[c,n]);return X.useEffect(()=>{qy(i,s.current)||c(i),s.current=i},[i,c]),{displayValue:r,onChange:a,onUpdate:f}}function A_(i,e){const{emitOnEditStart:t,emitOnEditEnd:n}=Ja();return _K(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const a=i(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),a},e)}function JJ(i){const e=X.useRef(null),t=X.useRef(null),n=X.useRef(!1);return X.useEffect(()=>{const r=G4(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,i(e.current,t.current)},250);return window.addEventListener("resize",r),n.current||(r(),n.current=!0),()=>window.removeEventListener("resize",r)},[i]),X.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function rF(){const i=X.useRef(null),e=X.useRef({x:0,y:0}),t=X.useCallback(n=>{Object.assign(e.current,n),i.current&&(i.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[i,t]}const ZJ=["__refCount"],mT=(i,e)=>{if(!i[e])return null;const t=i[e];return Oi(t,ZJ)};function QJ(i){const e=KM(),[t,n]=X.useState(mT(e.getData(),i)),r=X.useCallback(f=>e.setValueAtPath(i,f,!0),[i,e]),a=X.useCallback(f=>e.setSettingsAtPath(i,f),[i,e]),s=X.useCallback(f=>e.disableInputAtPath(i,f),[i,e]),o=X.useCallback(()=>e.emitOnEditStart(i),[i,e]),c=X.useCallback(()=>e.emitOnEditEnd(i),[i,e]);return X.useEffect(()=>{n(mT(e.getData(),i));const f=e.useStore.subscribe(d=>mT(d.data,i),n,{equalityFn:XM});return()=>f()},[e,i]),[t,{set:r,setSettings:a,disable:s,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:c}]}const eZ=gn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),aF=gn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),b2=gn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),sF=gn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),oF=gn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function tZ({value:i,min:e,max:t,onDrag:n,step:r,initialValue:a}){const s=X.useRef(null),o=X.useRef(null),c=X.useRef(0),f=Fu("sizes","scrubberWidth"),d=A_(({event:v,first:y,xy:[_],movement:[A],memo:S})=>{if(y){const{width:E,left:D}=s.current.getBoundingClientRect();c.current=E-parseFloat(f),S=(v==null?void 0:v.target)===o.current?i:qS((_-D)/E,e,t)}const x=S+qS(A/c.current,0,t-e);return n(X4(x,{step:r,initialValue:a})),S}),m=jS(i,e,t);return xe.createElement(sF,Er({ref:s},d()),xe.createElement(aF,null,xe.createElement(oF,{style:{left:0,right:`${(1-m)*100}%`}})),xe.createElement(b2,{ref:o,style:{left:`calc(${m} * (100% - ${f}))`}}))}const nZ=xe.memo(({label:i,onUpdate:e,step:t,innerLabelTrim:n})=>{const[r,a]=X.useState(!1),s=A_(({active:o,delta:[c],event:f,memo:d=0})=>(a(o),d+=c/2,Math.abs(d)>=1&&(e(m=>parseFloat(m)+Math.floor(d)*t*V4(f)),d=0),d));return xe.createElement(PJ,Er({dragging:r,title:i.length>1?i:""},s()),i.slice(0,n))});function lF({label:i,id:e,displayValue:t,onUpdate:n,onChange:r,settings:a,innerLabelTrim:s=1}){const o=s>0&&xe.createElement(nZ,{label:i,step:a.step,onUpdate:n,innerLabelTrim:s});return xe.createElement(FJ,{id:e,value:String(t),onUpdate:n,onChange:r,innerLabel:o})}function iZ(){const i=Ja(),{label:e,value:t,onUpdate:n,settings:r,id:a}=i,{min:s,max:o}=r,c=o!==1/0&&s!==-1/0;return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,e),xe.createElement(eZ,{hasRange:c},c&&xe.createElement(tZ,Er({value:parseFloat(t),onDrag:n},r)),xe.createElement(lF,Er({},i,{id:a,label:"value",innerLabelTrim:c?0:1}))))}const{sanitizeStep:rZ}=$4,aZ=Oi($4,["sanitizeStep"]);var sZ=yn({component:iZ},aZ);const oZ=(i,e)=>Vs().schema({options:Vs().passesAnyOf(Vs().object(),Vs().array())}).test(e),lZ=(i,{values:e})=>{if(e.indexOf(i)<0)throw Error("Selected value doesn't match Select options");return i},cZ=(i,{values:e})=>e.indexOf(i),uZ=i=>{let{value:e,options:t}=i,n,r;return Array.isArray(t)?(r=t,n=t.map(a=>String(a))):(r=Object.values(t),n=Object.keys(t)),"value"in i?r.includes(e)||(n.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:r}}};var fZ=Object.freeze({__proto__:null,schema:oZ,sanitize:lZ,format:cZ,normalize:uZ});const hZ=gn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),S2=gn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),dZ=gn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${S2}:focus + &`]:{$focusStyle:""},[`${S2}:hover + &`]:{$hoverStyle:""}});function pZ({displayValue:i,value:e,onUpdate:t,id:n,settings:r,disabled:a}){const{keys:s,values:o}=r,c=X.useRef();return e===o[i]&&(c.current=s[i]),xe.createElement(hZ,null,xe.createElement(S2,{id:n,value:i,onChange:f=>t(o[Number(f.currentTarget.value)]),disabled:a},s.map((f,d)=>xe.createElement("option",{key:f,value:d},f))),xe.createElement(dZ,null,c.current),xe.createElement(sR,{toggled:!0}))}function mZ(){const{label:i,value:e,displayValue:t,onUpdate:n,id:r,disabled:a,settings:s}=Ja();return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(pZ,{id:r,value:e,displayValue:t,onUpdate:n,settings:s,disabled:a}))}var gZ=yn({component:mZ},fZ);const vZ=i=>Vs().string().test(i),yZ=i=>{if(typeof i!="string")throw Error("Invalid string");return i},_Z=({value:i,editable:e=!0,rows:t=!1})=>({value:i,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var xZ=Object.freeze({__proto__:null,schema:vZ,sanitize:yZ,normalize:_Z});const bZ=["displayValue","onUpdate","onChange","editable"],SZ=gn("div",{whiteSpace:"pre-wrap"});function MZ(i){let{displayValue:e,onUpdate:t,onChange:n,editable:r=!0}=i,a=Oi(i,bZ);return r?xe.createElement(rR,Er({value:e,onUpdate:t,onChange:n},a)):xe.createElement(SZ,null,e)}function EZ(){const{label:i,settings:e,displayValue:t,onUpdate:n,onChange:r}=Ja();return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(MZ,Er({displayValue:t,onUpdate:n,onChange:r},e)))}var AZ=yn({component:EZ},xZ);const TZ=i=>Vs().boolean().test(i),wZ=i=>{if(typeof i!="boolean")throw Error("Invalid boolean");return i};var CZ=Object.freeze({__proto__:null,schema:TZ,sanitize:wZ});const RZ=gn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function DZ({value:i,onUpdate:e,id:t,disabled:n}){return xe.createElement(RZ,null,xe.createElement("input",{id:t,type:"checkbox",checked:i,onChange:r=>e(r.currentTarget.checked),disabled:n}),xe.createElement("label",{htmlFor:t},xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function BZ(){const{label:i,value:e,onUpdate:t,disabled:n,id:r}=Ja();return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(DZ,{value:e,onUpdate:t,id:r,disabled:n}))}var LZ=yn({component:BZ},CZ);const IZ=["locked"];function PZ({value:i,id:e,valueKey:t,settings:n,onUpdate:r,innerLabelTrim:a}){const s=X.useRef(i[t]);s.current=i[t];const o=X.useCallback(f=>r({[t]:H4({type:"NUMBER",value:s.current,settings:n},f)}),[r,n,t]),c=iF({type:"NUMBER",value:i[t],settings:n,setValue:o});return xe.createElement(lF,{id:e,label:t,value:i[t],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:n,innerLabelTrim:a})}const NZ=gn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function OZ(i){let{locked:e}=i,t=Oi(i,IZ);return xe.createElement("svg",Er({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?xe.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):xe.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function oR({value:i,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:r,setSettings:a}=Ja(),{lock:s,locked:o}=t;return xe.createElement(NZ,{withLock:s},s&&xe.createElement(OZ,{locked:o,onClick:()=>a({locked:!o})}),Object.keys(i).map((c,f)=>xe.createElement(PZ,{id:f===0?r:`${r}.${c}`,key:c,valueKey:c,value:i,settings:t[c],onUpdate:e,innerLabelTrim:n})))}const cF=(i,e)=>{const t={};let n=0,r=1/0;Object.entries(i).forEach(([a,s])=>{t[a]=W4(yn({value:s},e[a])).settings,n=Math.max(n,t[a].step),r=Math.min(r,t[a].pad)});for(let a in t){const{step:s,min:o,max:c}=e[a]||{};!isFinite(s)&&(!isFinite(o)||!isFinite(c))&&(t[a].step=n,t[a].pad=r)}return t},UZ=["lock"],FZ=["value"];function zZ(i){const e=Vs().array().length(i).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const r=Object.values(n);return r.length===i&&r.every(a=>isFinite(a))};return n=>e.test(n)||t(n)}function HZ(i){return Array.isArray(i)?"array":"object"}function Ty(i,e,t){return HZ(i)===e?i:e==="array"?Object.values(i):_J(i,t)}const GZ=(i,e,t)=>{const n=Ty(i,"object",e.keys);for(let s in n)n[s]=k4(n[s],e[s]);const r=Object.keys(n);let a={};if(r.length===e.keys.length)a=n;else{const s=Ty(t,"object",e.keys);if(r.length===1&&e.locked){const o=r[0],c=n[o],f=s[o],d=f!==0?c/f:1;for(let m in s)m===o?a[o]=c:a[m]=s[m]*d}else a=yn(yn({},s),n)}return Ty(a,e.format,e.keys)},VZ=(i,e)=>Ty(i,"object",e.keys),kZ=i=>!!i&&("step"in i||"min"in i||"max"in i);function WZ(i,e,t=[]){const{lock:n=!1}=e,r=Oi(e,UZ),a=Array.isArray(i)?"array":"object",s=a==="object"?Object.keys(i):t,o=Ty(i,"object",s),c=kZ(r)?s.reduce((d,m)=>Object.assign(d,{[m]:r}),{}):r,f=cF(o,c);return{value:a==="array"?i:o,settings:yn(yn({},f),{},{format:a,keys:s,lock:n,locked:!1})}}function uF(i){return{schema:zZ(i.length),normalize:e=>{let{value:t}=e,n=Oi(e,FZ);return WZ(t,n,i)},format:(e,t)=>VZ(e,t),sanitize:(e,t,n)=>GZ(e,t,n)}}var XZ={grad:.9,turn:360,rad:360/(2*Math.PI)},Su=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},ua=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},Vo=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},fF=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},OL=function(i){return{r:Vo(i.r,0,255),g:Vo(i.g,0,255),b:Vo(i.b,0,255),a:Vo(i.a)}},gT=function(i){return{r:ua(i.r),g:ua(i.g),b:ua(i.b),a:ua(i.a,3)}},$Z=/^#([0-9a-f]{3,8})$/i,ub=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},hF=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,a=Math.max(e,t,n),s=a-Math.min(e,t,n),o=s?a===e?(t-n)/s:a===t?2+(n-e)/s:4+(e-t)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:r}},dF=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var a=Math.floor(e),s=n*(1-t),o=n*(1-(e-a)*t),c=n*(1-(1-e+a)*t),f=a%6;return{r:255*[n,o,s,s,c,n][f],g:255*[c,n,n,o,s,s][f],b:255*[s,s,c,n,n,o][f],a:r}},UL=function(i){return{h:fF(i.h),s:Vo(i.s,0,100),l:Vo(i.l,0,100),a:Vo(i.a)}},FL=function(i){return{h:ua(i.h),s:ua(i.s),l:ua(i.l),a:ua(i.a,3)}},zL=function(i){return dF((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},wy=function(i){return{h:(e=hF(i)).h,s:(r=(200-(t=e.s))*(n=e.v)/100)>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,n,r},jZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,M2={string:[[function(i){var e=$Z.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?ua(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?ua(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=YZ.exec(i)||KZ.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:OL({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=jZ.exec(i)||qZ.exec(i);if(!e)return null;var t,n,r=UL({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(XZ[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return zL(r)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,r=i.a,a=r===void 0?1:r;return Su(e)&&Su(t)&&Su(n)?OL({r:Number(e),g:Number(t),b:Number(n),a:Number(a)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,r=i.a,a=r===void 0?1:r;if(!Su(e)||!Su(t)||!Su(n))return null;var s=UL({h:Number(e),s:Number(t),l:Number(n),a:Number(a)});return zL(s)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,r=i.a,a=r===void 0?1:r;if(!Su(e)||!Su(t)||!Su(n))return null;var s=function(o){return{h:fF(o.h),s:Vo(o.s,0,100),v:Vo(o.v,0,100),a:Vo(o.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(a)});return dF(s)},"hsv"]]},HL=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},pF=function(i){return typeof i=="string"?HL(i.trim(),M2.string):typeof i=="object"&&i!==null?HL(i,M2.object):[null,void 0]},JZ=function(i){return pF(i)[1]},vT=function(i,e){var t=wy(i);return{h:t.h,s:Vo(t.s+100*e,0,100),l:t.l,a:t.a}},yT=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},GL=function(i,e){var t=wy(i);return{h:t.h,s:t.s,l:Vo(t.l+100*e,0,100),a:t.a}},E2=function(){function i(e){this.parsed=pF(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return ua(yT(this.rgba),2)},i.prototype.isDark=function(){return yT(this.rgba)<.5},i.prototype.isLight=function(){return yT(this.rgba)>=.5},i.prototype.toHex=function(){return e=gT(this.rgba),t=e.r,n=e.g,r=e.b,s=(a=e.a)<1?ub(ua(255*a)):"","#"+ub(t)+ub(n)+ub(r)+s;var e,t,n,r,a,s},i.prototype.toRgb=function(){return gT(this.rgba)},i.prototype.toRgbString=function(){return e=gT(this.rgba),t=e.r,n=e.g,r=e.b,(a=e.a)<1?"rgba("+t+", "+n+", "+r+", "+a+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,a},i.prototype.toHsl=function(){return FL(wy(this.rgba))},i.prototype.toHslString=function(){return e=FL(wy(this.rgba)),t=e.h,n=e.s,r=e.l,(a=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+a+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,a},i.prototype.toHsv=function(){return e=hF(this.rgba),{h:ua(e.h),s:ua(e.s),v:ua(e.v),a:ua(e.a,3)};var e},i.prototype.invert=function(){return gs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),gs(vT(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),gs(vT(this.rgba,-e))},i.prototype.grayscale=function(){return gs(vT(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),gs(GL(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),gs(GL(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?gs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ua(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=wy(this.rgba);return typeof e=="number"?gs({h:e,s:t.s,l:t.l,a:t.a}):ua(t.h)},i.prototype.isEqual=function(e){return this.toHex()===gs(e).toHex()},i}(),gs=function(i){return i instanceof E2?i:new E2(i)},VL=[],ZZ=function(i){i.forEach(function(e){VL.indexOf(e)<0&&(e(E2,M2),VL.push(e))})};function QZ(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in t)n[t[r]]=r;var a={};i.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,c,f=n[this.toHex()];if(f)return f;if(s!=null&&s.closest){var d=this.toRgb(),m=1/0,v="black";if(!a.length)for(var y in t)a[y]=new i(t[y]).toRgb();for(var _ in t){var A=(o=d,c=a[_],Math.pow(o.r-c.r,2)+Math.pow(o.g-c.g,2)+Math.pow(o.b-c.b,2));A<m&&(m=A,v=_)}return v}},e.string.push([function(s){var o=s.toLowerCase(),c=o==="transparent"?"#0000":t[o];return c?new i(c).toRgb():null},"name"])}function nv(){return(nv=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}).apply(this,arguments)}function lR(i,e){if(i==null)return{};var t,n,r={},a=Object.keys(i);for(n=0;n<a.length;n++)e.indexOf(t=a[n])>=0||(r[t]=i[t]);return r}function A2(i){var e=X.useRef(i),t=X.useRef(function(n){e.current&&e.current(n)});return e.current=i,t.current}var Vg=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i<e?e:i},Cy=function(i){return"touches"in i},T2=function(i){return i&&i.ownerDocument.defaultView||self},kL=function(i,e,t){var n=i.getBoundingClientRect(),r=Cy(e)?function(a,s){for(var o=0;o<a.length;o++)if(a[o].identifier===s)return a[o];return a[0]}(e.touches,t):e;return{left:Vg((r.pageX-(n.left+T2(i).pageXOffset))/n.width),top:Vg((r.pageY-(n.top+T2(i).pageYOffset))/n.height)}},WL=function(i){!Cy(i)&&i.preventDefault()},cR=xe.memo(function(i){var e=i.onMove,t=i.onKey,n=lR(i,["onMove","onKey"]),r=X.useRef(null),a=A2(e),s=A2(t),o=X.useRef(null),c=X.useRef(!1),f=X.useMemo(function(){var y=function(S){WL(S),(Cy(S)?S.touches.length>0:S.buttons>0)&&r.current?a(kL(r.current,S,o.current)):A(!1)},_=function(){return A(!1)};function A(S){var x=c.current,E=T2(r.current),D=S?E.addEventListener:E.removeEventListener;D(x?"touchmove":"mousemove",y),D(x?"touchend":"mouseup",_)}return[function(S){var x=S.nativeEvent,E=r.current;if(E&&(WL(x),!function(B,U){return U&&!Cy(B)}(x,c.current)&&E)){if(Cy(x)){c.current=!0;var D=x.changedTouches||[];D.length&&(o.current=D[0].identifier)}E.focus(),a(kL(E,x,o.current)),A(!0)}},function(S){var x=S.which||S.keyCode;x<37||x>40||(S.preventDefault(),s({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},A]},[s,a]),d=f[0],m=f[1],v=f[2];return X.useEffect(function(){return v},[v]),xe.createElement("div",nv({},n,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:r,onKeyDown:m,tabIndex:0,role:"slider"}))}),T_=function(i){return i.filter(Boolean).join(" ")},uR=function(i){var e=i.color,t=i.left,n=i.top,r=n===void 0?.5:n,a=T_(["react-colorful__pointer",i.className]);return xe.createElement("div",{className:a,style:{top:100*r+"%",left:100*t+"%"}},xe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},bs=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t},mF=function(i){var e=i.s,t=i.v,n=i.a,r=(200-e)*t/100;return{h:bs(i.h),s:bs(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:bs(r/2),a:bs(n,2)}},w2=function(i){var e=mF(i);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},_T=function(i){var e=mF(i);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},gF=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var a=Math.floor(e),s=n*(1-t),o=n*(1-(e-a)*t),c=n*(1-(1-e+a)*t),f=a%6;return{r:bs(255*[n,o,s,s,c,n][f]),g:bs(255*[c,n,n,o,s,s][f]),b:bs(255*[s,s,c,n,n,o][f]),a:bs(r,2)}},vF=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,a=Math.max(e,t,n),s=a-Math.min(e,t,n),o=s?a===e?(t-n)/s:a===t?2+(n-e)/s:4+(e-t)/s:0;return{h:bs(60*(o<0?o+6:o)),s:bs(a?s/a*100:0),v:bs(a/255*100),a:r}},yF=xe.memo(function(i){var e=i.hue,t=i.onChange,n=T_(["react-colorful__hue",i.className]);return xe.createElement("div",{className:n},xe.createElement(cR,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Vg(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuetext":bs(e)},xe.createElement(uR,{className:"react-colorful__hue-pointer",left:e/360,color:w2({h:e,s:100,v:100,a:1})})))}),_F=xe.memo(function(i){var e=i.hsva,t=i.onChange,n={backgroundColor:w2({h:e.h,s:100,v:100,a:1})};return xe.createElement("div",{className:"react-colorful__saturation",style:n},xe.createElement(cR,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Vg(e.s+100*r.left,0,100),v:Vg(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+bs(e.s)+"%, Brightness "+bs(e.v)+"%"},xe.createElement(uR,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:w2(e)})))}),fR=function(i,e){if(i===e)return!0;for(var t in i)if(i[t]!==e[t])return!1;return!0};function xF(i,e,t){var n=A2(t),r=X.useState(function(){return i.toHsva(e)}),a=r[0],s=r[1],o=X.useRef({color:e,hsva:a});X.useEffect(function(){if(!i.equal(e,o.current.color)){var f=i.toHsva(e);o.current={hsva:f,color:e},s(f)}},[e,i]),X.useEffect(function(){var f;fR(a,o.current.hsva)||i.equal(f=i.fromHsva(a),o.current.color)||(o.current={hsva:a,color:f},n(f))},[a,i,n]);var c=X.useCallback(function(f){s(function(d){return Object.assign({},d,f)})},[]);return[a,c]}var eQ=typeof window<"u"?X.useLayoutEffect:X.useEffect,tQ=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},XL=new Map,bF=function(i){eQ(function(){var e=i.current?i.current.ownerDocument:document;if(e!==void 0&&!XL.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,XL.set(e,t);var n=tQ();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},nQ=function(i){var e=i.className,t=i.colorModel,n=i.color,r=n===void 0?t.defaultColor:n,a=i.onChange,s=lR(i,["className","colorModel","color","onChange"]),o=X.useRef(null);bF(o);var c=xF(t,r,a),f=c[0],d=c[1],m=T_(["react-colorful",e]);return xe.createElement("div",nv({},s,{ref:o,className:m}),xe.createElement(_F,{hsva:f,onChange:d}),xe.createElement(yF,{hue:f.h,onChange:d,className:"react-colorful__last-control"}))},iQ=function(i){var e=i.className,t=i.hsva,n=i.onChange,r={backgroundImage:"linear-gradient(90deg, "+_T(Object.assign({},t,{a:0}))+", "+_T(Object.assign({},t,{a:1}))+")"},a=T_(["react-colorful__alpha",e]);return xe.createElement("div",{className:a},xe.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),xe.createElement(cR,{onMove:function(s){n({a:s.left})},onKey:function(s){n({a:Vg(t.a+s.left)})},"aria-label":"Alpha","aria-valuetext":bs(100*t.a)+"%"},xe.createElement(uR,{className:"react-colorful__alpha-pointer",left:t.a,color:_T(t)})))},rQ=function(i){var e=i.className,t=i.colorModel,n=i.color,r=n===void 0?t.defaultColor:n,a=i.onChange,s=lR(i,["className","colorModel","color","onChange"]),o=X.useRef(null);bF(o);var c=xF(t,r,a),f=c[0],d=c[1],m=T_(["react-colorful",e]);return xe.createElement("div",nv({},s,{ref:o,className:m}),xe.createElement(_F,{hsva:f,onChange:d}),xe.createElement(yF,{hue:f.h,onChange:d}),xe.createElement(iQ,{hsva:f,onChange:d,className:"react-colorful__last-control"}))},aQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:vF,fromHsva:gF,equal:fR},sQ=function(i){return xe.createElement(rQ,nv({},i,{colorModel:aQ}))},oQ={defaultColor:{r:0,g:0,b:0},toHsva:function(i){return vF({r:i.r,g:i.g,b:i.b,a:1})},fromHsva:function(i){return{r:(e=gF(i)).r,g:e.g,b:e.b};var e},equal:fR},lQ=function(i){return xe.createElement(nQ,nv({},i,{colorModel:oQ}))},xT={exports:{}},bT,$L;function cQ(){if($L)return bT;$L=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bT=i,bT}var ST,jL;function uQ(){if(jL)return ST;jL=1;var i=cQ();function e(){}function t(){}return t.resetWarningCache=e,ST=function(){function n(s,o,c,f,d,m){if(m!==i){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}n.isRequired=n;function r(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},ST}var qL;function fQ(){return qL||(qL=1,xT.exports=uQ()()),xT.exports}var hQ=fQ();const Vi=ho(hQ);function iv(i,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{f(n.next(d))}catch(m){s(m)}}function c(d){try{f(n.throw(d))}catch(m){s(m)}}function f(d){d.done?a(d.value):r(d.value).then(o,c)}f((n=n.apply(i,[])).next())})}function rv(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,r,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(f){return function(d){return c([f,d])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(i,t)}catch(d){f=[6,d],r=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function dQ(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,a=[],s;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a}function pQ(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(dQ(arguments[e]));return i}var mQ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function w_(i,e){var t=gQ(i);if(typeof t.path!="string"){var n=i.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:i.name,writable:!1,configurable:!1,enumerable:!0})}return t}function gQ(i){var e=i.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!i.type){var n=e.split(".").pop().toLowerCase(),r=mQ.get(n);r&&Object.defineProperty(i,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return i}var vQ=[".DS_Store","Thumbs.db"];function yQ(i){return iv(this,void 0,void 0,function(){return rv(this,function(e){return KS(i)&&_Q(i)?[2,MQ(i.dataTransfer,i.type)]:xQ(i)?[2,bQ(i)]:Array.isArray(i)&&i.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,SQ(i)]:[2,[]]})})}function _Q(i){return KS(i.dataTransfer)}function xQ(i){return KS(i)&&KS(i.target)}function KS(i){return typeof i=="object"&&i!==null}function bQ(i){return C2(i.target.files).map(function(e){return w_(e)})}function SQ(i){return iv(this,void 0,void 0,function(){var e;return rv(this,function(t){switch(t.label){case 0:return[4,Promise.all(i.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return w_(n)})]}})})}function MQ(i,e){return iv(this,void 0,void 0,function(){var t,n;return rv(this,function(r){switch(r.label){case 0:return i===null?[2,[]]:i.items?(t=C2(i.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(EQ))]):[3,2];case 1:return n=r.sent(),[2,YL(SF(n))];case 2:return[2,YL(C2(i.files).map(function(a){return w_(a)}))]}})})}function YL(i){return i.filter(function(e){return vQ.indexOf(e.name)===-1})}function C2(i){if(i===null)return[];for(var e=[],t=0;t<i.length;t++){var n=i[t];e.push(n)}return e}function EQ(i){if(typeof i.webkitGetAsEntry!="function")return KL(i);var e=i.webkitGetAsEntry();return e&&e.isDirectory?MF(e):KL(i)}function SF(i){return i.reduce(function(e,t){return pQ(e,Array.isArray(t)?SF(t):[t])},[])}function KL(i){var e=i.getAsFile();if(!e)return Promise.reject(i+" is not a File");var t=w_(e);return Promise.resolve(t)}function AQ(i){return iv(this,void 0,void 0,function(){return rv(this,function(e){return[2,i.isDirectory?MF(i):TQ(i)]})})}function MF(i){var e=i.createReader();return new Promise(function(t,n){var r=[];function a(){var s=this;e.readEntries(function(o){return iv(s,void 0,void 0,function(){var c,f,d;return rv(this,function(m){switch(m.label){case 0:if(o.length)return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return c=m.sent(),t(c),[3,4];case 3:return f=m.sent(),n(f),[3,4];case 4:return[3,6];case 5:d=Promise.all(o.map(AQ)),r.push(d),a(),m.label=6;case 6:return[2]}})})},function(o){n(o)})}a()})}function TQ(i){return iv(this,void 0,void 0,function(){return rv(this,function(e){return[2,new Promise(function(t,n){i.file(function(r){var a=w_(r,i.fullPath);t(a)},function(r){n(r)})})]})})}var fb={},JL;function wQ(){return JL||(JL=1,fb.__esModule=!0,fb.default=function(i,e){if(i&&e){var t=Array.isArray(e)?e:e.split(","),n=i.name||"",r=(i.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return t.some(function(s){var o=s.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?a===o.replace(/\/.*$/,""):r===o})}return!0}),fb}var CQ=wQ();const RQ=ho(CQ);function ZL(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function QL(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(t),!0).forEach(function(n){EF(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ZL(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function EF(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function eI(i,e){return IQ(i)||LQ(i,e)||BQ(i,e)||DQ()}function DQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(i,e){if(i){if(typeof i=="string")return tI(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tI(i,e)}}function tI(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function LQ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,a=!1,s,o;try{for(t=t.call(i);!(r=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(c){a=!0,o=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function IQ(i){if(Array.isArray(i))return i}var PQ="file-invalid-type",NQ="file-too-large",OQ="file-too-small",UQ="too-many-files",FQ=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:PQ,message:"File type must be ".concat(t)}},nI=function(e){return{code:NQ,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},iI=function(e){return{code:OQ,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},zQ={code:UQ,message:"Too many files"};function AF(i,e){var t=i.type==="application/x-moz-file"||RQ(i,e);return[t,t?null:FQ(e)]}function TF(i,e,t){if(K0(i.size))if(K0(e)&&K0(t)){if(i.size>t)return[!1,nI(t)];if(i.size<e)return[!1,iI(e)]}else{if(K0(e)&&i.size<e)return[!1,iI(e)];if(K0(t)&&i.size>t)return[!1,nI(t)]}return[!0,null]}function K0(i){return i!=null}function HQ(i){var e=i.files,t=i.accept,n=i.minSize,r=i.maxSize,a=i.multiple,s=i.maxFiles;return!a&&e.length>1||a&&s>=1&&e.length>s?!1:e.every(function(o){var c=AF(o,t),f=eI(c,1),d=f[0],m=TF(o,n,r),v=eI(m,1),y=v[0];return d&&y})}function JS(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function hb(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function rI(i){i.preventDefault()}function GQ(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function VQ(i){return i.indexOf("Edge/")!==-1}function kQ(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return GQ(i)||VQ(i)}function Bc(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return e.some(function(o){return!JS(n)&&o&&o.apply(void 0,[n].concat(a)),JS(n)})}}function WQ(){return"showOpenFilePicker"in window}function XQ(i){return i=typeof i=="string"?i.split(","):i,[{description:"everything",accept:Array.isArray(i)?i.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return QL(QL({},e),{},EF({},t,[]))},{}):{}}]}function $Q(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function jQ(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}var qQ=["children"],YQ=["open"],KQ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],JQ=["refKey","onChange","onClick"];function ZQ(i){return tee(i)||eee(i)||wF(i)||QQ()}function QQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eee(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function tee(i){if(Array.isArray(i))return R2(i)}function MT(i,e){return ree(i)||iee(i,e)||wF(i,e)||nee()}function nee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wF(i,e){if(i){if(typeof i=="string")return R2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R2(i,e)}}function R2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function iee(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,a=!1,s,o;try{for(t=t.call(i);!(r=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(c){a=!0,o=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function ree(i){if(Array.isArray(i))return i}function aI(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function fr(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aI(Object(t),!0).forEach(function(n){D2(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):aI(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function D2(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ZS(i,e){if(i==null)return{};var t=aee(i,e),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function aee(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,a;for(a=0;a<n.length;a++)r=n[a],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}var hR=X.forwardRef(function(i,e){var t=i.children,n=ZS(i,qQ),r=RF(n),a=r.open,s=ZS(r,YQ);return X.useImperativeHandle(e,function(){return{open:a}},[a]),xe.createElement(X.Fragment,null,t(fr(fr({},s),{},{open:a})))});hR.displayName="Dropzone";var CF={disabled:!1,getFilesFromEvent:yQ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};hR.defaultProps=CF;hR.propTypes={children:Vi.func,accept:Vi.oneOfType([Vi.string,Vi.arrayOf(Vi.string)]),multiple:Vi.bool,preventDropOnDocument:Vi.bool,noClick:Vi.bool,noKeyboard:Vi.bool,noDrag:Vi.bool,noDragEventsBubbling:Vi.bool,minSize:Vi.number,maxSize:Vi.number,maxFiles:Vi.number,disabled:Vi.bool,getFilesFromEvent:Vi.func,onFileDialogCancel:Vi.func,onFileDialogOpen:Vi.func,useFsAccessApi:Vi.bool,onDragEnter:Vi.func,onDragLeave:Vi.func,onDragOver:Vi.func,onDrop:Vi.func,onDropAccepted:Vi.func,onDropRejected:Vi.func,validator:Vi.func};var B2={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function RF(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=fr(fr({},CF),i),t=e.accept,n=e.disabled,r=e.getFilesFromEvent,a=e.maxSize,s=e.minSize,o=e.multiple,c=e.maxFiles,f=e.onDragEnter,d=e.onDragLeave,m=e.onDragOver,v=e.onDrop,y=e.onDropAccepted,_=e.onDropRejected,A=e.onFileDialogCancel,S=e.onFileDialogOpen,x=e.useFsAccessApi,E=e.preventDropOnDocument,D=e.noClick,B=e.noKeyboard,U=e.noDrag,w=e.noDragEventsBubbling,O=e.validator,I=X.useMemo(function(){return typeof S=="function"?S:sI},[S]),L=X.useMemo(function(){return typeof A=="function"?A:sI},[A]),R=X.useRef(null),F=X.useRef(null),G=X.useReducer(see,B2),V=MT(G,2),$=V[0],K=V[1],z=$.isFocused,ee=$.isFileDialogActive,ne=$.draggedFiles,de=X.useRef(typeof window<"u"&&window.isSecureContext&&x&&WQ()),Y=function(){!de.current&&ee&&setTimeout(function(){if(F.current){var k=F.current.files;k.length||(K({type:"closeDialog"}),L())}},300)};X.useEffect(function(){return window.addEventListener("focus",Y,!1),function(){window.removeEventListener("focus",Y,!1)}},[F,ee,L,de]);var fe=X.useRef([]),Re=function(k){R.current&&R.current.contains(k.target)||(k.preventDefault(),fe.current=[])};X.useEffect(function(){return E&&(document.addEventListener("dragover",rI,!1),document.addEventListener("drop",Re,!1)),function(){E&&(document.removeEventListener("dragover",rI),document.removeEventListener("drop",Re))}},[R,E]);var Le=X.useCallback(function(te){te.preventDefault(),te.persist(),Pe(te),fe.current=[].concat(ZQ(fe.current),[te.target]),hb(te)&&Promise.resolve(r(te)).then(function(k){JS(te)&&!w||(K({draggedFiles:k,isDragActive:!0,type:"setDraggedFiles"}),f&&f(te))})},[r,f,w]),oe=X.useCallback(function(te){te.preventDefault(),te.persist(),Pe(te);var k=hb(te);if(k&&te.dataTransfer)try{te.dataTransfer.dropEffect="copy"}catch{}return k&&m&&m(te),!1},[m,w]),ke=X.useCallback(function(te){te.preventDefault(),te.persist(),Pe(te);var k=fe.current.filter(function(Ee){return R.current&&R.current.contains(Ee)}),ie=k.indexOf(te.target);ie!==-1&&k.splice(ie,1),fe.current=k,!(k.length>0)&&(K({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),hb(te)&&d&&d(te))},[R,d,w]),Ge=X.useCallback(function(te,k){var ie=[],Ee=[];te.forEach(function(Be){var Ue=AF(Be,t),He=MT(Ue,2),ft=He[0],Et=He[1],Rt=TF(Be,s,a),ct=MT(Rt,2),pt=ct[0],Nt=ct[1],ge=O?O(Be):null;if(ft&&pt&&!ge)ie.push(Be);else{var Ve=[Et,Nt];ge&&(Ve=Ve.concat(ge)),Ee.push({file:Be,errors:Ve.filter(function(_t){return _t})})}}),(!o&&ie.length>1||o&&c>=1&&ie.length>c)&&(ie.forEach(function(Be){Ee.push({file:Be,errors:[zQ]})}),ie.splice(0)),K({acceptedFiles:ie,fileRejections:Ee,type:"setFiles"}),v&&v(ie,Ee,k),Ee.length>0&&_&&_(Ee,k),ie.length>0&&y&&y(ie,k)},[K,o,t,s,a,c,v,y,_,O]),Ze=X.useCallback(function(te){te.preventDefault(),te.persist(),Pe(te),fe.current=[],hb(te)&&Promise.resolve(r(te)).then(function(k){JS(te)&&!w||Ge(k,te)}),K({type:"reset"})},[r,Ge,w]),Ae=X.useCallback(function(){if(de.current){K({type:"openDialog"}),I();var te={multiple:o,types:XQ(t)};window.showOpenFilePicker(te).then(function(k){return r(k)}).then(function(k){Ge(k,null),K({type:"closeDialog"})}).catch(function(k){$Q(k)?(L(k),K({type:"closeDialog"})):jQ(k)&&(de.current=!1,F.current&&(F.current.value=null,F.current.click()))});return}F.current&&(K({type:"openDialog"}),I(),F.current.value=null,F.current.click())},[K,I,L,x,Ge,t,o]),Q=X.useCallback(function(te){!R.current||!R.current.isEqualNode(te.target)||(te.key===" "||te.key==="Enter"||te.keyCode===32||te.keyCode===13)&&(te.preventDefault(),Ae())},[R,Ae]),le=X.useCallback(function(){K({type:"focus"})},[]),me=X.useCallback(function(){K({type:"blur"})},[]),be=X.useCallback(function(){D||(kQ()?setTimeout(Ae,0):Ae())},[D,Ae]),ye=function(k){return n?null:k},j=function(k){return B?null:ye(k)},ze=function(k){return U?null:ye(k)},Pe=function(k){w&&k.stopPropagation()},ae=X.useMemo(function(){return function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=te.refKey,ie=k===void 0?"ref":k,Ee=te.role,Be=te.onKeyDown,Ue=te.onFocus,He=te.onBlur,ft=te.onClick,Et=te.onDragEnter,Rt=te.onDragOver,ct=te.onDragLeave,pt=te.onDrop,Nt=ZS(te,KQ);return fr(fr(D2({onKeyDown:j(Bc(Be,Q)),onFocus:j(Bc(Ue,le)),onBlur:j(Bc(He,me)),onClick:ye(Bc(ft,be)),onDragEnter:ze(Bc(Et,Le)),onDragOver:ze(Bc(Rt,oe)),onDragLeave:ze(Bc(ct,ke)),onDrop:ze(Bc(pt,Ze)),role:typeof Ee=="string"&&Ee!==""?Ee:"button"},ie,R),!n&&!B?{tabIndex:0}:{}),Nt)}},[R,Q,le,me,be,Le,oe,ke,Ze,B,U,n]),Z=X.useCallback(function(te){te.stopPropagation()},[]),Ie=X.useMemo(function(){return function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=te.refKey,ie=k===void 0?"ref":k,Ee=te.onChange,Be=te.onClick,Ue=ZS(te,JQ),He=D2({accept:t,multiple:o,type:"file",style:{display:"none"},onChange:ye(Bc(Ee,Ze)),onClick:ye(Bc(Be,Z)),tabIndex:-1},ie,F);return fr(fr({},He),Ue)}},[F,t,o,Ze,n]),Se=ne.length,We=Se>0&&HQ({files:ne,accept:t,minSize:s,maxSize:a,multiple:o,maxFiles:c}),ht=Se>0&&!We;return fr(fr({},$),{},{isDragAccept:We,isDragReject:ht,isFocused:z&&!n,getRootProps:ae,getInputProps:Ie,rootRef:R,inputRef:F,open:ye(Ae)})}function see(i,e){switch(e.type){case"focus":return fr(fr({},i),{},{isFocused:!0});case"blur":return fr(fr({},i),{},{isFocused:!1});case"openDialog":return fr(fr({},B2),{},{isFileDialogActive:!0});case"closeDialog":return fr(fr({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return fr(fr({},i),{},{draggedFiles:n,isDragActive:t});case"setFiles":return fr(fr({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return fr({},B2);default:return i}}function sI(){}function oee(i){let e;const t=new Set,n=(f,d)=>{const m=typeof f=="function"?f(e):f;if(m!==e){const v=e;e=d?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},r=()=>e,a=(f,d=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=d(e);function y(){const _=d(e);if(!m(v,_)){const A=v;f(v=_,A)}}return t.add(y),()=>t.delete(y)},c={setState:n,getState:r,subscribe:(f,d,m)=>d||m?a(f,d,m):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=i(n,r,c),c}const lee=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),oI=lee?X.useEffect:X.useLayoutEffect;function cee(i){const e=typeof i=="function"?oee(i):i,t=(n=e.getState,r=Object.is)=>{const[,a]=X.useReducer(S=>S+1,0),s=e.getState(),o=X.useRef(s),c=X.useRef(n),f=X.useRef(r),d=X.useRef(!1),m=X.useRef();m.current===void 0&&(m.current=n(s));let v,y=!1;(o.current!==s||c.current!==n||f.current!==r||d.current)&&(v=n(s),y=!r(m.current,v)),oI(()=>{y&&(m.current=v),o.current=s,c.current=n,f.current=r,d.current=!1});const _=X.useRef(s);oI(()=>{const S=()=>{try{const E=e.getState(),D=c.current(E);f.current(m.current,D)||(o.current=E,m.current=D,a())}catch{d.current=!0,a()}},x=e.subscribe(S);return e.getState()!==_.current&&S(),x},[]);const A=y?v:m.current;return X.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const uee=i=>(e,t,n)=>{const r=n.subscribe;return n.subscribe=(s,o,c)=>{let f=s;if(o){const d=(c==null?void 0:c.equalityFn)||Object.is;let m=s(n.getState());f=v=>{const y=s(v);if(!d(m,y)){const _=m;o(m=y,_)}},c!=null&&c.fireImmediately&&o(m,m)}return r(f)},i(e,t,n)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ET,lI;function fee(){return lI||(lI=1,ET=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),ET}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var AT,cI;function DF(){if(cI)return AT;cI=1;var i=fee();function e(t){return i(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return AT=function(n){var r,a;return!(e(n)===!1||(r=n.constructor,typeof r!="function")||(a=r.prototype,e(a)===!1)||a.hasOwnProperty("isPrototypeOf")===!1)},AT}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var TT,uI;function dR(){if(uI)return TT;uI=1;var i=DF();return TT=function(t){return i(t)||typeof t=="function"||Array.isArray(t)},TT}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var wT,fI;function hee(){return fI||(fI=1,wT=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e)===!1)break}),wT}var CT,hI;function dee(){if(hI)return CT;hI=1;var i=dR(),e=hee();function t(s,o){for(var c=arguments.length,f=0;++f<c;){var d=arguments[f];r(d)&&e(d,n,s)}return s}function n(s,o){if(a(o)){var c=this[o];r(s)&&r(c)?t(c,s):this[o]=s}}function r(s){return i(s)&&!Array.isArray(s)}function a(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return CT=t,CT}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var RT,dI;function pee(){if(dI)return RT;dI=1,RT=function(t,n,r,a,s){if(!i(t)||!n)return t;if(n=e(n),r&&(n+="."+e(r)),a&&(n+="."+e(a)),s&&(n+="."+e(s)),n in t)return t[n];for(var o=n.split("."),c=o.length,f=-1;t&&++f<c;){for(var d=o[f];d[d.length-1]==="\\";)d=d.slice(0,-1)+"."+o[++f];t=t[d]}return t};function i(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return RT}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var DT,pI;function mee(){return pI||(pI=1,DT=function(i,e){if(i===null||typeof i>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return i;for(var t=Object.prototype.propertyIsEnumerable,n=Object(i),r=arguments.length,a=0;++a<r;)for(var s=Object(arguments[a]),o=Object.getOwnPropertySymbols(s),c=0;c<o.length;c++){var f=o[c];t.call(s,f)&&(n[f]=s[f])}return n}),DT}var BT,mI;function gee(){if(mI)return BT;mI=1;var i=dR(),e=mee();BT=Object.assign||function(o){if(o===null||typeof o>"u")throw new TypeError("Cannot convert undefined or null to object");a(o)||(o={});for(var c=1;c<arguments.length;c++){var f=arguments[c];n(f)&&(f=r(f)),a(f)&&(t(o,f),e(o,f))}return o};function t(o,c){for(var f in c)s(c,f)&&(o[f]=c[f])}function n(o){return o&&typeof o=="string"}function r(o){var c={};for(var f in o)c[f]=o[f];return c}function a(o){return o&&typeof o=="object"||i(o)}function s(o,c){return Object.prototype.hasOwnProperty.call(o,c)}return BT}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var LT,gI;function vee(){if(gI)return LT;gI=1;var i=gee();LT=function(r,a,s){if(typeof r!="string")throw new TypeError("expected a string");typeof a=="function"&&(s=a,a=null),typeof a=="string"&&(a={sep:a});var o=i({sep:"."},a),c=o.quotes||['"',"'","`"],f;o.brackets===!0?f={"<":">","(":")","[":"]","{":"}"}:o.brackets&&(f=o.brackets);var d=[],m=[],v=[""],y=o.sep,_=r.length,A=-1,S;function x(){if(f&&m.length)return f[m[m.length-1]]}for(;++A<_;){var E=r[A],D=r[A+1],B={val:E,idx:A,arr:v,str:r};if(d.push(B),E==="\\"){B.val=n(o,r,A)===!0?E+D:D,B.escaped=!0,typeof s=="function"&&s(B),v[v.length-1]+=B.val,A++;continue}if(f&&f[E]){m.push(E);var U=x(),w=A+1;if(r.indexOf(U,w+1)!==-1)for(;m.length&&w<_;){var O=r[++w];if(O==="\\"){O++;continue}if(c.indexOf(O)!==-1){w=e(r,O,w+1);continue}if(U=x(),m.length&&r.indexOf(U,w+1)===-1)break;if(f[O]){m.push(O);continue}U===O&&m.pop()}if(S=w,S===-1){v[v.length-1]+=E;continue}E=r.slice(A,S+1),B.val=E,B.idx=A=S}if(c.indexOf(E)!==-1){if(S=e(r,E,A+1),S===-1){v[v.length-1]+=E;continue}t(E,o)===!0?E=r.slice(A,S+1):E=r.slice(A+1,S),B.val=E,B.idx=A=S}if(typeof s=="function"&&(s(B,d),E=B.val,A=B.idx),B.val===y&&B.split!==!1){v.push("");continue}v[v.length-1]+=B.val}return v};function e(r,a,s,o){var c=r.indexOf(a,s);return r.charAt(c-1)==="\\"?e(r,a,c+1):c}function t(r,a){return a.keepDoubleQuotes===!0&&r==='"'||a.keepSingleQuotes===!0&&r==="'"?!0:a.keepQuotes}function n(r,a,s){return typeof r.keepEscaping=="function"?r.keepEscaping(a,s):r.keepEscaping===!0||a[s+1]==="\\"}return LT}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var IT,vI;function yee(){return vI||(vI=1,IT=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),IT}var PT,yI;function _ee(){if(yI)return PT;yI=1;var i=yee();PT=function(r){i(r)||(r={});for(var a=arguments.length,s=1;s<a;s++){var o=arguments[s];i(o)&&e(r,o)}return r};function e(n,r){for(var a in r)t(r,a)&&(n[a]=r[a])}function t(n,r){return Object.prototype.hasOwnProperty.call(n,r)}return PT}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var NT,_I;function xee(){return _I||(_I=1,NT=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),NT}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var OT,xI;function bee(){if(xI)return OT;xI=1;var i=vee(),e=_ee(),t=DF(),n=xee();OT=function(a,s,o){if(!n(a)||(Array.isArray(s)&&(s=[].concat.apply([],s).join(".")),typeof s!="string"))return a;for(var c=i(s,{sep:".",brackets:!0}).filter(r),f=c.length,d=-1,m=a;++d<f;){var v=c[d];if(d!==f-1){n(m[v])||(m[v]={}),m=m[v];continue}t(m[v])&&t(o)?m[v]=e({},m[v],o):m[v]=o}return a};function r(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return OT}var UT,bI;function See(){if(bI)return UT;bI=1;var i=dR(),e=dee(),t=pee(),n=bee();return UT=function(a,s,o){if(!i(a))throw new TypeError("expected an object");if(typeof s!="string"||o==null)return e.apply(null,arguments);if(typeof o=="string")return n(a,s,o),a;var c=t(a,s);return i(o)&&i(c)&&(o=e({},c,o)),n(a,s,o),a},UT}var Mee=See();const Eee=ho(Mee),BF=(...i)=>i.filter(Boolean).join(".");function Aee(i){const e=i.split(".");return[e.pop(),e.join(".")||void 0]}function Tee(i,e){return Object.entries(vJ(i,e)).reduce((t,[,{value:n,disabled:r,key:a}])=>(t[a]=r?void 0:n,t),{})}function wee(i,e){const t=X.useRef();return qy(i,t.current)||(t.current=i),t.current}function LF(i,e){return X.useMemo(i,wee(e))}function Cee(i){const e=X.useRef(null),t=X.useRef(null),n=X.useRef(!0);return X.useLayoutEffect(()=>{i||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),X.useEffect(()=>{if(n.current){n.current=!1;return}let r;const a=e.current,s=()=>{i&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",s,{once:!0});const{height:o}=t.current.getBoundingClientRect();return a.style.height=o+"px",i||(a.style.overflow="hidden",r=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",s),clearTimeout(r)}},[i]),{wrapperRef:e,contentRef:t}}const Ree=i=>{const[e,t]=X.useState(i.getVisiblePaths());return X.useEffect(()=>{t(i.getVisiblePaths());const n=i.useStore.subscribe(i.getVisiblePaths,t,{equalityFn:XM});return()=>n()},[i]),e};function Dee(i,e,t){return i.useStore(r=>{const a=yn(yn({},t),r.data);return Tee(a,e)},XM)}function IF(i=3){const e=X.useRef(null),t=X.useRef(null),[n,r]=X.useState(!1),a=X.useCallback(()=>r(!0),[]),s=X.useCallback(()=>r(!1),[]);return X.useLayoutEffect(()=>{if(n){const{bottom:o,top:c,left:f}=e.current.getBoundingClientRect(),{height:d}=t.current.getBoundingClientRect(),m=o+d>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=f+"px",m==="down"?t.current.style.top=o+i+"px":t.current.style.bottom=window.innerHeight-c+i+"px"}},[i,n]),{popinRef:e,wrapperRef:t,shown:n,show:a,hide:s}}ZZ([QZ]);const Bee={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Vs.extend({color:()=>i=>gs(i).isValid()});const Lee=i=>Vs().color().test(i);function PF(i,{format:e,hasAlpha:t,isString:n}){const r=Bee[e]+(n&&e!=="hex"?"String":""),a=i[r]();return typeof a=="object"&&!t?yJ(a,["a"]):a}const NF=(i,e)=>{const t=gs(i);if(!t.isValid())throw Error("Invalid color");return PF(t,e)},Iee=(i,e)=>PF(gs(i),yn(yn({},e),{},{isString:!0,format:"hex"})),Pee=({value:i})=>{const e=JZ(i),t=e==="name"?"hex":e,n=typeof i=="object"?"a"in i:e==="hex"&&i.length===8||/^(rgba)|(hsla)|(hsva)/.test(i),r={format:t,hasAlpha:n,isString:typeof i=="string"};return{value:NF(i,r),settings:r}};var Nee=Object.freeze({__proto__:null,schema:Lee,sanitize:NF,format:Iee,normalize:Pee});const Oee=gn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Uee=gn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Fee=gn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function SI(i,e){return e!=="rgb"?gs(i).toRgb():i}function zee({value:i,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:r,emitOnEditEnd:a}=Ja(),{format:s,hasAlpha:o}=t,{popinRef:c,wrapperRef:f,shown:d,show:m,hide:v}=IF(),y=X.useRef(0),[_,A]=X.useState(()=>SI(i,s)),S=o?sQ:lQ,x=()=>{A(SI(i,s)),m(),r()},E=()=>{v(),a(),window.clearTimeout(y.current)},D=()=>{y.current=window.setTimeout(E,500)};return X.useEffect(()=>()=>window.clearTimeout(y.current),[]),xe.createElement(xe.Fragment,null,xe.createElement(Oee,{ref:c,active:d,onClick:()=>x(),style:{color:e}}),d&&xe.createElement(aR,null,xe.createElement(nF,{onPointerUp:E}),xe.createElement(Fee,{ref:f,onMouseEnter:()=>window.clearTimeout(y.current),onMouseLeave:B=>B.buttons===0&&D()},xe.createElement(S,{color:_,onChange:n}))))}function Hee(){const{value:i,displayValue:e,label:t,onChange:n,onUpdate:r,settings:a}=Ja();return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,t),xe.createElement(Uee,null,xe.createElement(zee,{value:i,displayValue:e,onChange:n,onUpdate:r,settings:a}),xe.createElement(rR,{value:e,onChange:n,onUpdate:r})))}var Gee=yn({component:Hee},Nee);function Vee(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Ja();return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(oR,{value:e,settings:n,onUpdate:t}))}var kee=yn({component:Vee},uF(["x","y","z"]));const Wee=gn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Xee=gn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function $ee({value:i,settings:e,onUpdate:t}){const n=X.useRef(),r=X.useRef(0),a=X.useRef(0),s=X.useRef(1),[o,c]=X.useState(!1),[f,d]=X.useState(!1),[m,v]=rF(),y=X.useRef(null),_=X.useRef(null);X.useLayoutEffect(()=>{if(o){const{top:G,left:V,width:$,height:K}=y.current.getBoundingClientRect();_.current.style.left=V+$/2+"px",_.current.style.top=G+K/2+"px"}},[o]);const{keys:[A,S],joystick:x}=e,E=x==="invertY"?1:-1,{[A]:{step:D},[S]:{step:B}}=e,U=Fu("sizes","joystickWidth"),w=Fu("sizes","joystickHeight"),O=parseFloat(U)*.8/2,I=parseFloat(w)*.8/2,L=X.useCallback(()=>{n.current||(d(!0),r.current&&v({x:r.current*O}),a.current&&v({y:a.current*-I}),n.current=window.setInterval(()=>{t(G=>{const V=D*r.current*s.current,$=E*B*a.current*s.current;return Array.isArray(G)?{[A]:G[0]+V,[S]:G[1]+$}:{[A]:G[A]+V,[S]:G[S]+$}})},16))},[O,I,t,v,D,B,A,S,E]),R=X.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,d(!1)},[]);X.useEffect(()=>{function G(V){s.current=V4(V)}return window.addEventListener("keydown",G),window.addEventListener("keyup",G),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",G),window.removeEventListener("keyup",G)}},[]);const F=A_(({first:G,active:V,delta:[$,K],movement:[z,ee]})=>{G&&c(!0);const ne=vh(z,-O,O),de=vh(ee,-I,I);r.current=Math.abs(z)>Math.abs(ne)?Math.sign(z-ne):0,a.current=Math.abs(ee)>Math.abs(de)?Math.sign(de-ee):0;let Y=i[A],fe=i[S];V?(r.current||(Y+=$*D*s.current,v({x:ne})),a.current||(fe-=E*K*B*s.current,v({y:de})),r.current||a.current?L():R(),t({[A]:Y,[S]:fe})):(c(!1),r.current=0,a.current=0,v({x:0,y:0}),R())});return xe.createElement(Wee,Er({ref:y},F()),o&&xe.createElement(aR,null,xe.createElement(Xee,{ref:_,isOutOfBounds:f},xe.createElement("div",null),xe.createElement("span",{ref:m}))))}const jee=gn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function qee(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Ja();return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(jee,{withJoystick:!!n.joystick},n.joystick&&xe.createElement($ee,{value:e,settings:n,onUpdate:t}),xe.createElement(oR,{value:e,settings:n,onUpdate:t})))}const Yee=["joystick"],OF=uF(["x","y"]),Kee=i=>{let{joystick:e=!0}=i,t=Oi(i,Yee);const{value:n,settings:r}=OF.normalize(t);return{value:n,settings:yn(yn({},r),{},{joystick:e})}};var Jee=yn(yn({component:qee},OF),{},{normalize:Kee});const Zee=i=>{if(i!==void 0){if(i instanceof File)try{return URL.createObjectURL(i)}catch{return}if(typeof i=="string"&&i.indexOf("blob:")===0)return i;throw Error("Invalid image format [undefined | blob |File].")}},Qee=(i,e)=>typeof e=="object"&&"image"in e,ete=({image:i})=>({value:i});var tte=Object.freeze({__proto__:null,sanitize:Zee,schema:Qee,normalize:ete});const nte=gn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),ite=gn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),rte=gn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),ate=gn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),ste=gn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),ote=gn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function lte(){const{label:i,value:e,onUpdate:t,disabled:n}=Ja(),{popinRef:r,wrapperRef:a,shown:s,show:o,hide:c}=IF(),f=X.useCallback(_=>{_.length&&t(_[0])},[t]),d=X.useCallback(_=>{_.stopPropagation(),t(void 0)},[t]),{getRootProps:m,getInputProps:v,isDragAccept:y}=RF({maxFiles:1,accept:"image/*",onDrop:f,disabled:n});return xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(nte,null,xe.createElement(rte,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:c,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&xe.createElement(aR,null,xe.createElement(nF,{onPointerUp:c,style:{cursor:"pointer"}}),xe.createElement(ate,{ref:a,style:{backgroundImage:`url(${e})`}})),xe.createElement(ite,m({isDragAccept:y}),xe.createElement("input",v()),xe.createElement(ste,null,y?"drop image":"click or drop")),xe.createElement(ote,{onClick:d,disabled:!e})))}var cte=yn({component:lte},tte);const MI=Vs().number(),ute=(i,e)=>Vs().array().length(2).every.number().test(i)&&Vs().schema({min:MI,max:MI}).test(e),L2=i=>({min:i[0],max:i[1]}),UF=(i,{bounds:[e,t]},n)=>{const r={min:n[0],max:n[1]},{min:a,max:s}=yn(yn({},r),i);return[vh(Number(a),e,Math.max(e,s)),vh(Number(s),Math.min(t,a),t)]},fte=({value:i,min:e,max:t})=>{const n={min:e,max:t},r=cF(L2(i),{min:n,max:n}),a=[e,t],s=yn(yn({},r),{},{bounds:a});return{value:UF(L2(i),s,i),settings:s}};var hte=Object.freeze({__proto__:null,schema:ute,format:L2,sanitize:UF,normalize:fte});const dte=["value","bounds","onDrag"],pte=["bounds"],mte=gn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function gte(i){let{value:e,bounds:[t,n],onDrag:r}=i,a=Oi(i,dte);const s=X.useRef(null),o=X.useRef(null),c=X.useRef(null),f=X.useRef(0),d=Fu("sizes","scrubberWidth"),m=A_(({event:_,first:A,xy:[S],movement:[x],memo:E={}})=>{if(A){const{width:B,left:U}=s.current.getBoundingClientRect();f.current=B-parseFloat(d);const w=(_==null?void 0:_.target)===o.current||(_==null?void 0:_.target)===c.current;E.pos=qS((S-U)/B,t,n);const O=Math.abs(E.pos-e.min)-Math.abs(E.pos-e.max);E.key=O<0||O===0&&E.pos<=e.min?"min":"max",w&&(E.pos=e[E.key])}const D=E.pos+qS(x/f.current,0,n-t);return r({[E.key]:rZ(D,a[E.key])}),E}),v=`calc(${jS(e.min,t,n)} * (100% - ${d} - 8px) + 4px)`,y=`calc(${1-jS(e.max,t,n)} * (100% - ${d} - 8px) + 4px)`;return xe.createElement(sF,Er({ref:s},m()),xe.createElement(aF,null,xe.createElement(oF,{style:{left:v,right:y}})),xe.createElement(b2,{position:"left",ref:o,style:{left:v}}),xe.createElement(b2,{position:"right",ref:c,style:{right:y}}))}function vte(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Ja(),r=Oi(n,pte);return xe.createElement(xe.Fragment,null,xe.createElement(Ko,{input:!0},xe.createElement(jl,null,i),xe.createElement(mte,null,xe.createElement(gte,Er({value:e},n,{onDrag:t})),xe.createElement(oR,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var yte=yn({component:vte},hte);const _te=()=>{const i=new Map;return{on:(e,t)=>{let n=i.get(e);n===void 0&&(n=new Set,i.set(e,n)),n.add(t)},off:(e,t)=>{const n=i.get(e);n!==void 0&&(n.delete(t),n.size===0&&i.delete(e))},emit:(e,...t)=>{const n=i.get(e);if(n!==void 0)for(const r of n)r(...t)}}},xte=["type","value"],bte=["onChange","transient","onEditStart","onEditEnd"],Ste=function(){const e=cee(uee(()=>({data:{}}))),t=_te();this.storeId=gJ(),this.useStore=e;const n={},r=new Set;this.getVisiblePaths=()=>{const s=this.getData(),o=Object.keys(s),c=[];Object.entries(n).forEach(([d,m])=>{m.render&&o.some(v=>v.indexOf(d)===0)&&!m.render(this.get)&&c.push(d+".")});const f=[];return r.forEach(d=>{d in s&&s[d].__refCount>0&&c.every(m=>d.indexOf(m)===-1)&&(!s[d].render||s[d].render(this.get))&&f.push(d)}),f},this.setOrderedPaths=s=>{s.forEach(o=>r.add(o))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(o=>{const c=o.data;return s.forEach(f=>{if(f in c){const d=c[f];d.__refCount--,d.__refCount===0&&d.type in Wo&&delete c[f]}}),{data:c}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>n[s]||{},this.getData=()=>e.getState().data,this.addData=(s,o)=>{e.setState(c=>{const f=c.data;return Object.entries(s).forEach(([d,m])=>{let v=f[d];if(v){const{type:y,value:_}=m,A=Oi(m,xte);y!==v.type?Lu(hr.INPUT_TYPE_OVERRIDE,y):((v.__refCount===0||o)&&Object.assign(v,A),v.__refCount++)}else f[d]=yn(yn({},m),{},{__refCount:1})}),{data:f}})},this.setValueAtPath=(s,o,c)=>{e.setState(f=>{const d=f.data;return PL(d[s],o,s,this,c),{data:d}})},this.setSettingsAtPath=(s,o)=>{e.setState(c=>{const f=c.data;return f[s].settings=yn(yn({},f[s].settings),o),{data:f}})},this.disableInputAtPath=(s,o)=>{e.setState(c=>{const f=c.data;return f[s].disabled=o,{data:f}})},this.set=(s,o)=>{e.setState(c=>{const f=c.data;return Object.entries(s).forEach(([d,m])=>{try{PL(f[d],m,void 0,void 0,o)}catch{}}),{data:f}})},this.getInput=s=>{try{return this.getData()[s]}catch{Lu(hr.PATH_DOESNT_EXIST,s)}},this.get=s=>{var o;return(o=this.getInput(s))===null||o===void 0?void 0:o.value},this.emitOnEditStart=s=>{t.emit(`onEditStart:${s}`,this.get(s),s,yn(yn({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{t.emit(`onEditEnd:${s}`,this.get(s),s,yn(yn({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,o)=>{const c=`onEditStart:${s}`;return t.on(c,o),()=>t.off(c,o)},this.subscribeToEditEnd=(s,o)=>{const c=`onEditEnd:${s}`;return t.on(c,o),()=>t.off(c,o)};const a=(s,o,c)=>{const f={};return Object.entries(s).forEach(([d,m])=>{if(d==="")return Lu(hr.EMPTY_KEY);let v=BF(o,d);if(m.type===Wo.FOLDER){const y=a(m.schema,v,c);Object.assign(f,y),v in n||(n[v]=m.settings)}else if(d in c)Lu(hr.DUPLICATE_KEYS,d,v,c[d].path);else{const y=EJ(m,d,v,f);if(y){const{type:_,options:A,input:S}=y,{onChange:x,transient:E,onEditStart:D,onEditEnd:B}=A,U=Oi(A,bte);f[v]=yn(yn(yn({type:_},U),S),{},{fromPanel:!0}),c[d]={path:v,onChange:x,transient:E,onEditStart:D,onEditEnd:B}}else Lu(hr.UNKNOWN_INPUT,v,m)}}),f};this.getDataFromSchema=s=>{const o={};return[a(s,"",o),o]}},FF=new Ste,Mte={collapsed:!1};function Ete(i,e){return{type:Wo.FOLDER,schema:i,settings:yn(yn({},Mte),e)}}const Ate={disabled:!1};function Tte(i,e){return{type:Wo.BUTTON,onClick:i,settings:yn(yn({},Ate),e)}}const wte=i=>"__levaInput"in i,Cte=(i,e)=>{const t={},n=e?e.toLowerCase():null;return i.forEach(r=>{const[a,s]=Aee(r);(!n||a.toLowerCase().indexOf(n)>-1)&&Eee(t,s,{[a]:{__levaInput:!0,path:r}})}),t};function Rte({toggle:i,toggled:e,name:t}){return xe.createElement(zJ,{onClick:()=>i()},xe.createElement(sR,{toggled:e}),xe.createElement("div",null,t))}const Dte=["type","label","path","valueKey","value","settings","setValue","disabled"];function Bte(i){let{type:e,label:t,path:n,valueKey:r,value:a,settings:s,setValue:o,disabled:c}=i,f=Oi(i,Dte);const{displayValue:d,onChange:m,onUpdate:v}=iF({type:e,value:a,settings:s,setValue:o}),y=hp[e].component;return y?xe.createElement(j4.Provider,{value:yn({key:r,path:n,id:""+n,label:t,displayValue:d,value:a,onChange:m,onUpdate:v,settings:s,setValue:o,disabled:c},f)},xe.createElement(VJ,{disabled:c},xe.createElement(y,null))):(Lu(hr.NO_COMPONENT_FOR_TYPE,e,n),null)}const Lte=gn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Ite({onClick:i,settings:e,label:t}){const n=KM();return xe.createElement(Ko,null,xe.createElement(Lte,{disabled:e.disabled,onClick:()=>i(n.get)},t))}const Pte=gn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Nte=gn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Ote=({label:i,opts:e})=>{let t=typeof i=="string"&&i.trim()===""?null:i,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function Ute(i){const{label:e,opts:t}=Ote(i),n=KM();return xe.createElement(Ko,{input:!!e},e&&xe.createElement(jl,null,e),xe.createElement(Pte,null,Object.entries(t).map(([r,a])=>xe.createElement(Nte,{key:r,onClick:()=>a(n.get)},r))))}const Fte=gn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),zF=100;function zte(i,e){i.push(e),i.length>zF&&i.shift()}const Hte=X.forwardRef(function({initialValue:i},e){const t=Fu("colors","highlight3"),n=Fu("colors","elevation2"),r=Fu("colors","highlight1"),[a,s]=X.useMemo(()=>[gs(r).alpha(.4).toRgbString(),gs(r).alpha(.1).toRgbString()],[r]),o=X.useRef([i]),c=X.useRef(i),f=X.useRef(i),d=X.useRef(),m=X.useCallback((_,A)=>{if(!_)return;const{width:S,height:x}=_,E=new Path2D,D=S/zF,B=x*.05;for(let O=0;O<o.current.length;O++){const I=jS(o.current[O],c.current,f.current),L=D*O,R=x-I*(x-B*2)-B;E.lineTo(L,R)}A.clearRect(0,0,S,x);const U=new Path2D(E);U.lineTo(D*(o.current.length+1),x),U.lineTo(0,x),U.lineTo(0,0);const w=A.createLinearGradient(0,0,0,x);w.addColorStop(0,a),w.addColorStop(1,s),A.fillStyle=w,A.fill(U),A.strokeStyle=n,A.lineJoin="round",A.lineWidth=14,A.stroke(E),A.strokeStyle=t,A.lineWidth=2,A.stroke(E)},[t,n,a,s]),[v,y]=JJ(m);return X.useImperativeHandle(e,()=>({frame:_=>{(c.current===void 0||_<c.current)&&(c.current=_),(f.current===void 0||_>f.current)&&(f.current=_),zte(o.current,_),d.current=requestAnimationFrame(()=>m(v.current,y.current))}}),[v,y,m]),X.useEffect(()=>()=>cancelAnimationFrame(d.current),[]),xe.createElement(Fte,{ref:v})}),EI=i=>Number.isFinite(i)?i.toPrecision(2):i.toString(),Gte=X.forwardRef(function({initialValue:i},e){const[t,n]=X.useState(EI(i));return X.useImperativeHandle(e,()=>({frame:r=>n(EI(r))}),[]),xe.createElement("div",null,t)});function AI(i){return typeof i=="function"?i():i.current}function Vte({label:i,objectOrFn:e,settings:t}){const n=X.useRef(),r=X.useRef(AI(e));return X.useEffect(()=>{const a=window.setInterval(()=>{var s;document.hidden||(s=n.current)===null||s===void 0||s.frame(AI(e))},t.interval);return()=>window.clearInterval(a)},[e,t.interval]),xe.createElement(Ko,{input:!0},xe.createElement(jl,{align:"top"},i),t.graph?xe.createElement(Hte,{ref:n,initialValue:r.current}):xe.createElement(Gte,{ref:n,initialValue:r.current}))}const kte=["type","label","key"],Wte={[Wo.BUTTON]:Ite,[Wo.BUTTON_GROUP]:Ute,[Wo.MONITOR]:Vte},Xte=xe.memo(({path:i})=>{const[e,{set:t,setSettings:n,disable:r,storeId:a,emitOnEditStart:s,emitOnEditEnd:o}]=QJ(i);if(!e)return null;const{type:c,label:f,key:d}=e,m=Oi(e,kte);if(c in Wo){const v=Wte[c];return xe.createElement(v,Er({label:f,path:i},m))}return c in hp?xe.createElement(Bte,Er({key:a+i,type:c,label:f,storeId:a,path:i,valueKey:d,setValue:t,setSettings:n,disable:r,emitOnEditStart:s,emitOnEditEnd:o},m)):(lJ(hr.UNSUPPORTED_INPUT,c,i),null)}),$te=({name:i,path:e,tree:t})=>{const n=KM(),r=BF(e,i),{collapsed:a,color:s}=n.getFolderSettings(r),[o,c]=X.useState(!a),f=X.useRef(null),d=Fu("colors","folderWidgetColor"),m=Fu("colors","folderTextColor");return X.useLayoutEffect(()=>{f.current.style.setProperty("--leva-colors-folderWidgetColor",s||d),f.current.style.setProperty("--leva-colors-folderTextColor",s||m)},[s,d,m]),xe.createElement(YS,{ref:f},xe.createElement(Rte,{name:i,toggled:o,toggle:()=>c(v=>!v)}),xe.createElement(HF,{parent:r,tree:t,toggled:o}))},HF=xe.memo(({isRoot:i=!1,fill:e=!1,flat:t=!1,parent:n,tree:r,toggled:a})=>{const{wrapperRef:s,contentRef:o}=Cee(a);return xe.createElement(_2,{ref:s,isRoot:i,fill:e,flat:t},xe.createElement(Q4,{ref:o,isRoot:i,toggled:a},Object.entries(r).map(([c,f])=>wte(f)?xe.createElement(Xte,{key:f.path,valueKey:f.valueKey,path:f.path}):xe.createElement($te,{key:c,name:c,path:n,tree:f}))))}),jte=gn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${tF}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),GF=40,QS=gn("i",{$flexCenter:"",width:GF,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),qte=gn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Yte=gn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${QS}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Kte=gn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Jte=gn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:GF}}}}),Zte=xe.forwardRef(({setFilter:i,toggle:e},t)=>{const[n,r]=X.useState(""),a=X.useMemo(()=>G4(i,250),[i]),s=()=>{i(""),r("")},o=c=>{const f=c.currentTarget.value;e(!0),r(f)};return X.useEffect(()=>{a(n)},[n,a]),xe.createElement(xe.Fragment,null,xe.createElement(Kte,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:c=>c.stopPropagation(),onChange:o}),xe.createElement(QS,{onClick:()=>s(),style:{visibility:n?"visible":"hidden"}},xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},xe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Qte({setFilter:i,onDrag:e,toggle:t,toggled:n,title:r,drag:a,filterEnabled:s}){const[o,c]=X.useState(!1),f=X.useRef(null);X.useEffect(()=>{var m,v;o?(m=f.current)===null||m===void 0||m.focus():(v=f.current)===null||v===void 0||v.blur()},[o]);const d=A_(({offset:[m,v]})=>e({x:m,y:v}),{filterTaps:!0});return X.useEffect(()=>{const m=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&c(y=>!y)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),xe.createElement(xe.Fragment,null,xe.createElement(qte,{mode:a?"drag":void 0},xe.createElement(QS,{active:!n,onClick:()=>t()},xe.createElement(sR,{toggled:n,width:12,height:8})),xe.createElement(Jte,Er({},a?d():{},{drag:a,filterEnabled:s}),r===void 0&&a?xe.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},xe.createElement("circle",{cx:"2",cy:"2",r:"2"}),xe.createElement("circle",{cx:"14",cy:"2",r:"2"}),xe.createElement("circle",{cx:"26",cy:"2",r:"2"}),xe.createElement("circle",{cx:"2",cy:"12",r:"2"}),xe.createElement("circle",{cx:"14",cy:"12",r:"2"}),xe.createElement("circle",{cx:"26",cy:"12",r:"2"})):r),s&&xe.createElement(QS,{active:o,onClick:()=>c(m=>!m)},xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},xe.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),xe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),xe.createElement(Yte,{toggled:o},xe.createElement(Zte,{ref:f,setFilter:i,toggle:t})))}const ene=["store","hidden","theme","collapsed"];function tne(i){let{store:e,hidden:t=!1,theme:n,collapsed:r=!1}=i,a=Oi(i,ene);const s=LF(()=>IJ(n),[n]),[o,c]=X.useState(!r),f=typeof r=="object"?!r.collapsed:o,d=X.useMemo(()=>typeof r=="object"?m=>{typeof m=="function"?r.onChange(!m(!r.collapsed)):r.onChange(!m)}:c,[r]);return!e||t?null:xe.createElement(iR.Provider,{value:s},xe.createElement(nne,Er({store:e},a,{toggled:f,setToggle:d,rootClass:s.className})))}const nne=xe.memo(({store:i,rootClass:e,fill:t=!1,flat:n=!1,neverHide:r=!1,oneLineLabels:a=!1,titleBar:s={title:void 0,drag:!0,filter:!0},hideCopyButton:o=!1,toggled:c,setToggle:f})=>{var d,m;const v=Ree(i),[y,_]=X.useState(""),A=X.useMemo(()=>Cte(v,y),[v,y]),[S,x]=rF(),E=r||v.length>0,D=typeof s=="object"&&s.title||void 0,B=typeof s=="object"&&(d=s.drag)!==null&&d!==void 0?d:!0,U=typeof s=="object"&&(m=s.filter)!==null&&m!==void 0?m:!0;return LJ(),xe.createElement(Y4.Provider,{value:{hideCopyButton:o}},xe.createElement(jte,{ref:S,className:e,fill:t,flat:n,oneLineLabels:a,hideTitleBar:!s,style:{display:E?"block":"none"}},s&&xe.createElement(Qte,{onDrag:x,setFilter:_,toggle:w=>f(O=>w??!O),toggled:c,title:D,drag:B,filterEnabled:U}),E&&xe.createElement(q4.Provider,{value:i},xe.createElement(HF,{isRoot:!0,fill:t,flat:n,tree:A,toggled:c}))))}),ine=["isRoot"];let eM=!1,qd=null;function VF(i){let{isRoot:e=!1}=i,t=Oi(i,ine);return X.useEffect(()=>(eM=!0,!e&&qd&&(qd.remove(),qd=null),()=>{e||(eM=!1)}),[e]),xe.createElement(tne,Er({store:FF},t))}function rne(i){X.useEffect(()=>{i&&!eM&&(qd||(qd=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(qd),eR.render(xe.createElement(VF,{isRoot:!0}),qd))),eM=!0)},[i])}function ane(i,e,t,n,r){let a,s,o,c,f;return typeof i=="string"?(s=i,a=e,Array.isArray(t)&&(f=t)):(a=i,Array.isArray(e)?f=e:(c=e,f=t)),{schema:a,folderName:s,folderSettings:o,hookSettings:c,deps:f||[]}}function kF(i,e,t,n,r){const{folderName:a,schema:s,folderSettings:o,hookSettings:c,deps:f}=ane(i,e,t),d=typeof s=="function",m=X.useRef(!1),v=X.useRef(!0),y=LF(()=>{m.current=!0;const R=typeof s=="function"?s():s;return a?{[a]:Ete(R,o)}:R},f),_=!(c!=null&&c.store);rne(_);const[A]=X.useState(()=>(c==null?void 0:c.store)||FF),[S,x]=X.useMemo(()=>A.getDataFromSchema(y),[A,y]),[E,D,B,U,w]=X.useMemo(()=>{const R=[],F=[],G={},V={},$={};return Object.values(x).forEach(({path:K,onChange:z,onEditStart:ee,onEditEnd:ne,transient:de})=>{R.push(K),z?(G[K]=z,de||F.push(K)):F.push(K),ee&&(V[K]=ee),ne&&($[K]=ne)}),[R,F,G,V,$]},[x]),O=X.useMemo(()=>A.orderPaths(E),[E,A]),I=Dee(A,D,S),L=X.useCallback(R=>{const F=Object.entries(R).reduce((G,[V,$])=>Object.assign(G,{[x[V].path]:$}),{});A.set(F,!1)},[A,x]);return X.useEffect(()=>{const R=!v.current&&m.current;return A.addData(S,R),v.current=!1,m.current=!1,()=>A.disposePaths(O)},[A,O,S]),X.useEffect(()=>{const R=[];return Object.entries(B).forEach(([F,G])=>{G(A.get(F),F,yn({initial:!0,get:A.get},A.getInput(F)));const V=A.useStore.subscribe($=>{const K=$.data[F];return[K.disabled?void 0:K.value,K]},([$,K])=>G($,F,yn({initial:!1,get:A.get},K)),{equalityFn:XM});R.push(V)}),()=>R.forEach(F=>F())},[A,B]),X.useEffect(()=>{const R=[];return Object.entries(U).forEach(([F,G])=>R.push(A.subscribeToEditStart(F,G))),Object.entries(w).forEach(([F,G])=>R.push(A.subscribeToEditEnd(F,G))),()=>R.forEach(F=>F())},[U,w,A]),d?[I,L]:I}ku(Gl.SELECT,gZ);ku(Gl.IMAGE,cte);ku(Gl.NUMBER,sZ);ku(Gl.COLOR,Gee);ku(Gl.STRING,AZ);ku(Gl.BOOLEAN,LZ);ku(Gl.INTERVAL,yte);ku(Gl.VECTOR3D,kee);ku(Gl.VECTOR2D,Jee);function sne(){const i=[3,2,3];return Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("hemisphereLight",{args:[16777215,16777215,1],color:"#e0f7fe",position:[0,50,0],groundColor:13353394,intensity:1}),Ct.jsx("directionalLight",{position:i,color:"#f8ecde",castShadow:!0,"shadow-mapSize":[4096,4096],"shadow-camera-left":-22,"shadow-camera-bottom":-22,"shadow-camera-right":22,"shadow-camera-top":22,intensity:2})]})}function WF(i){const e=new Map,t=new Map,n=i.clone();return XF(i,n,function(r,a){e.set(a,r),t.set(r,a)}),n.traverse(function(r){if(!r.isSkinnedMesh)return;const a=r,s=e.get(r),o=s.skeleton.bones;a.skeleton=s.skeleton.clone(),a.bindMatrix.copy(s.bindMatrix),a.skeleton.bones=o.map(function(c){return t.get(c)}),a.bind(a.skeleton,a.bindMatrix)}),n}function XF(i,e,t){t(i,e);for(let n=0;n<i.children.length;n++)XF(i.children[n],e.children[n],t)}var Jb={exports:{}},one=Jb.exports,TI;function lne(){return TI||(TI=1,function(i,e){(function(t,n){i.exports=n()})(one,function(){var t={};function n(_,A,S){this.x=_,this.y=A,this.z=S}n.prototype.dot2=function(_,A){return this.x*_+this.y*A},n.prototype.dot3=function(_,A,S){return this.x*_+this.y*A+this.z*S};var r=[new n(1,1,0),new n(-1,1,0),new n(1,-1,0),new n(-1,-1,0),new n(1,0,1),new n(-1,0,1),new n(1,0,-1),new n(-1,0,-1),new n(0,1,1),new n(0,-1,1),new n(0,1,-1),new n(0,-1,-1)],a=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),o=new Array(512);t.seed=function(_){_>0&&_<1&&(_*=65536),_=Math.floor(_),_<256&&(_|=_<<8);for(var A=0;A<256;A++){var S;A&1?S=a[A]^_&255:S=a[A]^_>>8&255,s[A]=s[A+256]=S,o[A]=o[A+256]=r[S%12]}},t.seed(0);var c=.5*(Math.sqrt(3)-1),f=(3-Math.sqrt(3))/6,d=1/3,m=1/6;t.simplex2=function(_,A){var S,x,E,D=(_+A)*c,B=Math.floor(_+D),U=Math.floor(A+D),w=(B+U)*f,O=_-B+w,I=A-U+w,L,R;O>I?(L=1,R=0):(L=0,R=1);var F=O-L+f,G=I-R+f,V=O-1+2*f,$=I-1+2*f;B&=255,U&=255;var K=o[B+s[U]],z=o[B+L+s[U+R]],ee=o[B+1+s[U+1]],ne=.5-O*O-I*I;ne<0?S=0:(ne*=ne,S=ne*ne*K.dot2(O,I));var de=.5-F*F-G*G;de<0?x=0:(de*=de,x=de*de*z.dot2(F,G));var Y=.5-V*V-$*$;return Y<0?E=0:(Y*=Y,E=Y*Y*ee.dot2(V,$)),70*(S+x+E)},t.simplex3=function(_,A,S){var x,E,D,B,U=(_+A+S)*d,w=Math.floor(_+U),O=Math.floor(A+U),I=Math.floor(S+U),L=(w+O+I)*m,R=_-w+L,F=A-O+L,G=S-I+L,V,$,K,z,ee,ne;R>=F?F>=G?(V=1,$=0,K=0,z=1,ee=1,ne=0):R>=G?(V=1,$=0,K=0,z=1,ee=0,ne=1):(V=0,$=0,K=1,z=1,ee=0,ne=1):F<G?(V=0,$=0,K=1,z=0,ee=1,ne=1):R<G?(V=0,$=1,K=0,z=0,ee=1,ne=1):(V=0,$=1,K=0,z=1,ee=1,ne=0);var de=R-V+m,Y=F-$+m,fe=G-K+m,Re=R-z+2*m,Le=F-ee+2*m,oe=G-ne+2*m,ke=R-1+3*m,Ge=F-1+3*m,Ze=G-1+3*m;w&=255,O&=255,I&=255;var Ae=o[w+s[O+s[I]]],Q=o[w+V+s[O+$+s[I+K]]],le=o[w+z+s[O+ee+s[I+ne]]],me=o[w+1+s[O+1+s[I+1]]],be=.6-R*R-F*F-G*G;be<0?x=0:(be*=be,x=be*be*Ae.dot3(R,F,G));var ye=.6-de*de-Y*Y-fe*fe;ye<0?E=0:(ye*=ye,E=ye*ye*Q.dot3(de,Y,fe));var j=.6-Re*Re-Le*Le-oe*oe;j<0?D=0:(j*=j,D=j*j*le.dot3(Re,Le,oe));var ze=.6-ke*ke-Ge*Ge-Ze*Ze;return ze<0?B=0:(ze*=ze,B=ze*ze*me.dot3(ke,Ge,Ze)),32*(x+E+D+B)};function v(_){return _*_*_*(_*(_*6-15)+10)}function y(_,A,S){return(1-S)*_+S*A}return t.perlin2=function(_,A){var S=Math.floor(_),x=Math.floor(A);_=_-S,A=A-x,S=S&255,x=x&255;var E=o[S+s[x]].dot2(_,A),D=o[S+s[x+1]].dot2(_,A-1),B=o[S+1+s[x]].dot2(_-1,A),U=o[S+1+s[x+1]].dot2(_-1,A-1),w=v(_);return y(y(E,B,w),y(D,U,w),v(A))},t.perlin3=function(_,A,S){var x=Math.floor(_),E=Math.floor(A),D=Math.floor(S);_=_-x,A=A-E,S=S-D,x=x&255,E=E&255,D=D&255;var B=o[x+s[E+s[D]]].dot3(_,A,S),U=o[x+s[E+s[D+1]]].dot3(_,A,S-1),w=o[x+s[E+1+s[D]]].dot3(_,A-1,S),O=o[x+s[E+1+s[D+1]]].dot3(_,A-1,S-1),I=o[x+1+s[E+s[D]]].dot3(_-1,A,S),L=o[x+1+s[E+s[D+1]]].dot3(_-1,A,S-1),R=o[x+1+s[E+1+s[D]]].dot3(_-1,A-1,S),F=o[x+1+s[E+1+s[D+1]]].dot3(_-1,A-1,S-1),G=v(_),V=v(A),$=v(S);return y(y(y(B,I,G),y(U,L,G),$),y(y(w,R,G),y(O,F,G),$),V)},t})}(Jb)),Jb.exports}var cne=lne();const $F=ho(cne),une=`
    
#ifdef IS_VERTEX
    vec3 csm_Position;
    vec4 csm_PositionRaw;
    vec3 csm_Normal;

    // csm_PointSize
    #ifdef IS_POINTSMATERIAL
        float csm_PointSize;
    #endif
#else
    vec4 csm_DiffuseColor;
    vec4 csm_FragColor;
    float csm_UnlitFac;

    // csm_Emissive, csm_Roughness, csm_Metalness
    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL
        vec3 csm_Emissive;
        float csm_Roughness;
        float csm_Metalness;
        float csm_Iridescence;
        
        #if defined IS_MESHPHYSICALMATERIAL
            float csm_Clearcoat;
            float csm_ClearcoatRoughness;
            vec3 csm_ClearcoatNormal;
            float csm_Transmission;
            float csm_Thickness;
        #endif
    #endif

    // csm_AO
    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL
        float csm_AO;
    #endif

    // csm_Bump
    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL 
        vec3 csm_Bump;
        vec3 csm_FragNormal;
    #endif

    float csm_DepthAlpha;
#endif
`,fne=`

#ifdef IS_VERTEX
    // csm_Position & csm_PositionRaw
    #ifdef IS_UNKNOWN
        csm_Position = vec3(0.0);
        csm_PositionRaw = vec4(0.0);
        csm_Normal = vec3(0.0);
    #else
        csm_Position = position;
        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);
        csm_Normal = normal;
    #endif

    // csm_PointSize
    #ifdef IS_POINTSMATERIAL
        csm_PointSize = size;
    #endif
#else
    csm_UnlitFac = 0.0;

    // csm_DiffuseColor & csm_FragColor
    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHDISTANCEMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL
        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);
        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
    #else
        #ifdef USE_MAP
            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);

            #ifdef DECODE_VIDEO_TEXTURE
            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)
            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);
            #endif

            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
        #else
            csm_DiffuseColor = vec4(diffuse, opacity);
            csm_FragColor = vec4(diffuse, opacity);
        #endif
    #endif

    // csm_Emissive, csm_Roughness, csm_Metalness
    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL
        csm_Emissive = emissive;
        csm_Roughness = roughness;
        csm_Metalness = metalness;

        #ifdef USE_IRIDESCENCE
            csm_Iridescence = iridescence;
        #else
            csm_Iridescence = 0.0;
        #endif

        #if defined IS_MESHPHYSICALMATERIAL
            #ifdef USE_CLEARCOAT
                csm_Clearcoat = clearcoat;
                csm_ClearcoatRoughness = clearcoatRoughness;
            #else
                csm_Clearcoat = 0.0;
                csm_ClearcoatRoughness = 0.0;
            #endif

            #ifdef USE_TRANSMISSION
                csm_Transmission = transmission;
                csm_Thickness = thickness;
            #else
                csm_Transmission = 0.0;
                csm_Thickness = 0.0;
            #endif
        #endif
    #endif

    // csm_AO
    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL
        csm_AO = 0.0;
    #endif

    // csm_Bump
    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL 
        csm_Bump = vec3(0.0);
        #ifdef FLAT_SHADED
            vec3 fdx = dFdx( vViewPosition );
            vec3 fdy = dFdy( vViewPosition );
            csm_FragNormal = normalize( cross( fdx, fdy ) );
        #else
            csm_FragNormal = normalize(vNormal);
            #ifdef DOUBLE_SIDED
                csm_FragNormal *= gl_FrontFacing ? 1.0 : - 1.0;
            #endif
        #endif
    #endif

    csm_DepthAlpha = 1.0;
#endif
`,hne=`
    varying mat4 csm_internal_vModelViewMatrix;
`,dne=`
    csm_internal_vModelViewMatrix = modelViewMatrix;
`,pne=`
    varying mat4 csm_internal_vModelViewMatrix;
`,mne=`
    
`,$t={diffuse:"csm_DiffuseColor",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",fragNormal:"csm_FragNormal",clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",transmission:"csm_Transmission",thickness:"csm_Thickness",iridescence:"csm_Iridescence",pointSize:"csm_PointSize",fragColor:"csm_FragColor",depthAlpha:"csm_DepthAlpha",unlitFac:"csm_UnlitFac",position:"csm_Position",positionRaw:"csm_PositionRaw",normal:"csm_Normal"},gne={[`${$t.position}`]:"*",[`${$t.positionRaw}`]:"*",[`${$t.normal}`]:"*",[`${$t.depthAlpha}`]:"*",[`${$t.pointSize}`]:["PointsMaterial"],[`${$t.diffuse}`]:"*",[`${$t.fragColor}`]:"*",[`${$t.fragNormal}`]:"*",[`${$t.unlitFac}`]:"*",[`${$t.emissive}`]:["MeshStandardMaterial","MeshPhysicalMaterial"],[`${$t.roughness}`]:["MeshStandardMaterial","MeshPhysicalMaterial"],[`${$t.metalness}`]:["MeshStandardMaterial","MeshPhysicalMaterial"],[`${$t.iridescence}`]:["MeshStandardMaterial","MeshPhysicalMaterial"],[`${$t.ao}`]:["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"],[`${$t.bump}`]:["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"],[`${$t.clearcoat}`]:["MeshPhysicalMaterial"],[`${$t.clearcoatRoughness}`]:["MeshPhysicalMaterial"],[`${$t.clearcoatNormal}`]:["MeshPhysicalMaterial"],[`${$t.transmission}`]:["MeshPhysicalMaterial"],[`${$t.thickness}`]:["MeshPhysicalMaterial"]},vne={"*":{"#include <lights_physical_fragment>":On.lights_physical_fragment,"#include <transmission_fragment>":On.transmission_fragment},[`${$t.normal}`]:{"#include <beginnormal_vertex>":`
    vec3 objectNormal = ${$t.normal};
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `},[`${$t.position}`]:{"#include <begin_vertex>":`
    vec3 transformed = ${$t.position};
  `},[`${$t.positionRaw}`]:{"#include <project_vertex>":`
    #include <project_vertex>
    gl_Position = ${$t.positionRaw};
  `},[`${$t.pointSize}`]:{"gl_PointSize = size;":`
    gl_PointSize = ${$t.pointSize};
    `},[`${$t.diffuse}`]:{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = ${$t.diffuse};
  `},[`${$t.fragColor}`]:{"#include <opaque_fragment>":`
    #include <opaque_fragment>
    gl_FragColor = mix(gl_FragColor, ${$t.fragColor}, ${$t.unlitFac});
  `},[`${$t.emissive}`]:{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = ${$t.emissive};
    `},[`${$t.roughness}`]:{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = ${$t.roughness};
    `},[`${$t.metalness}`]:{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = ${$t.metalness};
    `},[`${$t.ao}`]:{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - ${$t.ao};
    `},[`${$t.bump}`]:{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = ${$t.bump} - (dot(${$t.bump}, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `},[`${$t.fragNormal}`]:{"#include <normal_fragment_maps>":`
      #include <normal_fragment_maps>
      normal = ${$t.fragNormal};
    `},[`${$t.depthAlpha}`]:{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * 1.0 - ${$t.depthAlpha} );
    `,"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      if(${$t.depthAlpha} < 1.0) discard;
      gl_FragColor = packDepthToRGBA( dist );
    `,"gl_FragColor = packDepthToRGBA( dist );":`
      if(${$t.depthAlpha} < 1.0) discard;
      gl_FragColor = packDepthToRGBA( dist );
    `},[`${$t.clearcoat}`]:{"material.clearcoat = clearcoat;":`material.clearcoat = ${$t.clearcoat};`},[`${$t.clearcoatRoughness}`]:{"material.clearcoatRoughness = clearcoatRoughness;":`material.clearcoatRoughness = ${$t.clearcoatRoughness};`},[`${$t.clearcoatNormal}`]:{"#include <clearcoat_normal_fragment_begin>":`
      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);
      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;
      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);
    `},[`${$t.transmission}`]:{"material.transmission = transmission;":`
      material.transmission = ${$t.transmission};
    `},[`${$t.thickness}`]:{"material.thickness = thickness;":`
      material.thickness = ${$t.thickness};
    `},[`${$t.iridescence}`]:{"material.iridescence = iridescence;":`
      material.iridescence = ${$t.iridescence};
    `}},yne={clearcoat:[$t.clearcoat,$t.clearcoatNormal,$t.clearcoatRoughness],transmission:[$t.transmission],iridescence:[$t.iridescence]};function _ne(i){let e=0;for(let n=0;n<i.length;n++)e=i.charCodeAt(n)+(e<<6)+(e<<16)-e;const t=e>>>0;return String(t)}function xne(i){try{new i}catch(e){if(e.message.indexOf("is not a constructor")>=0)return!1}return!0}function wI(i){return i.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,"")}class bne extends vr{constructor({baseMaterial:e,vertexShader:t,fragmentShader:n,uniforms:r,patchMap:a,cacheKey:s,...o}){if(!e)throw new Error("CustomShaderMaterial: baseMaterial is required.");let c;if(xne(e)){const v=Object.keys(o).length===0;c=new e(v?void 0:o)}else c=e,Object.assign(c,o);if(["ShaderMaterial","RawShaderMaterial"].includes(c.type))throw new Error(`CustomShaderMaterial does not support ${c.type} as a base material.`);super(),this.uniforms={},this.vertexShader="",this.fragmentShader="";const f=c;f.name=`CustomShaderMaterial<${c.name||c.type}>`,f.update=this.update,f.__csm={prevOnBeforeCompile:c.onBeforeCompile,baseMaterial:c,vertexShader:t,fragmentShader:n,uniforms:r,patchMap:a,cacheKey:s};const d={...f.uniforms||{},...r||{}};f.uniforms=this.uniforms=d,f.vertexShader=this.vertexShader=t||"",f.fragmentShader=this.fragmentShader=n||"",f.update({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:f.uniforms,patchMap:a,cacheKey:s}),Object.assign(this,f);const m=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(f));for(const v in m){const y=m[v];(y.get||y.set)&&Object.defineProperty(this,v,y)}return Object.defineProperty(this,"type",{get(){return c.type},set(v){c.type=v}}),this}update({fragmentShader:e,vertexShader:t,uniforms:n,cacheKey:r,patchMap:a}){const s=wI(t||""),o=wI(e||""),c=this;n&&(c.uniforms=n),t&&(c.vertexShader=t),e&&(c.fragmentShader=e),Object.entries(yne).forEach(([v,y])=>{for(const _ in y){const A=y[_];(o&&o.includes(A)||s&&s.includes(A))&&(c[v]||(c[v]=1))}});const f=c.__csm.prevOnBeforeCompile,d=(v,y,_)=>{let A,S="";if(y){const x=y.search(/void\s+main\s*\(\s*\)\s*{/);if(x!==-1){S=y.slice(0,x);let E=0,D=-1;for(let B=x;B<y.length;B++)if(y[B]==="{"&&E++,y[B]==="}"&&(E--,E===0)){D=B;break}if(D!==-1){const B=y.slice(x,D+1);A=B.slice(B.indexOf("{")+1,-1)}}else S=y}if(_&&y&&y.includes($t.fragColor)&&A&&(A=`csm_UnlitFac = 1.0;
`+A),v.includes("//~CSM_DEFAULTS")){v=v.replace("void main() {",`
          // THREE-CustomShaderMaterial by Faraz Shaikh: https://github.com/FarazzShaikh/THREE-CustomShaderMaterial
  
          ${S}
          
          void main() {
          `);const x=v.lastIndexOf("//~CSM_MAIN_END");if(x!==-1){const E=`
            ${A?`${A}`:""}
            //~CSM_MAIN_END
          `;v=v.slice(0,x)+E+v.slice(x)}}else{const x=/void\s*main\s*\(\s*\)\s*{/gm;v=v.replace(x,`
          // THREE-CustomShaderMaterial by Faraz Shaikh: https://github.com/FarazzShaikh/THREE-CustomShaderMaterial
  
          //~CSM_DEFAULTS
          ${_?pne:hne}
          ${une}
  
          ${S}
          
          void main() {
            {
              ${fne}
            }
            ${_?mne:dne}

            ${A?`${A}`:""}
            //~CSM_MAIN_END
          `)}return v};c.onBeforeCompile=(v,y)=>{f==null||f(v,y);const _=a||{},A=c.type,S=A?`#define IS_${A.toUpperCase()};
`:`#define IS_UNKNOWN;
`;v.vertexShader=S+`#define IS_VERTEX
`+v.vertexShader,v.fragmentShader=S+`#define IS_FRAGMENT
`+v.fragmentShader;const x=E=>{for(const D in E){const B=D==="*"||s&&s.includes(D);if(D==="*"||o&&o.includes(D)||B){const U=gne[D];if(U&&U!=="*"&&(Array.isArray(U)?!U.includes(A):U!==A)){console.error(`CustomShaderMaterial: ${D} is not available in ${A}. Shader cannot compile.`);return}const w=E[D];for(const O in w){const I=w[O];if(typeof I=="object"){const L=I.type,R=I.value;L==="fs"?v.fragmentShader=v.fragmentShader.replace(O,R):L==="vs"&&(v.vertexShader=v.vertexShader.replace(O,R))}else I&&(v.vertexShader=v.vertexShader.replace(O,I),v.fragmentShader=v.fragmentShader.replace(O,I))}}}};x(vne),x(_),v.vertexShader=d(v.vertexShader,s,!1),v.fragmentShader=d(v.fragmentShader,o,!0),n&&(v.uniforms={...v.uniforms,...c.uniforms}),c.uniforms=v.uniforms};const m=c.customProgramCacheKey;c.customProgramCacheKey=()=>((r==null?void 0:r())||_ne((s||"")+(o||"")))+(m==null?void 0:m.call(c)),c.needsUpdate=!0}clone(){const e=this;return new e.constructor({baseMaterial:e.__csm.baseMaterial.clone(),vertexShader:e.__csm.vertexShader,fragmentShader:e.__csm.fragmentShader,uniforms:e.__csm.uniforms,patchMap:e.__csm.patchMap,cacheKey:e.__csm.cacheKey})}}function Sne(i,e){const t=X.useRef(!1);X.useEffect(()=>{if(t.current)return i();t.current=!0},e)}function Mne({baseMaterial:i,vertexShader:e,fragmentShader:t,uniforms:n,cacheKey:r,patchMap:a,attach:s,...o},c){const f=X.useMemo(()=>new bne({baseMaterial:i,vertexShader:e,fragmentShader:t,uniforms:n,cacheKey:r,patchMap:a,...o}),[i]);return Sne(()=>{f.dispose(),f.update({vertexShader:e,fragmentShader:t,uniforms:n,patchMap:a,cacheKey:r})},[e,t,n,a,r]),X.useEffect(()=>()=>f.dispose(),[f]),Ct.jsx("primitive",{ref:c,attach:s??"material",object:f,...o})}X.forwardRef(Mne);function jF(i){return function(e){i.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FT,CI;function qF(){return CI||(CI=1,FT=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]),FT}var zT,RI;function Ene(){return RI||(RI=1,zT=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]),zT}var HT,DI;function YF(){return DI||(DI=1,HT=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]),HT}var GT,BI;function Ane(){if(BI)return GT;BI=1;var i=qF();return GT=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),GT}var VT,LI;function Tne(){if(LI)return VT;LI=1;var i=YF();return i=i.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),VT=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),VT}var kT,II;function wne(){if(II)return kT;II=1,kT=B;var i=qF(),e=Ene(),t=YF(),n=Ane(),r=Tne(),a=999,s=9999,o=0,c=1,f=2,d=3,m=4,v=5,y=6,_=7,A=8,S=9,x=10,E=11,D=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function B(U){var w=0,O=0,I=a,L,R,F=[],G=[],V=1,$=0,K=0,z=!1,ee=!1,ne="",de;U=U||{};var Y=t,fe=i;U.version==="300 es"&&(Y=r,fe=n);for(var Re={},Le={},w=0;w<Y.length;w++)Re[Y[w]]=!0;for(var w=0;w<fe.length;w++)Le[fe[w]]=!0;return function(Z){return G=[],Z!==null?ke(Z):Ge()};function oe(Z){Z.length&&G.push({type:D[I],data:Z,position:K,line:V,column:$})}function ke(Z){w=0,Z.toString&&(Z=Z.toString()),ne+=Z.replace(/\r\n/g,`
`),de=ne.length;for(var Ie;L=ne[w],w<de;){switch(Ie=w,I){case o:w=me();break;case c:w=le();break;case f:w=Q();break;case d:w=be();break;case m:w=ze();break;case E:w=j();break;case v:w=Pe();break;case s:w=ae();break;case S:w=Ae();break;case a:w=Ze();break}if(Ie!==w)switch(ne[Ie]){case`
`:$=0,++V;break;default:++$;break}}return O+=w,ne=ne.slice(w),G}function Ge(Z){return F.length&&oe(F.join("")),I=x,oe("(eof)"),G}function Ze(){return F=F.length?[]:F,R==="/"&&L==="*"?(K=O+w-1,I=o,R=L,w+1):R==="/"&&L==="/"?(K=O+w-1,I=c,R=L,w+1):L==="#"?(I=f,K=O+w,w):/\s/.test(L)?(I=S,K=O+w,w):(z=/\d/.test(L),ee=/[^\w_]/.test(L),K=O+w,I=z?m:ee?d:s,w)}function Ae(){return/[^\s]/g.test(L)?(oe(F.join("")),I=a,w):(F.push(L),R=L,w+1)}function Q(){return(L==="\r"||L===`
`)&&R!=="\\"?(oe(F.join("")),I=a,w):(F.push(L),R=L,w+1)}function le(){return Q()}function me(){return L==="/"&&R==="*"?(F.push(L),oe(F.join("")),I=a,w+1):(F.push(L),R=L,w+1)}function be(){if(R==="."&&/\d/.test(L))return I=v,w;if(R==="/"&&L==="*")return I=o,w;if(R==="/"&&L==="/")return I=c,w;if(L==="."&&F.length){for(;ye(F););return I=v,w}if(L===";"||L===")"||L==="("){if(F.length)for(;ye(F););return oe(L),I=a,w+1}var Z=F.length===2&&L!=="=";if(/[\w_\d\s]/.test(L)||Z){for(;ye(F););return I=a,w}return F.push(L),R=L,w+1}function ye(Z){var Ie=0,Se,We;do{if(Se=e.indexOf(Z.slice(0,Z.length+Ie).join("")),We=e[Se],Se===-1){if(Ie--+Z.length>0)continue;We=Z.slice(0,1).join("")}return oe(We),K+=We.length,F=F.slice(We.length),F.length}while(!0)}function j(){return/[^a-fA-F0-9]/.test(L)?(oe(F.join("")),I=a,w):(F.push(L),R=L,w+1)}function ze(){return L==="."||/[eE]/.test(L)?(F.push(L),I=v,R=L,w+1):L==="x"&&F.length===1&&F[0]==="0"?(I=E,F.push(L),R=L,w+1):/[^\d]/.test(L)?(oe(F.join("")),I=a,w):(F.push(L),R=L,w+1)}function Pe(){return L==="f"&&(F.push(L),R=L,w+=1),/[eE]/.test(L)||(L==="-"||L==="+")&&/[eE]/.test(R)?(F.push(L),R=L,w+1):/[^\d]/.test(L)?(oe(F.join("")),I=a,w):(F.push(L),R=L,w+1)}function ae(){if(/[^\d\w_]/.test(L)){var Z=F.join("");return Le[Z]?I=A:Re[Z]?I=_:I=y,oe(F.join("")),I=a,w}return F.push(L),R=L,w+1}}return kT}var WT,PI;function Cne(){if(PI)return WT;PI=1;var i=wne();WT=e;function e(t,n){var r=i(n),a=[];return a=a.concat(r(t)),a=a.concat(r(null)),a}return WT}var Rne=Cne();const Ky=ho(Rne);var XT,NI;function Dne(){if(NI)return XT;NI=1,XT=i;function i(e){for(var t=!1,n=0,r=0;r<e.length;r++)switch(t=t||e[r].type==="keyword"&&e[r].data==="for",e[r].data){case"(":e[r].depth=t?n++:n;break;case"{":e[r].depth=t?n:n++,t=!1;break;case"}":e[r].depth=--n;break;default:e[r].depth=n}for(var r=0;r<e.length;r++){var a=e[r],s=r+1;if(!(a.type!=="ident"&&a.type!=="keyword")&&(o(),e[s].type==="ident"&&(o(),s++,e[s].data==="("))){for(;e[s]&&e[s].data!==";"&&e[s].data!=="{";)e[s++].depth++;e[s]&&e[s].data==="{"&&e[s].depth++}}return e;function o(){for(;e[s]&&(e[s].type==="whitespace"||e[s].data==="["||e[s].data==="]"||e[s].data==="integer");)s++}}return XT}var $T,OI;function Bne(){if(OI)return $T;OI=1,$T=i;function i(e){var t=[0],n=t[0],r=0;if(!e||!e.length)return e;if(!("depth"in e[0]))throw new Error("glsl-token-scope: No scope depth defined on tokens! Use glsl-token-depth on these tokens first");for(var a=0;a<e.length;a++){var s=e[a],o=s.depth;o>r?t.push(++n):o<r&&t.splice(-1,1),s.scope=t[t.length-1],s.stack=t.slice(),r=s.depth}return e}return $T}var jT,UI;function Lne(){if(UI)return jT;UI=1,jT=i;function i(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.property=!1,n.type==="ident"){for(var r=t;e[--r]&&e[r].type==="whitespace";);e[r]&&e[r].type==="operator"&&e[r].data==="."&&(n.property=!0)}}return e}return jT}var qT,FI;function Ine(){return FI||(FI=1,qT={"<<=":!0,">>=":!0,"++":!0,"--":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"&=":!0,"^=":!0,"|=":!0,"=":!0}),qT}var YT,zI;function Pne(){return zI||(zI=1,YT={precision:!0,highp:!0,mediump:!0,lowp:!0,attribute:!0,const:!0,uniform:!0,varying:!0,break:!0,continue:!0,do:!0,for:!0,while:!0,if:!0,else:!0,in:!0,out:!0,inout:!0,true:!0,false:!0,return:!0}),YT}var KT,HI;function Nne(){if(HI)return KT;HI=1;var i=Ine(),e=Pne();KT=t;function t(n){for(var r=0,a=0;a<n.length;a++){var s=n[a],o=s.type;s.assignment=!1,s.declaration=!1,!(o!=="ident"&&o!=="builtin")&&(r=a+1,d(),n[r].type==="operator"&&i[n[r].data]&&(s.assignment=!0))}for(var a=0;a<n.length;a++){var c=n[a],o=c.type,f=c.data;if(c.declaration=!1,o==="keyword"){if(e[f])continue}else if(o!=="ident")continue;if(r=a+1,m(),n[r].type==="ident"){if(n[r++].declaration=!0,m(),n[r].data==="("){for(r++,d();n[r]&&n[r].data!==")"&&!(n[r].type!=="keyword"&&n[r].type!=="ident");)r++,d(),n[r].type==="ident"&&(n[r++].declaration=!0,d(),m(),d(),n[r].data===","&&(r++,d()));a=r;continue}for(;n[r]&&n[r].data!==";";)n[r].data===","?(r++,d(),(n[r].declaration=n[r].type==="ident")&&r++):(d(),v(),d(),r++);a=r}}for(var a=0;a<n.length;a++){var s=n[a];if(s.type==="keyword"&&s.data==="struct"&&(r=a+1,d(),n[r].type==="ident"&&(r++,d(),n[r++].data==="{"))){for(d();n[r].type==="ident"||n[r].type==="keyword";){do r++,d(),n[r].structMember=!0,n[r].declaration=!1,r++,m();while(n[r].data===",");n[r].data===";"&&r++,d()}if(r++,d(),n[r].type==="ident")for(n[r].declaration=!0,d();n[++r].data===",";)d(),r++,d(),n[r].type==="ident"&&(n[r].declaration=!0),d()}}return n;function d(y){for(;n[r]&&n[r].type==="whitespace";)r++}function m(){for(;n[r]&&(n[r].type==="integer"||n[r].data==="["||n[r].data==="]"||n[r].type==="whitespace");)r++}function v(){if(n[r]&&n[r].data==="("){var y=0;do{if(n[r].data===";")break;n[r].data==="("&&y++,n[r].data===")"&&y--}while(y&&n[++r])}}}return KT}var JT,GI;function One(){if(GI)return JT;GI=1,JT=i;function i(n,r){Dne()(n),Bne()(n),Lne()(n),Nne()(n);for(var a=t(n),s=r||e(),o={},c=0;c<n.length;c++){var f=n[c],d=f.stack,m=f.data;if(f.descoped=!1,f.type==="ident"&&!f.property&&!f.structMember){for(var v=!1,y=d.length-1;y>=0;y--){var _=a[d[y]];if(_&&_[m]){if(v=!0,y)break;f.descoped=f.data,f.data=o[m]=o[m]||s(m,f)||f.data}}v||(f.descoped=f.data,f.data=o[m]=o[m]||s(m,f)||f.data)}}return n}function e(){var n=0;return function(a){return a+"_"+(n++).toString(36)}}function t(n){for(var r={},a=0;a<n.length;a++){var s=n[a];s.declaration&&(r[s.scope]=r[s.scope]||{},r[s.scope][s.data]=s)}return r}return JT}var Une=One();const tM=ho(Une);var ZT,VI;function Fne(){if(VI)return ZT;VI=1,ZT=i;function i(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}return ZT}var zne=Fne();const lh=ho(zne);var QT,kI;function Hne(){if(kI)return QT;kI=1,QT=i;function i(n){var r=null,a=null,s=0,o=0,c=0,f=0,d=0,m=[],v,y,_;for(v=0,y;v<n.length;v++)if(_=n[v],_.data==="{"){if(s&&s++||(y=S(v,e(")"),e()),y<0)||(f=y,y=S(y,e("("),e(")")),y<0)||(d=y,y=S(y,t),y<0)||n[y].type!=="ident"||(a=n[y].data,y=S(y,t),y<0))continue;s=1,o=v,r=n[y].data,c=y;var A=S(y,t);switch(n[A]&&n[A].data){case"lowp":case"highp":case"mediump":c=A}}else if(s&&_.data==="}"){if(--s)continue;m.push({name:a,type:r,body:[o+1,v],args:[d,f+1],outer:[c,v+1]})}for(v=0;v<n.length;v++)if(_=n[v],_.data===";"){if(y=S(v,e(")"),e()),y<0||(f=y,y=S(y,e("("),e(")")),y<0)||(d=y,y=S(y,t),y<0)||n[y].type!=="ident"||(a=n[y].data,y=S(y,t),y<0)||n[y].type==="operator"||n[y].data==="return")continue;r=n[y].data,m.push({name:a,type:r,body:!1,args:[d,f+1],outer:[y,v+1]})}return m.sort(function(x,E){return x.outer[0]-E.outer[0]});function S(x,E,D){for(var B=x-1;B>=0;B--){if(E(n[B]))return B;if(D&&D(n[B]))return-1}return-1}}function e(n){return function(r){return r.type==="operator"&&(!n||r.data===n)}}function t(n){return n.type!=="whitespace"}return QT}var Gne=Hne();const Jy=ho(Gne);function db(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ew={exports:{}},WI;function Vne(){return WI||(WI=1,function(i,e){(function(t){i.exports=t()})(function(){return function t(n,r,a){function s(f,d){if(!r[f]){if(!n[f]){var m=typeof db=="function"&&db;if(!d&&m)return m(f,!0);if(o)return o(f,!0);throw new Error("Cannot find module '"+f+"'")}d=r[f]={exports:{}},n[f][0].call(d.exports,function(v){var y=n[f][1][v];return s(y||v)},d,d.exports,t,n,r,a)}return r[f].exports}for(var o=typeof db=="function"&&db,c=0;c<a.length;c++)s(a[c]);return s}({1:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){var _=t("crypto");function A(w,O){O=E(w,O);var I;return(I=O.algorithm!=="passthrough"?_.createHash(O.algorithm):new U).write===void 0&&(I.write=I.update,I.end=I.update),B(O,I).dispatch(w),I.update||I.end(""),I.digest?I.digest(O.encoding==="buffer"?void 0:O.encoding):(w=I.read(),O.encoding!=="buffer"?w.toString(O.encoding):w)}(r=n.exports=A).sha1=function(w){return A(w)},r.keys=function(w){return A(w,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(w){return A(w,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(w){return A(w,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var S=_.getHashes?_.getHashes().slice():["sha1","md5"],x=(S.push("passthrough"),["buffer","hex","binary","base64"]);function E(w,O){var I={};if(I.algorithm=(O=O||{}).algorithm||"sha1",I.encoding=O.encoding||"hex",I.excludeValues=!!O.excludeValues,I.algorithm=I.algorithm.toLowerCase(),I.encoding=I.encoding.toLowerCase(),I.ignoreUnknown=O.ignoreUnknown===!0,I.respectType=O.respectType!==!1,I.respectFunctionNames=O.respectFunctionNames!==!1,I.respectFunctionProperties=O.respectFunctionProperties!==!1,I.unorderedArrays=O.unorderedArrays===!0,I.unorderedSets=O.unorderedSets!==!1,I.unorderedObjects=O.unorderedObjects!==!1,I.replacer=O.replacer||void 0,I.excludeKeys=O.excludeKeys||void 0,w===void 0)throw new Error("Object argument required.");for(var L=0;L<S.length;++L)S[L].toLowerCase()===I.algorithm.toLowerCase()&&(I.algorithm=S[L]);if(S.indexOf(I.algorithm)===-1)throw new Error('Algorithm "'+I.algorithm+'"  not supported. supported values: '+S.join(", "));if(x.indexOf(I.encoding)===-1&&I.algorithm!=="passthrough")throw new Error('Encoding "'+I.encoding+'"  not supported. supported values: '+x.join(", "));return I}function D(w){if(typeof w=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(w))!=null}function B(w,O,I){I=I||[];function L(R){return O.update?O.update(R,"utf8"):O.write(R,"utf8")}return{dispatch:function(R){return this["_"+((R=w.replacer?w.replacer(R):R)===null?"null":typeof R)](R)},_object:function(R){var F,G=Object.prototype.toString.call(R),V=/\[object (.*)\]/i.exec(G);if(V=(V=V?V[1]:"unknown:["+G+"]").toLowerCase(),0<=(G=I.indexOf(R)))return this.dispatch("[CIRCULAR:"+G+"]");if(I.push(R),o!==void 0&&o.isBuffer&&o.isBuffer(R))return L("buffer:"),L(R);if(V==="object"||V==="function"||V==="asyncfunction")return G=Object.keys(R),w.unorderedObjects&&(G=G.sort()),w.respectType===!1||D(R)||G.splice(0,0,"prototype","__proto__","constructor"),w.excludeKeys&&(G=G.filter(function($){return!w.excludeKeys($)})),L("object:"+G.length+":"),F=this,G.forEach(function($){F.dispatch($),L(":"),w.excludeValues||F.dispatch(R[$]),L(",")});if(!this["_"+V]){if(w.ignoreUnknown)return L("["+V+"]");throw new Error('Unknown object type "'+V+'"')}this["_"+V](R)},_array:function(R,$){$=$!==void 0?$:w.unorderedArrays!==!1;var G=this;if(L("array:"+R.length+":"),!$||R.length<=1)return R.forEach(function(K){return G.dispatch(K)});var V=[],$=R.map(function(K){var z=new U,ee=I.slice();return B(w,z,ee).dispatch(K),V=V.concat(ee.slice(I.length)),z.read().toString()});return I=I.concat(V),$.sort(),this._array($,!1)},_date:function(R){return L("date:"+R.toJSON())},_symbol:function(R){return L("symbol:"+R.toString())},_error:function(R){return L("error:"+R.toString())},_boolean:function(R){return L("bool:"+R.toString())},_string:function(R){L("string:"+R.length+":"),L(R.toString())},_function:function(R){L("fn:"),D(R)?this.dispatch("[native]"):this.dispatch(R.toString()),w.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(R.name)),w.respectFunctionProperties&&this._object(R)},_number:function(R){return L("number:"+R.toString())},_xml:function(R){return L("xml:"+R.toString())},_null:function(){return L("Null")},_undefined:function(){return L("Undefined")},_regexp:function(R){return L("regex:"+R.toString())},_uint8array:function(R){return L("uint8array:"),this.dispatch(Array.prototype.slice.call(R))},_uint8clampedarray:function(R){return L("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(R))},_int8array:function(R){return L("int8array:"),this.dispatch(Array.prototype.slice.call(R))},_uint16array:function(R){return L("uint16array:"),this.dispatch(Array.prototype.slice.call(R))},_int16array:function(R){return L("int16array:"),this.dispatch(Array.prototype.slice.call(R))},_uint32array:function(R){return L("uint32array:"),this.dispatch(Array.prototype.slice.call(R))},_int32array:function(R){return L("int32array:"),this.dispatch(Array.prototype.slice.call(R))},_float32array:function(R){return L("float32array:"),this.dispatch(Array.prototype.slice.call(R))},_float64array:function(R){return L("float64array:"),this.dispatch(Array.prototype.slice.call(R))},_arraybuffer:function(R){return L("arraybuffer:"),this.dispatch(new Uint8Array(R))},_url:function(R){return L("url:"+R.toString())},_map:function(R){return L("map:"),R=Array.from(R),this._array(R,w.unorderedSets!==!1)},_set:function(R){return L("set:"),R=Array.from(R),this._array(R,w.unorderedSets!==!1)},_file:function(R){return L("file:"),this.dispatch([R.name,R.size,R.type,R.lastModfied])},_blob:function(){if(w.ignoreUnknown)return L("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return L("domwindow")},_bigint:function(R){return L("bigint:"+R.toString())},_process:function(){return L("process")},_timer:function(){return L("timer")},_pipe:function(){return L("pipe")},_tcp:function(){return L("tcp")},_udp:function(){return L("udp")},_tty:function(){return L("tty")},_statwatcher:function(){return L("statwatcher")},_securecontext:function(){return L("securecontext")},_connection:function(){return L("connection")},_zlib:function(){return L("zlib")},_context:function(){return L("context")},_nodescript:function(){return L("nodescript")},_httpparser:function(){return L("httpparser")},_dataview:function(){return L("dataview")},_signal:function(){return L("signal")},_fsevent:function(){return L("fsevent")},_tlswrap:function(){return L("tlswrap")}}}function U(){return{buf:"",write:function(w){this.buf+=w},end:function(w){this.buf+=w},read:function(){return this.buf}}}r.writeToStream=function(w,O,I){return I===void 0&&(I=O,O={}),B(O=E(w,O),I).dispatch(w)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){(function(_){var A=typeof Uint8Array<"u"?Uint8Array:Array,S=43,x=47,E=48,D=97,B=65,U=45,w=95;function O(I){return I=I.charCodeAt(0),I===S||I===U?62:I===x||I===w?63:I<E?-1:I<E+10?I-E+26+26:I<B+26?I-B:I<D+26?I-D+26:void 0}_.toByteArray=function(I){var L,R;if(0<I.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var F=I.length,F=I.charAt(F-2)==="="?2:I.charAt(F-1)==="="?1:0,G=new A(3*I.length/4-F),V=0<F?I.length-4:I.length,$=0;function K(z){G[$++]=z}for(L=0;L<V;L+=4,0)K((16711680&(R=O(I.charAt(L))<<18|O(I.charAt(L+1))<<12|O(I.charAt(L+2))<<6|O(I.charAt(L+3))))>>16),K((65280&R)>>8),K(255&R);return F==2?K(255&(R=O(I.charAt(L))<<2|O(I.charAt(L+1))>>4)):F==1&&(K((R=O(I.charAt(L))<<10|O(I.charAt(L+1))<<4|O(I.charAt(L+2))>>2)>>8&255),K(255&R)),G},_.fromByteArray=function(I){var L,R,F,G,V=I.length%3,$="";function K(z){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(z)}for(L=0,F=I.length-V;L<F;L+=3)R=(I[L]<<16)+(I[L+1]<<8)+I[L+2],$+=K((G=R)>>18&63)+K(G>>12&63)+K(G>>6&63)+K(63&G);switch(V){case 1:$=($+=K((R=I[I.length-1])>>2))+K(R<<4&63)+"==";break;case 2:$=($=($+=K((R=(I[I.length-2]<<8)+I[I.length-1])>>10))+K(R>>4&63))+K(R<<2&63)+"="}return $}})(r===void 0?this.base64js={}:r)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,n,r){(function(a,s,S,c,f,d,m,v,y){var _=t("base64-js"),A=t("ieee754");function S(Q,le,me){if(!(this instanceof S))return new S(Q,le,me);var be,ye,j,ze,Pe=typeof Q;if(le==="base64"&&Pe=="string")for(Q=(ze=Q).trim?ze.trim():ze.replace(/^\s+|\s+$/g,"");Q.length%4!=0;)Q+="=";if(Pe=="number")be=ne(Q);else if(Pe=="string")be=S.byteLength(Q,le);else{if(Pe!="object")throw new Error("First argument needs to be a number, array or string.");be=ne(Q.length)}if(S._useTypedArrays?ye=S._augment(new Uint8Array(be)):((ye=this).length=be,ye._isBuffer=!0),S._useTypedArrays&&typeof Q.byteLength=="number")ye._set(Q);else if(de(ze=Q)||S.isBuffer(ze)||ze&&typeof ze=="object"&&typeof ze.length=="number")for(j=0;j<be;j++)S.isBuffer(Q)?ye[j]=Q.readUInt8(j):ye[j]=Q[j];else if(Pe=="string")ye.write(Q,0,le);else if(Pe=="number"&&!S._useTypedArrays&&!me)for(j=0;j<be;j++)ye[j]=0;return ye}function x(Q,le,me,be){return S._charsWritten=Le(function(ye){for(var j=[],ze=0;ze<ye.length;ze++)j.push(255&ye.charCodeAt(ze));return j}(le),Q,me,be)}function E(Q,le,me,be){return S._charsWritten=Le(function(ye){for(var j,ze,Pe=[],ae=0;ae<ye.length;ae++)ze=ye.charCodeAt(ae),j=ze>>8,ze=ze%256,Pe.push(ze),Pe.push(j);return Pe}(le),Q,me,be)}function D(Q,le,me){var be="";me=Math.min(Q.length,me);for(var ye=le;ye<me;ye++)be+=String.fromCharCode(Q[ye]);return be}function B(Q,le,me,j){j||(Ae(typeof me=="boolean","missing or invalid endian"),Ae(le!=null,"missing offset"),Ae(le+1<Q.length,"Trying to read beyond buffer length"));var ye,j=Q.length;if(!(j<=le))return me?(ye=Q[le],le+1<j&&(ye|=Q[le+1]<<8)):(ye=Q[le]<<8,le+1<j&&(ye|=Q[le+1])),ye}function U(Q,le,me,j){j||(Ae(typeof me=="boolean","missing or invalid endian"),Ae(le!=null,"missing offset"),Ae(le+3<Q.length,"Trying to read beyond buffer length"));var ye,j=Q.length;if(!(j<=le))return me?(le+2<j&&(ye=Q[le+2]<<16),le+1<j&&(ye|=Q[le+1]<<8),ye|=Q[le],le+3<j&&(ye+=Q[le+3]<<24>>>0)):(le+1<j&&(ye=Q[le+1]<<16),le+2<j&&(ye|=Q[le+2]<<8),le+3<j&&(ye|=Q[le+3]),ye+=Q[le]<<24>>>0),ye}function w(Q,le,me,be){if(be||(Ae(typeof me=="boolean","missing or invalid endian"),Ae(le!=null,"missing offset"),Ae(le+1<Q.length,"Trying to read beyond buffer length")),!(Q.length<=le))return be=B(Q,le,me,!0),32768&be?-1*(65535-be+1):be}function O(Q,le,me,be){if(be||(Ae(typeof me=="boolean","missing or invalid endian"),Ae(le!=null,"missing offset"),Ae(le+3<Q.length,"Trying to read beyond buffer length")),!(Q.length<=le))return be=U(Q,le,me,!0),2147483648&be?-1*(4294967295-be+1):be}function I(Q,le,me,be){return be||(Ae(typeof me=="boolean","missing or invalid endian"),Ae(le+3<Q.length,"Trying to read beyond buffer length")),A.read(Q,le,me,23,4)}function L(Q,le,me,be){return be||(Ae(typeof me=="boolean","missing or invalid endian"),Ae(le+7<Q.length,"Trying to read beyond buffer length")),A.read(Q,le,me,52,8)}function R(Q,le,me,be,ye){if(ye||(Ae(le!=null,"missing value"),Ae(typeof be=="boolean","missing or invalid endian"),Ae(me!=null,"missing offset"),Ae(me+1<Q.length,"trying to write beyond buffer length"),ke(le,65535)),ye=Q.length,!(ye<=me))for(var j=0,ze=Math.min(ye-me,2);j<ze;j++)Q[me+j]=(le&255<<8*(be?j:1-j))>>>8*(be?j:1-j)}function F(Q,le,me,be,ye){if(ye||(Ae(le!=null,"missing value"),Ae(typeof be=="boolean","missing or invalid endian"),Ae(me!=null,"missing offset"),Ae(me+3<Q.length,"trying to write beyond buffer length"),ke(le,4294967295)),ye=Q.length,!(ye<=me))for(var j=0,ze=Math.min(ye-me,4);j<ze;j++)Q[me+j]=le>>>8*(be?j:3-j)&255}function G(Q,le,me,be,ye){ye||(Ae(le!=null,"missing value"),Ae(typeof be=="boolean","missing or invalid endian"),Ae(me!=null,"missing offset"),Ae(me+1<Q.length,"Trying to write beyond buffer length"),Ge(le,32767,-32768)),Q.length<=me||R(Q,0<=le?le:65535+le+1,me,be,ye)}function V(Q,le,me,be,ye){ye||(Ae(le!=null,"missing value"),Ae(typeof be=="boolean","missing or invalid endian"),Ae(me!=null,"missing offset"),Ae(me+3<Q.length,"Trying to write beyond buffer length"),Ge(le,2147483647,-2147483648)),Q.length<=me||F(Q,0<=le?le:4294967295+le+1,me,be,ye)}function $(Q,le,me,be,ye){ye||(Ae(le!=null,"missing value"),Ae(typeof be=="boolean","missing or invalid endian"),Ae(me!=null,"missing offset"),Ae(me+3<Q.length,"Trying to write beyond buffer length"),Ze(le,34028234663852886e22,-34028234663852886e22)),Q.length<=me||A.write(Q,le,me,be,23,4)}function K(Q,le,me,be,ye){ye||(Ae(le!=null,"missing value"),Ae(typeof be=="boolean","missing or invalid endian"),Ae(me!=null,"missing offset"),Ae(me+7<Q.length,"Trying to write beyond buffer length"),Ze(le,17976931348623157e292,-17976931348623157e292)),Q.length<=me||A.write(Q,le,me,be,52,8)}r.Buffer=S,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50,S.poolSize=8192,S._useTypedArrays=function(){try{var Q=new ArrayBuffer(0),le=new Uint8Array(Q);return le.foo=function(){return 42},le.foo()===42&&typeof le.subarray=="function"}catch{return!1}}(),S.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.isBuffer=function(Q){return!(Q==null||!Q._isBuffer)},S.byteLength=function(Q,le){var me;switch(Q+="",le||"utf8"){case"hex":me=Q.length/2;break;case"utf8":case"utf-8":me=fe(Q).length;break;case"ascii":case"binary":case"raw":me=Q.length;break;case"base64":me=Re(Q).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":me=2*Q.length;break;default:throw new Error("Unknown encoding")}return me},S.concat=function(Q,le){if(Ae(de(Q),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),Q.length===0)return new S(0);if(Q.length===1)return Q[0];if(typeof le!="number")for(ye=le=0;ye<Q.length;ye++)le+=Q[ye].length;for(var me=new S(le),be=0,ye=0;ye<Q.length;ye++){var j=Q[ye];j.copy(me,be),be+=j.length}return me},S.prototype.write=function(Q,le,me,be){isFinite(le)?isFinite(me)||(be=me,me=void 0):(ae=be,be=le,le=me,me=ae),le=Number(le)||0;var ye,j,ze,Pe,ae=this.length-le;switch((!me||ae<(me=Number(me)))&&(me=ae),be=String(be||"utf8").toLowerCase()){case"hex":ye=function(Z,Ie,Se,We){Se=Number(Se)||0;var ht=Z.length-Se;(!We||ht<(We=Number(We)))&&(We=ht),Ae((ht=Ie.length)%2==0,"Invalid hex string"),ht/2<We&&(We=ht/2);for(var te=0;te<We;te++){var k=parseInt(Ie.substr(2*te,2),16);Ae(!isNaN(k),"Invalid hex string"),Z[Se+te]=k}return S._charsWritten=2*te,te}(this,Q,le,me);break;case"utf8":case"utf-8":j=this,ze=le,Pe=me,ye=S._charsWritten=Le(fe(Q),j,ze,Pe);break;case"ascii":case"binary":ye=x(this,Q,le,me);break;case"base64":j=this,ze=le,Pe=me,ye=S._charsWritten=Le(Re(Q),j,ze,Pe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ye=E(this,Q,le,me);break;default:throw new Error("Unknown encoding")}return ye},S.prototype.toString=function(Q,le,me){var be,ye,j,ze,Pe=this;if(Q=String(Q||"utf8").toLowerCase(),le=Number(le)||0,(me=me!==void 0?Number(me):Pe.length)===le)return"";switch(Q){case"hex":be=function(ae,Z,Ie){var Se=ae.length;(!Z||Z<0)&&(Z=0),(!Ie||Ie<0||Se<Ie)&&(Ie=Se);for(var We="",ht=Z;ht<Ie;ht++)We+=Y(ae[ht]);return We}(Pe,le,me);break;case"utf8":case"utf-8":be=function(ae,Z,Ie){var Se="",We="";Ie=Math.min(ae.length,Ie);for(var ht=Z;ht<Ie;ht++)ae[ht]<=127?(Se+=oe(We)+String.fromCharCode(ae[ht]),We=""):We+="%"+ae[ht].toString(16);return Se+oe(We)}(Pe,le,me);break;case"ascii":case"binary":be=D(Pe,le,me);break;case"base64":ye=Pe,ze=me,be=(j=le)===0&&ze===ye.length?_.fromByteArray(ye):_.fromByteArray(ye.slice(j,ze));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":be=function(ae,Z,Ie){for(var Se=ae.slice(Z,Ie),We="",ht=0;ht<Se.length;ht+=2)We+=String.fromCharCode(Se[ht]+256*Se[ht+1]);return We}(Pe,le,me);break;default:throw new Error("Unknown encoding")}return be},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},S.prototype.copy=function(Q,le,me,be){if(le=le||0,(be=be||be===0?be:this.length)!==(me=me||0)&&Q.length!==0&&this.length!==0){Ae(me<=be,"sourceEnd < sourceStart"),Ae(0<=le&&le<Q.length,"targetStart out of bounds"),Ae(0<=me&&me<this.length,"sourceStart out of bounds"),Ae(0<=be&&be<=this.length,"sourceEnd out of bounds"),be>this.length&&(be=this.length);var ye=(be=Q.length-le<be-me?Q.length-le+me:be)-me;if(ye<100||!S._useTypedArrays)for(var j=0;j<ye;j++)Q[j+le]=this[j+me];else Q._set(this.subarray(me,me+ye),le)}},S.prototype.slice=function(Q,le){var me=this.length;if(Q=ee(Q,me,0),le=ee(le,me,me),S._useTypedArrays)return S._augment(this.subarray(Q,le));for(var be=le-Q,ye=new S(be,void 0,!0),j=0;j<be;j++)ye[j]=this[j+Q];return ye},S.prototype.get=function(Q){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(Q)},S.prototype.set=function(Q,le){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(Q,le)},S.prototype.readUInt8=function(Q,le){if(le||(Ae(Q!=null,"missing offset"),Ae(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return this[Q]},S.prototype.readUInt16LE=function(Q,le){return B(this,Q,!0,le)},S.prototype.readUInt16BE=function(Q,le){return B(this,Q,!1,le)},S.prototype.readUInt32LE=function(Q,le){return U(this,Q,!0,le)},S.prototype.readUInt32BE=function(Q,le){return U(this,Q,!1,le)},S.prototype.readInt8=function(Q,le){if(le||(Ae(Q!=null,"missing offset"),Ae(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return 128&this[Q]?-1*(255-this[Q]+1):this[Q]},S.prototype.readInt16LE=function(Q,le){return w(this,Q,!0,le)},S.prototype.readInt16BE=function(Q,le){return w(this,Q,!1,le)},S.prototype.readInt32LE=function(Q,le){return O(this,Q,!0,le)},S.prototype.readInt32BE=function(Q,le){return O(this,Q,!1,le)},S.prototype.readFloatLE=function(Q,le){return I(this,Q,!0,le)},S.prototype.readFloatBE=function(Q,le){return I(this,Q,!1,le)},S.prototype.readDoubleLE=function(Q,le){return L(this,Q,!0,le)},S.prototype.readDoubleBE=function(Q,le){return L(this,Q,!1,le)},S.prototype.writeUInt8=function(Q,le,me){me||(Ae(Q!=null,"missing value"),Ae(le!=null,"missing offset"),Ae(le<this.length,"trying to write beyond buffer length"),ke(Q,255)),le>=this.length||(this[le]=Q)},S.prototype.writeUInt16LE=function(Q,le,me){R(this,Q,le,!0,me)},S.prototype.writeUInt16BE=function(Q,le,me){R(this,Q,le,!1,me)},S.prototype.writeUInt32LE=function(Q,le,me){F(this,Q,le,!0,me)},S.prototype.writeUInt32BE=function(Q,le,me){F(this,Q,le,!1,me)},S.prototype.writeInt8=function(Q,le,me){me||(Ae(Q!=null,"missing value"),Ae(le!=null,"missing offset"),Ae(le<this.length,"Trying to write beyond buffer length"),Ge(Q,127,-128)),le>=this.length||(0<=Q?this.writeUInt8(Q,le,me):this.writeUInt8(255+Q+1,le,me))},S.prototype.writeInt16LE=function(Q,le,me){G(this,Q,le,!0,me)},S.prototype.writeInt16BE=function(Q,le,me){G(this,Q,le,!1,me)},S.prototype.writeInt32LE=function(Q,le,me){V(this,Q,le,!0,me)},S.prototype.writeInt32BE=function(Q,le,me){V(this,Q,le,!1,me)},S.prototype.writeFloatLE=function(Q,le,me){$(this,Q,le,!0,me)},S.prototype.writeFloatBE=function(Q,le,me){$(this,Q,le,!1,me)},S.prototype.writeDoubleLE=function(Q,le,me){K(this,Q,le,!0,me)},S.prototype.writeDoubleBE=function(Q,le,me){K(this,Q,le,!1,me)},S.prototype.fill=function(Q,le,me){if(le=le||0,me=me||this.length,Ae(typeof(Q=typeof(Q=Q||0)=="string"?Q.charCodeAt(0):Q)=="number"&&!isNaN(Q),"value is not a number"),Ae(le<=me,"end < start"),me!==le&&this.length!==0){Ae(0<=le&&le<this.length,"start out of bounds"),Ae(0<=me&&me<=this.length,"end out of bounds");for(var be=le;be<me;be++)this[be]=Q}},S.prototype.inspect=function(){for(var Q=[],le=this.length,me=0;me<le;me++)if(Q[me]=Y(this[me]),me===r.INSPECT_MAX_BYTES){Q[me+1]="...";break}return"<Buffer "+Q.join(" ")+">"},S.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(S._useTypedArrays)return new S(this).buffer;for(var Q=new Uint8Array(this.length),le=0,me=Q.length;le<me;le+=1)Q[le]=this[le];return Q.buffer};var z=S.prototype;function ee(Q,le,me){return typeof Q!="number"?me:le<=(Q=~~Q)?le:0<=Q||0<=(Q+=le)?Q:0}function ne(Q){return(Q=~~Math.ceil(+Q))<0?0:Q}function de(Q){return(Array.isArray||function(le){return Object.prototype.toString.call(le)==="[object Array]"})(Q)}function Y(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function fe(Q){for(var le=[],me=0;me<Q.length;me++){var be=Q.charCodeAt(me);if(be<=127)le.push(Q.charCodeAt(me));else for(var ye=me,j=(55296<=be&&be<=57343&&me++,encodeURIComponent(Q.slice(ye,me+1)).substr(1).split("%")),ze=0;ze<j.length;ze++)le.push(parseInt(j[ze],16))}return le}function Re(Q){return _.toByteArray(Q)}function Le(Q,le,me,be){for(var ye=0;ye<be&&!(ye+me>=le.length||ye>=Q.length);ye++)le[ye+me]=Q[ye];return ye}function oe(Q){try{return decodeURIComponent(Q)}catch{return""}}function ke(Q,le){Ae(typeof Q=="number","cannot write a non-number as a number"),Ae(0<=Q,"specified a negative value for writing an unsigned value"),Ae(Q<=le,"value is larger than maximum value for type"),Ae(Math.floor(Q)===Q,"value has a fractional component")}function Ge(Q,le,me){Ae(typeof Q=="number","cannot write a non-number as a number"),Ae(Q<=le,"value larger than maximum allowed value"),Ae(me<=Q,"value smaller than minimum allowed value"),Ae(Math.floor(Q)===Q,"value has a fractional component")}function Ze(Q,le,me){Ae(typeof Q=="number","cannot write a non-number as a number"),Ae(Q<=le,"value larger than maximum allowed value"),Ae(me<=Q,"value smaller than minimum allowed value")}function Ae(Q,le){if(!Q)throw new Error(le||"Failed assertion")}S._augment=function(Q){return Q._isBuffer=!0,Q._get=Q.get,Q._set=Q.set,Q.get=z.get,Q.set=z.set,Q.write=z.write,Q.toString=z.toString,Q.toLocaleString=z.toString,Q.toJSON=z.toJSON,Q.copy=z.copy,Q.slice=z.slice,Q.readUInt8=z.readUInt8,Q.readUInt16LE=z.readUInt16LE,Q.readUInt16BE=z.readUInt16BE,Q.readUInt32LE=z.readUInt32LE,Q.readUInt32BE=z.readUInt32BE,Q.readInt8=z.readInt8,Q.readInt16LE=z.readInt16LE,Q.readInt16BE=z.readInt16BE,Q.readInt32LE=z.readInt32LE,Q.readInt32BE=z.readInt32BE,Q.readFloatLE=z.readFloatLE,Q.readFloatBE=z.readFloatBE,Q.readDoubleLE=z.readDoubleLE,Q.readDoubleBE=z.readDoubleBE,Q.writeUInt8=z.writeUInt8,Q.writeUInt16LE=z.writeUInt16LE,Q.writeUInt16BE=z.writeUInt16BE,Q.writeUInt32LE=z.writeUInt32LE,Q.writeUInt32BE=z.writeUInt32BE,Q.writeInt8=z.writeInt8,Q.writeInt16LE=z.writeInt16LE,Q.writeInt16BE=z.writeInt16BE,Q.writeInt32LE=z.writeInt32LE,Q.writeInt32BE=z.writeInt32BE,Q.writeFloatLE=z.writeFloatLE,Q.writeFloatBE=z.writeFloatBE,Q.writeDoubleLE=z.writeDoubleLE,Q.writeDoubleBE=z.writeDoubleBE,Q.fill=z.fill,Q.inspect=z.inspect,Q.toArrayBuffer=z.toArrayBuffer,Q}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,n,r){(function(a,s,_,c,f,d,m,v,y){var _=t("buffer").Buffer,A=4,S=new _(A);S.fill(0),n.exports={hash:function(x,E,D,B){for(var U=E(function(R,F){R.length%A!=0&&(G=R.length+(A-R.length%A),R=_.concat([R,S],G));for(var G,V=[],$=F?R.readInt32BE:R.readInt32LE,K=0;K<R.length;K+=A)V.push($.call(R,K));return V}(x=_.isBuffer(x)?x:new _(x),B),8*x.length),E=B,w=new _(D),O=E?w.writeInt32BE:w.writeInt32LE,I=0;I<U.length;I++)O.call(w,U[I],4*I,!0);return w}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,n,r){(function(a,s,_,c,f,d,m,v,y){var _=t("buffer").Buffer,A=t("./sha"),S=t("./sha256"),x=t("./rng"),E={sha1:A,sha256:S,md5:t("./md5")},D=64,B=new _(D);function U(R,F){var G=E[R=R||"sha1"],V=[];return G||w("algorithm:",R,"is not yet supported"),{update:function($){return _.isBuffer($)||($=new _($)),V.push($),$.length,this},digest:function($){var K=_.concat(V),K=F?function(z,ee,ne){_.isBuffer(ee)||(ee=new _(ee)),_.isBuffer(ne)||(ne=new _(ne)),ee.length>D?ee=z(ee):ee.length<D&&(ee=_.concat([ee,B],D));for(var de=new _(D),Y=new _(D),fe=0;fe<D;fe++)de[fe]=54^ee[fe],Y[fe]=92^ee[fe];return ne=z(_.concat([de,ne])),z(_.concat([Y,ne]))}(G,F,K):G(K);return V=null,$?K.toString($):K}}}function w(){var R=[].slice.call(arguments).join(" ");throw new Error([R,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}B.fill(0),r.createHash=function(R){return U(R)},r.createHmac=U,r.randomBytes=function(R,F){if(!F||!F.call)return new _(x(R));try{F.call(this,void 0,new _(x(R)))}catch(G){F(G)}};var O,I=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],L=function(R){r[R]=function(){w("sorry,",R,"is not implemented yet")}};for(O in I)L(I[O])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){var _=t("./helpers");function A(w,O){w[O>>5]|=128<<O%32,w[14+(O+64>>>9<<4)]=O;for(var I=1732584193,L=-271733879,R=-1732584194,F=271733878,G=0;G<w.length;G+=16){var V=I,$=L,K=R,z=F,I=x(I,L,R,F,w[G+0],7,-680876936),F=x(F,I,L,R,w[G+1],12,-389564586),R=x(R,F,I,L,w[G+2],17,606105819),L=x(L,R,F,I,w[G+3],22,-1044525330);I=x(I,L,R,F,w[G+4],7,-176418897),F=x(F,I,L,R,w[G+5],12,1200080426),R=x(R,F,I,L,w[G+6],17,-1473231341),L=x(L,R,F,I,w[G+7],22,-45705983),I=x(I,L,R,F,w[G+8],7,1770035416),F=x(F,I,L,R,w[G+9],12,-1958414417),R=x(R,F,I,L,w[G+10],17,-42063),L=x(L,R,F,I,w[G+11],22,-1990404162),I=x(I,L,R,F,w[G+12],7,1804603682),F=x(F,I,L,R,w[G+13],12,-40341101),R=x(R,F,I,L,w[G+14],17,-1502002290),I=E(I,L=x(L,R,F,I,w[G+15],22,1236535329),R,F,w[G+1],5,-165796510),F=E(F,I,L,R,w[G+6],9,-1069501632),R=E(R,F,I,L,w[G+11],14,643717713),L=E(L,R,F,I,w[G+0],20,-373897302),I=E(I,L,R,F,w[G+5],5,-701558691),F=E(F,I,L,R,w[G+10],9,38016083),R=E(R,F,I,L,w[G+15],14,-660478335),L=E(L,R,F,I,w[G+4],20,-405537848),I=E(I,L,R,F,w[G+9],5,568446438),F=E(F,I,L,R,w[G+14],9,-1019803690),R=E(R,F,I,L,w[G+3],14,-187363961),L=E(L,R,F,I,w[G+8],20,1163531501),I=E(I,L,R,F,w[G+13],5,-1444681467),F=E(F,I,L,R,w[G+2],9,-51403784),R=E(R,F,I,L,w[G+7],14,1735328473),I=D(I,L=E(L,R,F,I,w[G+12],20,-1926607734),R,F,w[G+5],4,-378558),F=D(F,I,L,R,w[G+8],11,-2022574463),R=D(R,F,I,L,w[G+11],16,1839030562),L=D(L,R,F,I,w[G+14],23,-35309556),I=D(I,L,R,F,w[G+1],4,-1530992060),F=D(F,I,L,R,w[G+4],11,1272893353),R=D(R,F,I,L,w[G+7],16,-155497632),L=D(L,R,F,I,w[G+10],23,-1094730640),I=D(I,L,R,F,w[G+13],4,681279174),F=D(F,I,L,R,w[G+0],11,-358537222),R=D(R,F,I,L,w[G+3],16,-722521979),L=D(L,R,F,I,w[G+6],23,76029189),I=D(I,L,R,F,w[G+9],4,-640364487),F=D(F,I,L,R,w[G+12],11,-421815835),R=D(R,F,I,L,w[G+15],16,530742520),I=B(I,L=D(L,R,F,I,w[G+2],23,-995338651),R,F,w[G+0],6,-198630844),F=B(F,I,L,R,w[G+7],10,1126891415),R=B(R,F,I,L,w[G+14],15,-1416354905),L=B(L,R,F,I,w[G+5],21,-57434055),I=B(I,L,R,F,w[G+12],6,1700485571),F=B(F,I,L,R,w[G+3],10,-1894986606),R=B(R,F,I,L,w[G+10],15,-1051523),L=B(L,R,F,I,w[G+1],21,-2054922799),I=B(I,L,R,F,w[G+8],6,1873313359),F=B(F,I,L,R,w[G+15],10,-30611744),R=B(R,F,I,L,w[G+6],15,-1560198380),L=B(L,R,F,I,w[G+13],21,1309151649),I=B(I,L,R,F,w[G+4],6,-145523070),F=B(F,I,L,R,w[G+11],10,-1120210379),R=B(R,F,I,L,w[G+2],15,718787259),L=B(L,R,F,I,w[G+9],21,-343485551),I=U(I,V),L=U(L,$),R=U(R,K),F=U(F,z)}return Array(I,L,R,F)}function S(w,O,I,L,R,F){return U((O=U(U(O,w),U(L,F)))<<R|O>>>32-R,I)}function x(w,O,I,L,R,F,G){return S(O&I|~O&L,w,O,R,F,G)}function E(w,O,I,L,R,F,G){return S(O&L|I&~L,w,O,R,F,G)}function D(w,O,I,L,R,F,G){return S(O^I^L,w,O,R,F,G)}function B(w,O,I,L,R,F,G){return S(I^(O|~L),w,O,R,F,G)}function U(w,O){var I=(65535&w)+(65535&O);return(w>>16)+(O>>16)+(I>>16)<<16|65535&I}n.exports=function(w){return _.hash(w,A,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){n.exports=function(_){for(var A,S=new Array(_),x=0;x<_;x++)(3&x)==0&&(A=4294967296*Math.random()),S[x]=A>>>((3&x)<<3)&255;return S}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){var _=t("./helpers");function A(E,D){E[D>>5]|=128<<24-D%32,E[15+(D+64>>9<<4)]=D;for(var B,U,w,O=Array(80),I=1732584193,L=-271733879,R=-1732584194,F=271733878,G=-1009589776,V=0;V<E.length;V+=16){for(var $=I,K=L,z=R,ee=F,ne=G,de=0;de<80;de++){O[de]=de<16?E[V+de]:x(O[de-3]^O[de-8]^O[de-14]^O[de-16],1);var Y=S(S(x(I,5),(Y=L,U=R,w=F,(B=de)<20?Y&U|~Y&w:!(B<40)&&B<60?Y&U|Y&w|U&w:Y^U^w)),S(S(G,O[de]),(B=de)<20?1518500249:B<40?1859775393:B<60?-1894007588:-899497514)),G=F,F=R,R=x(L,30),L=I,I=Y}I=S(I,$),L=S(L,K),R=S(R,z),F=S(F,ee),G=S(G,ne)}return Array(I,L,R,F,G)}function S(E,D){var B=(65535&E)+(65535&D);return(E>>16)+(D>>16)+(B>>16)<<16|65535&B}function x(E,D){return E<<D|E>>>32-D}n.exports=function(E){return _.hash(E,A,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){function _(D,B){var U=(65535&D)+(65535&B);return(D>>16)+(B>>16)+(U>>16)<<16|65535&U}function A(D,B){var U,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),O=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),I=new Array(64);D[B>>5]|=128<<24-B%32,D[15+(B+64>>9<<4)]=B;for(var L,R,F=0;F<D.length;F+=16){for(var G=O[0],V=O[1],$=O[2],K=O[3],z=O[4],ee=O[5],ne=O[6],de=O[7],Y=0;Y<64;Y++)I[Y]=Y<16?D[Y+F]:_(_(_((R=I[Y-2],x(R,17)^x(R,19)^E(R,10)),I[Y-7]),(R=I[Y-15],x(R,7)^x(R,18)^E(R,3))),I[Y-16]),U=_(_(_(_(de,x(R=z,6)^x(R,11)^x(R,25)),z&ee^~z&ne),w[Y]),I[Y]),L=_(x(L=G,2)^x(L,13)^x(L,22),G&V^G&$^V&$),de=ne,ne=ee,ee=z,z=_(K,U),K=$,$=V,V=G,G=_(U,L);O[0]=_(G,O[0]),O[1]=_(V,O[1]),O[2]=_($,O[2]),O[3]=_(K,O[3]),O[4]=_(z,O[4]),O[5]=_(ee,O[5]),O[6]=_(ne,O[6]),O[7]=_(de,O[7])}return O}var S=t("./helpers"),x=function(D,B){return D>>>B|D<<32-B},E=function(D,B){return D>>>B};n.exports=function(D){return S.hash(D,A,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){r.read=function(_,A,S,x,F){var D,B,U=8*F-x-1,w=(1<<U)-1,O=w>>1,I=-7,L=S?F-1:0,R=S?-1:1,F=_[A+L];for(L+=R,D=F&(1<<-I)-1,F>>=-I,I+=U;0<I;D=256*D+_[A+L],L+=R,I-=8);for(B=D&(1<<-I)-1,D>>=-I,I+=x;0<I;B=256*B+_[A+L],L+=R,I-=8);if(D===0)D=1-O;else{if(D===w)return B?NaN:1/0*(F?-1:1);B+=Math.pow(2,x),D-=O}return(F?-1:1)*B*Math.pow(2,D-x)},r.write=function(_,A,S,x,E,G){var B,U,w=8*G-E-1,O=(1<<w)-1,I=O>>1,L=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=x?0:G-1,F=x?1:-1,G=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(U=isNaN(A)?1:0,B=O):(B=Math.floor(Math.log(A)/Math.LN2),A*(x=Math.pow(2,-B))<1&&(B--,x*=2),2<=(A+=1<=B+I?L/x:L*Math.pow(2,1-I))*x&&(B++,x/=2),O<=B+I?(U=0,B=O):1<=B+I?(U=(A*x-1)*Math.pow(2,E),B+=I):(U=A*Math.pow(2,I-1)*Math.pow(2,E),B=0));8<=E;_[S+R]=255&U,R+=F,U/=256,E-=8);for(B=B<<E|U,w+=E;0<w;_[S+R]=255&B,R+=F,B/=256,w-=8);_[S+R-F]|=128*G}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,n,r){(function(a,s,o,c,f,d,m,v,y){var _,A,S;function x(){}(a=n.exports={}).nextTick=(A=typeof window<"u"&&window.setImmediate,S=typeof window<"u"&&window.postMessage&&window.addEventListener,A?function(E){return window.setImmediate(E)}:S?(_=[],window.addEventListener("message",function(E){var D=E.source;D!==window&&D!==null||E.data!=="process-tick"||(E.stopPropagation(),0<_.length&&_.shift()())},!0),function(E){_.push(E),window.postMessage("process-tick","*")}):function(E){setTimeout(E,0)}),a.title="browser",a.browser=!0,a.env={},a.argv=[],a.on=x,a.addListener=x,a.once=x,a.off=x,a.removeListener=x,a.removeAllListeners=x,a.emit=x,a.binding=function(E){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(E){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})}(ew)),ew.exports}var kne=Vne();const Wne=ho(kne);var zs={position:"csm_Position",positionRaw:"csm_PositionRaw",emissive:"csm_Emissive",normal:"csm_Normal",pointSize:"csm_PointSize",diffuseColor:"csm_DiffuseColor",fragColor:"csm_FragColor"};const Xne={[`${zs.normal}`]:{"#include <beginnormal_vertex>":`
    vec3 objectNormal = ${zs.normal};
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `},[`${zs.position}`]:{"#include <begin_vertex>":`
    vec3 transformed = ${zs.position};
  `},[`${zs.positionRaw}`]:{"#include <begin_vertex>":`
    vec4 csm_positionUnprojected = ${zs.positionRaw};
    mat4x4 csm_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_unprojectMatrix = csm_unprojectMatrix * instanceMatrix;
    #endif
    csm_positionUnprojected = inverse(csm_unprojectMatrix) * csm_positionUnprojected;
    vec3 transformed = csm_positionUnprojected.xyz;
  `},[`${zs.pointSize}`]:{"gl_PointSize = size;":`
    gl_PointSize = ${zs.pointSize};
    `},[`${zs.diffuseColor}`]:{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = ${zs.diffuseColor};
  `},[`${zs.fragColor}`]:{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = ${zs.fragColor};
  `},[`${zs.emissive}`]:{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = ${zs.emissive};
    `}},$ne=(i,e,t)=>i.split(e).join(t),jne=function(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},qne=(i,e)=>new RegExp(`\\b${jne(e)}\\b`).test(i);function Yne(i){try{new i}catch(e){if(e.message.indexOf("is not a constructor")>=0)return!1}return!0}class Kne extends vr{constructor({baseMaterial:e,fragmentShader:t,vertexShader:n,uniforms:r,patchMap:a,cacheKey:s,...o}){let c;Yne(e)?c=new e(o):(c=e,Object.assign(c,o)),super(),this.uniforms=r||{},this._customPatchMap=a||{},this._fs=t||"",this._vs=n||"",this._base=e;for(const f in c){let d=f;f.startsWith("_")&&(d=f.split("_")[1]),this[d]===void 0&&(this[d]=0),this[d]=c[d]}this.update({fragmentShader:t,vertexShader:n,uniforms:r,cacheKey:s})}update(e){const t=(e==null?void 0:e.uniforms)||{},n=(e==null?void 0:e.fragmentShader)||this._fs,r=(e==null?void 0:e.vertexShader)||this._vs,a=Object.values(t).reduce((s,{value:o})=>s+JSON.stringify(o),"");this.uuid=(e==null||e.cacheKey==null?void 0:e.cacheKey())||Wne([n,r,a]),this.generateMaterial({fragmentShader:n,vertexShader:r,uniforms:t})}clone(){return new this.constructor({baseMaterial:this._base}).copy(this)}generateMaterial({fragmentShader:e,vertexShader:t,uniforms:n}){const r=this.parseShader(e),a=this.parseShader(t);this.uniforms=n||{},this.customProgramCacheKey=()=>this.uuid,this.onBeforeCompile=s=>{if(r){const o=this.patchShader(r,s.fragmentShader);s.fragmentShader=o}if(a){const o=this.patchShader(a,s.vertexShader);s.vertexShader=`#define IS_VERTEX;
`+o}s.uniforms={...s.uniforms,...this.uniforms},this.uniforms=s.uniforms},this.needsUpdate=!0}patchShader(e,t){let n=t;const r={...Xne,...this._customPatchMap};return Object.keys(r).forEach(a=>{Object.keys(r[a]).forEach(s=>{qne(e.main,a)&&(n=$ne(n,s,r[a][s]))})}),n=n.replace("void main() {",`
          ${e.header}
          void main() {
            #ifdef IS_VERTEX
              vec3 csm_Position = position;
              vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);
              vec3 csm_Normal = normal;
              float csm_PointSize = 1.;
            #else 
              #ifdef STANDARD
                vec3 csm_Emissive = emissive;
              #endif
              
              vec4 csm_DiffuseColor = vec4(1., 0., 0., 1.);
              vec4 csm_FragColor = vec4(1., 0., 0., 1.);
            #endif

            ${e.main}
          `),n=e.defines+n,n}parseShader(e){if(!e)return;const t=e.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),n=Ky(t),r=Jy(n),a=r.map(c=>c.name).indexOf("main"),s=lh(n.slice(0,a>=0?r[a].outer[0]:void 0)),o=a>=0?this.getShaderFromIndex(n,r[a].body):"";return{defines:"",header:s,main:o}}getShaderFromIndex(e,t){return lh(e.slice(t[0],t[1]))}}function XI(i){return typeof i=="string"?new Bt(i).convertLinearToSRGB():i}function Jne(i){switch(i){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}function Zne({color:i,alpha:e,lighting:t,name:n,...r}={}){return[{color:i,alpha:e,lighting:t,name:n},r]}function KF(i){return i instanceof ue||i instanceof ot||i instanceof ni||i instanceof Un||i instanceof mn}function $I(i){return KF(i)?i.toArray():i instanceof Bt?"#"+i.clone().convertLinearToSRGB().getHexString():i instanceof mi?i.image.src:i}const Qne={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},JF={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},pR={local:"local",world:"world",uv:"uv"},eie={phong:pC,physical:mo,toon:mC,basic:xs,lambert:vC,standard:Yg};let Wu=class{constructor(e,t,n){this.uuid=Sr.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;const a=Object.getOwnPropertyNames(e).filter(o=>o.startsWith("u_")).reduce((o,c)=>{var f;let d=(f=Object.getOwnPropertyDescriptor(e,c))==null?void 0:f.value;return(KF(d)||d instanceof Bt)&&(d=d.clone()),{...o,[c.slice(1)]:d}},{});for(const o in a){const c=o.split("_")[1];(t==null?void 0:t[c])!==void 0&&(a[o]=t[c])}t&&Object.keys(t).map(o=>{t[o]!==void 0&&(this[o]=t[o])}),this.uniforms={},this.schema=[];const s={};Object.keys(a).map(o=>{const c=o.split("_")[1];this.uniforms[`u_${this.uuid}_${c}`]={value:XI(a[o])},this.schema.push({value:a[o],label:c}),s[c]={set:f=>{this.uniforms[`u_${this.uuid}_${c}`].value=XI(f)},get:()=>this.uniforms[`u_${this.uuid}_${c}`].value}}),t!=null&&t.name&&(this.name=t.name),t!=null&&t.mode&&(this.mode=t.mode),t!=null&&t.visible&&(this.visible=t.visible),Object.defineProperties(this,s),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=n,this.buildShaders(e),this.schema.push({value:this.mode,label:"mode",options:Object.values(Qne)}),this.schema.push({value:this.visible,label:"visible"})}buildShaders(e){var t;const n=Object.getOwnPropertyNames(e).filter(d=>d==="fragmentShader"||d==="vertexShader").reduce((d,m)=>{var v;return{...d,[m]:(v=Object.getOwnPropertyDescriptor(e,m))==null?void 0:v.value}},{}),r={vert:Ky(n.vertexShader||""),frag:Ky(n.fragmentShader||"")},a={vert:tM(r.vert,this.renameTokens.bind(this)),frag:tM(r.frag,this.renameTokens.bind(this))},s={vert:Jy(a.vert),frag:Jy(a.frag)},o={vert:s.vert.map(d=>d.name).indexOf("main"),frag:s.frag.map(d=>d.name).indexOf("main")},c={vert:o.vert>=0?lh(a.vert.slice(0,s.vert[o.vert].outer[0])):"",frag:o.frag>=0?lh(a.frag.slice(0,s.frag[o.frag].outer[0])):""},f={vert:o.vert>=0?this.getShaderFromIndex(a.vert,s.vert[o.vert].body):"",frag:o.frag>=0?this.getShaderFromIndex(a.frag,s.frag[o.frag].body):""};this.vertexShader=this.processFinal(f.vert,!0),this.fragmentShader=this.processFinal(f.frag),this.vertexVariables=c.vert,this.fragmentVariables=c.frag,(t=this.onParse)==null||t.call(this,this),this.schema=this.schema.filter((d,m)=>{const v=d.label;return m===this.schema.findIndex(y=>y.label===v)})}renameTokens(e){if(e.startsWith("u_")){const t=e.slice(2);return`u_${this.uuid}_${t}`}else if(e.startsWith("v_")){const t=e.slice(2);return`v_${this.uuid}_${t}`}else if(e.startsWith("f_")){const t=e.slice(2);return`f_${this.uuid}_${t}`}else return e}processFinal(e,t){const n=e.replace(/\sf_/gm,` f_${this.uuid}_`).replace(/\(f_/gm,`(f_${this.uuid}_`),r=n.match(/^.*return.*$/gm);let a=n.replace(/^.*return.*$/gm,"");if(r!=null&&r[0]){const s=r[0].replace("return","").trim().replace(";",""),o=this.getBlendMode(s,"lamina_finalColor");a+=t?`lamina_finalPosition = ${s};`:`lamina_finalColor = ${o};`}return a}getShaderFromIndex(e,t){return lh(e.slice(t[0],t[1]))}getBlendMode(e,t){switch(this.mode){default:case"normal":return`lamina_blend_alpha(${t}, ${e}, ${e}.a)`;case"add":return`lamina_blend_add(${t}, ${e}, ${e}.a)`;case"subtract":return`lamina_blend_subtract(${t}, ${e}, ${e}.a)`;case"multiply":return`lamina_blend_multiply(${t}, ${e}, ${e}.a)`;case"lighten":return`lamina_blend_lighten(${t}, ${e}, ${e}.a)`;case"darken":return`lamina_blend_darken(${t}, ${e}, ${e}.a)`;case"divide":return`lamina_blend_divide(${t}, ${e}, ${e}.a)`;case"overlay":return`lamina_blend_overlay(${t}, ${e}, ${e}.a)`;case"screen":return`lamina_blend_screen(${t}, ${e}, ${e}.a)`;case"softlight":return`lamina_blend_softlight(${t}, ${e}, ${e}.a)`;case"reflect":return`lamina_blend_reflect(${t}, ${e}, ${e}.a)`;case"negation":return`lamina_blend_negation(${t}, ${e}, ${e}.a)`}}getSchema(){return this.schema.map(({label:t,options:n,...r})=>({label:t,options:n,...Jne(t),...r,value:$I(this[t])}))}serialize(){const e=this.constructor.name.split("$")[0];let t=Object.keys(this);t=t.filter(a=>!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(a));const n={};t.forEach(a=>{n[a]=this[a]});const r={};for(const a in this.uniforms){const s=a.replace(`u_${this.uuid}_`,"");r[s]=$I(this.uniforms[a].value)}return{constructor:e,properties:{...r,...n}}}};class $o extends Wu{constructor(e){super($o,{name:"Depth",...e},t=>{t.schema.push({value:t.mapping,label:"mapping",options:["vector","world","camera"]});const n=$o.getMapping(t.uuid,t.mapping);t.fragmentShader=t.fragmentShader.replace("lamina_mapping_template",n)}),this.mapping="vector"}static getMapping(e,t){switch(t){default:case"vector":return`length(v_${e}_worldPosition - u_${e}_origin)`;case"world":return`length(v_${e}_position - vec3(0.))`;case"camera":return`length(v_${e}_worldPosition - cameraPosition)`}}}$o.u_near=2;$o.u_far=10;$o.u_origin=new ue(0,0,0);$o.u_colorA="white";$o.u_colorB="black";$o.u_alpha=1;$o.vertexShader=`
  varying vec3 v_worldPosition;
  varying vec3 v_position;

  void main() {
    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;
    v_position = position;
  }
  `;$o.fragmentShader=`   
    uniform float u_alpha;
    uniform float u_near;
    uniform float u_far;
    uniform float u_isVector;
    uniform vec3 u_origin;
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;

    varying vec3 v_worldPosition;
    varying vec3 v_position;

    void main() {
      float f_dist = lamina_mapping_template;
      float f_depth = (f_dist - u_near) / (u_far - u_near);
			vec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));
  
  
      return vec4(f_depthColor, u_alpha);
    }
  `;let JM=class ZF extends Wu{constructor(e){super(ZF,{name:"Color",...e})}};JM.u_color="red";JM.u_alpha=1;JM.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;

    void main() {
      return vec4(u_color, u_alpha);
    }
  `;class ks extends Wu{constructor(e){super(ks,{name:"noise",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(JF)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(pR)});const n=ks.getNoiseFunction(t.type),r=ks.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",r),t.fragmentShader=t.fragmentShader.replace("lamina_noise_template",n)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}ks.u_colorA="#666666";ks.u_colorB="#666666";ks.u_colorC="#FFFFFF";ks.u_colorD="#FFFFFF";ks.u_alpha=1;ks.u_scale=1;ks.u_offset=new ue(0,0,0);ks.vertexShader=`
    varying vec3 v_position;

    void main() {
        v_position = lamina_mapping_template;
    }
  `;ks.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_colorC;
    uniform vec3 u_colorD;
    uniform vec3 u_offset;

    uniform float u_alpha;
    uniform float u_scale;

    varying vec3 v_position;


    void main() {
        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);

        float f_step1 = 0.;
        float f_step2 = 0.2;
        float f_step3 = 0.6;
        float f_step4 = 1.;

        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));
        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));
        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));

        return vec4(f_color, u_alpha);
    }
  `;class ql extends Wu{constructor(e){super(ql,{name:"Fresnel",...e})}}ql.u_color="white";ql.u_alpha=1;ql.u_bias=0;ql.u_intensity=1;ql.u_power=2;ql.u_factor=1;ql.vertexShader=`
    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);
        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        
    }
  `;ql.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;
    uniform float u_bias;
    uniform float u_intensity;
    uniform float u_power;
    uniform float u_factor;

    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));
        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);

        f_fresnel = clamp(f_fresnel, 0.0, 1.0);
        return vec4(f_fresnel * u_color, u_alpha);
    }
  `;class jo extends Wu{constructor(e){super(jo,{name:"Gradient",...e},t=>{t.schema.push({value:t.axes,label:"axes",options:["x","y","z"]}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(pR)});const n=jo.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",n||"local"),t.fragmentShader=t.fragmentShader.replace("axes_template",t.axes||"x")}),this.axes="x",this.mapping="local"}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}jo.u_colorA="white";jo.u_colorB="black";jo.u_alpha=1;jo.u_start=1;jo.u_end=-1;jo.u_contrast=1;jo.vertexShader=`
		varying vec3 v_position;

		vod main() {
      v_position = lamina_mapping_template;
		}
  `;jo.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_axis;
    uniform float u_alpha;
    uniform float u_start;
    uniform float u_end;
    uniform float u_contrast;

		varying vec3 v_position;

    void main() {

      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);
      vec3 f_color = mix(u_colorA, u_colorB, f_step);

      return vec4(f_color, u_alpha);
    }
  `;class yp extends Wu{constructor(e){super(yp,{name:"Matcap",...e})}}yp.u_alpha=1;yp.u_map=void 0;yp.vertexShader=`
    varying vec3 v_position;
    varying vec3 v_normal;
    
    void main() {
      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );
      v_normal = normalize( normalMatrix * normal );
    }
    `;yp.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec3 v_position;
		varying vec3 v_normal;

		
    void main() {
			vec3 f_r = reflect( v_position, v_normal );
			float f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );
			vec2 f_vN = f_r.xy / f_m + .5;

			vec3 f_base = texture2D(u_map, f_vN).rgb;

      return vec4(f_base, u_alpha);
    }
  `;let C_=class QF extends Wu{constructor(e){super(QF,{name:"Texture",...e})}};C_.u_alpha=1;C_.u_map=void 0;C_.vertexShader=`
    varying vec2 v_uv;
    
    void main() {
        v_uv = uv;
    }
    `;C_.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec2 v_uv;

    void main() {
			vec4 f_color = texture2D(u_map, v_uv);
      return vec4(f_color.rgb, f_color.a * u_alpha);
    }
  `;class zu extends Wu{constructor(e){super(zu,{name:"Displace",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(JF)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(pR)});const n=zu.getNoiseFunction(t.type),r=zu.getMapping(t.mapping);t.vertexVariables=t.vertexVariables.replace("lamina_mapping_template",r),t.vertexVariables=t.vertexVariables.replace("lamina_noise_template",n)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}zu.u_strength=1;zu.u_scale=1;zu.u_offset=new ue(0,0,0);zu.vertexShader=`
       
      uniform float u_strength;
      uniform float u_scale;
      uniform vec3 u_offset;

      vec3 displace(vec3 p) {
				vec3 f_position = lamina_mapping_template;
        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;
        vec3 f_newPosition = p + (f_n * normal);

				return f_newPosition;
      }

      
			vec3 orthogonal(vec3 v) {
  		  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)
  		  : vec3(0.0, -v.z, v.y));
  		}
  		vec3 recalcNormals(vec3 newPos) {
  		  float offset = 0.001;
  		  vec3 tangent = orthogonal(normal);
  		  vec3 bitangent = normalize(cross(normal, tangent));
  		  vec3 neighbour1 = position + tangent * offset;
  		  vec3 neighbour2 = position + bitangent * offset;
  		  vec3 displacedNeighbour1 = displace(neighbour1);
  		  vec3 displacedNeighbour2 = displace(neighbour2);
  		  vec3 displacedTangent = displacedNeighbour1 - newPos;
  		  vec3 displacedBitangent = displacedNeighbour2 - newPos;
  		  return normalize(cross(displacedTangent, displacedBitangent));
  		}
  
  
      void main() {
       
				vec3 f_newPosition = displace(position);
        lamina_finalNormal = recalcNormals(f_newPosition);

        return f_newPosition;
      }
    `;class _p extends Wu{constructor(e){super(_p,{name:"Normal",...e})}}_p.u_alpha=1;_p.u_direction=new ue(1,1,1);_p.vertexShader=`   
  varying vec3 v_normals; 

  void main() {
    v_normals = normal;
  }
`;_p.fragmentShader=`   
  	uniform float u_alpha;
  	uniform vec3 u_color;
  	uniform vec3 u_direction;

		varying vec3 v_normals;

    void main() {
			vec3 f_normalColor = vec3(1.);
      f_normalColor.x = v_normals.x * u_direction.x;
      f_normalColor.y = v_normals.y * u_direction.y;
      f_normalColor.z = v_normals.z * u_direction.z;

      return vec4(f_normalColor, u_alpha);
    }
  `;var tie=`
vec4 lamina_blend_add(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz + y.xyz, 1.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec3 lamina_blend_alpha(const in vec3 x, const in vec3 y, const in float opacity) {

	return y * opacity + x * (1.0 - opacity);

}

vec4 lamina_blend_alpha(const in vec4 x, const in vec4 y, const in float opacity) {

	float a = min(y.a, opacity);

	return vec4(lamina_blend_alpha(x.rgb, y.rgb, a), x.a);

}
vec4 lamina_blend_average(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz) * 0.5 * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_burn(const in float x, const in float y) {

	return (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);

}

vec4 lamina_blend_color_burn(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_burn(x.r, y.r),
		lamina_blend_color_burn(x.g, y.g),
		lamina_blend_color_burn(x.b, y.b),
		lamina_blend_color_burn(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_dodge(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x / (1.0 - y), 1.0);

}

vec4 lamina_blend_color_dodge(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_dodge(x.r, y.r),
		lamina_blend_color_dodge(x.g, y.g),
		lamina_blend_color_dodge(x.b, y.b),
		lamina_blend_color_dodge(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_darken(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_difference(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(abs(x.xyz - y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_divide(const in float x, const in float y) {

	return (y > 0.0) ? min(x / y, 1.0) : 1.0;

}

vec4 lamina_blend_divide(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_divide(x.r, y.r),
		lamina_blend_divide(x.g, y.g),
		lamina_blend_divide(x.b, y.b),
		lamina_blend_divide(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_exclusion(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz - 2.0 * x.xyz * y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_lighten(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_multiply(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4( x.xyz * y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_negation(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - abs(1.0 - x.xyz - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_normal(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_overlay(const in float x, const in float y) {

	return (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));

}

vec4 lamina_blend_overlay(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_overlay(x.r, y.r),
		lamina_blend_overlay(x.g, y.g),
		lamina_blend_overlay(x.b, y.b),
		lamina_blend_overlay(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_reflect(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);

}

vec4 lamina_blend_reflect(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_reflect(x.r, y.r),
		lamina_blend_reflect(x.g, y.g),
		lamina_blend_reflect(x.b, y.b),
		lamina_blend_reflect(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_screen(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - (1.0 - x.xyz) * (1.0 - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_softlight(const in float x, const in float y) {

	return (y < 0.5) ?
		(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :
		(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));

}

vec4 lamina_blend_softlight(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_softlight(x.r, y.r),
		lamina_blend_softlight(x.g, y.g),
		lamina_blend_softlight(x.b, y.b),
		lamina_blend_softlight(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_subtract(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz + y.xyz - 1.0, 0.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}

`,jI=`

// From: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83
// Huge thanks to the creators of these algorithms

float lamina_noise_mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_perm(vec4 x){return lamina_noise_mod289(((x * 34.0) + 1.0) * x);}
vec4 lamina_noise_permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }
vec4 lamina_noise_taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }


float lamina_noise_white(vec2 p) {
  return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) *
               (0.1 + abs(sin(p.y * 13.0 + p.x))));
}

float lamina_noise_white(vec3 p) {
  return lamina_noise_white(p.xy);
}


vec3 lamina_noise_fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }

float lamina_noise_perlin(vec3 P) {
  vec3 Pi0 = floor(P);        // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod(Pi0, 289.0);
  Pi1 = mod(Pi1, 289.0);
  vec3 Pf0 = fract(P);        // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = lamina_noise_permute(lamina_noise_permute(ix) + iy);
  vec4 ixy0 = lamina_noise_permute(ixy + iz0);
  vec4 ixy1 = lamina_noise_permute(ixy + iz1);

  vec4 gx0 = ixy0 / 7.0;
  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 / 7.0;
  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);

  vec4 norm0 = lamina_noise_taylorInvSqrt(
      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = lamina_noise_taylorInvSqrt(
      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = lamina_noise_fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),
                 fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return lamina_normalize(2.2 * n_xyz);
}

float lamina_noise_simplex(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

  // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

  // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  //  x0 = x0 - 0. + 0.0 * C
  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
  vec3 x3 = x0 - 1. + 3.0 * C.xxx;

  // Permutations
  i = mod(i, 289.0);
  vec4 p = lamina_noise_permute(lamina_noise_permute(lamina_noise_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y +
                             vec4(0.0, i1.y, i2.y, 1.0)) +
                    i.x + vec4(0.0, i1.x, i2.x, 1.0));

  // Gradients
  // ( N*N points uniformly over a square, mapped onto an octahedron.)
  float n_ = 1.0 / 7.0; // N=7
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z); //  mod(p,N*N)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

  // Normalise gradients
  vec4 norm =
      lamina_noise_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

  // Mix final noise value
  vec4 m =
      max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return lamina_normalize(42.0 *
         dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3))));
}

vec3 lamina_noise_simplex3(vec3 x) {
  float s = lamina_noise_simplex(vec3(x));
  float s1 = lamina_noise_simplex(vec3(x.y - 19.1, x.z + 33.4, x.x + 47.2));
  float s2 = lamina_noise_simplex(vec3(x.z + 74.2, x.x - 124.5, x.y + 99.4));
  vec3 c = vec3(s, s1, s2);
  return c;
}

vec3 lamina_noise_curl(vec3 p) {
  const float e = .1;
  vec3 dx = vec3(e, 0.0, 0.0);
  vec3 dy = vec3(0.0, e, 0.0);
  vec3 dz = vec3(0.0, 0.0, e);

  vec3 p_x0 = lamina_noise_simplex3(p - dx);
  vec3 p_x1 = lamina_noise_simplex3(p + dx);
  vec3 p_y0 = lamina_noise_simplex3(p - dy);
  vec3 p_y1 = lamina_noise_simplex3(p + dy);
  vec3 p_z0 = lamina_noise_simplex3(p - dz);
  vec3 p_z1 = lamina_noise_simplex3(p + dz);

  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;

  const float divisor = 1.0 / (2.0 * e);
  return normalize(vec3(x, y, z) * divisor);
}

vec3 lamina_permute(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec3 lamina_dist(vec3 x, vec3 y, vec3 z,  bool manhattanDistance) {
  return manhattanDistance ?  abs(x) + abs(y) + abs(z) :  (x * x + y * y + z * z);
}

// From: https://github.com/Erkaman/glsl-worley
float lamina_noise_worley(vec3 P) {
  float jitter = 1.;
  bool manhattanDistance = false; 

  float K = 0.142857142857; // 1/7
  float Ko = 0.428571428571; // 1/2-K/2
  float  K2 = 0.020408163265306; // 1/(7*7)
  float Kz = 0.166666666667; // 1/6
  float Kzo = 0.416666666667; // 1/2-1/6*2

	vec3 Pi = mod(floor(P), 289.0);
 	vec3 Pf = fract(P) - 0.5;

	vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);
	vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);
	vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);

	vec3 p = lamina_permute(Pi.x + vec3(-1.0, 0.0, 1.0));
	vec3 p1 = lamina_permute(p + Pi.y - 1.0);
	vec3 p2 = lamina_permute(p + Pi.y);
	vec3 p3 = lamina_permute(p + Pi.y + 1.0);

	vec3 p11 = lamina_permute(p1 + Pi.z - 1.0);
	vec3 p12 = lamina_permute(p1 + Pi.z);
	vec3 p13 = lamina_permute(p1 + Pi.z + 1.0);

	vec3 p21 = lamina_permute(p2 + Pi.z - 1.0);
	vec3 p22 = lamina_permute(p2 + Pi.z);
	vec3 p23 = lamina_permute(p2 + Pi.z + 1.0);

	vec3 p31 = lamina_permute(p3 + Pi.z - 1.0);
	vec3 p32 = lamina_permute(p3 + Pi.z);
	vec3 p33 = lamina_permute(p3 + Pi.z + 1.0);

	vec3 ox11 = fract(p11*K) - Ko;
	vec3 oy11 = mod(floor(p11*K), 7.0)*K - Ko;
	vec3 oz11 = floor(p11*K2)*Kz - Kzo; // p11 < 289 guaranteed

	vec3 ox12 = fract(p12*K) - Ko;
	vec3 oy12 = mod(floor(p12*K), 7.0)*K - Ko;
	vec3 oz12 = floor(p12*K2)*Kz - Kzo;

	vec3 ox13 = fract(p13*K) - Ko;
	vec3 oy13 = mod(floor(p13*K), 7.0)*K - Ko;
	vec3 oz13 = floor(p13*K2)*Kz - Kzo;

	vec3 ox21 = fract(p21*K) - Ko;
	vec3 oy21 = mod(floor(p21*K), 7.0)*K - Ko;
	vec3 oz21 = floor(p21*K2)*Kz - Kzo;

	vec3 ox22 = fract(p22*K) - Ko;
	vec3 oy22 = mod(floor(p22*K), 7.0)*K - Ko;
	vec3 oz22 = floor(p22*K2)*Kz - Kzo;

	vec3 ox23 = fract(p23*K) - Ko;
	vec3 oy23 = mod(floor(p23*K), 7.0)*K - Ko;
	vec3 oz23 = floor(p23*K2)*Kz - Kzo;

	vec3 ox31 = fract(p31*K) - Ko;
	vec3 oy31 = mod(floor(p31*K), 7.0)*K - Ko;
	vec3 oz31 = floor(p31*K2)*Kz - Kzo;

	vec3 ox32 = fract(p32*K) - Ko;
	vec3 oy32 = mod(floor(p32*K), 7.0)*K - Ko;
	vec3 oz32 = floor(p32*K2)*Kz - Kzo;

	vec3 ox33 = fract(p33*K) - Ko;
	vec3 oy33 = mod(floor(p33*K), 7.0)*K - Ko;
	vec3 oz33 = floor(p33*K2)*Kz - Kzo;

	vec3 dx11 = Pfx + jitter*ox11;
	vec3 dy11 = Pfy.x + jitter*oy11;
	vec3 dz11 = Pfz.x + jitter*oz11;

	vec3 dx12 = Pfx + jitter*ox12;
	vec3 dy12 = Pfy.x + jitter*oy12;
	vec3 dz12 = Pfz.y + jitter*oz12;

	vec3 dx13 = Pfx + jitter*ox13;
	vec3 dy13 = Pfy.x + jitter*oy13;
	vec3 dz13 = Pfz.z + jitter*oz13;

	vec3 dx21 = Pfx + jitter*ox21;
	vec3 dy21 = Pfy.y + jitter*oy21;
	vec3 dz21 = Pfz.x + jitter*oz21;

	vec3 dx22 = Pfx + jitter*ox22;
	vec3 dy22 = Pfy.y + jitter*oy22;
	vec3 dz22 = Pfz.y + jitter*oz22;

	vec3 dx23 = Pfx + jitter*ox23;
	vec3 dy23 = Pfy.y + jitter*oy23;
	vec3 dz23 = Pfz.z + jitter*oz23;

	vec3 dx31 = Pfx + jitter*ox31;
	vec3 dy31 = Pfy.z + jitter*oy31;
	vec3 dz31 = Pfz.x + jitter*oz31;

	vec3 dx32 = Pfx + jitter*ox32;
	vec3 dy32 = Pfy.z + jitter*oy32;
	vec3 dz32 = Pfz.y + jitter*oz32;

	vec3 dx33 = Pfx + jitter*ox33;
	vec3 dy33 = Pfy.z + jitter*oy33;
	vec3 dz33 = Pfz.z + jitter*oz33;

	vec3 d11 = lamina_dist(dx11, dy11, dz11, manhattanDistance);
	vec3 d12 = lamina_dist(dx12, dy12, dz12, manhattanDistance);
	vec3 d13 = lamina_dist(dx13, dy13, dz13, manhattanDistance);
	vec3 d21 = lamina_dist(dx21, dy21, dz21, manhattanDistance);
	vec3 d22 = lamina_dist(dx22, dy22, dz22, manhattanDistance);
	vec3 d23 = lamina_dist(dx23, dy23, dz23, manhattanDistance);
	vec3 d31 = lamina_dist(dx31, dy31, dz31, manhattanDistance);
	vec3 d32 = lamina_dist(dx32, dy32, dz32, manhattanDistance);
	vec3 d33 = lamina_dist(dx33, dy33, dz33, manhattanDistance);

	vec3 d1a = min(d11, d12);
	d12 = max(d11, d12);
	d11 = min(d1a, d13); // Smallest now not in d12 or d13
	d13 = max(d1a, d13);
	d12 = min(d12, d13); // 2nd smallest now not in d13
	vec3 d2a = min(d21, d22);
	d22 = max(d21, d22);
	d21 = min(d2a, d23); // Smallest now not in d22 or d23
	d23 = max(d2a, d23);
	d22 = min(d22, d23); // 2nd smallest now not in d23
	vec3 d3a = min(d31, d32);
	d32 = max(d31, d32);
	d31 = min(d3a, d33); // Smallest now not in d32 or d33
	d33 = max(d3a, d33);
	d32 = min(d32, d33); // 2nd smallest now not in d33
	vec3 da = min(d11, d21);
	d21 = max(d11, d21);
	d11 = min(da, d31); // Smallest now in d11
	d31 = max(da, d31); // 2nd smallest now not in d31
	d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;
	d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx; // d11.x now smallest
	d12 = min(d12, d21); // 2nd smallest now not in d21
	d12 = min(d12, d22); // nor in d22
	d12 = min(d12, d31); // nor in d31
	d12 = min(d12, d32); // nor in d32
	d11.yz = min(d11.yz,d12.xy); // nor in d12.yz
	d11.y = min(d11.y,d12.z); // Only two more to go
	d11.y = min(d11.y,d11.z); // Done! (Phew!)

  vec2 F = sqrt(d11.xy);
	return F.x; // F1, F2

}

float lamina_noise_swirl(vec3 position) {
    float scale = 0.1;
    float freq = 4. * scale;
    float t = 1.;

    vec3 pos = (position * scale) + lamina_noise_curl(position * 7. * scale);

    float worley1 = 1. - lamina_noise_worley((pos * (freq * 2.)) +  (t * 2.));
    float worley2 = 1. - lamina_noise_worley((pos * (freq * 4.)) +  (t * 4.));
    float worley3 = 1. - lamina_noise_worley((pos * (freq * 8.)) +  (t * 8.));
    float worley4 = 1. - lamina_noise_worley((pos * (freq * 16.)) +  (t * 16.));
    
    float fbm1 = worley1 * .625 + worley2 * .25 + worley3 * .125;
    float fbm2 = worley2 * .625 + worley3 * .25 + worley4 * .125;
    float fbm3 = worley3 * .75 + worley4 * .25;

    vec3 curlWorleyFbm = vec3(fbm1, fbm2, fbm3);
    float curlWorley = curlWorleyFbm.r * .625 + curlWorleyFbm.g * .25 + 
        curlWorleyFbm.b * .125;

    return curlWorley;
}
  
  
`,qI=`

float lamina_map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float lamina_normalize(float v) { return lamina_map(v, -1.0, 1.0, 0.0, 1.0); }
`;class ez extends Kne{constructor({color:e,alpha:t,lighting:n,layers:r,name:a,...s}={}){super({baseMaterial:eie[n||"basic"],...s}),this.name="LayerMaterial",this.layers=[],this.lighting="basic";const o=e||"white",c=t??1;this.uniforms={u_lamina_color:{value:typeof o=="string"?new Bt(o).convertSRGBToLinear():o},u_lamina_alpha:{value:c}},this.layers=r||this.layers,this.lighting=n||this.lighting,this.name=a||this.name,this.refresh()}genShaders(){let e="",t="",n="",r="",a={};return this.layers.filter(s=>s.visible).forEach(s=>{e+=s.vertexVariables+`
`,t+=s.fragmentVariables+`
`,n+=s.vertexShader+`
`,r+=s.fragmentShader+`
`,a={...a,...s.uniforms}}),a={...a,...this.uniforms},{uniforms:a,vertexShader:`
        ${qI}
        ${jI}
        ${e}

        void main() {
          vec3 lamina_finalPosition = position;
          vec3 lamina_finalNormal = normal;

          ${n}

          csm_Position = lamina_finalPosition;
          csm_Normal = lamina_finalNormal;
        }
        `,fragmentShader:`
        ${qI}
        ${jI}
        ${tie}
        ${t}

        uniform vec3 u_lamina_color;
        uniform float u_lamina_alpha;

        void main() {
          vec4 lamina_finalColor = vec4(u_lamina_color, u_lamina_alpha);

          ${r}

          csm_DiffuseColor = lamina_finalColor;
         
        }
        `}}refresh(){const{uniforms:e,fragmentShader:t,vertexShader:n}=this.genShaders();super.update({fragmentShader:t,vertexShader:n,uniforms:e})}serialize(){return{constructor:"LayerMaterial",properties:{color:this.color,alpha:this.alpha,name:this.name,lighting:this.lighting}}}set color(e){var t,n;(t=this.uniforms)!=null&&(n=t.u_lamina_color)!=null&&n.value&&(this.uniforms.u_lamina_color.value=typeof e=="string"?new Bt(e).convertSRGBToLinear():e)}get color(){var e,t;return(e=this.uniforms)==null||(t=e.u_lamina_color)==null?void 0:t.value}set alpha(e){this.uniforms.u_lamina_alpha.value=e}get alpha(){return this.uniforms.u_lamina_alpha.value}}vp({LayerMaterial:ez});vp({LayerMaterial:ez,Depth_:$o,Color_:JM,Noise_:ks,Fresnel_:ql,Gradient_:jo,Matcap_:yp,Texture_:C_,Displace_:zu,Normal_:_p});const nie=xe.forwardRef(({children:i,...e},t)=>{const n=xe.useRef(null);xe.useLayoutEffect(()=>{n.current.layers=n.current.__r3f.objects,n.current.refresh()},[i]);const[r,a]=X.useMemo(()=>Zne(e),[e]);return xe.createElement("layerMaterial",Vr({args:[r],ref:jF([n,t])},a),i)});function iie(i){return[{mode:i==null?void 0:i.mode,visible:i==null?void 0:i.visible,type:i==null?void 0:i.type,mapping:i==null?void 0:i.mapping,map:i==null?void 0:i.map,axes:i==null?void 0:i.axes}]}const YI=xe.forwardRef((i,e)=>xe.createElement("gradient_",Vr({ref:e,args:iie(i)},i)));function KI(i){return typeof i=="string"?new Bt(i).convertLinearToSRGB():i}function rie(i){switch(i){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}function tz(i){return i instanceof ue||i instanceof ot||i instanceof ni||i instanceof Un||i instanceof mn}function JI(i){return tz(i)?i.toArray():i instanceof Bt?"#"+i.clone().convertLinearToSRGB().getHexString():i instanceof mi?i.image.src:i}const aie={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},nz={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},mR={local:"local",world:"world",uv:"uv"};class kc{constructor(e,t,n){this.uuid=Sr.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;const a=Object.getOwnPropertyNames(e).filter(o=>o.startsWith("u_")).reduce((o,c)=>{var f;let d=(f=Object.getOwnPropertyDescriptor(e,c))==null?void 0:f.value;return(tz(d)||d instanceof Bt)&&(d=d.clone()),{...o,[c.slice(1)]:d}},{});for(const o in a){const c=o.split("_")[1];(t==null?void 0:t[c])!==void 0&&(a[o]=t[c])}t&&Object.keys(t).map(o=>{t[o]!==void 0&&(this[o]=t[o])}),this.uniforms={},this.schema=[];const s={};Object.keys(a).map(o=>{const c=o.split("_")[1];this.uniforms[`u_${this.uuid}_${c}`]={value:KI(a[o])},this.schema.push({value:a[o],label:c}),s[c]={set:f=>{this.uniforms[`u_${this.uuid}_${c}`].value=KI(f)},get:()=>this.uniforms[`u_${this.uuid}_${c}`].value}}),t!=null&&t.name&&(this.name=t.name),t!=null&&t.mode&&(this.mode=t.mode),t!=null&&t.visible&&(this.visible=t.visible),Object.defineProperties(this,s),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=n,this.buildShaders(e),this.schema.push({value:this.mode,label:"mode",options:Object.values(aie)}),this.schema.push({value:this.visible,label:"visible"})}buildShaders(e){var t;const n=Object.getOwnPropertyNames(e).filter(d=>d==="fragmentShader"||d==="vertexShader").reduce((d,m)=>{var v;return{...d,[m]:(v=Object.getOwnPropertyDescriptor(e,m))==null?void 0:v.value}},{}),r={vert:Ky(n.vertexShader||""),frag:Ky(n.fragmentShader||"")},a={vert:tM(r.vert,this.renameTokens.bind(this)),frag:tM(r.frag,this.renameTokens.bind(this))},s={vert:Jy(a.vert),frag:Jy(a.frag)},o={vert:s.vert.map(d=>d.name).indexOf("main"),frag:s.frag.map(d=>d.name).indexOf("main")},c={vert:o.vert>=0?lh(a.vert.slice(0,s.vert[o.vert].outer[0])):"",frag:o.frag>=0?lh(a.frag.slice(0,s.frag[o.frag].outer[0])):""},f={vert:o.vert>=0?this.getShaderFromIndex(a.vert,s.vert[o.vert].body):"",frag:o.frag>=0?this.getShaderFromIndex(a.frag,s.frag[o.frag].body):""};this.vertexShader=this.processFinal(f.vert,!0),this.fragmentShader=this.processFinal(f.frag),this.vertexVariables=c.vert,this.fragmentVariables=c.frag,(t=this.onParse)==null||t.call(this,this),this.schema=this.schema.filter((d,m)=>{const v=d.label;return m===this.schema.findIndex(y=>y.label===v)})}renameTokens(e){if(e.startsWith("u_")){const t=e.slice(2);return`u_${this.uuid}_${t}`}else if(e.startsWith("v_")){const t=e.slice(2);return`v_${this.uuid}_${t}`}else if(e.startsWith("f_")){const t=e.slice(2);return`f_${this.uuid}_${t}`}else return e}processFinal(e,t){const n=e.replace(/\sf_/gm,` f_${this.uuid}_`).replace(/\(f_/gm,`(f_${this.uuid}_`),r=n.match(/^.*return.*$/gm);let a=n.replace(/^.*return.*$/gm,"");if(r!=null&&r[0]){const s=r[0].replace("return","").trim().replace(";",""),o=this.getBlendMode(s,"lamina_finalColor");a+=t?`lamina_finalPosition = ${s};`:`lamina_finalColor = ${o};`}return a}getShaderFromIndex(e,t){return lh(e.slice(t[0],t[1]))}getBlendMode(e,t){switch(this.mode){default:case"normal":return`lamina_blend_alpha(${t}, ${e}, ${e}.a)`;case"add":return`lamina_blend_add(${t}, ${e}, ${e}.a)`;case"subtract":return`lamina_blend_subtract(${t}, ${e}, ${e}.a)`;case"multiply":return`lamina_blend_multiply(${t}, ${e}, ${e}.a)`;case"lighten":return`lamina_blend_lighten(${t}, ${e}, ${e}.a)`;case"darken":return`lamina_blend_darken(${t}, ${e}, ${e}.a)`;case"divide":return`lamina_blend_divide(${t}, ${e}, ${e}.a)`;case"overlay":return`lamina_blend_overlay(${t}, ${e}, ${e}.a)`;case"screen":return`lamina_blend_screen(${t}, ${e}, ${e}.a)`;case"softlight":return`lamina_blend_softlight(${t}, ${e}, ${e}.a)`;case"reflect":return`lamina_blend_reflect(${t}, ${e}, ${e}.a)`;case"negation":return`lamina_blend_negation(${t}, ${e}, ${e}.a)`}}getSchema(){return this.schema.map(({label:t,options:n,...r})=>({label:t,options:n,...rie(t),...r,value:JI(this[t])}))}serialize(){const e=this.constructor.name.split("$")[0];let t=Object.keys(this);t=t.filter(a=>!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(a));const n={};t.forEach(a=>{n[a]=this[a]});const r={};for(const a in this.uniforms){const s=a.replace(`u_${this.uuid}_`,"");r[s]=JI(this.uniforms[a].value)}return{constructor:e,properties:{...r,...n}}}}class Vl extends kc{constructor(e){super(Vl,{name:"Depth",...e},t=>{t.schema.push({value:t.mapping,label:"mapping",options:["vector","world","camera"]});const n=Vl.getMapping(t.uuid,t.mapping);t.fragmentShader=t.fragmentShader.replace("lamina_mapping_template",n)}),this.mapping="vector"}static getMapping(e,t){switch(t){default:case"vector":return`length(v_${e}_worldPosition - u_${e}_origin)`;case"world":return`length(v_${e}_position - vec3(0.))`;case"camera":return`length(v_${e}_worldPosition - cameraPosition)`}}}Vl.u_near=2;Vl.u_far=10;Vl.u_origin=new ue(0,0,0);Vl.u_colorA="white";Vl.u_colorB="black";Vl.u_alpha=1;Vl.vertexShader=`
  varying vec3 v_worldPosition;
  varying vec3 v_position;

  void main() {
    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;
    v_position = position;
  }
  `;Vl.fragmentShader=`   
    uniform float u_alpha;
    uniform float u_near;
    uniform float u_far;
    uniform float u_isVector;
    uniform vec3 u_origin;
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;

    varying vec3 v_worldPosition;
    varying vec3 v_position;

    void main() {
      float f_dist = lamina_mapping_template;
      float f_depth = (f_dist - u_near) / (u_far - u_near);
			vec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));
  
  
      return vec4(f_depthColor, u_alpha);
    }
  `;let gR=class iz extends kc{constructor(e){super(iz,{name:"Color",...e})}};gR.u_color="red";gR.u_alpha=1;gR.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;

    void main() {
      return vec4(u_color, u_alpha);
    }
  `;class uo extends kc{constructor(e){super(uo,{name:"noise",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(nz)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(mR)});const n=uo.getNoiseFunction(t.type),r=uo.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",r),t.fragmentShader=t.fragmentShader.replace("lamina_noise_template",n)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}uo.u_colorA="#666666";uo.u_colorB="#666666";uo.u_colorC="#FFFFFF";uo.u_colorD="#FFFFFF";uo.u_alpha=1;uo.u_scale=1;uo.u_offset=new ue(0,0,0);uo.vertexShader=`
    varying vec3 v_position;

    void main() {
        v_position = lamina_mapping_template;
    }
  `;uo.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_colorC;
    uniform vec3 u_colorD;
    uniform vec3 u_offset;

    uniform float u_alpha;
    uniform float u_scale;

    varying vec3 v_position;


    void main() {
        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);

        float f_step1 = 0.;
        float f_step2 = 0.2;
        float f_step3 = 0.6;
        float f_step4 = 1.;

        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));
        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));
        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));

        return vec4(f_color, u_alpha);
    }
  `;class Wc extends kc{constructor(e){super(Wc,{name:"Fresnel",...e})}}Wc.u_color="white";Wc.u_alpha=1;Wc.u_bias=0;Wc.u_intensity=1;Wc.u_power=2;Wc.u_factor=1;Wc.vertexShader=`
    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);
        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        
    }
  `;Wc.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;
    uniform float u_bias;
    uniform float u_intensity;
    uniform float u_power;
    uniform float u_factor;

    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));
        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);

        f_fresnel = clamp(f_fresnel, 0.0, 1.0);
        return vec4(f_fresnel * u_color, u_alpha);
    }
  `;class kl extends kc{constructor(e){super(kl,{name:"Gradient",...e},t=>{t.schema.push({value:t.axes,label:"axes",options:["x","y","z"]}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(mR)});const n=kl.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",n||"local"),t.fragmentShader=t.fragmentShader.replace("axes_template",t.axes||"x")}),this.axes="x",this.mapping="local"}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}kl.u_colorA="white";kl.u_colorB="black";kl.u_alpha=1;kl.u_start=1;kl.u_end=-1;kl.u_contrast=1;kl.vertexShader=`
		varying vec3 v_position;

		vod main() {
      v_position = lamina_mapping_template;
		}
  `;kl.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_axis;
    uniform float u_alpha;
    uniform float u_start;
    uniform float u_end;
    uniform float u_contrast;

		varying vec3 v_position;

    void main() {

      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);
      vec3 f_color = mix(u_colorA, u_colorB, f_step);

      return vec4(f_color, u_alpha);
    }
  `;class av extends kc{constructor(e){super(av,{name:"Matcap",...e})}}av.u_alpha=1;av.u_map=void 0;av.vertexShader=`
    varying vec3 v_position;
    varying vec3 v_normal;
    
    void main() {
      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );
      v_normal = normalize( normalMatrix * normal );
    }
    `;av.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec3 v_position;
		varying vec3 v_normal;

		
    void main() {
			vec3 f_r = reflect( v_position, v_normal );
			float f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );
			vec2 f_vN = f_r.xy / f_m + .5;

			vec3 f_base = texture2D(u_map, f_vN).rgb;

      return vec4(f_base, u_alpha);
    }
  `;let ZM=class rz extends kc{constructor(e){super(rz,{name:"Texture",...e})}};ZM.u_alpha=1;ZM.u_map=void 0;ZM.vertexShader=`
    varying vec2 v_uv;
    
    void main() {
        v_uv = uv;
    }
    `;ZM.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec2 v_uv;

    void main() {
			vec4 f_color = texture2D(u_map, v_uv);
      return vec4(f_color.rgb, f_color.a * u_alpha);
    }
  `;class ch extends kc{constructor(e){super(ch,{name:"Displace",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(nz)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(mR)});const n=ch.getNoiseFunction(t.type),r=ch.getMapping(t.mapping);t.vertexVariables=t.vertexVariables.replace("lamina_mapping_template",r),t.vertexVariables=t.vertexVariables.replace("lamina_noise_template",n)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}ch.u_strength=1;ch.u_scale=1;ch.u_offset=new ue(0,0,0);ch.vertexShader=`
       
      uniform float u_strength;
      uniform float u_scale;
      uniform vec3 u_offset;

      vec3 displace(vec3 p) {
				vec3 f_position = lamina_mapping_template;
        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;
        vec3 f_newPosition = p + (f_n * normal);

				return f_newPosition;
      }

      
			vec3 orthogonal(vec3 v) {
  		  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)
  		  : vec3(0.0, -v.z, v.y));
  		}
  		vec3 recalcNormals(vec3 newPos) {
  		  float offset = 0.001;
  		  vec3 tangent = orthogonal(normal);
  		  vec3 bitangent = normalize(cross(normal, tangent));
  		  vec3 neighbour1 = position + tangent * offset;
  		  vec3 neighbour2 = position + bitangent * offset;
  		  vec3 displacedNeighbour1 = displace(neighbour1);
  		  vec3 displacedNeighbour2 = displace(neighbour2);
  		  vec3 displacedTangent = displacedNeighbour1 - newPos;
  		  vec3 displacedBitangent = displacedNeighbour2 - newPos;
  		  return normalize(cross(displacedTangent, displacedBitangent));
  		}
  
  
      void main() {
       
				vec3 f_newPosition = displace(position);
        lamina_finalNormal = recalcNormals(f_newPosition);

        return f_newPosition;
      }
    `;class sv extends kc{constructor(e){super(sv,{name:"Normal",...e})}}sv.u_alpha=1;sv.u_direction=new ue(1,1,1);sv.vertexShader=`   
  varying vec3 v_normals; 

  void main() {
    v_normals = normal;
  }
`;sv.fragmentShader=`   
  	uniform float u_alpha;
  	uniform vec3 u_color;
  	uniform vec3 u_direction;

		varying vec3 v_normals;

    void main() {
			vec3 f_normalColor = vec3(1.);
      f_normalColor.x = v_normals.x * u_direction.x;
      f_normalColor.y = v_normals.y * u_direction.y;
      f_normalColor.z = v_normals.z * u_direction.z;

      return vec4(f_normalColor, u_alpha);
    }
  `;const so=class so extends kc{constructor(e){super(so,{name:"GrassLayer",...e})}};Sl(so,"u_time",.1),Sl(so,"u_sway",.5),Sl(so,"u_length",1),Sl(so,"u_noiseScale",10),Sl(so,"u_noiseStrength",10),Sl(so,"u_colorA",new Bt("#ade266")),Sl(so,"u_colorB",new Bt("#ade266")),Sl(so,"u_isCurl",!1),Sl(so,"vertexShader",`   
    uniform float u_time;
    uniform float u_sway;
    uniform float u_length;
    uniform bool u_isCurl;

    varying vec3 v_pos;
    
    vec3 main() {
      float cover = .25;
      vec3 pos = position.xyz;
      vec3 base = vec3(pos.x, pos.y, 0.0);
      vec4 baseGP = instanceMatrix * vec4(base, 1.0);
      v_pos = baseGP.xyz;

      vec2 noise = u_isCurl ? 
        (lamina_noise_curl(baseGP.xyz * 0.1 + u_time * 0.5 * u_sway)).xy 
      : vec2(
          lamina_noise_perlin(baseGP.xyz * 2. + u_time * 0.2 * u_sway),
          lamina_noise_simplex(baseGP.xyz * 2. + u_time * 0.2 * u_sway)
        );
    
      noise = pow(smoothstep(-1.0, 1.0, noise) * 2., vec2(2.));
      float swingX = sin(u_time * 2.0 + noise.x * 2.0 * PI) * pow(pos.z, 2.0);
      float swingY = cos(u_time * 2.0 + noise.y * 2.0 * PI) * pow(pos.z, 2.0);
    

      pos.x += swingX;
      pos.y += swingY;


      return (pos * u_length);
    }
  `),Sl(so,"fragmentShader",`
  varying vec3 v_pos;
  uniform float u_noiseScale;
  uniform float u_noiseStrength;

  uniform vec3 u_colorA;
  uniform vec3 u_colorB;

  vec4 main() {
    float n = lamina_noise_perlin(v_pos * u_noiseScale) * u_noiseStrength;

    vec3 c =  mix(u_colorB, u_colorA, n);
    return vec4(vec3(c), 1.);
  }
  `);let I2=so;vp({WindLayer:I2});new ue(35/2,0,0);function Lc({url:i,...e}){const{scene:t}=Qg(i),n=X.useMemo(()=>WF(t),[t]);return X.useEffect(()=>{n.traverse(r=>{r.castShadow=r.receiveShadow=!0,r.material&&(r.material.envMapIntensity=1)})},[n]),Ct.jsx("primitive",{scale:5,...e,object:n})}$F.seed(Math.random());function Ld({url:i,count:e=1e3,variation:t=1,position:n,radius:r=2,noCol:a,...s}){const{nodes:o,materials:c}=Qg(i),f=i.replace("Var1",`Var${t}`),d=f.split("_"),m=d[d.length-1].replace(".glb",""),v=WC(`${f.substring(0,f.lastIndexOf("/"))}/textures/Opacity_4K__${m}.jpg`,_=>{_.flipY=!1}),y=X.useRef(null);return Eh(()=>{var _;return((_=y.current)==null?void 0:_.time)&&(y.current.time+=.005)}),Ct.jsx("group",{rotation:[-Math.PI/2,0,0],position:n,children:Ct.jsxs(O$,{transform:({position:_,normal:A,dummy:S})=>{const x=_.clone().multiplyScalar(2),E=Math.pow($F.simplex3(...x.toArray()),.01);for(S.scale.setScalar(Sr.mapLinear(E,-1,1,.2,.4)*Sr.randFloat(1,1.3)),S.position.copy(_),S.position.z+=.03,S.updateMatrix();S.position.x>-.7&&S.position.x<.7&&S.position.y>-.7&&S.position.y<.7;)S.position.x=Sr.randFloat(-1,1),S.position.y=Sr.randFloat(-1,1);return S.lookAt(A.add(_)),S.rotation.y+=Sr.randFloat(-1,1)*Math.PI/4,S.rotation.z+=Sr.randFloat(-1,1)*Math.PI/4,S.rotation.x+=Sr.randFloat(-1,1)*Math.PI/4+Math.PI/2,S.updateMatrix(),S},children:[Ct.jsx(k$,{args:[r],children:Ct.jsx("meshBasicMaterial",{})}),Ct.jsx("instancedMesh",{args:[null,null,e],geometry:o[Object.keys(o).find(_=>_.includes("_LOD"))].geometry,scale:10,...s,children:a?Ct.jsx("meshStandardMaterial",{...c[Object.keys(c)[0]],vertexColors:!1,alphaMap:v,transparent:!0,castShadow:!0,side:fa,receiveShadow:!0}):Ct.jsxs(nie,{side:fa,lighting:"physical",envMapIntensity:0,...c[Object.keys(c)[0]],vertexColors:!1,alphaMap:v,transparent:!0,castShadow:!0,receiveShadow:!0,children:[Ct.jsx(YI,{colorA:"#596700",colorB:"#977b00",start:.5,end:2,contrast:2,axes:"y"}),Ct.jsx(YI,{mode:"multiply",alpha:.21,colorA:"#5f6e00",colorB:"#010000",start:0,end:1,contrast:3,axes:"y"}),Ct.jsx("windLayer",{args:[{mode:"multiply"}],colorA:"#fff0f0",colorB:"#b9d5c5",noiseScale:5,noiseStrength:7,length:1.4,sway:4,ref:y})]})})]})})}/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const az="128",sie=0,ZI=1,oie=2,sz=1,lie=2,fy=3,QM=0,ca=1,eE=2,oz=1,Ry=0,Dy=1,QI=2,eP=3,tP=4,cie=5,pg=100,uie=101,fie=102,nP=103,iP=104,hie=200,die=201,pie=202,mie=203,lz=204,cz=205,gie=206,vie=207,yie=208,_ie=209,xie=210,bie=0,Sie=1,Mie=2,P2=3,Eie=4,Aie=5,Tie=6,wie=7,tE=0,Cie=1,Rie=2,By=0,Die=1,Bie=2,Lie=3,Iie=4,Pie=5,uz=300,vR=301,yR=302,rP=303,aP=304,_R=306,xR=307,N2=1e3,Pl=1001,O2=1002,_s=1003,sP=1004,oP=1005,ko=1006,Nie=1007,bR=1008,SR=1009,Oie=1010,Uie=1011,nM=1012,Fie=1013,Zb=1014,ih=1015,iM=1016,zie=1017,Hie=1018,Gie=1019,Ly=1020,Vie=1021,ep=1022,Ul=1023,kie=1024,Wie=1025,Cg=1026,Zy=1027,Xie=1028,$ie=1029,jie=1030,qie=1031,Yie=1032,Kie=1033,lP=33776,cP=33777,uP=33778,fP=33779,hP=35840,dP=35841,pP=35842,mP=35843,Jie=36196,gP=37492,vP=37496,Zie=37808,Qie=37809,ere=37810,tre=37811,nre=37812,ire=37813,rre=37814,are=37815,sre=37816,ore=37817,lre=37818,cre=37819,ure=37820,fre=37821,hre=36492,dre=37840,pre=37841,mre=37842,gre=37843,vre=37844,yre=37845,_re=37846,xre=37847,bre=37848,Sre=37849,Mre=37850,Ere=37851,Are=37852,Tre=37853,wre=2200,Cre=2201,Rre=2202,rM=2300,aM=2301,tw=2302,_g=2400,xg=2401,sM=2402,MR=2500,fz=2501,Dre=0,R_=3e3,hz=3001,Bre=3007,Lre=3002,Ire=3003,Pre=3004,Nre=3005,Ore=3006,Ure=3200,Fre=3201,ov=0,zre=1,nw=7680,Hre=519,Qy=35044,oM=35048,yP="300 es";class xp{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}const Ra=[];for(let i=0;i<256;i++)Ra[i]=(i<16?"0":"")+i.toString(16);const iw=Math.PI/180,U2=180/Math.PI;function Fc(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ra[i&255]+Ra[i>>8&255]+Ra[i>>16&255]+Ra[i>>24&255]+"-"+Ra[e&255]+Ra[e>>8&255]+"-"+Ra[e>>16&15|64]+Ra[e>>24&255]+"-"+Ra[t&63|128]+Ra[t>>8&255]+"-"+Ra[t>>16&255]+Ra[t>>24&255]+Ra[n&255]+Ra[n>>8&255]+Ra[n>>16&255]+Ra[n>>24&255]).toUpperCase()}function oo(i,e,t){return Math.max(e,Math.min(t,i))}function Gre(i,e){return(i%e+e)%e}function rw(i,e,t){return(1-t)*i+t*e}function _P(i){return(i&i-1)===0&&i!==0}function Vre(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function kre(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}class It{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*n-s*r+e.x,this.y=a*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}It.prototype.isVector2=!0;class Da{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,a,s,o,c,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=a,d[5]=c,d[6]=n,d[7]=s,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,a=this.elements,s=n[0],o=n[3],c=n[6],f=n[1],d=n[4],m=n[7],v=n[2],y=n[5],_=n[8],A=r[0],S=r[3],x=r[6],E=r[1],D=r[4],B=r[7],U=r[2],w=r[5],O=r[8];return a[0]=s*A+o*E+c*U,a[3]=s*S+o*D+c*w,a[6]=s*x+o*B+c*O,a[1]=f*A+d*E+m*U,a[4]=f*S+d*D+m*w,a[7]=f*x+d*B+m*O,a[2]=v*A+y*E+_*U,a[5]=v*S+y*D+_*w,a[8]=v*x+y*B+_*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8];return t*s*d-t*o*f-n*a*d+n*o*c+r*a*f-r*s*c}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8],m=d*s-o*f,v=o*c-d*a,y=f*a-s*c,_=t*m+n*v+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/_;return e[0]=m*A,e[1]=(r*f-d*n)*A,e[2]=(o*n-r*s)*A,e[3]=v*A,e[4]=(d*t-r*c)*A,e[5]=(r*a-o*t)*A,e[6]=y*A,e[7]=(n*c-f*t)*A,e[8]=(s*t-n*a)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,a,s,o){const c=Math.cos(a),f=Math.sin(a);return this.set(n*c,n*f,-n*(c*s+f*o)+s+e,-r*f,r*c,-r*(-f*s+c*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],s=r[3],o=r[6],c=r[1],f=r[4],d=r[7];return r[0]=t*a+n*c,r[3]=t*s+n*f,r[6]=t*o+n*d,r[1]=-n*a+t*c,r[4]=-n*s+t*f,r[7]=-n*o+t*d,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Da.prototype.isMatrix3=!0;let Ym;class lv{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ym===void 0&&(Ym=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ym.width=e.width,Ym.height=e.height;const n=Ym.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ym}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Wre=0;class Ia extends xp{constructor(e=Ia.DEFAULT_IMAGE,t=Ia.DEFAULT_MAPPING,n=Pl,r=Pl,a=ko,s=bR,o=Ul,c=SR,f=1,d=R_){super(),Object.defineProperty(this,"id",{value:Wre++}),this.uuid=Fc(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=o,this.internalFormat=null,this.type=c,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Da,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=Fc()),!t&&e.images[r.uuid]===void 0){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(aw(r[s].image)):a.push(aw(r[s]))}else a=aw(r);e.images[r.uuid]={uuid:r.uuid,url:a}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==uz)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case N2:e.x=e.x-Math.floor(e.x);break;case Pl:e.x=e.x<0?0:1;break;case O2:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case N2:e.y=e.y-Math.floor(e.y);break;case Pl:e.y=e.y<0?0:1;break;case O2:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Ia.DEFAULT_IMAGE=void 0;Ia.DEFAULT_MAPPING=uz;Ia.prototype.isTexture=!0;function aw(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?lv.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Ni{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,a;const c=e.elements,f=c[0],d=c[4],m=c[8],v=c[1],y=c[5],_=c[9],A=c[2],S=c[6],x=c[10];if(Math.abs(d-v)<.01&&Math.abs(m-A)<.01&&Math.abs(_-S)<.01){if(Math.abs(d+v)<.1&&Math.abs(m+A)<.1&&Math.abs(_+S)<.1&&Math.abs(f+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(f+1)/2,B=(y+1)/2,U=(x+1)/2,w=(d+v)/4,O=(m+A)/4,I=(_+S)/4;return D>B&&D>U?D<.01?(n=0,r=.707106781,a=.707106781):(n=Math.sqrt(D),r=w/n,a=O/n):B>U?B<.01?(n=.707106781,r=0,a=.707106781):(r=Math.sqrt(B),n=w/r,a=I/r):U<.01?(n=.707106781,r=.707106781,a=0):(a=Math.sqrt(U),n=O/a,r=I/a),this.set(n,r,a,t),this}let E=Math.sqrt((S-_)*(S-_)+(m-A)*(m-A)+(v-d)*(v-d));return Math.abs(E)<.001&&(E=1),this.x=(S-_)/E,this.y=(m-A)/E,this.z=(v-d)/E,this.w=Math.acos((f+y+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Ni.prototype.isVector4=!0;class tp extends xp{constructor(e,t,n){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Ni(0,0,e,t),this.scissorTest=!1,this.viewport=new Ni(0,0,e,t),n=n||{},this.texture=new Ia(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ko,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}tp.prototype.isWebGLRenderTarget=!0;class Xre extends tp{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Xre.prototype.isWebGLMultisampleRenderTarget=!0;class Ss{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,a,s,o){let c=n[r+0],f=n[r+1],d=n[r+2],m=n[r+3];const v=a[s+0],y=a[s+1],_=a[s+2],A=a[s+3];if(o===0){e[t+0]=c,e[t+1]=f,e[t+2]=d,e[t+3]=m;return}if(o===1){e[t+0]=v,e[t+1]=y,e[t+2]=_,e[t+3]=A;return}if(m!==A||c!==v||f!==y||d!==_){let S=1-o;const x=c*v+f*y+d*_+m*A,E=x>=0?1:-1,D=1-x*x;if(D>Number.EPSILON){const U=Math.sqrt(D),w=Math.atan2(U,x*E);S=Math.sin(S*w)/U,o=Math.sin(o*w)/U}const B=o*E;if(c=c*S+v*B,f=f*S+y*B,d=d*S+_*B,m=m*S+A*B,S===1-o){const U=1/Math.sqrt(c*c+f*f+d*d+m*m);c*=U,f*=U,d*=U,m*=U}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,r,a,s){const o=n[r],c=n[r+1],f=n[r+2],d=n[r+3],m=a[s],v=a[s+1],y=a[s+2],_=a[s+3];return e[t]=o*_+d*m+c*y-f*v,e[t+1]=c*_+d*v+f*m-o*y,e[t+2]=f*_+d*y+o*v-c*m,e[t+3]=d*_-o*m-c*v-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,f=o(n/2),d=o(r/2),m=o(a/2),v=c(n/2),y=c(r/2),_=c(a/2);switch(s){case"XYZ":this._x=v*d*m+f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m-v*y*_;break;case"YXZ":this._x=v*d*m+f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m+v*y*_;break;case"ZXY":this._x=v*d*m-f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m-v*y*_;break;case"ZYX":this._x=v*d*m-f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m+v*y*_;break;case"YZX":this._x=v*d*m+f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m-v*y*_;break;case"XZY":this._x=v*d*m-f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m+v*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],a=t[8],s=t[1],o=t[5],c=t[9],f=t[2],d=t[6],m=t[10],v=n+o+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(d-c)*y,this._y=(a-f)*y,this._z=(s-r)*y}else if(n>o&&n>m){const y=2*Math.sqrt(1+n-o-m);this._w=(d-c)/y,this._x=.25*y,this._y=(r+s)/y,this._z=(a+f)/y}else if(o>m){const y=2*Math.sqrt(1+o-n-m);this._w=(a-f)/y,this._x=(r+s)/y,this._y=.25*y,this._z=(c+d)/y}else{const y=2*Math.sqrt(1+m-n-o);this._w=(s-r)/y,this._x=(a+f)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(oo(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,a=e._z,s=e._w,o=t._x,c=t._y,f=t._z,d=t._w;return this._x=n*d+s*o+r*f-a*c,this._y=r*d+s*c+a*o-n*f,this._z=a*d+s*f+n*c-r*o,this._w=s*d-n*o-r*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,a=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=a,this;const c=1-o*o;if(c<=Number.EPSILON){const y=1-t;return this._w=y*s+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(c),d=Math.atan2(f,o),m=Math.sin((1-t)*d)/f,v=Math.sin(t*d)/f;return this._w=s*m+this._w*v,this._x=n*m+this._x*v,this._y=r*m+this._y*v,this._z=a*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ss.prototype.isQuaternion=!0;class ve{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(xP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(xP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,a=e.x,s=e.y,o=e.z,c=e.w,f=c*t+s*r-o*n,d=c*n+o*t-a*r,m=c*r+a*n-s*t,v=-a*t-s*n-o*r;return this.x=f*c+v*-a+d*-o-m*-s,this.y=d*c+v*-s+m*-a-f*-o,this.z=m*c+v*-o+f*-s-d*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,a=e.z,s=t.x,o=t.y,c=t.z;return this.x=r*c-a*o,this.y=a*s-n*c,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return sw.copy(this).projectOnVector(e),this.sub(sw)}reflect(e){return this.sub(sw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oo(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}ve.prototype.isVector3=!0;const sw=new ve,xP=new Ss;class Jo{constructor(e=new ve(1/0,1/0,1/0),t=new ve(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,a=-1/0,s=-1/0,o=-1/0;for(let c=0,f=e.length;c<f;c+=3){const d=e[c],m=e[c+1],v=e[c+2];d<t&&(t=d),m<n&&(n=m),v<r&&(r=v),d>a&&(a=d),m>s&&(s=m),v>o&&(o=v)}return this.min.set(t,n,r),this.max.set(a,s,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,a=-1/0,s=-1/0,o=-1/0;for(let c=0,f=e.count;c<f;c++){const d=e.getX(c),m=e.getY(c),v=e.getZ(c);d<t&&(t=d),m<n&&(n=m),v<r&&(r=v),d>a&&(a=d),m>s&&(s=m),v>o&&(o=v)}return this.min.set(t,n,r),this.max.set(a,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=J0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new ve),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new ve),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),ow.copy(t.boundingBox),ow.applyMatrix4(e.matrixWorld),this.union(ow));const n=e.children;for(let r=0,a=n.length;r<a;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new ve),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,J0),J0.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Z0),pb.subVectors(this.max,Z0),Km.subVectors(e.a,Z0),Jm.subVectors(e.b,Z0),Zm.subVectors(e.c,Z0),jf.subVectors(Jm,Km),qf.subVectors(Zm,Jm),Id.subVectors(Km,Zm);let t=[0,-jf.z,jf.y,0,-qf.z,qf.y,0,-Id.z,Id.y,jf.z,0,-jf.x,qf.z,0,-qf.x,Id.z,0,-Id.x,-jf.y,jf.x,0,-qf.y,qf.x,0,-Id.y,Id.x,0];return!lw(t,Km,Jm,Zm,pb)||(t=[1,0,0,0,1,0,0,0,1],!lw(t,Km,Jm,Zm,pb))?!1:(mb.crossVectors(jf,qf),t=[mb.x,mb.y,mb.z],lw(t,Km,Jm,Zm,pb))}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new ve),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return J0.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(J0).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Mu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Mu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Mu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Mu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Mu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Mu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Mu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Mu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Mu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Jo.prototype.isBox3=!0;const Mu=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],J0=new ve,ow=new Jo,Km=new ve,Jm=new ve,Zm=new ve,jf=new ve,qf=new ve,Id=new ve,Z0=new ve,pb=new ve,mb=new ve,Pd=new ve;function lw(i,e,t,n,r){for(let a=0,s=i.length-3;a<=s;a+=3){Pd.fromArray(i,a);const o=r.x*Math.abs(Pd.x)+r.y*Math.abs(Pd.y)+r.z*Math.abs(Pd.z),c=e.dot(Pd),f=t.dot(Pd),d=n.dot(Pd);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>o)return!1}return!0}const $re=new Jo,bP=new ve,cw=new ve,uw=new ve;class cv{constructor(e=new ve,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):$re.setFromPoints(e).getCenter(n);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new ve),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Jo),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){uw.subVectors(e,this.center);const t=uw.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.add(uw.multiplyScalar(r/n)),this.radius+=r}return this}union(e){return cw.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(bP.copy(e.center).add(cw)),this.expandByPoint(bP.copy(e.center).sub(cw)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Eu=new ve,fw=new ve,gb=new ve,Yf=new ve,hw=new ve,vb=new ve,dw=new ve;class uv{constructor(e=new ve,t=new ve(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new ve),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Eu)),this}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new ve),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Eu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Eu.copy(this.direction).multiplyScalar(t).add(this.origin),Eu.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){fw.copy(e).add(t).multiplyScalar(.5),gb.copy(t).sub(e).normalize(),Yf.copy(this.origin).sub(fw);const a=e.distanceTo(t)*.5,s=-this.direction.dot(gb),o=Yf.dot(this.direction),c=-Yf.dot(gb),f=Yf.lengthSq(),d=Math.abs(1-s*s);let m,v,y,_;if(d>0)if(m=s*c-o,v=s*o-c,_=a*d,m>=0)if(v>=-_)if(v<=_){const A=1/d;m*=A,v*=A,y=m*(m+s*v+2*o)+v*(s*m+v+2*c)+f}else v=a,m=Math.max(0,-(s*v+o)),y=-m*m+v*(v+2*c)+f;else v=-a,m=Math.max(0,-(s*v+o)),y=-m*m+v*(v+2*c)+f;else v<=-_?(m=Math.max(0,-(-s*a+o)),v=m>0?-a:Math.min(Math.max(-a,-c),a),y=-m*m+v*(v+2*c)+f):v<=_?(m=0,v=Math.min(Math.max(-a,-c),a),y=v*(v+2*c)+f):(m=Math.max(0,-(s*a+o)),v=m>0?a:Math.min(Math.max(-a,-c),a),y=-m*m+v*(v+2*c)+f);else v=s>0?-a:a,m=Math.max(0,-(s*v+o)),y=-m*m+v*(v+2*c)+f;return n&&n.copy(this.direction).multiplyScalar(m).add(this.origin),r&&r.copy(gb).multiplyScalar(v).add(fw),y}intersectSphere(e,t){Eu.subVectors(e.center,this.origin);const n=Eu.dot(this.direction),r=Eu.dot(Eu)-n*n,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=n-s,c=n+s;return o<0&&c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,a,s,o,c;const f=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,v=this.origin;return f>=0?(n=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(n=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),d>=0?(a=(e.min.y-v.y)*d,s=(e.max.y-v.y)*d):(a=(e.max.y-v.y)*d,s=(e.min.y-v.y)*d),n>s||a>r||((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),m>=0?(o=(e.min.z-v.z)*m,c=(e.max.z-v.z)*m):(o=(e.max.z-v.z)*m,c=(e.min.z-v.z)*m),n>c||o>r)||((o>n||n!==n)&&(n=o),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Eu)!==null}intersectTriangle(e,t,n,r,a){hw.subVectors(t,e),vb.subVectors(n,e),dw.crossVectors(hw,vb);let s=this.direction.dot(dw),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Yf.subVectors(this.origin,e);const c=o*this.direction.dot(vb.crossVectors(Yf,vb));if(c<0)return null;const f=o*this.direction.dot(hw.cross(Yf));if(f<0||c+f>s)return null;const d=-o*Yf.dot(dw);return d<0?null:this.at(d/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class bn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,a,s,o,c,f,d,m,v,y,_,A,S){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=r,x[1]=a,x[5]=s,x[9]=o,x[13]=c,x[2]=f,x[6]=d,x[10]=m,x[14]=v,x[3]=y,x[7]=_,x[11]=A,x[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Qm.setFromMatrixColumn(e,0).length(),a=1/Qm.setFromMatrixColumn(e,1).length(),s=1/Qm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,a=e.z,s=Math.cos(n),o=Math.sin(n),c=Math.cos(r),f=Math.sin(r),d=Math.cos(a),m=Math.sin(a);if(e.order==="XYZ"){const v=s*d,y=s*m,_=o*d,A=o*m;t[0]=c*d,t[4]=-c*m,t[8]=f,t[1]=y+_*f,t[5]=v-A*f,t[9]=-o*c,t[2]=A-v*f,t[6]=_+y*f,t[10]=s*c}else if(e.order==="YXZ"){const v=c*d,y=c*m,_=f*d,A=f*m;t[0]=v+A*o,t[4]=_*o-y,t[8]=s*f,t[1]=s*m,t[5]=s*d,t[9]=-o,t[2]=y*o-_,t[6]=A+v*o,t[10]=s*c}else if(e.order==="ZXY"){const v=c*d,y=c*m,_=f*d,A=f*m;t[0]=v-A*o,t[4]=-s*m,t[8]=_+y*o,t[1]=y+_*o,t[5]=s*d,t[9]=A-v*o,t[2]=-s*f,t[6]=o,t[10]=s*c}else if(e.order==="ZYX"){const v=s*d,y=s*m,_=o*d,A=o*m;t[0]=c*d,t[4]=_*f-y,t[8]=v*f+A,t[1]=c*m,t[5]=A*f+v,t[9]=y*f-_,t[2]=-f,t[6]=o*c,t[10]=s*c}else if(e.order==="YZX"){const v=s*c,y=s*f,_=o*c,A=o*f;t[0]=c*d,t[4]=A-v*m,t[8]=_*m+y,t[1]=m,t[5]=s*d,t[9]=-o*d,t[2]=-f*d,t[6]=y*m+_,t[10]=v-A*m}else if(e.order==="XZY"){const v=s*c,y=s*f,_=o*c,A=o*f;t[0]=c*d,t[4]=-m,t[8]=f*d,t[1]=v*m+A,t[5]=s*d,t[9]=y*m-_,t[2]=_*m-y,t[6]=o*d,t[10]=A*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jre,e,qre)}lookAt(e,t,n){const r=this.elements;return ro.subVectors(e,t),ro.lengthSq()===0&&(ro.z=1),ro.normalize(),Kf.crossVectors(n,ro),Kf.lengthSq()===0&&(Math.abs(n.z)===1?ro.x+=1e-4:ro.z+=1e-4,ro.normalize(),Kf.crossVectors(n,ro)),Kf.normalize(),yb.crossVectors(ro,Kf),r[0]=Kf.x,r[4]=yb.x,r[8]=ro.x,r[1]=Kf.y,r[5]=yb.y,r[9]=ro.y,r[2]=Kf.z,r[6]=yb.z,r[10]=ro.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,a=this.elements,s=n[0],o=n[4],c=n[8],f=n[12],d=n[1],m=n[5],v=n[9],y=n[13],_=n[2],A=n[6],S=n[10],x=n[14],E=n[3],D=n[7],B=n[11],U=n[15],w=r[0],O=r[4],I=r[8],L=r[12],R=r[1],F=r[5],G=r[9],V=r[13],$=r[2],K=r[6],z=r[10],ee=r[14],ne=r[3],de=r[7],Y=r[11],fe=r[15];return a[0]=s*w+o*R+c*$+f*ne,a[4]=s*O+o*F+c*K+f*de,a[8]=s*I+o*G+c*z+f*Y,a[12]=s*L+o*V+c*ee+f*fe,a[1]=d*w+m*R+v*$+y*ne,a[5]=d*O+m*F+v*K+y*de,a[9]=d*I+m*G+v*z+y*Y,a[13]=d*L+m*V+v*ee+y*fe,a[2]=_*w+A*R+S*$+x*ne,a[6]=_*O+A*F+S*K+x*de,a[10]=_*I+A*G+S*z+x*Y,a[14]=_*L+A*V+S*ee+x*fe,a[3]=E*w+D*R+B*$+U*ne,a[7]=E*O+D*F+B*K+U*de,a[11]=E*I+D*G+B*z+U*Y,a[15]=E*L+D*V+B*ee+U*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],s=e[1],o=e[5],c=e[9],f=e[13],d=e[2],m=e[6],v=e[10],y=e[14],_=e[3],A=e[7],S=e[11],x=e[15];return _*(+a*c*m-r*f*m-a*o*v+n*f*v+r*o*y-n*c*y)+A*(+t*c*y-t*f*v+a*s*v-r*s*y+r*f*d-a*c*d)+S*(+t*f*m-t*o*y-a*s*m+n*s*y+a*o*d-n*f*d)+x*(-r*o*d-t*c*m+t*o*v+r*s*m-n*s*v+n*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],d=e[8],m=e[9],v=e[10],y=e[11],_=e[12],A=e[13],S=e[14],x=e[15],E=m*S*f-A*v*f+A*c*y-o*S*y-m*c*x+o*v*x,D=_*v*f-d*S*f-_*c*y+s*S*y+d*c*x-s*v*x,B=d*A*f-_*m*f+_*o*y-s*A*y-d*o*x+s*m*x,U=_*m*c-d*A*c-_*o*v+s*A*v+d*o*S-s*m*S,w=t*E+n*D+r*B+a*U;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/w;return e[0]=E*O,e[1]=(A*v*a-m*S*a-A*r*y+n*S*y+m*r*x-n*v*x)*O,e[2]=(o*S*a-A*c*a+A*r*f-n*S*f-o*r*x+n*c*x)*O,e[3]=(m*c*a-o*v*a-m*r*f+n*v*f+o*r*y-n*c*y)*O,e[4]=D*O,e[5]=(d*S*a-_*v*a+_*r*y-t*S*y-d*r*x+t*v*x)*O,e[6]=(_*c*a-s*S*a-_*r*f+t*S*f+s*r*x-t*c*x)*O,e[7]=(s*v*a-d*c*a+d*r*f-t*v*f-s*r*y+t*c*y)*O,e[8]=B*O,e[9]=(_*m*a-d*A*a-_*n*y+t*A*y+d*n*x-t*m*x)*O,e[10]=(s*A*a-_*o*a+_*n*f-t*A*f-s*n*x+t*o*x)*O,e[11]=(d*o*a-s*m*a-d*n*f+t*m*f+s*n*y-t*o*y)*O,e[12]=U*O,e[13]=(d*A*r-_*m*r+_*n*v-t*A*v-d*n*S+t*m*S)*O,e[14]=(_*o*r-s*A*r-_*n*c+t*A*c+s*n*S-t*o*S)*O,e[15]=(s*m*r-d*o*r+d*n*c-t*m*c-s*n*v+t*o*v)*O,this}scale(e){const t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),a=1-n,s=e.x,o=e.y,c=e.z,f=a*s,d=a*o;return this.set(f*s+n,f*o-r*c,f*c+r*o,0,f*o+r*c,d*o+n,d*c-r*s,0,f*c-r*o,d*c+r*s,a*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,a=t._x,s=t._y,o=t._z,c=t._w,f=a+a,d=s+s,m=o+o,v=a*f,y=a*d,_=a*m,A=s*d,S=s*m,x=o*m,E=c*f,D=c*d,B=c*m,U=n.x,w=n.y,O=n.z;return r[0]=(1-(A+x))*U,r[1]=(y+B)*U,r[2]=(_-D)*U,r[3]=0,r[4]=(y-B)*w,r[5]=(1-(v+x))*w,r[6]=(S+E)*w,r[7]=0,r[8]=(_+D)*O,r[9]=(S-E)*O,r[10]=(1-(v+A))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let a=Qm.set(r[0],r[1],r[2]).length();const s=Qm.set(r[4],r[5],r[6]).length(),o=Qm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],wl.copy(this);const f=1/a,d=1/s,m=1/o;return wl.elements[0]*=f,wl.elements[1]*=f,wl.elements[2]*=f,wl.elements[4]*=d,wl.elements[5]*=d,wl.elements[6]*=d,wl.elements[8]*=m,wl.elements[9]*=m,wl.elements[10]*=m,t.setFromRotationMatrix(wl),n.x=a,n.y=s,n.z=o,this}makePerspective(e,t,n,r,a,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,c=2*a/(t-e),f=2*a/(n-r),d=(t+e)/(t-e),m=(n+r)/(n-r),v=-(s+a)/(s-a),y=-2*s*a/(s-a);return o[0]=c,o[4]=0,o[8]=d,o[12]=0,o[1]=0,o[5]=f,o[9]=m,o[13]=0,o[2]=0,o[6]=0,o[10]=v,o[14]=y,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,a,s){const o=this.elements,c=1/(t-e),f=1/(n-r),d=1/(s-a),m=(t+e)*c,v=(n+r)*f,y=(s+a)*d;return o[0]=2*c,o[4]=0,o[8]=0,o[12]=-m,o[1]=0,o[5]=2*f,o[9]=0,o[13]=-v,o[2]=0,o[6]=0,o[10]=-2*d,o[14]=-y,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}bn.prototype.isMatrix4=!0;const Qm=new ve,wl=new bn,jre=new ve(0,0,0),qre=new ve(1,1,1),Kf=new ve,yb=new ve,ro=new ve,SP=new bn,MP=new Ss;class fv{constructor(e=0,t=0,n=0,r=fv.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=e.elements,a=r[0],s=r[4],o=r[8],c=r[1],f=r[5],d=r[9],m=r[2],v=r[6],y=r[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(oo(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-oo(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-m,a),this._z=0);break;case"ZXY":this._x=Math.asin(oo(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-oo(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(oo(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-oo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return SP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(SP,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return MP.setFromEuler(this),this.setFromQuaternion(MP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ve(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}fv.prototype.isEuler=!0;fv.DefaultOrder="XYZ";fv.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Yre{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let Kre=0;const EP=new ve,eg=new Ss,Au=new bn,_b=new ve,Q0=new ve,Jre=new ve,Zre=new Ss,AP=new ve(1,0,0),TP=new ve(0,1,0),wP=new ve(0,0,1),Qre={type:"added"},CP={type:"removed"};class _i extends xp{constructor(){super(),Object.defineProperty(this,"id",{value:Kre++}),this.uuid=Fc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_i.DefaultUp.clone();const e=new ve,t=new fv,n=new Ss,r=new ve(1,1,1);function a(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new bn},normalMatrix:{value:new Da}}),this.matrix=new bn,this.matrixWorld=new bn,this.matrixAutoUpdate=_i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Yre,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return eg.setFromAxisAngle(e,t),this.quaternion.multiply(eg),this}rotateOnWorldAxis(e,t){return eg.setFromAxisAngle(e,t),this.quaternion.premultiply(eg),this}rotateX(e){return this.rotateOnAxis(AP,e)}rotateY(e){return this.rotateOnAxis(TP,e)}rotateZ(e){return this.rotateOnAxis(wP,e)}translateOnAxis(e,t){return EP.copy(e).applyQuaternion(this.quaternion),this.position.add(EP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AP,e)}translateY(e){return this.translateOnAxis(TP,e)}translateZ(e){return this.translateOnAxis(wP,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Au.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_b.copy(e):_b.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Q0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Au.lookAt(Q0,_b,this.up):Au.lookAt(_b,Q0,this.up),this.quaternion.setFromRotationMatrix(Au),r&&(Au.extractRotation(r.matrixWorld),eg.setFromRotationMatrix(Au),this.quaternion.premultiply(eg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Qre)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(CP)),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(CP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Au.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Au.multiply(e.parent.matrixWorld)),e.applyMatrix4(Au),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getWorldPosition(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new ve),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Ss),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Q0,e,Jre),e}getWorldScale(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new ve),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Q0,Zre,e),e}getWorldDirection(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new ve),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const m=c[f];a(e.shapes,m)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,f=this.material.length;c<f;c++)o.push(a(e.materials,this.material[c]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];r.animations.push(a(e.animations,c))}}if(t){const o=s(e.geometries),c=s(e.materials),f=s(e.textures),d=s(e.images),m=s(e.shapes),v=s(e.skeletons),y=s(e.animations);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),f.length>0&&(n.textures=f),d.length>0&&(n.images=d),m.length>0&&(n.shapes=m),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y)}return n.object=r,n;function s(o){const c=[];for(const f in o){const d=o[f];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}_i.DefaultUp=new ve(0,1,0);_i.DefaultMatrixAutoUpdate=!0;_i.prototype.isObject3D=!0;const pw=new ve,eae=new ve,tae=new Da;class Pc{constructor(e=new ve(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=pw.subVectors(n,t).cross(eae.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new ve),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new ve);const n=e.delta(pw),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new ve),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||tae.getNormalMatrix(e),r=this.coplanarPoint(pw).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Pc.prototype.isPlane=!0;const Cl=new ve,Tu=new ve,mw=new ve,wu=new ve,tg=new ve,ng=new ve,RP=new ve,gw=new ve,vw=new ve,yw=new ve;class Jr{constructor(e=new ve,t=new ve,n=new ve){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new ve),r.subVectors(n,t),Cl.subVectors(e,t),r.cross(Cl);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,n,r,a){Cl.subVectors(r,t),Tu.subVectors(n,t),mw.subVectors(e,t);const s=Cl.dot(Cl),o=Cl.dot(Tu),c=Cl.dot(mw),f=Tu.dot(Tu),d=Tu.dot(mw),m=s*f-o*o;if(a===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new ve),m===0)return a.set(-2,-1,-1);const v=1/m,y=(f*c-o*d)*v,_=(s*d-o*c)*v;return a.set(1-y-_,_,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,wu),wu.x>=0&&wu.y>=0&&wu.x+wu.y<=1}static getUV(e,t,n,r,a,s,o,c){return this.getBarycoord(e,t,n,r,wu),c.set(0,0),c.addScaledVector(a,wu.x),c.addScaledVector(s,wu.y),c.addScaledVector(o,wu.z),c}static isFrontFacing(e,t,n,r){return Cl.subVectors(n,t),Tu.subVectors(e,t),Cl.cross(Tu).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Cl.subVectors(this.c,this.b),Tu.subVectors(this.a,this.b),Cl.cross(Tu).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new ve),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Jr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Pc),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Jr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,a){return Jr.getUV(e,this.a,this.b,this.c,t,n,r,a)}containsPoint(e){return Jr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Jr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new ve);const n=this.a,r=this.b,a=this.c;let s,o;tg.subVectors(r,n),ng.subVectors(a,n),gw.subVectors(e,n);const c=tg.dot(gw),f=ng.dot(gw);if(c<=0&&f<=0)return t.copy(n);vw.subVectors(e,r);const d=tg.dot(vw),m=ng.dot(vw);if(d>=0&&m<=d)return t.copy(r);const v=c*m-d*f;if(v<=0&&c>=0&&d<=0)return s=c/(c-d),t.copy(n).addScaledVector(tg,s);yw.subVectors(e,a);const y=tg.dot(yw),_=ng.dot(yw);if(_>=0&&y<=_)return t.copy(a);const A=y*f-c*_;if(A<=0&&f>=0&&_<=0)return o=f/(f-_),t.copy(n).addScaledVector(ng,o);const S=d*_-y*m;if(S<=0&&m-d>=0&&y-_>=0)return RP.subVectors(a,r),o=(m-d)/(m-d+(y-_)),t.copy(r).addScaledVector(RP,o);const x=1/(S+A+v);return s=A*x,o=v*x,t.copy(n).addScaledVector(tg,s).addScaledVector(ng,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let nae=0;function ga(){Object.defineProperty(this,"id",{value:nae++}),this.uuid=Fc(),this.name="",this.type="Material",this.fog=!0,this.blending=Dy,this.side=QM,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=lz,this.blendDst=cz,this.blendEquation=pg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=P2,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Hre,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nw,this.stencilZFail=nw,this.stencilZPass=nw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}ga.prototype=Object.assign(Object.create(xp.prototype),{constructor:ga,isMaterial:!0,onBuild:function(){},onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(i){if(i!==void 0)for(const e in i){const t=i[e];if(t===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===oz;continue}const n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(t):n&&n.isVector3&&t&&t.isVector3?n.copy(t):this[e]=t}},toJSON:function(i){const e=i===void 0||typeof i=="string";e&&(i={textures:{},images:{}});const t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(t.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(i).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(i).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(i).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(i).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(i).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(i).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(i).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(i).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(i).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(i).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(i).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(i).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(i).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(i).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(i).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(i).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(i).uuid),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==Dy&&(t.blending=this.blending),this.side!==QM&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.colorWrite=this.colorWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(t.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(t.morphTargets=!0),this.morphNormals===!0&&(t.morphNormals=!0),this.skinning===!0&&(t.skinning=!0),this.flatShading===!0&&(t.flatShading=this.flatShading),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function n(r){const a=[];for(const s in r){const o=r[s];delete o.metadata,a.push(o)}return a}if(e){const r=n(i.textures),a=n(i.images);r.length>0&&(t.textures=r),a.length>0&&(t.images=a)}return t},clone:function(){return new this.constructor().copy(this)},copy:function(i){this.name=i.name,this.fog=i.fog,this.blending=i.blending,this.side=i.side,this.vertexColors=i.vertexColors,this.opacity=i.opacity,this.transparent=i.transparent,this.blendSrc=i.blendSrc,this.blendDst=i.blendDst,this.blendEquation=i.blendEquation,this.blendSrcAlpha=i.blendSrcAlpha,this.blendDstAlpha=i.blendDstAlpha,this.blendEquationAlpha=i.blendEquationAlpha,this.depthFunc=i.depthFunc,this.depthTest=i.depthTest,this.depthWrite=i.depthWrite,this.stencilWriteMask=i.stencilWriteMask,this.stencilFunc=i.stencilFunc,this.stencilRef=i.stencilRef,this.stencilFuncMask=i.stencilFuncMask,this.stencilFail=i.stencilFail,this.stencilZFail=i.stencilZFail,this.stencilZPass=i.stencilZPass,this.stencilWrite=i.stencilWrite;const e=i.clippingPlanes;let t=null;if(e!==null){const n=e.length;t=new Array(n);for(let r=0;r!==n;++r)t[r]=e[r].clone()}return this.clippingPlanes=t,this.clipIntersection=i.clipIntersection,this.clipShadows=i.clipShadows,this.shadowSide=i.shadowSide,this.colorWrite=i.colorWrite,this.precision=i.precision,this.polygonOffset=i.polygonOffset,this.polygonOffsetFactor=i.polygonOffsetFactor,this.polygonOffsetUnits=i.polygonOffsetUnits,this.dithering=i.dithering,this.alphaTest=i.alphaTest,this.alphaToCoverage=i.alphaToCoverage,this.premultipliedAlpha=i.premultipliedAlpha,this.visible=i.visible,this.toneMapped=i.toneMapped,this.userData=JSON.parse(JSON.stringify(i.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(ga.prototype,"needsUpdate",{set:function(i){i===!0&&this.version++}});const dz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rl={h:0,s:0,l:0},xb={h:0,s:0,l:0};function _w(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}function xw(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function bw(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}class _n{constructor(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Gre(e,1),t=oo(t,0,1),n=oo(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=_w(a,r,e+1/3),this.g=_w(a,r,e),this.b=_w(a,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const a=n[1],s=n[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const o=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,f=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,c,f)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=n[1],a=r.length;if(a===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(a===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=dz[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=xw(e.r),this.g=xw(e.g),this.b=xw(e.b),this}copyLinearToSRGB(e){return this.r=bw(e.r),this.g=bw(e.g),this.b=bw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,a=Math.max(t,n,r),s=Math.min(t,n,r);let o,c;const f=(s+a)/2;if(s===a)o=0,c=0;else{const d=a-s;switch(c=f<=.5?d/(a+s):d/(2-a-s),a){case t:o=(n-r)/d+(n<r?6:0);break;case n:o=(r-t)/d+2;break;case r:o=(t-n)/d+4;break}o/=6}return e.h=o,e.s=c,e.l=f,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,n){return this.getHSL(Rl),Rl.h+=e,Rl.s+=t,Rl.l+=n,this.setHSL(Rl.h,Rl.s,Rl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Rl),e.getHSL(xb);const n=rw(Rl.h,xb.h,t),r=rw(Rl.s,xb.s,t),a=rw(Rl.l,xb.l,t);return this.setHSL(n,r,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}_n.NAMES=dz;_n.prototype.isColor=!0;_n.prototype.r=1;_n.prototype.g=1;_n.prototype.b=1;class ER extends ga{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this}}ER.prototype.isMeshBasicMaterial=!0;const ki=new ve,bb=new It;class pa{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=Qy,this.updateRange={offset:0,count:-1},this.version=0,this.onUploadCallback=function(){}}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,a=e.length;r<a;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new _n),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,a=e.length;r<a;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new It),t[n++]=s.x,t[n++]=s.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,a=e.length;r<a;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new ve),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,a=e.length;r<a;r++){let s=e[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new Ni),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)bb.fromBufferAttribute(this,t),bb.applyMatrix3(e),this.setXY(t,bb.x,bb.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ki.fromBufferAttribute(this,t),ki.applyMatrix3(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ki.x=this.getX(t),ki.y=this.getY(t),ki.z=this.getZ(t),ki.applyMatrix4(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ki.x=this.getX(t),ki.y=this.getY(t),ki.z=this.getZ(t),ki.applyNormalMatrix(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ki.x=this.getX(t),ki.y=this.getY(t),ki.z=this.getZ(t),ki.transformDirection(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qy&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}pa.prototype.isBufferAttribute=!0;class pz extends pa{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class mz extends pa{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class iae extends pa{constructor(e,t,n){super(new Uint16Array(e),t,n)}}iae.prototype.isFloat16BufferAttribute=!0;class ma extends pa{constructor(e,t,n){super(new Float32Array(e),t,n)}}function gz(i){if(i.length===0)return-1/0;let e=i[0];for(let t=1,n=i.length;t<n;++t)i[t]>e&&(e=i[t]);return e}let rae=0;const Ic=new bn,Sw=new _i,ig=new ve,ao=new Jo,ey=new Jo,la=new ve;class Xi extends xp{constructor(){super(),Object.defineProperty(this,"id",{value:rae++}),this.uuid=Fc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gz(e)>65535?mz:pz)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new Da().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}rotateX(e){return Ic.makeRotationX(e),this.applyMatrix4(Ic),this}rotateY(e){return Ic.makeRotationY(e),this.applyMatrix4(Ic),this}rotateZ(e){return Ic.makeRotationZ(e),this.applyMatrix4(Ic),this}translate(e,t,n){return Ic.makeTranslation(e,t,n),this.applyMatrix4(Ic),this}scale(e,t,n){return Ic.makeScale(e,t,n),this.applyMatrix4(Ic),this}lookAt(e){return Sw.lookAt(e),Sw.updateMatrix(),this.applyMatrix4(Sw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ig).negate(),this.translate(ig.x,ig.y,ig.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new ma(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Jo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const a=t[n];ao.setFromBufferAttribute(a),this.morphTargetsRelative?(la.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(la),la.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(la)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new cv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ve,1/0);return}if(e){const n=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];ey.setFromBufferAttribute(o),this.morphTargetsRelative?(la.addVectors(ao.min,ey.min),ao.expandByPoint(la),la.addVectors(ao.max,ey.max),ao.expandByPoint(la)):(ao.expandByPoint(ey.min),ao.expandByPoint(ey.max))}ao.getCenter(n);let r=0;for(let a=0,s=e.count;a<s;a++)la.fromBufferAttribute(e,a),r=Math.max(r,n.distanceToSquared(la));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],c=this.morphTargetsRelative;for(let f=0,d=o.count;f<d;f++)la.fromBufferAttribute(o,f),c&&(ig.fromBufferAttribute(e,f),la.add(ig)),r=Math.max(r,n.distanceToSquared(la))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,a=t.normal.array,s=t.uv.array,o=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new pa(new Float32Array(4*o),4));const c=t.tangent.array,f=[],d=[];for(let R=0;R<o;R++)f[R]=new ve,d[R]=new ve;const m=new ve,v=new ve,y=new ve,_=new It,A=new It,S=new It,x=new ve,E=new ve;function D(R,F,G){m.fromArray(r,R*3),v.fromArray(r,F*3),y.fromArray(r,G*3),_.fromArray(s,R*2),A.fromArray(s,F*2),S.fromArray(s,G*2),v.sub(m),y.sub(m),A.sub(_),S.sub(_);const V=1/(A.x*S.y-S.x*A.y);isFinite(V)&&(x.copy(v).multiplyScalar(S.y).addScaledVector(y,-A.y).multiplyScalar(V),E.copy(y).multiplyScalar(A.x).addScaledVector(v,-S.x).multiplyScalar(V),f[R].add(x),f[F].add(x),f[G].add(x),d[R].add(E),d[F].add(E),d[G].add(E))}let B=this.groups;B.length===0&&(B=[{start:0,count:n.length}]);for(let R=0,F=B.length;R<F;++R){const G=B[R],V=G.start,$=G.count;for(let K=V,z=V+$;K<z;K+=3)D(n[K+0],n[K+1],n[K+2])}const U=new ve,w=new ve,O=new ve,I=new ve;function L(R){O.fromArray(a,R*3),I.copy(O);const F=f[R];U.copy(F),U.sub(O.multiplyScalar(O.dot(F))).normalize(),w.crossVectors(I,F);const V=w.dot(d[R])<0?-1:1;c[R*4]=U.x,c[R*4+1]=U.y,c[R*4+2]=U.z,c[R*4+3]=V}for(let R=0,F=B.length;R<F;++R){const G=B[R],V=G.start,$=G.count;for(let K=V,z=V+$;K<z;K+=3)L(n[K+0]),L(n[K+1]),L(n[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new pa(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const r=new ve,a=new ve,s=new ve,o=new ve,c=new ve,f=new ve,d=new ve,m=new ve;if(e)for(let v=0,y=e.count;v<y;v+=3){const _=e.getX(v+0),A=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,_),a.fromBufferAttribute(t,A),s.fromBufferAttribute(t,S),d.subVectors(s,a),m.subVectors(r,a),d.cross(m),o.fromBufferAttribute(n,_),c.fromBufferAttribute(n,A),f.fromBufferAttribute(n,S),o.add(d),c.add(d),f.add(d),n.setXYZ(_,o.x,o.y,o.z),n.setXYZ(A,c.x,c.y,c.z),n.setXYZ(S,f.x,f.y,f.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),s.fromBufferAttribute(t,v+2),d.subVectors(s,a),m.subVectors(r,a),d.cross(m),n.setXYZ(v+0,d.x,d.y,d.z),n.setXYZ(v+1,d.x,d.y,d.z),n.setXYZ(v+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(e.attributes[r]===void 0)continue;const s=n[r].array,o=e.attributes[r],c=o.array,f=o.itemSize*t,d=Math.min(c.length,s.length-f);for(let m=0,v=f;m<d;m++,v++)s[v]=c[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)la.fromBufferAttribute(e,t),la.normalize(),e.setXYZ(t,la.x,la.y,la.z)}toNonIndexed(){function e(o,c){const f=o.array,d=o.itemSize,m=o.normalized,v=new f.constructor(c.length*d);let y=0,_=0;for(let A=0,S=c.length;A<S;A++){y=c[A]*d;for(let x=0;x<d;x++)v[_++]=f[y++]}return new pa(v,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xi,n=this.index.array,r=this.attributes;for(const o in r){const c=r[o],f=e(c,n);t.setAttribute(o,f)}const a=this.morphAttributes;for(const o in a){const c=[],f=a[o];for(let d=0,m=f.length;d<m;d++){const v=f[d],y=e(v,n);c.push(y)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const f=s[o];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const f=n[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let m=0,v=f.length;m<v;m++){const y=f[m];d.push(y.toJSON(e.data))}d.length>0&&(r[c]=d,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new Xi().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(t))}const a=e.morphAttributes;for(const f in a){const d=[],m=a[f];for(let v=0,y=m.length;v<y;v++)d.push(m[v].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,d=s.length;f<d;f++){const m=s[f];this.addGroup(m.start,m.count,m.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Xi.prototype.isBufferGeometry=!0;const DP=new bn,rg=new uv,Mw=new cv,Jf=new ve,Zf=new ve,Qf=new ve,Ew=new ve,Aw=new ve,Tw=new ve,Sb=new ve,Mb=new ve,Eb=new ve,Ab=new It,Tb=new It,wb=new It,ww=new ve,Cb=new ve;class Wl extends _i{constructor(e=new Xi,t=new ER){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,a=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Mw.copy(n.boundingSphere),Mw.applyMatrix4(a),e.ray.intersectsSphere(Mw)===!1)||(DP.copy(a).invert(),rg.copy(e.ray).applyMatrix4(DP),n.boundingBox!==null&&rg.intersectsBox(n.boundingBox)===!1))return;let s;if(n.isBufferGeometry){const o=n.index,c=n.attributes.position,f=n.morphAttributes.position,d=n.morphTargetsRelative,m=n.attributes.uv,v=n.attributes.uv2,y=n.groups,_=n.drawRange;if(o!==null)if(Array.isArray(r))for(let A=0,S=y.length;A<S;A++){const x=y[A],E=r[x.materialIndex],D=Math.max(x.start,_.start),B=Math.min(x.start+x.count,_.start+_.count);for(let U=D,w=B;U<w;U+=3){const O=o.getX(U),I=o.getX(U+1),L=o.getX(U+2);s=Rb(this,E,e,rg,c,f,d,m,v,O,I,L),s&&(s.faceIndex=Math.floor(U/3),s.face.materialIndex=x.materialIndex,t.push(s))}}else{const A=Math.max(0,_.start),S=Math.min(o.count,_.start+_.count);for(let x=A,E=S;x<E;x+=3){const D=o.getX(x),B=o.getX(x+1),U=o.getX(x+2);s=Rb(this,r,e,rg,c,f,d,m,v,D,B,U),s&&(s.faceIndex=Math.floor(x/3),t.push(s))}}else if(c!==void 0)if(Array.isArray(r))for(let A=0,S=y.length;A<S;A++){const x=y[A],E=r[x.materialIndex],D=Math.max(x.start,_.start),B=Math.min(x.start+x.count,_.start+_.count);for(let U=D,w=B;U<w;U+=3){const O=U,I=U+1,L=U+2;s=Rb(this,E,e,rg,c,f,d,m,v,O,I,L),s&&(s.faceIndex=Math.floor(U/3),s.face.materialIndex=x.materialIndex,t.push(s))}}else{const A=Math.max(0,_.start),S=Math.min(c.count,_.start+_.count);for(let x=A,E=S;x<E;x+=3){const D=x,B=x+1,U=x+2;s=Rb(this,r,e,rg,c,f,d,m,v,D,B,U),s&&(s.faceIndex=Math.floor(x/3),t.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Wl.prototype.isMesh=!0;function aae(i,e,t,n,r,a,s,o){let c;if(e.side===ca?c=n.intersectTriangle(s,a,r,!0,o):c=n.intersectTriangle(r,a,s,e.side!==eE,o),c===null)return null;Cb.copy(o),Cb.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(Cb);return f<t.near||f>t.far?null:{distance:f,point:Cb.clone(),object:i}}function Rb(i,e,t,n,r,a,s,o,c,f,d,m){Jf.fromBufferAttribute(r,f),Zf.fromBufferAttribute(r,d),Qf.fromBufferAttribute(r,m);const v=i.morphTargetInfluences;if(e.morphTargets&&a&&v){Sb.set(0,0,0),Mb.set(0,0,0),Eb.set(0,0,0);for(let _=0,A=a.length;_<A;_++){const S=v[_],x=a[_];S!==0&&(Ew.fromBufferAttribute(x,f),Aw.fromBufferAttribute(x,d),Tw.fromBufferAttribute(x,m),s?(Sb.addScaledVector(Ew,S),Mb.addScaledVector(Aw,S),Eb.addScaledVector(Tw,S)):(Sb.addScaledVector(Ew.sub(Jf),S),Mb.addScaledVector(Aw.sub(Zf),S),Eb.addScaledVector(Tw.sub(Qf),S)))}Jf.add(Sb),Zf.add(Mb),Qf.add(Eb)}i.isSkinnedMesh&&e.skinning&&(i.boneTransform(f,Jf),i.boneTransform(d,Zf),i.boneTransform(m,Qf));const y=aae(i,e,t,n,Jf,Zf,Qf,ww);if(y){o&&(Ab.fromBufferAttribute(o,f),Tb.fromBufferAttribute(o,d),wb.fromBufferAttribute(o,m),y.uv=Jr.getUV(ww,Jf,Zf,Qf,Ab,Tb,wb,new It)),c&&(Ab.fromBufferAttribute(c,f),Tb.fromBufferAttribute(c,d),wb.fromBufferAttribute(c,m),y.uv2=Jr.getUV(ww,Jf,Zf,Qf,Ab,Tb,wb,new It));const _={a:f,b:d,c:m,normal:new ve,materialIndex:0};Jr.getNormal(Jf,Zf,Qf,_.normal),y.face=_}return y}class AR extends Xi{constructor(e=1,t=1,n=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],d=[],m=[];let v=0,y=0;_("z","y","x",-1,-1,n,t,e,s,a,0),_("z","y","x",1,-1,n,t,-e,s,a,1),_("x","z","y",1,1,e,n,t,r,s,2),_("x","z","y",1,-1,e,n,-t,r,s,3),_("x","y","z",1,-1,e,t,n,r,a,4),_("x","y","z",-1,-1,e,t,-n,r,a,5),this.setIndex(c),this.setAttribute("position",new ma(f,3)),this.setAttribute("normal",new ma(d,3)),this.setAttribute("uv",new ma(m,2));function _(A,S,x,E,D,B,U,w,O,I,L){const R=B/O,F=U/I,G=B/2,V=U/2,$=w/2,K=O+1,z=I+1;let ee=0,ne=0;const de=new ve;for(let Y=0;Y<z;Y++){const fe=Y*F-V;for(let Re=0;Re<K;Re++){const Le=Re*R-G;de[A]=Le*E,de[S]=fe*D,de[x]=$,f.push(de.x,de.y,de.z),de[A]=0,de[S]=0,de[x]=w>0?1:-1,d.push(de.x,de.y,de.z),m.push(Re/O),m.push(1-Y/I),ee+=1}}for(let Y=0;Y<I;Y++)for(let fe=0;fe<O;fe++){const Re=v+fe+K*Y,Le=v+fe+K*(Y+1),oe=v+(fe+1)+K*(Y+1),ke=v+(fe+1)+K*Y;c.push(Re,Le,ke),c.push(Le,oe,ke),ne+=6}o.addGroup(y,ne,L),y+=ne,v+=ee}}}function kg(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function ja(i){const e={};for(let t=0;t<i.length;t++){const n=kg(i[t]);for(const r in n)e[r]=n[r]}return e}const sae={clone:kg,merge:ja};var oae=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lae=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class dp extends ga{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=oae,this.fragmentShader=lae,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kg(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}dp.prototype.isShaderMaterial=!0;class TR extends _i{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new bn,this.projectionMatrix=new bn,this.projectionMatrixInverse=new bn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new ve),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}TR.prototype.isCamera=!0;class lo extends TR{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=U2*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(iw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return U2*2*Math.atan(Math.tan(iw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(iw*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*n/f,r*=s.width/c,n*=s.height/f}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}lo.prototype.isPerspectiveCamera=!0;const ag=90,sg=1;class wR extends _i{constructor(e,t,n){if(super(),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const r=new lo(ag,sg,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ve(1,0,0)),this.add(r);const a=new lo(ag,sg,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new ve(-1,0,0)),this.add(a);const s=new lo(ag,sg,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new ve(0,1,0)),this.add(s);const o=new lo(ag,sg,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new ve(0,-1,0)),this.add(o);const c=new lo(ag,sg,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ve(0,0,1)),this.add(c);const f=new lo(ag,sg,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new ve(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[r,a,s,o,c,f]=this.children,d=e.xr.enabled,m=e.getRenderTarget();e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=v,e.setRenderTarget(n,5),e.render(t,f),e.setRenderTarget(m),e.xr.enabled=d}}class nE extends Ia{constructor(e,t,n,r,a,s,o,c,f,d){e=e!==void 0?e:[],t=t!==void 0?t:vR,o=o!==void 0?o:ep,super(e,t,n,r,a,s,o,c,f,d),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}nE.prototype.isCubeTexture=!0;class vz extends tp{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new nE(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ko,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Ul,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new AR(5,5,5),a=new dp({name:"CubemapFromEquirect",uniforms:kg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ca,blending:Ry});a.uniforms.tEquirect.value=t;const s=new Wl(r,a),o=t.minFilter;return t.minFilter===bR&&(t.minFilter=ko),new wR(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(a)}}vz.prototype.isWebGLCubeRenderTarget=!0;class yz extends Ia{constructor(e,t,n,r,a,s,o,c,f,d,m,v){super(null,s,o,c,f,d,r,a,m,v),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=f!==void 0?f:_s,this.minFilter=d!==void 0?d:_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}yz.prototype.isDataTexture=!0;const og=new cv,Db=new ve;class iE{constructor(e=new Pc,t=new Pc,n=new Pc,r=new Pc,a=new Pc,s=new Pc){this.planes=[e,t,n,r,a,s]}set(e,t,n,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],a=n[1],s=n[2],o=n[3],c=n[4],f=n[5],d=n[6],m=n[7],v=n[8],y=n[9],_=n[10],A=n[11],S=n[12],x=n[13],E=n[14],D=n[15];return t[0].setComponents(o-r,m-c,A-v,D-S).normalize(),t[1].setComponents(o+r,m+c,A+v,D+S).normalize(),t[2].setComponents(o+a,m+f,A+y,D+x).normalize(),t[3].setComponents(o-a,m-f,A-y,D-x).normalize(),t[4].setComponents(o-s,m-d,A-_,D-E).normalize(),t[5].setComponents(o+s,m+d,A+_,D+E).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),og.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(og)}intersectsSprite(e){return og.center.set(0,0,0),og.radius=.7071067811865476,og.applyMatrix4(e.matrixWorld),this.intersectsSphere(og)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Db.x=r.normal.x>0?e.max.x:e.min.x,Db.y=r.normal.y>0?e.max.y:e.min.y,Db.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Db)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _z(){let i=null,e=!1,t=null,n=null;function r(a,s){t(a,s),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function cae(i,e){const t=e.isWebGL2,n=new WeakMap;function r(f,d){const m=f.array,v=f.usage,y=i.createBuffer();i.bindBuffer(d,y),i.bufferData(d,m,v),f.onUploadCallback();let _=5126;return m instanceof Float32Array?_=5126:m instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):m instanceof Uint16Array?f.isFloat16BufferAttribute?t?_=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):_=5123:m instanceof Int16Array?_=5122:m instanceof Uint32Array?_=5125:m instanceof Int32Array?_=5124:m instanceof Int8Array?_=5120:m instanceof Uint8Array&&(_=5121),{buffer:y,type:_,bytesPerElement:m.BYTES_PER_ELEMENT,version:f.version}}function a(f,d,m){const v=d.array,y=d.updateRange;i.bindBuffer(m,f),y.count===-1?i.bufferSubData(m,0,v):(t?i.bufferSubData(m,y.offset*v.BYTES_PER_ELEMENT,v,y.offset,y.count):i.bufferSubData(m,y.offset*v.BYTES_PER_ELEMENT,v.subarray(y.offset,y.offset+y.count)),y.count=-1)}function s(f){return f.isInterleavedBufferAttribute&&(f=f.data),n.get(f)}function o(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=n.get(f);d&&(i.deleteBuffer(d.buffer),n.delete(f))}function c(f,d){if(f.isGLBufferAttribute){const v=n.get(f);(!v||v.version<f.version)&&n.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const m=n.get(f);m===void 0?n.set(f,r(f,d)):m.version<f.version&&(a(m.buffer,f,d),m.version=f.version)}return{get:s,remove:o,update:c}}class uae extends Xi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const a=e/2,s=t/2,o=Math.floor(n),c=Math.floor(r),f=o+1,d=c+1,m=e/o,v=t/c,y=[],_=[],A=[],S=[];for(let x=0;x<d;x++){const E=x*v-s;for(let D=0;D<f;D++){const B=D*m-a;_.push(B,-E,0),A.push(0,0,1),S.push(D/o),S.push(1-x/c)}}for(let x=0;x<c;x++)for(let E=0;E<o;E++){const D=E+f*x,B=E+f*(x+1),U=E+1+f*(x+1),w=E+1+f*x;y.push(D,B,w),y.push(B,U,w)}this.setIndex(y),this.setAttribute("position",new ma(_,3)),this.setAttribute("normal",new ma(A,3)),this.setAttribute("uv",new ma(S,2))}}var fae=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,hae=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dae=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,pae=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,mae=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gae="vec3 transformed = vec3( position );",vae=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yae=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,_ae=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xae=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,bae=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Sae=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Mae=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Eae=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Aae=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Tae=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,wae=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Cae=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Rae=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Dae=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Bae=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Lae=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Iae=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Pae=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Nae="gl_FragColor = linearToOutputTexel( gl_FragColor );",Oae=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,Uae=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Fae=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zae=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Hae=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Gae=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Vae=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,kae=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,Wae=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Xae=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$ae=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,jae=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,qae=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Yae=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Kae=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,Jae=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,Zae=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Qae=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,ese=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,tse=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,nse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,ise=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,rse=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ase=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,sse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ose=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lse=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,use=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,fse=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,hse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,dse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,pse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mse=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,gse=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,vse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,yse=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,_se=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,xse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,bse=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Sse=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Mse=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Ese=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Ase=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Tse=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,wse=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Cse=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Rse=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Dse=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Bse=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Lse=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ise=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Pse=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Nse=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Ose=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Use=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Fse=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,zse=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Hse=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Gse=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vse=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kse=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Wse=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Xse=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,$se=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,jse=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,qse=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Yse=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Kse=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Jse=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Zse=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Qse=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,eoe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,toe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,noe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ioe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,roe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,aoe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,soe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ooe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,loe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,coe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uoe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,foe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hoe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,doe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,poe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,moe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,goe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,voe=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,yoe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_oe=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xoe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,boe=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Soe=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Moe=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Eoe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,Aoe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Toe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,woe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Coe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Roe=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Doe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Boe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Jn={alphamap_fragment:fae,alphamap_pars_fragment:hae,alphatest_fragment:dae,aomap_fragment:pae,aomap_pars_fragment:mae,begin_vertex:gae,beginnormal_vertex:vae,bsdfs:yae,bumpmap_pars_fragment:_ae,clipping_planes_fragment:xae,clipping_planes_pars_fragment:bae,clipping_planes_pars_vertex:Sae,clipping_planes_vertex:Mae,color_fragment:Eae,color_pars_fragment:Aae,color_pars_vertex:Tae,color_vertex:wae,common:Cae,cube_uv_reflection_fragment:Rae,defaultnormal_vertex:Dae,displacementmap_pars_vertex:Bae,displacementmap_vertex:Lae,emissivemap_fragment:Iae,emissivemap_pars_fragment:Pae,encodings_fragment:Nae,encodings_pars_fragment:Oae,envmap_fragment:Uae,envmap_common_pars_fragment:Fae,envmap_pars_fragment:zae,envmap_pars_vertex:Hae,envmap_physical_pars_fragment:Jae,envmap_vertex:Gae,fog_vertex:Vae,fog_pars_vertex:kae,fog_fragment:Wae,fog_pars_fragment:Xae,gradientmap_pars_fragment:$ae,lightmap_fragment:jae,lightmap_pars_fragment:qae,lights_lambert_vertex:Yae,lights_pars_begin:Kae,lights_toon_fragment:Zae,lights_toon_pars_fragment:Qae,lights_phong_fragment:ese,lights_phong_pars_fragment:tse,lights_physical_fragment:nse,lights_physical_pars_fragment:ise,lights_fragment_begin:rse,lights_fragment_maps:ase,lights_fragment_end:sse,logdepthbuf_fragment:ose,logdepthbuf_pars_fragment:lse,logdepthbuf_pars_vertex:cse,logdepthbuf_vertex:use,map_fragment:fse,map_pars_fragment:hse,map_particle_fragment:dse,map_particle_pars_fragment:pse,metalnessmap_fragment:mse,metalnessmap_pars_fragment:gse,morphnormal_vertex:vse,morphtarget_pars_vertex:yse,morphtarget_vertex:_se,normal_fragment_begin:xse,normal_fragment_maps:bse,normalmap_pars_fragment:Sse,clearcoat_normal_fragment_begin:Mse,clearcoat_normal_fragment_maps:Ese,clearcoat_pars_fragment:Ase,packing:Tse,premultiplied_alpha_fragment:wse,project_vertex:Cse,dithering_fragment:Rse,dithering_pars_fragment:Dse,roughnessmap_fragment:Bse,roughnessmap_pars_fragment:Lse,shadowmap_pars_fragment:Ise,shadowmap_pars_vertex:Pse,shadowmap_vertex:Nse,shadowmask_pars_fragment:Ose,skinbase_vertex:Use,skinning_pars_vertex:Fse,skinning_vertex:zse,skinnormal_vertex:Hse,specularmap_fragment:Gse,specularmap_pars_fragment:Vse,tonemapping_fragment:kse,tonemapping_pars_fragment:Wse,transmissionmap_fragment:Xse,transmissionmap_pars_fragment:$se,uv_pars_fragment:jse,uv_pars_vertex:qse,uv_vertex:Yse,uv2_pars_fragment:Kse,uv2_pars_vertex:Jse,uv2_vertex:Zse,worldpos_vertex:Qse,background_frag:eoe,background_vert:toe,cube_frag:noe,cube_vert:ioe,depth_frag:roe,depth_vert:aoe,distanceRGBA_frag:soe,distanceRGBA_vert:ooe,equirect_frag:loe,equirect_vert:coe,linedashed_frag:uoe,linedashed_vert:foe,meshbasic_frag:hoe,meshbasic_vert:doe,meshlambert_frag:poe,meshlambert_vert:moe,meshmatcap_frag:goe,meshmatcap_vert:voe,meshtoon_frag:yoe,meshtoon_vert:_oe,meshphong_frag:xoe,meshphong_vert:boe,meshphysical_frag:Soe,meshphysical_vert:Moe,normal_frag:Eoe,normal_vert:Aoe,points_frag:Toe,points_vert:woe,shadow_frag:Coe,shadow_vert:Roe,sprite_frag:Doe,sprite_vert:Boe},kt={common:{diffuse:{value:new _n(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Da},uv2Transform:{value:new Da},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _n(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _n(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Da}},sprite:{diffuse:{value:new _n(15658734)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Da}}},Nc={basic:{uniforms:ja([kt.common,kt.specularmap,kt.envmap,kt.aomap,kt.lightmap,kt.fog]),vertexShader:Jn.meshbasic_vert,fragmentShader:Jn.meshbasic_frag},lambert:{uniforms:ja([kt.common,kt.specularmap,kt.envmap,kt.aomap,kt.lightmap,kt.emissivemap,kt.fog,kt.lights,{emissive:{value:new _n(0)}}]),vertexShader:Jn.meshlambert_vert,fragmentShader:Jn.meshlambert_frag},phong:{uniforms:ja([kt.common,kt.specularmap,kt.envmap,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.fog,kt.lights,{emissive:{value:new _n(0)},specular:{value:new _n(1118481)},shininess:{value:30}}]),vertexShader:Jn.meshphong_vert,fragmentShader:Jn.meshphong_frag},standard:{uniforms:ja([kt.common,kt.envmap,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.roughnessmap,kt.metalnessmap,kt.fog,kt.lights,{emissive:{value:new _n(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Jn.meshphysical_vert,fragmentShader:Jn.meshphysical_frag},toon:{uniforms:ja([kt.common,kt.aomap,kt.lightmap,kt.emissivemap,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.gradientmap,kt.fog,kt.lights,{emissive:{value:new _n(0)}}]),vertexShader:Jn.meshtoon_vert,fragmentShader:Jn.meshtoon_frag},matcap:{uniforms:ja([kt.common,kt.bumpmap,kt.normalmap,kt.displacementmap,kt.fog,{matcap:{value:null}}]),vertexShader:Jn.meshmatcap_vert,fragmentShader:Jn.meshmatcap_frag},points:{uniforms:ja([kt.points,kt.fog]),vertexShader:Jn.points_vert,fragmentShader:Jn.points_frag},dashed:{uniforms:ja([kt.common,kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jn.linedashed_vert,fragmentShader:Jn.linedashed_frag},depth:{uniforms:ja([kt.common,kt.displacementmap]),vertexShader:Jn.depth_vert,fragmentShader:Jn.depth_frag},normal:{uniforms:ja([kt.common,kt.bumpmap,kt.normalmap,kt.displacementmap,{opacity:{value:1}}]),vertexShader:Jn.normal_vert,fragmentShader:Jn.normal_frag},sprite:{uniforms:ja([kt.sprite,kt.fog]),vertexShader:Jn.sprite_vert,fragmentShader:Jn.sprite_frag},background:{uniforms:{uvTransform:{value:new Da},t2D:{value:null}},vertexShader:Jn.background_vert,fragmentShader:Jn.background_frag},cube:{uniforms:ja([kt.envmap,{opacity:{value:1}}]),vertexShader:Jn.cube_vert,fragmentShader:Jn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jn.equirect_vert,fragmentShader:Jn.equirect_frag},distanceRGBA:{uniforms:ja([kt.common,kt.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Jn.distanceRGBA_vert,fragmentShader:Jn.distanceRGBA_frag},shadow:{uniforms:ja([kt.lights,kt.fog,{color:{value:new _n(0)},opacity:{value:1}}]),vertexShader:Jn.shadow_vert,fragmentShader:Jn.shadow_frag}};Nc.physical={uniforms:ja([Nc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new It(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new _n(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Jn.meshphysical_vert,fragmentShader:Jn.meshphysical_frag};function Loe(i,e,t,n,r){const a=new _n(0);let s=0,o,c,f=null,d=0,m=null;function v(_,A,S,x){let E=A.isScene===!0?A.background:null;E&&E.isTexture&&(E=e.get(E));const D=i.xr,B=D.getSession&&D.getSession();B&&B.environmentBlendMode==="additive"&&(E=null),E===null?y(a,s):E&&E.isColor&&(y(E,1),x=!0),(i.autoClear||x)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),E&&(E.isCubeTexture||E.mapping===_R)?(c===void 0&&(c=new Wl(new AR(1,1,1),new dp({name:"BackgroundCubeMaterial",uniforms:kg(Nc.cube.uniforms),vertexShader:Nc.cube.vertexShader,fragmentShader:Nc.cube.fragmentShader,side:ca,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(U,w,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=E,c.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E._needsFlipEnvMap?-1:1,(f!==E||d!==E.version||m!==i.toneMapping)&&(c.material.needsUpdate=!0,f=E,d=E.version,m=i.toneMapping),_.unshift(c,c.geometry,c.material,0,0,null)):E&&E.isTexture&&(o===void 0&&(o=new Wl(new uae(2,2),new dp({name:"BackgroundMaterial",uniforms:kg(Nc.background.uniforms),vertexShader:Nc.background.vertexShader,fragmentShader:Nc.background.fragmentShader,side:QM,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=E,E.matrixAutoUpdate===!0&&E.updateMatrix(),o.material.uniforms.uvTransform.value.copy(E.matrix),(f!==E||d!==E.version||m!==i.toneMapping)&&(o.material.needsUpdate=!0,f=E,d=E.version,m=i.toneMapping),_.unshift(o,o.geometry,o.material,0,0,null))}function y(_,A){t.buffers.color.setClear(_.r,_.g,_.b,A,r)}return{getClearColor:function(){return a},setClearColor:function(_,A=1){a.set(_),s=A,y(a,s)},getClearAlpha:function(){return s},setClearAlpha:function(_){s=_,y(a,s)},render:v}}function Ioe(i,e,t,n){const r=i.getParameter(34921),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||a!==null,o={},c=A(null);let f=c;function d(V,$,K,z,ee){let ne=!1;if(s){const de=_(z,K,$);f!==de&&(f=de,v(f.object)),ne=S(z,ee),ne&&x(z,ee)}else{const de=$.wireframe===!0;(f.geometry!==z.id||f.program!==K.id||f.wireframe!==de)&&(f.geometry=z.id,f.program=K.id,f.wireframe=de,ne=!0)}V.isInstancedMesh===!0&&(ne=!0),ee!==null&&t.update(ee,34963),ne&&(O(V,$,K,z),ee!==null&&i.bindBuffer(34963,t.get(ee).buffer))}function m(){return n.isWebGL2?i.createVertexArray():a.createVertexArrayOES()}function v(V){return n.isWebGL2?i.bindVertexArray(V):a.bindVertexArrayOES(V)}function y(V){return n.isWebGL2?i.deleteVertexArray(V):a.deleteVertexArrayOES(V)}function _(V,$,K){const z=K.wireframe===!0;let ee=o[V.id];ee===void 0&&(ee={},o[V.id]=ee);let ne=ee[$.id];ne===void 0&&(ne={},ee[$.id]=ne);let de=ne[z];return de===void 0&&(de=A(m()),ne[z]=de),de}function A(V){const $=[],K=[],z=[];for(let ee=0;ee<r;ee++)$[ee]=0,K[ee]=0,z[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:K,attributeDivisors:z,object:V,attributes:{},index:null}}function S(V,$){const K=f.attributes,z=V.attributes;let ee=0;for(const ne in z){const de=K[ne],Y=z[ne];if(de===void 0||de.attribute!==Y||de.data!==Y.data)return!0;ee++}return f.attributesNum!==ee||f.index!==$}function x(V,$){const K={},z=V.attributes;let ee=0;for(const ne in z){const de=z[ne],Y={};Y.attribute=de,de.data&&(Y.data=de.data),K[ne]=Y,ee++}f.attributes=K,f.attributesNum=ee,f.index=$}function E(){const V=f.newAttributes;for(let $=0,K=V.length;$<K;$++)V[$]=0}function D(V){B(V,0)}function B(V,$){const K=f.newAttributes,z=f.enabledAttributes,ee=f.attributeDivisors;K[V]=1,z[V]===0&&(i.enableVertexAttribArray(V),z[V]=1),ee[V]!==$&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,$),ee[V]=$)}function U(){const V=f.newAttributes,$=f.enabledAttributes;for(let K=0,z=$.length;K<z;K++)$[K]!==V[K]&&(i.disableVertexAttribArray(K),$[K]=0)}function w(V,$,K,z,ee,ne){n.isWebGL2===!0&&(K===5124||K===5125)?i.vertexAttribIPointer(V,$,K,ee,ne):i.vertexAttribPointer(V,$,K,z,ee,ne)}function O(V,$,K,z){if(n.isWebGL2===!1&&(V.isInstancedMesh||z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const ee=z.attributes,ne=K.getAttributes(),de=$.defaultAttributeValues;for(const Y in ne){const fe=ne[Y];if(fe>=0){const Re=ee[Y];if(Re!==void 0){const Le=Re.normalized,oe=Re.itemSize,ke=t.get(Re);if(ke===void 0)continue;const Ge=ke.buffer,Ze=ke.type,Ae=ke.bytesPerElement;if(Re.isInterleavedBufferAttribute){const Q=Re.data,le=Q.stride,me=Re.offset;Q&&Q.isInstancedInterleavedBuffer?(B(fe,Q.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=Q.meshPerAttribute*Q.count)):D(fe),i.bindBuffer(34962,Ge),w(fe,oe,Ze,Le,le*Ae,me*Ae)}else Re.isInstancedBufferAttribute?(B(fe,Re.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=Re.meshPerAttribute*Re.count)):D(fe),i.bindBuffer(34962,Ge),w(fe,oe,Ze,Le,0,0)}else if(Y==="instanceMatrix"){const Le=t.get(V.instanceMatrix);if(Le===void 0)continue;const oe=Le.buffer,ke=Le.type;B(fe+0,1),B(fe+1,1),B(fe+2,1),B(fe+3,1),i.bindBuffer(34962,oe),i.vertexAttribPointer(fe+0,4,ke,!1,64,0),i.vertexAttribPointer(fe+1,4,ke,!1,64,16),i.vertexAttribPointer(fe+2,4,ke,!1,64,32),i.vertexAttribPointer(fe+3,4,ke,!1,64,48)}else if(Y==="instanceColor"){const Le=t.get(V.instanceColor);if(Le===void 0)continue;const oe=Le.buffer,ke=Le.type;B(fe,1),i.bindBuffer(34962,oe),i.vertexAttribPointer(fe,3,ke,!1,12,0)}else if(de!==void 0){const Le=de[Y];if(Le!==void 0)switch(Le.length){case 2:i.vertexAttrib2fv(fe,Le);break;case 3:i.vertexAttrib3fv(fe,Le);break;case 4:i.vertexAttrib4fv(fe,Le);break;default:i.vertexAttrib1fv(fe,Le)}}}}U()}function I(){F();for(const V in o){const $=o[V];for(const K in $){const z=$[K];for(const ee in z)y(z[ee].object),delete z[ee];delete $[K]}delete o[V]}}function L(V){if(o[V.id]===void 0)return;const $=o[V.id];for(const K in $){const z=$[K];for(const ee in z)y(z[ee].object),delete z[ee];delete $[K]}delete o[V.id]}function R(V){for(const $ in o){const K=o[$];if(K[V.id]===void 0)continue;const z=K[V.id];for(const ee in z)y(z[ee].object),delete z[ee];delete K[V.id]}}function F(){G(),f!==c&&(f=c,v(f.object))}function G(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:d,reset:F,resetDefaultState:G,dispose:I,releaseStatesOfGeometry:L,releaseStatesOfProgram:R,initAttributes:E,enableAttribute:D,disableUnusedAttributes:U}}function Poe(i,e,t,n){const r=n.isWebGL2;let a;function s(f){a=f}function o(f,d){i.drawArrays(a,f,d),t.update(d,a,1)}function c(f,d,m){if(m===0)return;let v,y;if(r)v=i,y="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](a,f,d,m),t.update(d,a,m)}this.setMode=s,this.render=o,this.renderInstances=c}function Noe(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const w=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function a(w){if(w==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return w==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const c=a(o);c!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",c,"instead."),o=c);const f=t.logarithmicDepthBuffer===!0,d=i.getParameter(34930),m=i.getParameter(35660),v=i.getParameter(3379),y=i.getParameter(34076),_=i.getParameter(34921),A=i.getParameter(36347),S=i.getParameter(36348),x=i.getParameter(36349),E=m>0,D=s||e.has("OES_texture_float"),B=E&&D,U=s?i.getParameter(36183):0;return{isWebGL2:s,getMaxAnisotropy:r,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:A,maxVaryings:S,maxFragmentUniforms:x,vertexTextures:E,floatFragmentTextures:D,floatVertexTextures:B,maxSamples:U}}function Ooe(i){const e=this;let t=null,n=0,r=!1,a=!1;const s=new Pc,o=new Da,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v,y){const _=m.length!==0||v||n!==0||r;return r=v,t=d(m,y,0),n=m.length,_},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1,f()},this.setState=function(m,v,y){const _=m.clippingPlanes,A=m.clipIntersection,S=m.clipShadows,x=i.get(m);if(!r||_===null||_.length===0||a&&!S)a?d(null):f();else{const E=a?0:n,D=E*4;let B=x.clippingState||null;c.value=B,B=d(_,v,D,y);for(let U=0;U!==D;++U)B[U]=t[U];x.clippingState=B,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=E}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(m,v,y,_){const A=m!==null?m.length:0;let S=null;if(A!==0){if(S=c.value,_!==!0||S===null){const x=y+A*4,E=v.matrixWorldInverse;o.getNormalMatrix(E),(S===null||S.length<x)&&(S=new Float32Array(x));for(let D=0,B=y;D!==A;++D,B+=4)s.copy(m[D]).applyMatrix4(E,o),s.normal.toArray(S,B),S[B+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,S}}function Uoe(i){let e=new WeakMap;function t(s,o){return o===rP?s.mapping=vR:o===aP&&(s.mapping=yR),s}function n(s){if(s&&s.isTexture){const o=s.mapping;if(o===rP||o===aP)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=i.getRenderTarget(),d=new vz(c.height/2);return d.fromEquirectangularTexture(i,s),e.set(s,d),i.setRenderTarget(f),s.addEventListener("dispose",r),t(d.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}function Foe(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function zoe(i,e,t,n){const r={},a=new WeakMap;function s(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const _ in v.attributes)e.remove(v.attributes[_]);v.removeEventListener("dispose",s),delete r[v.id];const y=a.get(v);y&&(e.remove(y),a.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function o(m,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,t.memory.geometries++),v}function c(m){const v=m.attributes;for(const _ in v)e.update(v[_],34962);const y=m.morphAttributes;for(const _ in y){const A=y[_];for(let S=0,x=A.length;S<x;S++)e.update(A[S],34962)}}function f(m){const v=[],y=m.index,_=m.attributes.position;let A=0;if(y!==null){const E=y.array;A=y.version;for(let D=0,B=E.length;D<B;D+=3){const U=E[D+0],w=E[D+1],O=E[D+2];v.push(U,w,w,O,O,U)}}else{const E=_.array;A=_.version;for(let D=0,B=E.length/3-1;D<B;D+=3){const U=D+0,w=D+1,O=D+2;v.push(U,w,w,O,O,U)}}const S=new(gz(v)>65535?mz:pz)(v,1);S.version=A;const x=a.get(m);x&&e.remove(x),a.set(m,S)}function d(m){const v=a.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&f(m)}else f(m);return a.get(m)}return{get:o,update:c,getWireframeAttribute:d}}function Hoe(i,e,t,n){const r=n.isWebGL2;let a;function s(v){a=v}let o,c;function f(v){o=v.type,c=v.bytesPerElement}function d(v,y){i.drawElements(a,y,o,v*c),t.update(y,a,1)}function m(v,y,_){if(_===0)return;let A,S;if(r)A=i,S="drawElementsInstanced";else if(A=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[S](a,y,o,v*c,_),t.update(y,a,_)}this.setMode=s,this.setIndex=f,this.render=d,this.renderInstances=m}function Goe(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,s,o){switch(t.calls++,s){case 4:t.triangles+=o*(a/3);break;case 1:t.lines+=o*(a/2);break;case 3:t.lines+=o*(a-1);break;case 2:t.lines+=o*a;break;case 0:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function Voe(i,e){return i[0]-e[0]}function koe(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Woe(i){const e={},t=new Float32Array(8),n=[];for(let a=0;a<8;a++)n[a]=[a,0];function r(a,s,o,c){const f=a.morphTargetInfluences,d=f===void 0?0:f.length;let m=e[s.id];if(m===void 0){m=[];for(let S=0;S<d;S++)m[S]=[S,0];e[s.id]=m}for(let S=0;S<d;S++){const x=m[S];x[0]=S,x[1]=f[S]}m.sort(koe);for(let S=0;S<8;S++)S<d&&m[S][1]?(n[S][0]=m[S][0],n[S][1]=m[S][1]):(n[S][0]=Number.MAX_SAFE_INTEGER,n[S][1]=0);n.sort(Voe);const v=o.morphTargets&&s.morphAttributes.position,y=o.morphNormals&&s.morphAttributes.normal;let _=0;for(let S=0;S<8;S++){const x=n[S],E=x[0],D=x[1];E!==Number.MAX_SAFE_INTEGER&&D?(v&&s.getAttribute("morphTarget"+S)!==v[E]&&s.setAttribute("morphTarget"+S,v[E]),y&&s.getAttribute("morphNormal"+S)!==y[E]&&s.setAttribute("morphNormal"+S,y[E]),t[S]=D,_+=D):(v&&s.hasAttribute("morphTarget"+S)===!0&&s.deleteAttribute("morphTarget"+S),y&&s.hasAttribute("morphNormal"+S)===!0&&s.deleteAttribute("morphNormal"+S),t[S]=0)}const A=s.morphTargetsRelative?1:1-_;c.getUniforms().setValue(i,"morphTargetBaseInfluence",A),c.getUniforms().setValue(i,"morphTargetInfluences",t)}return{update:r}}function Xoe(i,e,t,n){let r=new WeakMap;function a(c){const f=n.render.frame,d=c.geometry,m=e.get(c,d);return r.get(m)!==f&&(e.update(m),r.set(m,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),m}function s(){r=new WeakMap}function o(c){const f=c.target;f.removeEventListener("dispose",o),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}class xz extends Ia{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=_s,this.minFilter=_s,this.wrapR=Pl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}xz.prototype.isDataTexture2DArray=!0;class bz extends Ia{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=_s,this.minFilter=_s,this.wrapR=Pl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}bz.prototype.isDataTexture3D=!0;const Sz=new Ia,$oe=new xz,joe=new bz,Mz=new nE,BP=[],LP=[],IP=new Float32Array(16),PP=new Float32Array(9),NP=new Float32Array(4);function hv(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let a=BP[r];if(a===void 0&&(a=new Float32Array(r),BP[r]=a),e!==0){n.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,i[s].toArray(a,o)}return a}function Ms(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ya(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Ez(i,e){let t=LP[e];t===void 0&&(t=new Int32Array(e),LP[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function qoe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Yoe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ms(t,e))return;i.uniform2fv(this.addr,e),Ya(t,e)}}function Koe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ms(t,e))return;i.uniform3fv(this.addr,e),Ya(t,e)}}function Joe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ms(t,e))return;i.uniform4fv(this.addr,e),Ya(t,e)}}function Zoe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ms(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ya(t,e)}else{if(Ms(t,n))return;NP.set(n),i.uniformMatrix2fv(this.addr,!1,NP),Ya(t,n)}}function Qoe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ms(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ya(t,e)}else{if(Ms(t,n))return;PP.set(n),i.uniformMatrix3fv(this.addr,!1,PP),Ya(t,n)}}function ele(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ms(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ya(t,e)}else{if(Ms(t,n))return;IP.set(n),i.uniformMatrix4fv(this.addr,!1,IP),Ya(t,n)}}function tle(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function nle(i,e){const t=this.cache;Ms(t,e)||(i.uniform2iv(this.addr,e),Ya(t,e))}function ile(i,e){const t=this.cache;Ms(t,e)||(i.uniform3iv(this.addr,e),Ya(t,e))}function rle(i,e){const t=this.cache;Ms(t,e)||(i.uniform4iv(this.addr,e),Ya(t,e))}function ale(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function sle(i,e){const t=this.cache;Ms(t,e)||(i.uniform2uiv(this.addr,e),Ya(t,e))}function ole(i,e){const t=this.cache;Ms(t,e)||(i.uniform3uiv(this.addr,e),Ya(t,e))}function lle(i,e){const t=this.cache;Ms(t,e)||(i.uniform4uiv(this.addr,e),Ya(t,e))}function cle(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTexture2D(e||Sz,r)}function ule(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||joe,r)}function fle(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.safeSetTextureCube(e||Mz,r)}function hle(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||$oe,r)}function dle(i){switch(i){case 5126:return qoe;case 35664:return Yoe;case 35665:return Koe;case 35666:return Joe;case 35674:return Zoe;case 35675:return Qoe;case 35676:return ele;case 5124:case 35670:return tle;case 35667:case 35671:return nle;case 35668:case 35672:return ile;case 35669:case 35673:return rle;case 5125:return ale;case 36294:return sle;case 36295:return ole;case 36296:return lle;case 35678:case 36198:case 36298:case 36306:case 35682:return cle;case 35679:case 36299:case 36307:return ule;case 35680:case 36300:case 36308:case 36293:return fle;case 36289:case 36303:case 36311:case 36292:return hle}}function ple(i,e){i.uniform1fv(this.addr,e)}function mle(i,e){const t=hv(e,this.size,2);i.uniform2fv(this.addr,t)}function gle(i,e){const t=hv(e,this.size,3);i.uniform3fv(this.addr,t)}function vle(i,e){const t=hv(e,this.size,4);i.uniform4fv(this.addr,t)}function yle(i,e){const t=hv(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function _le(i,e){const t=hv(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function xle(i,e){const t=hv(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function ble(i,e){i.uniform1iv(this.addr,e)}function Sle(i,e){i.uniform2iv(this.addr,e)}function Mle(i,e){i.uniform3iv(this.addr,e)}function Ele(i,e){i.uniform4iv(this.addr,e)}function Ale(i,e){i.uniform1uiv(this.addr,e)}function Tle(i,e){i.uniform2uiv(this.addr,e)}function wle(i,e){i.uniform3uiv(this.addr,e)}function Cle(i,e){i.uniform4uiv(this.addr,e)}function Rle(i,e,t){const n=e.length,r=Ez(t,n);i.uniform1iv(this.addr,r);for(let a=0;a!==n;++a)t.safeSetTexture2D(e[a]||Sz,r[a])}function Dle(i,e,t){const n=e.length,r=Ez(t,n);i.uniform1iv(this.addr,r);for(let a=0;a!==n;++a)t.safeSetTextureCube(e[a]||Mz,r[a])}function Ble(i){switch(i){case 5126:return ple;case 35664:return mle;case 35665:return gle;case 35666:return vle;case 35674:return yle;case 35675:return _le;case 35676:return xle;case 5124:case 35670:return ble;case 35667:case 35671:return Sle;case 35668:case 35672:return Mle;case 35669:case 35673:return Ele;case 5125:return Ale;case 36294:return Tle;case 36295:return wle;case 36296:return Cle;case 35678:case 36198:case 36298:case 36306:case 35682:return Rle;case 35680:case 36300:case 36308:case 36293:return Dle}}function Lle(i,e,t){this.id=i,this.addr=t,this.cache=[],this.setValue=dle(e.type)}function Az(i,e,t){this.id=i,this.addr=t,this.cache=[],this.size=e.size,this.setValue=Ble(e.type)}Az.prototype.updateCache=function(i){const e=this.cache;i instanceof Float32Array&&e.length!==i.length&&(this.cache=new Float32Array(i.length)),Ya(e,i)};function Tz(i){this.id=i,this.seq=[],this.map={}}Tz.prototype.setValue=function(i,e,t){const n=this.seq;for(let r=0,a=n.length;r!==a;++r){const s=n[r];s.setValue(i,e[s.id],t)}};const Cw=/(\w+)(\])?(\[|\.)?/g;function OP(i,e){i.seq.push(e),i.map[e.id]=e}function Ile(i,e,t){const n=i.name,r=n.length;for(Cw.lastIndex=0;;){const a=Cw.exec(n),s=Cw.lastIndex;let o=a[1];const c=a[2]==="]",f=a[3];if(c&&(o=o|0),f===void 0||f==="["&&s+2===r){OP(t,f===void 0?new Lle(o,i,e):new Az(o,i,e));break}else{let m=t.map[o];m===void 0&&(m=new Tz(o),OP(t,m)),t=m}}}function uh(i,e){this.seq=[],this.map={};const t=i.getProgramParameter(e,35718);for(let n=0;n<t;++n){const r=i.getActiveUniform(e,n),a=i.getUniformLocation(e,r.name);Ile(r,a,this)}}uh.prototype.setValue=function(i,e,t,n){const r=this.map[e];r!==void 0&&r.setValue(i,t,n)};uh.prototype.setOptional=function(i,e,t){const n=e[t];n!==void 0&&this.setValue(i,t,n)};uh.upload=function(i,e,t,n){for(let r=0,a=e.length;r!==a;++r){const s=e[r],o=t[s.id];o.needsUpdate!==!1&&s.setValue(i,o.value,n)}};uh.seqWithValue=function(i,e){const t=[];for(let n=0,r=i.length;n!==r;++n){const a=i[n];a.id in e&&t.push(a)}return t};function UP(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Ple=0;function Nle(i){const e=i.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function wz(i){switch(i){case R_:return["Linear","( value )"];case hz:return["sRGB","( value )"];case Lre:return["RGBE","( value )"];case Pre:return["RGBM","( value, 7.0 )"];case Nre:return["RGBM","( value, 16.0 )"];case Ore:return["RGBD","( value, 256.0 )"];case Bre:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Ire:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function FP(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const a=i.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+`
`+r+Nle(a)}function ty(i,e){const t=wz(e);return"vec4 "+i+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function Ole(i,e){const t=wz(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Ule(i,e){let t;switch(e){case Die:t="Linear";break;case Bie:t="Reinhard";break;case Lie:t="OptimizedCineon";break;case Iie:t="ACESFilmic";break;case Pie:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Fle(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hy).join(`
`)}function zle(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Hle(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r).name;t[s]=i.getAttribLocation(e,s)}return t}function hy(i){return i!==""}function zP(i,e){return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function HP(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Gle=/^[ \t]*#include +<([\w\d./]+)>/gm;function F2(i){return i.replace(Gle,Vle)}function Vle(i,e){const t=Jn[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return F2(t)}const kle=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Wle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GP(i){return i.replace(Wle,Cz).replace(kle,Xle)}function Xle(i,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Cz(i,e,t,n)}function Cz(i,e,t,n){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function VP(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $le(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===sz?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===lie?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===fy&&(e="SHADOWMAP_TYPE_VSM"),e}function jle(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case vR:case yR:e="ENVMAP_TYPE_CUBE";break;case _R:case xR:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qle(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case yR:case xR:e="ENVMAP_MODE_REFRACTION";break}return e}function Yle(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case tE:e="ENVMAP_BLENDING_MULTIPLY";break;case Cie:e="ENVMAP_BLENDING_MIX";break;case Rie:e="ENVMAP_BLENDING_ADD";break}return e}function Kle(i,e,t,n){const r=i.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const c=$le(t),f=jle(t),d=qle(t),m=Yle(t),v=i.gammaFactor>0?i.gammaFactor:1,y=t.isWebGL2?"":Fle(t),_=zle(a),A=r.createProgram();let S,x,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=[_].filter(hy).join(`
`),S.length>0&&(S+=`
`),x=[y,_].filter(hy).join(`
`),x.length>0&&(x+=`
`)):(S=[VP(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hy).join(`
`),x=[y,VP(t),"#define SHADER_NAME "+t.shaderName,_,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==By?"#define TONE_MAPPING":"",t.toneMapping!==By?Jn.tonemapping_pars_fragment:"",t.toneMapping!==By?Ule("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",Jn.encodings_pars_fragment,t.map?ty("mapTexelToLinear",t.mapEncoding):"",t.matcap?ty("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?ty("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?ty("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?ty("lightMapTexelToLinear",t.lightMapEncoding):"",Ole("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(hy).join(`
`)),s=F2(s),s=zP(s,t),s=HP(s,t),o=F2(o),o=zP(o,t),o=HP(o,t),s=GP(s),o=GP(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,S=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,x=["#define varying in",t.glslVersion===yP?"":"out highp vec4 pc_fragColor;",t.glslVersion===yP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const D=E+S+s,B=E+x+o,U=UP(r,35633,D),w=UP(r,35632,B);if(r.attachShader(A,U),r.attachShader(A,w),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A),i.debug.checkShaderErrors){const L=r.getProgramInfoLog(A).trim(),R=r.getShaderInfoLog(U).trim(),F=r.getShaderInfoLog(w).trim();let G=!0,V=!0;if(r.getProgramParameter(A,35714)===!1){G=!1;const $=FP(r,U,"vertex"),K=FP(r,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(A,35715),"gl.getProgramInfoLog",L,$,K)}else L!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):(R===""||F==="")&&(V=!1);V&&(this.diagnostics={runnable:G,programLog:L,vertexShader:{log:R,prefix:S},fragmentShader:{log:F,prefix:x}})}r.deleteShader(U),r.deleteShader(w);let O;this.getUniforms=function(){return O===void 0&&(O=new uh(r,A)),O};let I;return this.getAttributes=function(){return I===void 0&&(I=Hle(r,A)),I},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.name=t.shaderName,this.id=Ple++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=U,this.fragmentShader=w,this}function Jle(i,e,t,n,r,a){const s=[],o=n.isWebGL2,c=n.logarithmicDepthBuffer,f=n.floatVertexTextures,d=n.maxVertexUniforms,m=n.vertexTextures;let v=n.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},_=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function A(w){const I=w.skeleton.bones;if(f)return 1024;{const R=Math.floor((d-20)/4),F=Math.min(R,I.length);return F<I.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+I.length+" bones. This GPU supports "+F+"."),0):F}}function S(w){let O;return w&&w.isTexture?O=w.encoding:w&&w.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),O=w.texture.encoding):O=R_,O}function x(w,O,I,L,R){const F=L.fog,G=w.isMeshStandardMaterial?L.environment:null,V=e.get(w.envMap||G),$=y[w.type],K=R.isSkinnedMesh?A(R):0;w.precision!==null&&(v=n.getMaxPrecision(w.precision),v!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",v,"instead."));let z,ee;if($){const Y=Nc[$];z=Y.vertexShader,ee=Y.fragmentShader}else z=w.vertexShader,ee=w.fragmentShader;const ne=i.getRenderTarget();return{isWebGL2:o,shaderID:$,shaderName:w.type,vertexShader:z,fragmentShader:ee,defines:w.defines,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:v,instancing:R.isInstancedMesh===!0,instancingColor:R.isInstancedMesh===!0&&R.instanceColor!==null,supportsVertexTextures:m,outputEncoding:ne!==null?S(ne.texture):i.outputEncoding,map:!!w.map,mapEncoding:S(w.map),matcap:!!w.matcap,matcapEncoding:S(w.matcap),envMap:!!V,envMapMode:V&&V.mapping,envMapEncoding:S(V),envMapCubeUV:!!V&&(V.mapping===_R||V.mapping===xR),lightMap:!!w.lightMap,lightMapEncoding:S(w.lightMap),aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,emissiveMapEncoding:S(w.emissiveMap),bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:w.normalMapType===zre,tangentSpaceNormalMap:w.normalMapType===ov,clearcoatMap:!!w.clearcoatMap,clearcoatRoughnessMap:!!w.clearcoatRoughnessMap,clearcoatNormalMap:!!w.clearcoatNormalMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,alphaMap:!!w.alphaMap,gradientMap:!!w.gradientMap,sheen:!!w.sheen,transmissionMap:!!w.transmissionMap,combine:w.combine,vertexTangents:w.normalMap&&w.vertexTangents,vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&R.geometry&&R.geometry.attributes.color&&R.geometry.attributes.color.itemSize===4,vertexUvs:!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatMap||!!w.clearcoatRoughnessMap||!!w.clearcoatNormalMap||!!w.displacementMap||!!w.transmissionMap,uvsVertexOnly:!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatNormalMap||w.transmissionMap)&&!!w.displacementMap,fog:!!F,useFog:w.fog,fogExp2:F&&F.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:c,skinning:w.skinning&&K>0,maxBones:K,useVertexTexture:f,morphTargets:w.morphTargets,morphNormals:w.morphNormals,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:w.dithering,shadowMapEnabled:i.shadowMap.enabled&&I.length>0,shadowMapType:i.shadowMap.type,toneMapping:w.toneMapped?i.toneMapping:By,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,alphaTest:w.alphaTest,doubleSided:w.side===eE,flipSided:w.side===ca,depthPacking:w.depthPacking!==void 0?w.depthPacking:!1,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||t.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}}function E(w){const O=[];if(w.shaderID?O.push(w.shaderID):(O.push(w.fragmentShader),O.push(w.vertexShader)),w.defines!==void 0)for(const I in w.defines)O.push(I),O.push(w.defines[I]);if(w.isRawShaderMaterial===!1){for(let I=0;I<_.length;I++)O.push(w[_[I]]);O.push(i.outputEncoding),O.push(i.gammaFactor)}return O.push(w.customProgramCacheKey),O.join()}function D(w){const O=y[w.type];let I;if(O){const L=Nc[O];I=sae.clone(L.uniforms)}else I=w.uniforms;return I}function B(w,O){let I;for(let L=0,R=s.length;L<R;L++){const F=s[L];if(F.cacheKey===O){I=F,++I.usedTimes;break}}return I===void 0&&(I=new Kle(i,O,w,r),s.push(I)),I}function U(w){if(--w.usedTimes===0){const O=s.indexOf(w);s[O]=s[s.length-1],s.pop(),w.destroy()}}return{getParameters:x,getProgramCacheKey:E,getUniforms:D,acquireProgram:B,releaseProgram:U,programs:s}}function Zle(){let i=new WeakMap;function e(a){let s=i.get(a);return s===void 0&&(s={},i.set(a,s)),s}function t(a){i.delete(a)}function n(a,s,o){i.get(a)[s]=o}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function Qle(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.program!==e.program?i.program.id-e.program.id:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function ece(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function kP(i){const e=[];let t=0;const n=[],r=[],a={id:-1};function s(){t=0,n.length=0,r.length=0}function o(v,y,_,A,S,x){let E=e[t];const D=i.get(_);return E===void 0?(E={id:v.id,object:v,geometry:y,material:_,program:D.program||a,groupOrder:A,renderOrder:v.renderOrder,z:S,group:x},e[t]=E):(E.id=v.id,E.object=v,E.geometry=y,E.material=_,E.program=D.program||a,E.groupOrder=A,E.renderOrder=v.renderOrder,E.z=S,E.group=x),t++,E}function c(v,y,_,A,S,x){const E=o(v,y,_,A,S,x);(_.transparent===!0?r:n).push(E)}function f(v,y,_,A,S,x){const E=o(v,y,_,A,S,x);(_.transparent===!0?r:n).unshift(E)}function d(v,y){n.length>1&&n.sort(v||Qle),r.length>1&&r.sort(y||ece)}function m(){for(let v=t,y=e.length;v<y;v++){const _=e[v];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.program=null,_.group=null}}return{opaque:n,transparent:r,init:s,push:c,unshift:f,finish:m,sort:d}}function tce(i){let e=new WeakMap;function t(r,a){let s;return e.has(r)===!1?(s=new kP(i),e.set(r,[s])):a>=e.get(r).length?(s=new kP(i),e.get(r).push(s)):s=e.get(r)[a],s}function n(){e=new WeakMap}return{get:t,dispose:n}}function nce(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ve,color:new _n};break;case"SpotLight":t={position:new ve,direction:new ve,color:new _n,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ve,color:new _n,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ve,skyColor:new _n,groundColor:new _n};break;case"RectAreaLight":t={color:new _n,position:new ve,halfWidth:new ve,halfHeight:new ve};break}return i[e.id]=t,t}}}function ice(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let rce=0;function ace(i,e){return(e.castShadow?1:0)-(i.castShadow?1:0)}function sce(i,e){const t=new nce,n=ice(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)r.probe.push(new ve);const a=new ve,s=new bn,o=new bn;function c(d){let m=0,v=0,y=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let _=0,A=0,S=0,x=0,E=0,D=0,B=0,U=0;d.sort(ace);for(let O=0,I=d.length;O<I;O++){const L=d[O],R=L.color,F=L.intensity,G=L.distance,V=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)m+=R.r*F,v+=R.g*F,y+=R.b*F;else if(L.isLightProbe)for(let $=0;$<9;$++)r.probe[$].addScaledVector(L.sh.coefficients[$],F);else if(L.isDirectionalLight){const $=t.get(L);if($.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const K=L.shadow,z=n.get(L);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,r.directionalShadow[_]=z,r.directionalShadowMap[_]=V,r.directionalShadowMatrix[_]=L.shadow.matrix,D++}r.directional[_]=$,_++}else if(L.isSpotLight){const $=t.get(L);if($.position.setFromMatrixPosition(L.matrixWorld),$.color.copy(R).multiplyScalar(F),$.distance=G,$.coneCos=Math.cos(L.angle),$.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),$.decay=L.decay,L.castShadow){const K=L.shadow,z=n.get(L);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,r.spotShadow[S]=z,r.spotShadowMap[S]=V,r.spotShadowMatrix[S]=L.shadow.matrix,U++}r.spot[S]=$,S++}else if(L.isRectAreaLight){const $=t.get(L);$.color.copy(R).multiplyScalar(F),$.halfWidth.set(L.width*.5,0,0),$.halfHeight.set(0,L.height*.5,0),r.rectArea[x]=$,x++}else if(L.isPointLight){const $=t.get(L);if($.color.copy(L.color).multiplyScalar(L.intensity),$.distance=L.distance,$.decay=L.decay,L.castShadow){const K=L.shadow,z=n.get(L);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,z.shadowCameraNear=K.camera.near,z.shadowCameraFar=K.camera.far,r.pointShadow[A]=z,r.pointShadowMap[A]=V,r.pointShadowMatrix[A]=L.shadow.matrix,B++}r.point[A]=$,A++}else if(L.isHemisphereLight){const $=t.get(L);$.skyColor.copy(L.color).multiplyScalar(F),$.groundColor.copy(L.groundColor).multiplyScalar(F),r.hemi[E]=$,E++}}x>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=kt.LTC_FLOAT_1,r.rectAreaLTC2=kt.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=kt.LTC_HALF_1,r.rectAreaLTC2=kt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=v,r.ambient[2]=y;const w=r.hash;(w.directionalLength!==_||w.pointLength!==A||w.spotLength!==S||w.rectAreaLength!==x||w.hemiLength!==E||w.numDirectionalShadows!==D||w.numPointShadows!==B||w.numSpotShadows!==U)&&(r.directional.length=_,r.spot.length=S,r.rectArea.length=x,r.point.length=A,r.hemi.length=E,r.directionalShadow.length=D,r.directionalShadowMap.length=D,r.pointShadow.length=B,r.pointShadowMap.length=B,r.spotShadow.length=U,r.spotShadowMap.length=U,r.directionalShadowMatrix.length=D,r.pointShadowMatrix.length=B,r.spotShadowMatrix.length=U,w.directionalLength=_,w.pointLength=A,w.spotLength=S,w.rectAreaLength=x,w.hemiLength=E,w.numDirectionalShadows=D,w.numPointShadows=B,w.numSpotShadows=U,r.version=rce++)}function f(d,m){let v=0,y=0,_=0,A=0,S=0;const x=m.matrixWorldInverse;for(let E=0,D=d.length;E<D;E++){const B=d[E];if(B.isDirectionalLight){const U=r.directional[v];U.direction.setFromMatrixPosition(B.matrixWorld),a.setFromMatrixPosition(B.target.matrixWorld),U.direction.sub(a),U.direction.transformDirection(x),v++}else if(B.isSpotLight){const U=r.spot[_];U.position.setFromMatrixPosition(B.matrixWorld),U.position.applyMatrix4(x),U.direction.setFromMatrixPosition(B.matrixWorld),a.setFromMatrixPosition(B.target.matrixWorld),U.direction.sub(a),U.direction.transformDirection(x),_++}else if(B.isRectAreaLight){const U=r.rectArea[A];U.position.setFromMatrixPosition(B.matrixWorld),U.position.applyMatrix4(x),o.identity(),s.copy(B.matrixWorld),s.premultiply(x),o.extractRotation(s),U.halfWidth.set(B.width*.5,0,0),U.halfHeight.set(0,B.height*.5,0),U.halfWidth.applyMatrix4(o),U.halfHeight.applyMatrix4(o),A++}else if(B.isPointLight){const U=r.point[y];U.position.setFromMatrixPosition(B.matrixWorld),U.position.applyMatrix4(x),y++}else if(B.isHemisphereLight){const U=r.hemi[S];U.direction.setFromMatrixPosition(B.matrixWorld),U.direction.transformDirection(x),U.direction.normalize(),S++}}}return{setup:c,setupView:f,state:r}}function WP(i,e){const t=new sce(i,e),n=[],r=[];function a(){n.length=0,r.length=0}function s(m){n.push(m)}function o(m){r.push(m)}function c(){t.setup(n)}function f(m){t.setupView(n,m)}return{init:a,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:c,setupLightsView:f,pushLight:s,pushShadow:o}}function oce(i,e){let t=new WeakMap;function n(a,s=0){let o;return t.has(a)===!1?(o=new WP(i,e),t.set(a,[o])):s>=t.get(a).length?(o=new WP(i,e),t.get(a).push(o)):o=t.get(a)[s],o}function r(){t=new WeakMap}return{get:n,dispose:r}}class Rz extends ga{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Ure,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Rz.prototype.isMeshDepthMaterial=!0;class Dz extends ga{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ve,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Dz.prototype.isMeshDistanceMaterial=!0;var lce=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,cce=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Bz(i,e,t){let n=new iE;const r=new It,a=new It,s=new Ni,o=[],c=[],f={},d=t.maxTextureSize,m={0:ca,1:QM,2:eE},v=new dp({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:cce,fragmentShader:lce}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const _=new Xi;_.setAttribute("position",new pa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Wl(_,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sz,this.render=function(w,O,I){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||w.length===0)return;const L=i.getRenderTarget(),R=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),G=i.state;G.setBlending(Ry),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);for(let V=0,$=w.length;V<$;V++){const K=w[V],z=K.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;r.copy(z.mapSize);const ee=z.getFrameExtents();if(r.multiply(ee),a.copy(z.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(a.x=Math.floor(d/ee.x),r.x=a.x*ee.x,z.mapSize.x=a.x),r.y>d&&(a.y=Math.floor(d/ee.y),r.y=a.y*ee.y,z.mapSize.y=a.y)),z.map===null&&!z.isPointLightShadow&&this.type===fy){const de={minFilter:ko,magFilter:ko,format:Ul};z.map=new tp(r.x,r.y,de),z.map.texture.name=K.name+".shadowMap",z.mapPass=new tp(r.x,r.y,de),z.camera.updateProjectionMatrix()}if(z.map===null){const de={minFilter:_s,magFilter:_s,format:Ul};z.map=new tp(r.x,r.y,de),z.map.texture.name=K.name+".shadowMap",z.camera.updateProjectionMatrix()}i.setRenderTarget(z.map),i.clear();const ne=z.getViewportCount();for(let de=0;de<ne;de++){const Y=z.getViewport(de);s.set(a.x*Y.x,a.y*Y.y,a.x*Y.z,a.y*Y.w),G.viewport(s),z.updateMatrices(K,de),n=z.getFrustum(),U(O,I,z.camera,K,this.type)}!z.isPointLightShadow&&this.type===fy&&x(z,I),z.needsUpdate=!1}S.needsUpdate=!1,i.setRenderTarget(L,R,F)};function x(w,O){const I=e.update(A);v.uniforms.shadow_pass.value=w.map.texture,v.uniforms.resolution.value=w.mapSize,v.uniforms.radius.value=w.radius,i.setRenderTarget(w.mapPass),i.clear(),i.renderBufferDirect(O,null,I,v,A,null),y.uniforms.shadow_pass.value=w.mapPass.texture,y.uniforms.resolution.value=w.mapSize,y.uniforms.radius.value=w.radius,i.setRenderTarget(w.map),i.clear(),i.renderBufferDirect(O,null,I,y,A,null)}function E(w,O,I){const L=w<<0|O<<1|I<<2;let R=o[L];return R===void 0&&(R=new Rz({depthPacking:Fre,morphTargets:w,skinning:O}),o[L]=R),R}function D(w,O,I){const L=w<<0|O<<1|I<<2;let R=c[L];return R===void 0&&(R=new Dz({morphTargets:w,skinning:O}),c[L]=R),R}function B(w,O,I,L,R,F,G){let V=null,$=E,K=w.customDepthMaterial;if(L.isPointLight===!0&&($=D,K=w.customDistanceMaterial),K===void 0){let z=!1;I.morphTargets===!0&&(z=O.morphAttributes&&O.morphAttributes.position&&O.morphAttributes.position.length>0);let ee=!1;w.isSkinnedMesh===!0&&(I.skinning===!0?ee=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",w));const ne=w.isInstancedMesh===!0;V=$(z,ee,ne)}else V=K;if(i.localClippingEnabled&&I.clipShadows===!0&&I.clippingPlanes.length!==0){const z=V.uuid,ee=I.uuid;let ne=f[z];ne===void 0&&(ne={},f[z]=ne);let de=ne[ee];de===void 0&&(de=V.clone(),ne[ee]=de),V=de}return V.visible=I.visible,V.wireframe=I.wireframe,G===fy?V.side=I.shadowSide!==null?I.shadowSide:I.side:V.side=I.shadowSide!==null?I.shadowSide:m[I.side],V.clipShadows=I.clipShadows,V.clippingPlanes=I.clippingPlanes,V.clipIntersection=I.clipIntersection,V.wireframeLinewidth=I.wireframeLinewidth,V.linewidth=I.linewidth,L.isPointLight===!0&&V.isMeshDistanceMaterial===!0&&(V.referencePosition.setFromMatrixPosition(L.matrixWorld),V.nearDistance=R,V.farDistance=F),V}function U(w,O,I,L,R){if(w.visible===!1)return;if(w.layers.test(O.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&R===fy)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,w.matrixWorld);const V=e.update(w),$=w.material;if(Array.isArray($)){const K=V.groups;for(let z=0,ee=K.length;z<ee;z++){const ne=K[z],de=$[ne.materialIndex];if(de&&de.visible){const Y=B(w,V,de,L,I.near,I.far,R);i.renderBufferDirect(I,null,V,Y,w,ne)}}}else if($.visible){const K=B(w,V,$,L,I.near,I.far,R);i.renderBufferDirect(I,null,V,K,w,null)}}const G=w.children;for(let V=0,$=G.length;V<$;V++)U(G[V],O,I,L,R)}}function uce(i,e,t){const n=t.isWebGL2;function r(){let ie=!1;const Ee=new Ni;let Be=null;const Ue=new Ni(0,0,0,0);return{setMask:function(He){Be!==He&&!ie&&(i.colorMask(He,He,He,He),Be=He)},setLocked:function(He){ie=He},setClear:function(He,ft,Et,Rt,ct){ct===!0&&(He*=Rt,ft*=Rt,Et*=Rt),Ee.set(He,ft,Et,Rt),Ue.equals(Ee)===!1&&(i.clearColor(He,ft,Et,Rt),Ue.copy(Ee))},reset:function(){ie=!1,Be=null,Ue.set(-1,0,0,0)}}}function a(){let ie=!1,Ee=null,Be=null,Ue=null;return{setTest:function(He){He?Re(2929):Le(2929)},setMask:function(He){Ee!==He&&!ie&&(i.depthMask(He),Ee=He)},setFunc:function(He){if(Be!==He){if(He)switch(He){case bie:i.depthFunc(512);break;case Sie:i.depthFunc(519);break;case Mie:i.depthFunc(513);break;case P2:i.depthFunc(515);break;case Eie:i.depthFunc(514);break;case Aie:i.depthFunc(518);break;case Tie:i.depthFunc(516);break;case wie:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);Be=He}},setLocked:function(He){ie=He},setClear:function(He){Ue!==He&&(i.clearDepth(He),Ue=He)},reset:function(){ie=!1,Ee=null,Be=null,Ue=null}}}function s(){let ie=!1,Ee=null,Be=null,Ue=null,He=null,ft=null,Et=null,Rt=null,ct=null;return{setTest:function(pt){ie||(pt?Re(2960):Le(2960))},setMask:function(pt){Ee!==pt&&!ie&&(i.stencilMask(pt),Ee=pt)},setFunc:function(pt,Nt,ge){(Be!==pt||Ue!==Nt||He!==ge)&&(i.stencilFunc(pt,Nt,ge),Be=pt,Ue=Nt,He=ge)},setOp:function(pt,Nt,ge){(ft!==pt||Et!==Nt||Rt!==ge)&&(i.stencilOp(pt,Nt,ge),ft=pt,Et=Nt,Rt=ge)},setLocked:function(pt){ie=pt},setClear:function(pt){ct!==pt&&(i.clearStencil(pt),ct=pt)},reset:function(){ie=!1,Ee=null,Be=null,Ue=null,He=null,ft=null,Et=null,Rt=null,ct=null}}}const o=new r,c=new a,f=new s;let d={},m=null,v={},y=null,_=!1,A=null,S=null,x=null,E=null,D=null,B=null,U=null,w=!1,O=null,I=null,L=null,R=null,F=null;const G=i.getParameter(35661);let V=!1,$=0;const K=i.getParameter(7938);K.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(K)[1]),V=$>=1):K.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),V=$>=2);let z=null,ee={};const ne=new Ni(0,0,i.canvas.width,i.canvas.height),de=new Ni(0,0,i.canvas.width,i.canvas.height);function Y(ie,Ee,Be){const Ue=new Uint8Array(4),He=i.createTexture();i.bindTexture(ie,He),i.texParameteri(ie,10241,9728),i.texParameteri(ie,10240,9728);for(let ft=0;ft<Be;ft++)i.texImage2D(Ee+ft,0,6408,1,1,0,6408,5121,Ue);return He}const fe={};fe[3553]=Y(3553,3553,1),fe[34067]=Y(34067,34069,6),o.setClear(0,0,0,1),c.setClear(1),f.setClear(0),Re(2929),c.setFunc(P2),me(!1),be(ZI),Re(2884),Q(Ry);function Re(ie){d[ie]!==!0&&(i.enable(ie),d[ie]=!0)}function Le(ie){d[ie]!==!1&&(i.disable(ie),d[ie]=!1)}function oe(ie){ie!==m&&(i.bindFramebuffer(36160,ie),m=ie)}function ke(ie,Ee){Ee===null&&m!==null&&(Ee=m),v[ie]!==Ee&&(i.bindFramebuffer(ie,Ee),v[ie]=Ee,n&&(ie===36009&&(v[36160]=Ee),ie===36160&&(v[36009]=Ee)))}function Ge(ie){return y!==ie?(i.useProgram(ie),y=ie,!0):!1}const Ze={[pg]:32774,[uie]:32778,[fie]:32779};if(n)Ze[nP]=32775,Ze[iP]=32776;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(Ze[nP]=ie.MIN_EXT,Ze[iP]=ie.MAX_EXT)}const Ae={[hie]:0,[die]:1,[pie]:768,[lz]:770,[xie]:776,[yie]:774,[gie]:772,[mie]:769,[cz]:771,[_ie]:775,[vie]:773};function Q(ie,Ee,Be,Ue,He,ft,Et,Rt){if(ie===Ry){_===!0&&(Le(3042),_=!1);return}if(_===!1&&(Re(3042),_=!0),ie!==cie){if(ie!==A||Rt!==w){if((S!==pg||D!==pg)&&(i.blendEquation(32774),S=pg,D=pg),Rt)switch(ie){case Dy:i.blendFuncSeparate(1,771,1,771);break;case QI:i.blendFunc(1,1);break;case eP:i.blendFuncSeparate(0,0,769,771);break;case tP:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case Dy:i.blendFuncSeparate(770,771,1,771);break;case QI:i.blendFunc(770,1);break;case eP:i.blendFunc(0,769);break;case tP:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}x=null,E=null,B=null,U=null,A=ie,w=Rt}return}He=He||Ee,ft=ft||Be,Et=Et||Ue,(Ee!==S||He!==D)&&(i.blendEquationSeparate(Ze[Ee],Ze[He]),S=Ee,D=He),(Be!==x||Ue!==E||ft!==B||Et!==U)&&(i.blendFuncSeparate(Ae[Be],Ae[Ue],Ae[ft],Ae[Et]),x=Be,E=Ue,B=ft,U=Et),A=ie,w=null}function le(ie,Ee){ie.side===eE?Le(2884):Re(2884);let Be=ie.side===ca;Ee&&(Be=!Be),me(Be),ie.blending===Dy&&ie.transparent===!1?Q(Ry):Q(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),c.setFunc(ie.depthFunc),c.setTest(ie.depthTest),c.setMask(ie.depthWrite),o.setMask(ie.colorWrite);const Ue=ie.stencilWrite;f.setTest(Ue),Ue&&(f.setMask(ie.stencilWriteMask),f.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),f.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),j(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?Re(32926):Le(32926)}function me(ie){O!==ie&&(ie?i.frontFace(2304):i.frontFace(2305),O=ie)}function be(ie){ie!==sie?(Re(2884),ie!==I&&(ie===ZI?i.cullFace(1029):ie===oie?i.cullFace(1028):i.cullFace(1032))):Le(2884),I=ie}function ye(ie){ie!==L&&(V&&i.lineWidth(ie),L=ie)}function j(ie,Ee,Be){ie?(Re(32823),(R!==Ee||F!==Be)&&(i.polygonOffset(Ee,Be),R=Ee,F=Be)):Le(32823)}function ze(ie){ie?Re(3089):Le(3089)}function Pe(ie){ie===void 0&&(ie=33984+G-1),z!==ie&&(i.activeTexture(ie),z=ie)}function ae(ie,Ee){z===null&&Pe();let Be=ee[z];Be===void 0&&(Be={type:void 0,texture:void 0},ee[z]=Be),(Be.type!==ie||Be.texture!==Ee)&&(i.bindTexture(ie,Ee||fe[ie]),Be.type=ie,Be.texture=Ee)}function Z(){const ie=ee[z];ie!==void 0&&ie.type!==void 0&&(i.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function Ie(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Se(){try{i.texImage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function We(){try{i.texImage3D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function ht(ie){ne.equals(ie)===!1&&(i.scissor(ie.x,ie.y,ie.z,ie.w),ne.copy(ie))}function te(ie){de.equals(ie)===!1&&(i.viewport(ie.x,ie.y,ie.z,ie.w),de.copy(ie))}function k(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),n===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},z=null,ee={},m=null,v={},y=null,_=!1,A=null,S=null,x=null,E=null,D=null,B=null,U=null,w=!1,O=null,I=null,L=null,R=null,F=null,ne.set(0,0,i.canvas.width,i.canvas.height),de.set(0,0,i.canvas.width,i.canvas.height),o.reset(),c.reset(),f.reset()}return{buffers:{color:o,depth:c,stencil:f},enable:Re,disable:Le,bindFramebuffer:ke,bindXRFramebuffer:oe,useProgram:Ge,setBlending:Q,setMaterial:le,setFlipSided:me,setCullFace:be,setLineWidth:ye,setPolygonOffset:j,setScissorTest:ze,activeTexture:Pe,bindTexture:ae,unbindTexture:Z,compressedTexImage2D:Ie,texImage2D:Se,texImage3D:We,scissor:ht,viewport:te,reset:k}}function fce(i,e,t,n,r,a,s){const o=r.isWebGL2,c=r.maxTextures,f=r.maxCubemapSize,d=r.maxTextureSize,m=r.maxSamples,v=new WeakMap;let y,_=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(ae,Z){return _?new OffscreenCanvas(ae,Z):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function S(ae,Z,Ie,Se){let We=1;if((ae.width>Se||ae.height>Se)&&(We=Se/Math.max(ae.width,ae.height)),We<1||Z===!0)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap){const ht=Z?kre:Math.floor,te=ht(We*ae.width),k=ht(We*ae.height);y===void 0&&(y=A(te,k));const ie=Ie?A(te,k):y;return ie.width=te,ie.height=k,ie.getContext("2d").drawImage(ae,0,0,te,k),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+te+"x"+k+")."),ie}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),ae;return ae}function x(ae){return _P(ae.width)&&_P(ae.height)}function E(ae){return o?!1:ae.wrapS!==Pl||ae.wrapT!==Pl||ae.minFilter!==_s&&ae.minFilter!==ko}function D(ae,Z){return ae.generateMipmaps&&Z&&ae.minFilter!==_s&&ae.minFilter!==ko}function B(ae,Z,Ie,Se){i.generateMipmap(ae);const We=n.get(Z);We.__maxMipLevel=Math.log2(Math.max(Ie,Se))}function U(ae,Z,Ie){if(o===!1)return Z;if(ae!==null){if(i[ae]!==void 0)return i[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let Se=Z;return Z===6403&&(Ie===5126&&(Se=33326),Ie===5131&&(Se=33325),Ie===5121&&(Se=33321)),Z===6407&&(Ie===5126&&(Se=34837),Ie===5131&&(Se=34843),Ie===5121&&(Se=32849)),Z===6408&&(Ie===5126&&(Se=34836),Ie===5131&&(Se=34842),Ie===5121&&(Se=32856)),(Se===33325||Se===33326||Se===34842||Se===34836)&&e.get("EXT_color_buffer_float"),Se}function w(ae){return ae===_s||ae===sP||ae===oP?9728:9729}function O(ae){const Z=ae.target;Z.removeEventListener("dispose",O),L(Z),Z.isVideoTexture&&v.delete(Z),s.memory.textures--}function I(ae){const Z=ae.target;Z.removeEventListener("dispose",I),R(Z),s.memory.textures--}function L(ae){const Z=n.get(ae);Z.__webglInit!==void 0&&(i.deleteTexture(Z.__webglTexture),n.remove(ae))}function R(ae){const Z=ae.texture,Ie=n.get(ae),Se=n.get(Z);if(ae){if(Se.__webglTexture!==void 0&&i.deleteTexture(Se.__webglTexture),ae.depthTexture&&ae.depthTexture.dispose(),ae.isWebGLCubeRenderTarget)for(let We=0;We<6;We++)i.deleteFramebuffer(Ie.__webglFramebuffer[We]),Ie.__webglDepthbuffer&&i.deleteRenderbuffer(Ie.__webglDepthbuffer[We]);else i.deleteFramebuffer(Ie.__webglFramebuffer),Ie.__webglDepthbuffer&&i.deleteRenderbuffer(Ie.__webglDepthbuffer),Ie.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ie.__webglMultisampledFramebuffer),Ie.__webglColorRenderbuffer&&i.deleteRenderbuffer(Ie.__webglColorRenderbuffer),Ie.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ie.__webglDepthRenderbuffer);n.remove(Z),n.remove(ae)}}let F=0;function G(){F=0}function V(){const ae=F;return ae>=c&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+c),F+=1,ae}function $(ae,Z){const Ie=n.get(ae);if(ae.isVideoTexture&&be(ae),ae.version>0&&Ie.__version!==ae.version){const Se=ae.image;if(Se===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Re(Ie,ae,Z);return}}t.activeTexture(33984+Z),t.bindTexture(3553,Ie.__webglTexture)}function K(ae,Z){const Ie=n.get(ae);if(ae.version>0&&Ie.__version!==ae.version){Re(Ie,ae,Z);return}t.activeTexture(33984+Z),t.bindTexture(35866,Ie.__webglTexture)}function z(ae,Z){const Ie=n.get(ae);if(ae.version>0&&Ie.__version!==ae.version){Re(Ie,ae,Z);return}t.activeTexture(33984+Z),t.bindTexture(32879,Ie.__webglTexture)}function ee(ae,Z){const Ie=n.get(ae);if(ae.version>0&&Ie.__version!==ae.version){Le(Ie,ae,Z);return}t.activeTexture(33984+Z),t.bindTexture(34067,Ie.__webglTexture)}const ne={[N2]:10497,[Pl]:33071,[O2]:33648},de={[_s]:9728,[sP]:9984,[oP]:9986,[ko]:9729,[Nie]:9985,[bR]:9987};function Y(ae,Z,Ie){if(Ie?(i.texParameteri(ae,10242,ne[Z.wrapS]),i.texParameteri(ae,10243,ne[Z.wrapT]),(ae===32879||ae===35866)&&i.texParameteri(ae,32882,ne[Z.wrapR]),i.texParameteri(ae,10240,de[Z.magFilter]),i.texParameteri(ae,10241,de[Z.minFilter])):(i.texParameteri(ae,10242,33071),i.texParameteri(ae,10243,33071),(ae===32879||ae===35866)&&i.texParameteri(ae,32882,33071),(Z.wrapS!==Pl||Z.wrapT!==Pl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(ae,10240,w(Z.magFilter)),i.texParameteri(ae,10241,w(Z.minFilter)),Z.minFilter!==_s&&Z.minFilter!==ko&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");if(Z.type===ih&&e.has("OES_texture_float_linear")===!1||o===!1&&Z.type===iM&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||n.get(Z).__currentAnisotropy)&&(i.texParameterf(ae,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),n.get(Z).__currentAnisotropy=Z.anisotropy)}}function fe(ae,Z){ae.__webglInit===void 0&&(ae.__webglInit=!0,Z.addEventListener("dispose",O),ae.__webglTexture=i.createTexture(),s.memory.textures++)}function Re(ae,Z,Ie){let Se=3553;Z.isDataTexture2DArray&&(Se=35866),Z.isDataTexture3D&&(Se=32879),fe(ae,Z),t.activeTexture(33984+Ie),t.bindTexture(Se,ae.__webglTexture),i.pixelStorei(37440,Z.flipY),i.pixelStorei(37441,Z.premultiplyAlpha),i.pixelStorei(3317,Z.unpackAlignment),i.pixelStorei(37443,0);const We=E(Z)&&x(Z.image)===!1,ht=S(Z.image,We,!1,d),te=x(ht)||o,k=a.convert(Z.format);let ie=a.convert(Z.type),Ee=U(Z.internalFormat,k,ie);Y(Se,Z,te);let Be;const Ue=Z.mipmaps;if(Z.isDepthTexture)Ee=6402,o?Z.type===ih?Ee=36012:Z.type===Zb?Ee=33190:Z.type===Ly?Ee=35056:Ee=33189:Z.type===ih&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===Cg&&Ee===6402&&Z.type!==nM&&Z.type!==Zb&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=nM,ie=a.convert(Z.type)),Z.format===Zy&&Ee===6402&&(Ee=34041,Z.type!==Ly&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=Ly,ie=a.convert(Z.type))),t.texImage2D(3553,0,Ee,ht.width,ht.height,0,k,ie,null);else if(Z.isDataTexture)if(Ue.length>0&&te){for(let He=0,ft=Ue.length;He<ft;He++)Be=Ue[He],t.texImage2D(3553,He,Ee,Be.width,Be.height,0,k,ie,Be.data);Z.generateMipmaps=!1,ae.__maxMipLevel=Ue.length-1}else t.texImage2D(3553,0,Ee,ht.width,ht.height,0,k,ie,ht.data),ae.__maxMipLevel=0;else if(Z.isCompressedTexture){for(let He=0,ft=Ue.length;He<ft;He++)Be=Ue[He],Z.format!==Ul&&Z.format!==ep?k!==null?t.compressedTexImage2D(3553,He,Ee,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,He,Ee,Be.width,Be.height,0,k,ie,Be.data);ae.__maxMipLevel=Ue.length-1}else if(Z.isDataTexture2DArray)t.texImage3D(35866,0,Ee,ht.width,ht.height,ht.depth,0,k,ie,ht.data),ae.__maxMipLevel=0;else if(Z.isDataTexture3D)t.texImage3D(32879,0,Ee,ht.width,ht.height,ht.depth,0,k,ie,ht.data),ae.__maxMipLevel=0;else if(Ue.length>0&&te){for(let He=0,ft=Ue.length;He<ft;He++)Be=Ue[He],t.texImage2D(3553,He,Ee,k,ie,Be);Z.generateMipmaps=!1,ae.__maxMipLevel=Ue.length-1}else t.texImage2D(3553,0,Ee,k,ie,ht),ae.__maxMipLevel=0;D(Z,te)&&B(Se,Z,ht.width,ht.height),ae.__version=Z.version,Z.onUpdate&&Z.onUpdate(Z)}function Le(ae,Z,Ie){if(Z.image.length!==6)return;fe(ae,Z),t.activeTexture(33984+Ie),t.bindTexture(34067,ae.__webglTexture),i.pixelStorei(37440,Z.flipY),i.pixelStorei(37441,Z.premultiplyAlpha),i.pixelStorei(3317,Z.unpackAlignment),i.pixelStorei(37443,0);const Se=Z&&(Z.isCompressedTexture||Z.image[0].isCompressedTexture),We=Z.image[0]&&Z.image[0].isDataTexture,ht=[];for(let He=0;He<6;He++)!Se&&!We?ht[He]=S(Z.image[He],!1,!0,f):ht[He]=We?Z.image[He].image:Z.image[He];const te=ht[0],k=x(te)||o,ie=a.convert(Z.format),Ee=a.convert(Z.type),Be=U(Z.internalFormat,ie,Ee);Y(34067,Z,k);let Ue;if(Se){for(let He=0;He<6;He++){Ue=ht[He].mipmaps;for(let ft=0;ft<Ue.length;ft++){const Et=Ue[ft];Z.format!==Ul&&Z.format!==ep?ie!==null?t.compressedTexImage2D(34069+He,ft,Be,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+He,ft,Be,Et.width,Et.height,0,ie,Ee,Et.data)}}ae.__maxMipLevel=Ue.length-1}else{Ue=Z.mipmaps;for(let He=0;He<6;He++)if(We){t.texImage2D(34069+He,0,Be,ht[He].width,ht[He].height,0,ie,Ee,ht[He].data);for(let ft=0;ft<Ue.length;ft++){const Rt=Ue[ft].image[He].image;t.texImage2D(34069+He,ft+1,Be,Rt.width,Rt.height,0,ie,Ee,Rt.data)}}else{t.texImage2D(34069+He,0,Be,ie,Ee,ht[He]);for(let ft=0;ft<Ue.length;ft++){const Et=Ue[ft];t.texImage2D(34069+He,ft+1,Be,ie,Ee,Et.image[He])}}ae.__maxMipLevel=Ue.length}D(Z,k)&&B(34067,Z,te.width,te.height),ae.__version=Z.version,Z.onUpdate&&Z.onUpdate(Z)}function oe(ae,Z,Ie,Se){const We=Z.texture,ht=a.convert(We.format),te=a.convert(We.type),k=U(We.internalFormat,ht,te);Se===32879||Se===35866?t.texImage3D(Se,0,k,Z.width,Z.height,Z.depth,0,ht,te,null):t.texImage2D(Se,0,k,Z.width,Z.height,0,ht,te,null),t.bindFramebuffer(36160,ae),i.framebufferTexture2D(36160,Ie,Se,n.get(We).__webglTexture,0),t.bindFramebuffer(36160,null)}function ke(ae,Z,Ie){if(i.bindRenderbuffer(36161,ae),Z.depthBuffer&&!Z.stencilBuffer){let Se=33189;if(Ie){const We=Z.depthTexture;We&&We.isDepthTexture&&(We.type===ih?Se=36012:We.type===Zb&&(Se=33190));const ht=me(Z);i.renderbufferStorageMultisample(36161,ht,Se,Z.width,Z.height)}else i.renderbufferStorage(36161,Se,Z.width,Z.height);i.framebufferRenderbuffer(36160,36096,36161,ae)}else if(Z.depthBuffer&&Z.stencilBuffer){if(Ie){const Se=me(Z);i.renderbufferStorageMultisample(36161,Se,35056,Z.width,Z.height)}else i.renderbufferStorage(36161,34041,Z.width,Z.height);i.framebufferRenderbuffer(36160,33306,36161,ae)}else{const Se=Z.texture,We=a.convert(Se.format),ht=a.convert(Se.type),te=U(Se.internalFormat,We,ht);if(Ie){const k=me(Z);i.renderbufferStorageMultisample(36161,k,te,Z.width,Z.height)}else i.renderbufferStorage(36161,te,Z.width,Z.height)}i.bindRenderbuffer(36161,null)}function Ge(ae,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ae),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),$(Z.depthTexture,0);const Se=n.get(Z.depthTexture).__webglTexture;if(Z.depthTexture.format===Cg)i.framebufferTexture2D(36160,36096,3553,Se,0);else if(Z.depthTexture.format===Zy)i.framebufferTexture2D(36160,33306,3553,Se,0);else throw new Error("Unknown depthTexture format")}function Ze(ae){const Z=n.get(ae),Ie=ae.isWebGLCubeRenderTarget===!0;if(ae.depthTexture){if(Ie)throw new Error("target.depthTexture not supported in Cube render targets");Ge(Z.__webglFramebuffer,ae)}else if(Ie){Z.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)t.bindFramebuffer(36160,Z.__webglFramebuffer[Se]),Z.__webglDepthbuffer[Se]=i.createRenderbuffer(),ke(Z.__webglDepthbuffer[Se],ae,!1)}else t.bindFramebuffer(36160,Z.__webglFramebuffer),Z.__webglDepthbuffer=i.createRenderbuffer(),ke(Z.__webglDepthbuffer,ae,!1);t.bindFramebuffer(36160,null)}function Ae(ae){const Z=ae.texture,Ie=n.get(ae),Se=n.get(Z);ae.addEventListener("dispose",I),Se.__webglTexture=i.createTexture(),Se.__version=Z.version,s.memory.textures++;const We=ae.isWebGLCubeRenderTarget===!0,ht=ae.isWebGLMultisampleRenderTarget===!0,te=Z.isDataTexture3D||Z.isDataTexture2DArray,k=x(ae)||o;if(o&&Z.format===ep&&(Z.type===ih||Z.type===iM)&&(Z.format=Ul,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),We){Ie.__webglFramebuffer=[];for(let ie=0;ie<6;ie++)Ie.__webglFramebuffer[ie]=i.createFramebuffer()}else if(Ie.__webglFramebuffer=i.createFramebuffer(),ht)if(o){Ie.__webglMultisampledFramebuffer=i.createFramebuffer(),Ie.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,Ie.__webglColorRenderbuffer);const ie=a.convert(Z.format),Ee=a.convert(Z.type),Be=U(Z.internalFormat,ie,Ee),Ue=me(ae);i.renderbufferStorageMultisample(36161,Ue,Be,ae.width,ae.height),t.bindFramebuffer(36160,Ie.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,Ie.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),ae.depthBuffer&&(Ie.__webglDepthRenderbuffer=i.createRenderbuffer(),ke(Ie.__webglDepthRenderbuffer,ae,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(We){t.bindTexture(34067,Se.__webglTexture),Y(34067,Z,k);for(let ie=0;ie<6;ie++)oe(Ie.__webglFramebuffer[ie],ae,36064,34069+ie);D(Z,k)&&B(34067,Z,ae.width,ae.height),t.bindTexture(34067,null)}else{let ie=3553;te&&(o?ie=Z.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(ie,Se.__webglTexture),Y(ie,Z,k),oe(Ie.__webglFramebuffer,ae,36064,ie),D(Z,k)&&B(3553,Z,ae.width,ae.height),t.bindTexture(3553,null)}ae.depthBuffer&&Ze(ae)}function Q(ae){const Z=ae.texture,Ie=x(ae)||o;if(D(Z,Ie)){const Se=ae.isWebGLCubeRenderTarget?34067:3553,We=n.get(Z).__webglTexture;t.bindTexture(Se,We),B(Se,Z,ae.width,ae.height),t.bindTexture(Se,null)}}function le(ae){if(ae.isWebGLMultisampleRenderTarget)if(o){const Z=ae.width,Ie=ae.height;let Se=16384;ae.depthBuffer&&(Se|=256),ae.stencilBuffer&&(Se|=1024);const We=n.get(ae);t.bindFramebuffer(36008,We.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,We.__webglFramebuffer),i.blitFramebuffer(0,0,Z,Ie,0,0,Z,Ie,Se,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,We.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function me(ae){return o&&ae.isWebGLMultisampleRenderTarget?Math.min(m,ae.samples):0}function be(ae){const Z=s.render.frame;v.get(ae)!==Z&&(v.set(ae,Z),ae.update())}let ye=!1,j=!1;function ze(ae,Z){ae&&ae.isWebGLRenderTarget&&(ye===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ye=!0),ae=ae.texture),$(ae,Z)}function Pe(ae,Z){ae&&ae.isWebGLCubeRenderTarget&&(j===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),j=!0),ae=ae.texture),ee(ae,Z)}this.allocateTextureUnit=V,this.resetTextureUnits=G,this.setTexture2D=$,this.setTexture2DArray=K,this.setTexture3D=z,this.setTextureCube=ee,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=le,this.safeSetTexture2D=ze,this.safeSetTextureCube=Pe}function hce(i,e,t){const n=t.isWebGL2;function r(a){let s;if(a===SR)return 5121;if(a===zie)return 32819;if(a===Hie)return 32820;if(a===Gie)return 33635;if(a===Oie)return 5120;if(a===Uie)return 5122;if(a===nM)return 5123;if(a===Fie)return 5124;if(a===Zb)return 5125;if(a===ih)return 5126;if(a===iM)return n?5131:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===Vie)return 6406;if(a===ep)return 6407;if(a===Ul)return 6408;if(a===kie)return 6409;if(a===Wie)return 6410;if(a===Cg)return 6402;if(a===Zy)return 34041;if(a===Xie)return 6403;if(a===$ie)return 36244;if(a===jie)return 33319;if(a===qie)return 33320;if(a===Yie)return 36248;if(a===Kie)return 36249;if(a===lP||a===cP||a===uP||a===fP)if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===lP)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===cP)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===uP)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===fP)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===hP||a===dP||a===pP||a===mP)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===hP)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===dP)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===pP)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===mP)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===Jie)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((a===gP||a===vP)&&(s=e.get("WEBGL_compressed_texture_etc"),s!==null)){if(a===gP)return s.COMPRESSED_RGB8_ETC2;if(a===vP)return s.COMPRESSED_RGBA8_ETC2_EAC}if(a===Zie||a===Qie||a===ere||a===tre||a===nre||a===ire||a===rre||a===are||a===sre||a===ore||a===lre||a===cre||a===ure||a===fre||a===dre||a===pre||a===mre||a===gre||a===vre||a===yre||a===_re||a===xre||a===bre||a===Sre||a===Mre||a===Ere||a===Are||a===Tre)return s=e.get("WEBGL_compressed_texture_astc"),s!==null?a:null;if(a===hre)return s=e.get("EXT_texture_compression_bptc"),s!==null?a:null;if(a===Ly)return n?34042:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class Lz extends lo{constructor(e=[]){super(),this.cameras=e}}Lz.prototype.isArrayCamera=!0;class dy extends _i{constructor(){super(),this.type="Group"}}dy.prototype.isGroup=!0;const dce={type:"move"};class Rw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new dy,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new dy,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new dy,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,a=null,s=null;const o=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(o!==null&&(r=t.getPose(e.targetRaySpace,n),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(dce))),f&&e.hand){s=!0;for(const A of e.hand.values()){const S=t.getJointPose(A,n);if(f.joints[A.jointName]===void 0){const E=new dy;E.matrixAutoUpdate=!1,E.visible=!1,f.joints[A.jointName]=E,f.add(E)}const x=f.joints[A.jointName];S!==null&&(x.matrix.fromArray(S.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=S.radius),x.visible=S!==null}const d=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],v=d.position.distanceTo(m.position),y=.02,_=.005;f.inputState.pinching&&v>y+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=y-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));return o!==null&&(o.visible=r!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}}class pce extends xp{constructor(e,t){super();const n=this,r=e.state;let a=null,s=1,o=null,c="local-floor",f=null;const d=[],m=new Map,v=new lo;v.layers.enable(1),v.viewport=new Ni;const y=new lo;y.layers.enable(2),y.viewport=new Ni;const _=[v,y],A=new Lz;A.layers.enable(1),A.layers.enable(2);let S=null,x=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let V=d[G];return V===void 0&&(V=new Rw,d[G]=V),V.getTargetRaySpace()},this.getControllerGrip=function(G){let V=d[G];return V===void 0&&(V=new Rw,d[G]=V),V.getGripSpace()},this.getHand=function(G){let V=d[G];return V===void 0&&(V=new Rw,d[G]=V),V.getHandSpace()};function E(G){const V=m.get(G.inputSource);V&&V.dispatchEvent({type:G.type,data:G.inputSource})}function D(){m.forEach(function(G,V){G.disconnect(V)}),m.clear(),S=null,x=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),F.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){s=G,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){c=G,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return a},this.setSession=async function(G){if(a=G,a!==null){a.addEventListener("select",E),a.addEventListener("selectstart",E),a.addEventListener("selectend",E),a.addEventListener("squeeze",E),a.addEventListener("squeezestart",E),a.addEventListener("squeezeend",E),a.addEventListener("end",D),a.addEventListener("inputsourceschange",B);const V=t.getContextAttributes();V.xrCompatible!==!0&&await t.makeXRCompatible();const $={antialias:V.antialias,alpha:V.alpha,depth:V.depth,stencil:V.stencil,framebufferScaleFactor:s},K=new XRWebGLLayer(a,t,$);a.updateRenderState({baseLayer:K}),o=await a.requestReferenceSpace(c),F.setContext(a),F.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function B(G){const V=a.inputSources;for(let $=0;$<d.length;$++)m.set(V[$],d[$]);for(let $=0;$<G.removed.length;$++){const K=G.removed[$],z=m.get(K);z&&(z.dispatchEvent({type:"disconnected",data:K}),m.delete(K))}for(let $=0;$<G.added.length;$++){const K=G.added[$],z=m.get(K);z&&z.dispatchEvent({type:"connected",data:K})}}const U=new ve,w=new ve;function O(G,V,$){U.setFromMatrixPosition(V.matrixWorld),w.setFromMatrixPosition($.matrixWorld);const K=U.distanceTo(w),z=V.projectionMatrix.elements,ee=$.projectionMatrix.elements,ne=z[14]/(z[10]-1),de=z[14]/(z[10]+1),Y=(z[9]+1)/z[5],fe=(z[9]-1)/z[5],Re=(z[8]-1)/z[0],Le=(ee[8]+1)/ee[0],oe=ne*Re,ke=ne*Le,Ge=K/(-Re+Le),Ze=Ge*-Re;V.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Ze),G.translateZ(Ge),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const Ae=ne+Ge,Q=de+Ge,le=oe-Ze,me=ke+(K-Ze),be=Y*de/Q*Ae,ye=fe*de/Q*Ae;G.projectionMatrix.makePerspective(le,me,be,ye,Ae,Q)}function I(G,V){V===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(V.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.getCamera=function(G){A.near=y.near=v.near=G.near,A.far=y.far=v.far=G.far,(S!==A.near||x!==A.far)&&(a.updateRenderState({depthNear:A.near,depthFar:A.far}),S=A.near,x=A.far);const V=G.parent,$=A.cameras;I(A,V);for(let z=0;z<$.length;z++)I($[z],V);G.matrixWorld.copy(A.matrixWorld),G.matrix.copy(A.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale);const K=G.children;for(let z=0,ee=K.length;z<ee;z++)K[z].updateMatrixWorld(!0);return $.length===2?O(A,v,y):A.projectionMatrix.copy(v.projectionMatrix),A};let L=null;function R(G,V){if(f=V.getViewerPose(o),f!==null){const K=f.views,z=a.renderState.baseLayer;r.bindXRFramebuffer(z.framebuffer);let ee=!1;K.length!==A.cameras.length&&(A.cameras.length=0,ee=!0);for(let ne=0;ne<K.length;ne++){const de=K[ne],Y=z.getViewport(de),fe=_[ne];fe.matrix.fromArray(de.transform.matrix),fe.projectionMatrix.fromArray(de.projectionMatrix),fe.viewport.set(Y.x,Y.y,Y.width,Y.height),ne===0&&A.matrix.copy(fe.matrix),ee===!0&&A.cameras.push(fe)}}const $=a.inputSources;for(let K=0;K<d.length;K++){const z=d[K],ee=$[K];z.update(ee,V,o)}L&&L(G,V)}const F=new _z;F.setAnimationLoop(R),this.setAnimationLoop=function(G){L=G},this.dispose=function(){}}}function mce(i){function e(x,E){x.fogColor.value.copy(E.color),E.isFog?(x.fogNear.value=E.near,x.fogFar.value=E.far):E.isFogExp2&&(x.fogDensity.value=E.density)}function t(x,E,D,B){E.isMeshBasicMaterial?n(x,E):E.isMeshLambertMaterial?(n(x,E),c(x,E)):E.isMeshToonMaterial?(n(x,E),d(x,E)):E.isMeshPhongMaterial?(n(x,E),f(x,E)):E.isMeshStandardMaterial?(n(x,E),E.isMeshPhysicalMaterial?v(x,E):m(x,E)):E.isMeshMatcapMaterial?(n(x,E),y(x,E)):E.isMeshDepthMaterial?(n(x,E),_(x,E)):E.isMeshDistanceMaterial?(n(x,E),A(x,E)):E.isMeshNormalMaterial?(n(x,E),S(x,E)):E.isLineBasicMaterial?(r(x,E),E.isLineDashedMaterial&&a(x,E)):E.isPointsMaterial?s(x,E,D,B):E.isSpriteMaterial?o(x,E):E.isShadowMaterial?(x.color.value.copy(E.color),x.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function n(x,E){x.opacity.value=E.opacity,E.color&&x.diffuse.value.copy(E.color),E.emissive&&x.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(x.map.value=E.map),E.alphaMap&&(x.alphaMap.value=E.alphaMap),E.specularMap&&(x.specularMap.value=E.specularMap);const D=i.get(E).envMap;if(D){x.envMap.value=D,x.flipEnvMap.value=D.isCubeTexture&&D._needsFlipEnvMap?-1:1,x.reflectivity.value=E.reflectivity,x.refractionRatio.value=E.refractionRatio;const w=i.get(D).__maxMipLevel;w!==void 0&&(x.maxMipLevel.value=w)}E.lightMap&&(x.lightMap.value=E.lightMap,x.lightMapIntensity.value=E.lightMapIntensity),E.aoMap&&(x.aoMap.value=E.aoMap,x.aoMapIntensity.value=E.aoMapIntensity);let B;E.map?B=E.map:E.specularMap?B=E.specularMap:E.displacementMap?B=E.displacementMap:E.normalMap?B=E.normalMap:E.bumpMap?B=E.bumpMap:E.roughnessMap?B=E.roughnessMap:E.metalnessMap?B=E.metalnessMap:E.alphaMap?B=E.alphaMap:E.emissiveMap?B=E.emissiveMap:E.clearcoatMap?B=E.clearcoatMap:E.clearcoatNormalMap?B=E.clearcoatNormalMap:E.clearcoatRoughnessMap&&(B=E.clearcoatRoughnessMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),x.uvTransform.value.copy(B.matrix));let U;E.aoMap?U=E.aoMap:E.lightMap&&(U=E.lightMap),U!==void 0&&(U.isWebGLRenderTarget&&(U=U.texture),U.matrixAutoUpdate===!0&&U.updateMatrix(),x.uv2Transform.value.copy(U.matrix))}function r(x,E){x.diffuse.value.copy(E.color),x.opacity.value=E.opacity}function a(x,E){x.dashSize.value=E.dashSize,x.totalSize.value=E.dashSize+E.gapSize,x.scale.value=E.scale}function s(x,E,D,B){x.diffuse.value.copy(E.color),x.opacity.value=E.opacity,x.size.value=E.size*D,x.scale.value=B*.5,E.map&&(x.map.value=E.map),E.alphaMap&&(x.alphaMap.value=E.alphaMap);let U;E.map?U=E.map:E.alphaMap&&(U=E.alphaMap),U!==void 0&&(U.matrixAutoUpdate===!0&&U.updateMatrix(),x.uvTransform.value.copy(U.matrix))}function o(x,E){x.diffuse.value.copy(E.color),x.opacity.value=E.opacity,x.rotation.value=E.rotation,E.map&&(x.map.value=E.map),E.alphaMap&&(x.alphaMap.value=E.alphaMap);let D;E.map?D=E.map:E.alphaMap&&(D=E.alphaMap),D!==void 0&&(D.matrixAutoUpdate===!0&&D.updateMatrix(),x.uvTransform.value.copy(D.matrix))}function c(x,E){E.emissiveMap&&(x.emissiveMap.value=E.emissiveMap)}function f(x,E){x.specular.value.copy(E.specular),x.shininess.value=Math.max(E.shininess,1e-4),E.emissiveMap&&(x.emissiveMap.value=E.emissiveMap),E.bumpMap&&(x.bumpMap.value=E.bumpMap,x.bumpScale.value=E.bumpScale,E.side===ca&&(x.bumpScale.value*=-1)),E.normalMap&&(x.normalMap.value=E.normalMap,x.normalScale.value.copy(E.normalScale),E.side===ca&&x.normalScale.value.negate()),E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias)}function d(x,E){E.gradientMap&&(x.gradientMap.value=E.gradientMap),E.emissiveMap&&(x.emissiveMap.value=E.emissiveMap),E.bumpMap&&(x.bumpMap.value=E.bumpMap,x.bumpScale.value=E.bumpScale,E.side===ca&&(x.bumpScale.value*=-1)),E.normalMap&&(x.normalMap.value=E.normalMap,x.normalScale.value.copy(E.normalScale),E.side===ca&&x.normalScale.value.negate()),E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias)}function m(x,E){x.roughness.value=E.roughness,x.metalness.value=E.metalness,E.roughnessMap&&(x.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(x.metalnessMap.value=E.metalnessMap),E.emissiveMap&&(x.emissiveMap.value=E.emissiveMap),E.bumpMap&&(x.bumpMap.value=E.bumpMap,x.bumpScale.value=E.bumpScale,E.side===ca&&(x.bumpScale.value*=-1)),E.normalMap&&(x.normalMap.value=E.normalMap,x.normalScale.value.copy(E.normalScale),E.side===ca&&x.normalScale.value.negate()),E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias),i.get(E).envMap&&(x.envMapIntensity.value=E.envMapIntensity)}function v(x,E){m(x,E),x.reflectivity.value=E.reflectivity,x.clearcoat.value=E.clearcoat,x.clearcoatRoughness.value=E.clearcoatRoughness,E.sheen&&x.sheen.value.copy(E.sheen),E.clearcoatMap&&(x.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),x.clearcoatNormalMap.value=E.clearcoatNormalMap,E.side===ca&&x.clearcoatNormalScale.value.negate()),x.transmission.value=E.transmission,E.transmissionMap&&(x.transmissionMap.value=E.transmissionMap)}function y(x,E){E.matcap&&(x.matcap.value=E.matcap),E.bumpMap&&(x.bumpMap.value=E.bumpMap,x.bumpScale.value=E.bumpScale,E.side===ca&&(x.bumpScale.value*=-1)),E.normalMap&&(x.normalMap.value=E.normalMap,x.normalScale.value.copy(E.normalScale),E.side===ca&&x.normalScale.value.negate()),E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias)}function _(x,E){E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias)}function A(x,E){E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias),x.referencePosition.value.copy(E.referencePosition),x.nearDistance.value=E.nearDistance,x.farDistance.value=E.farDistance}function S(x,E){E.bumpMap&&(x.bumpMap.value=E.bumpMap,x.bumpScale.value=E.bumpScale,E.side===ca&&(x.bumpScale.value*=-1)),E.normalMap&&(x.normalMap.value=E.normalMap,x.normalScale.value.copy(E.normalScale),E.side===ca&&x.normalScale.value.negate()),E.displacementMap&&(x.displacementMap.value=E.displacementMap,x.displacementScale.value=E.displacementScale,x.displacementBias.value=E.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function gce(){const i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.style.display="block",i}function Hi(i){i=i||{};const e=i.canvas!==void 0?i.canvas:gce(),t=i.context!==void 0?i.context:null,n=i.alpha!==void 0?i.alpha:!1,r=i.depth!==void 0?i.depth:!0,a=i.stencil!==void 0?i.stencil:!0,s=i.antialias!==void 0?i.antialias:!1,o=i.premultipliedAlpha!==void 0?i.premultipliedAlpha:!0,c=i.preserveDrawingBuffer!==void 0?i.preserveDrawingBuffer:!1,f=i.powerPreference!==void 0?i.powerPreference:"default",d=i.failIfMajorPerformanceCaveat!==void 0?i.failIfMajorPerformanceCaveat:!1;let m=null,v=null;const y=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=R_,this.physicallyCorrectLights=!1,this.toneMapping=By,this.toneMappingExposure=1;const A=this;let S=!1,x=0,E=0,D=null,B=-1,U=null;const w=new Ni,O=new Ni;let I=null,L=e.width,R=e.height,F=1,G=null,V=null;const $=new Ni(0,0,L,R),K=new Ni(0,0,L,R);let z=!1;const ee=new iE;let ne=!1,de=!1;const Y=new bn,fe=new ve,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Le(){return D===null?F:1}let oe=t;function ke(he,nt){for(let Ye=0;Ye<he.length;Ye++){const lt=he[Ye],wt=e.getContext(lt,nt);if(wt!==null)return wt}return null}try{const he={alpha:n,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:d};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",Et,!1),oe===null){const nt=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&nt.shift(),oe=ke(nt,he),oe===null)throw ke(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}oe.getShaderPrecisionFormat===void 0&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let Ge,Ze,Ae,Q,le,me,be,ye,j,ze,Pe,ae,Z,Ie,Se,We,ht,te,k,ie,Ee,Be;function Ue(){Ge=new Foe(oe),Ze=new Noe(oe,Ge,i),Ge.init(Ze),Ee=new hce(oe,Ge,Ze),Ae=new uce(oe,Ge,Ze),Q=new Goe,le=new Zle,me=new fce(oe,Ge,Ae,le,Ze,Ee,Q),be=new Uoe(A),ye=new cae(oe,Ze),Be=new Ioe(oe,Ge,ye,Ze),j=new zoe(oe,ye,Q,Be),ze=new Xoe(oe,j,ye,Q),te=new Woe(oe),Se=new Ooe(le),Pe=new Jle(A,be,Ge,Ze,Be,Se),ae=new mce(le),Z=new tce(le),Ie=new oce(Ge,Ze),ht=new Loe(A,be,Ae,ze,o),We=new Bz(A,ze,Ze),k=new Poe(oe,Ge,Q,Ze),ie=new Hoe(oe,Ge,Q,Ze),Q.programs=Pe.programs,A.capabilities=Ze,A.extensions=Ge,A.properties=le,A.renderLists=Z,A.shadowMap=We,A.state=Ae,A.info=Q}Ue();const He=new pce(A,oe);this.xr=He,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const he=Ge.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=Ge.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(he){he!==void 0&&(F=he,this.setSize(L,R,!1))},this.getSize=function(he){return he===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),he=new It),he.set(L,R)},this.setSize=function(he,nt,Ye){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=he,R=nt,e.width=Math.floor(he*F),e.height=Math.floor(nt*F),Ye!==!1&&(e.style.width=he+"px",e.style.height=nt+"px"),this.setViewport(0,0,he,nt)},this.getDrawingBufferSize=function(he){return he===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),he=new It),he.set(L*F,R*F).floor()},this.setDrawingBufferSize=function(he,nt,Ye){L=he,R=nt,F=Ye,e.width=Math.floor(he*Ye),e.height=Math.floor(nt*Ye),this.setViewport(0,0,he,nt)},this.getCurrentViewport=function(he){return he===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),he=new Ni),he.copy(w)},this.getViewport=function(he){return he.copy($)},this.setViewport=function(he,nt,Ye,lt){he.isVector4?$.set(he.x,he.y,he.z,he.w):$.set(he,nt,Ye,lt),Ae.viewport(w.copy($).multiplyScalar(F).floor())},this.getScissor=function(he){return he.copy(K)},this.setScissor=function(he,nt,Ye,lt){he.isVector4?K.set(he.x,he.y,he.z,he.w):K.set(he,nt,Ye,lt),Ae.scissor(O.copy(K).multiplyScalar(F).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(he){Ae.setScissorTest(z=he)},this.setOpaqueSort=function(he){G=he},this.setTransparentSort=function(he){V=he},this.getClearColor=function(he){return he===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),he=new _n),he.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(he,nt,Ye){let lt=0;(he===void 0||he)&&(lt|=16384),(nt===void 0||nt)&&(lt|=256),(Ye===void 0||Ye)&&(lt|=1024),oe.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",Et,!1),Z.dispose(),Ie.dispose(),le.dispose(),be.dispose(),ze.dispose(),Be.dispose(),He.dispose(),He.removeEventListener("sessionstart",_t),He.removeEventListener("sessionend",Me),qe.stop()};function ft(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Et(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const he=Q.autoReset,nt=We.enabled,Ye=We.autoUpdate,lt=We.needsUpdate,wt=We.type;Ue(),Q.autoReset=he,We.enabled=nt,We.autoUpdate=Ye,We.needsUpdate=lt,We.type=wt}function Rt(he){const nt=he.target;nt.removeEventListener("dispose",Rt),ct(nt)}function ct(he){pt(he),le.remove(he)}function pt(he){const nt=le.get(he).programs;nt!==void 0&&nt.forEach(function(Ye){Pe.releaseProgram(Ye)})}function Nt(he,nt){he.render(function(Ye){A.renderBufferImmediate(Ye,nt)})}this.renderBufferImmediate=function(he,nt){Be.initAttributes();const Ye=le.get(he);he.hasPositions&&!Ye.position&&(Ye.position=oe.createBuffer()),he.hasNormals&&!Ye.normal&&(Ye.normal=oe.createBuffer()),he.hasUvs&&!Ye.uv&&(Ye.uv=oe.createBuffer()),he.hasColors&&!Ye.color&&(Ye.color=oe.createBuffer());const lt=nt.getAttributes();he.hasPositions&&(oe.bindBuffer(34962,Ye.position),oe.bufferData(34962,he.positionArray,35048),Be.enableAttribute(lt.position),oe.vertexAttribPointer(lt.position,3,5126,!1,0,0)),he.hasNormals&&(oe.bindBuffer(34962,Ye.normal),oe.bufferData(34962,he.normalArray,35048),Be.enableAttribute(lt.normal),oe.vertexAttribPointer(lt.normal,3,5126,!1,0,0)),he.hasUvs&&(oe.bindBuffer(34962,Ye.uv),oe.bufferData(34962,he.uvArray,35048),Be.enableAttribute(lt.uv),oe.vertexAttribPointer(lt.uv,2,5126,!1,0,0)),he.hasColors&&(oe.bindBuffer(34962,Ye.color),oe.bufferData(34962,he.colorArray,35048),Be.enableAttribute(lt.color),oe.vertexAttribPointer(lt.color,3,5126,!1,0,0)),Be.disableUnusedAttributes(),oe.drawArrays(4,0,he.count),he.count=0},this.renderBufferDirect=function(he,nt,Ye,lt,wt,hn){nt===null&&(nt=Re);const nn=wt.isMesh&&wt.matrixWorld.determinant()<0,Qt=Xt(he,nt,lt,wt);Ae.setMaterial(lt,nn);let Ft=Ye.index;const tn=Ye.attributes.position;if(Ft===null){if(tn===void 0||tn.count===0)return}else if(Ft.count===0)return;let jt=1;lt.wireframe===!0&&(Ft=j.getWireframeAttribute(Ye),jt=2),(lt.morphTargets||lt.morphNormals)&&te.update(wt,Ye,lt,Qt),Be.setup(wt,lt,Qt,Ye,Ft);let W,re=k;Ft!==null&&(W=ye.get(Ft),re=ie,re.setIndex(W));const Ce=Ft!==null?Ft.count:tn.count,je=Ye.drawRange.start*jt,Qe=Ye.drawRange.count*jt,tt=hn!==null?hn.start*jt:0,Tt=hn!==null?hn.count*jt:1/0,dt=Math.max(je,tt),J=Math.min(Ce,je+Qe,tt+Tt)-1,pe=Math.max(0,J-dt+1);if(pe!==0){if(wt.isMesh)lt.wireframe===!0?(Ae.setLineWidth(lt.wireframeLinewidth*Le()),re.setMode(1)):re.setMode(4);else if(wt.isLine){let _e=lt.linewidth;_e===void 0&&(_e=1),Ae.setLineWidth(_e*Le()),wt.isLineSegments?re.setMode(1):wt.isLineLoop?re.setMode(2):re.setMode(3)}else wt.isPoints?re.setMode(0):wt.isSprite&&re.setMode(4);if(wt.isInstancedMesh)re.renderInstances(dt,pe,wt.count);else if(Ye.isInstancedBufferGeometry){const _e=Math.min(Ye.instanceCount,Ye._maxInstanceCount);re.renderInstances(dt,pe,_e)}else re.render(dt,pe)}},this.compile=function(he,nt){v=Ie.get(he),v.init(),he.traverseVisible(function(Ye){Ye.isLight&&Ye.layers.test(nt.layers)&&(v.pushLight(Ye),Ye.castShadow&&v.pushShadow(Ye))}),v.setupLights(),he.traverse(function(Ye){const lt=Ye.material;if(lt)if(Array.isArray(lt))for(let wt=0;wt<lt.length;wt++){const hn=lt[wt];gt(hn,he,Ye)}else gt(lt,he,Ye)})};let ge=null;function Ve(he){ge&&ge(he)}function _t(){qe.stop()}function Me(){qe.start()}const qe=new _z;qe.setAnimationLoop(Ve),typeof window<"u"&&qe.setContext(window),this.setAnimationLoop=function(he){ge=he,He.setAnimationLoop(he),he===null?qe.stop():qe.start()},He.addEventListener("sessionstart",_t),He.addEventListener("sessionend",Me),this.render=function(he,nt){let Ye,lt;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Ye=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),lt=arguments[3]),nt!==void 0&&nt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;he.autoUpdate===!0&&he.updateMatrixWorld(),nt.parent===null&&nt.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(nt=He.getCamera(nt)),he.isScene===!0&&he.onBeforeRender(A,he,nt,Ye||D),v=Ie.get(he,_.length),v.init(),_.push(v),Y.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),ee.setFromProjectionMatrix(Y),de=this.localClippingEnabled,ne=Se.init(this.clippingPlanes,de,nt),m=Z.get(he,y.length),m.init(),y.push(m),mt(he,nt,0,A.sortObjects),m.finish(),A.sortObjects===!0&&m.sort(G,V),ne===!0&&Se.beginShadows();const wt=v.state.shadowsArray;We.render(wt,he,nt),v.setupLights(),v.setupLightsView(nt),ne===!0&&Se.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ye!==void 0&&this.setRenderTarget(Ye),ht.render(m,he,nt,lt);const hn=m.opaque,nn=m.transparent;hn.length>0&&Pt(hn,he,nt),nn.length>0&&Pt(nn,he,nt),D!==null&&(me.updateRenderTargetMipmap(D),me.updateMultisampleRenderTarget(D)),he.isScene===!0&&he.onAfterRender(A,he,nt),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1),Be.resetDefaultState(),B=-1,U=null,_.pop(),_.length>0?v=_[_.length-1]:v=null,y.pop(),y.length>0?m=y[y.length-1]:m=null};function mt(he,nt,Ye,lt){if(he.visible===!1)return;if(he.layers.test(nt.layers)){if(he.isGroup)Ye=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(nt);else if(he.isLight)v.pushLight(he),he.castShadow&&v.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||ee.intersectsSprite(he)){lt&&fe.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Y);const nn=ze.update(he),Qt=he.material;Qt.visible&&m.push(he,nn,Qt,Ye,fe.z,null)}}else if(he.isImmediateRenderObject)lt&&fe.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Y),m.push(he,null,he.material,Ye,fe.z,null);else if((he.isMesh||he.isLine||he.isPoints)&&(he.isSkinnedMesh&&he.skeleton.frame!==Q.render.frame&&(he.skeleton.update(),he.skeleton.frame=Q.render.frame),!he.frustumCulled||ee.intersectsObject(he))){lt&&fe.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Y);const nn=ze.update(he),Qt=he.material;if(Array.isArray(Qt)){const Ft=nn.groups;for(let tn=0,jt=Ft.length;tn<jt;tn++){const W=Ft[tn],re=Qt[W.materialIndex];re&&re.visible&&m.push(he,nn,re,Ye,fe.z,W)}}else Qt.visible&&m.push(he,nn,Qt,Ye,fe.z,null)}}const hn=he.children;for(let nn=0,Qt=hn.length;nn<Qt;nn++)mt(hn[nn],nt,Ye,lt)}function Pt(he,nt,Ye){const lt=nt.isScene===!0?nt.overrideMaterial:null;for(let wt=0,hn=he.length;wt<hn;wt++){const nn=he[wt],Qt=nn.object,Ft=nn.geometry,tn=lt===null?nn.material:lt,jt=nn.group;if(Ye.isArrayCamera){const W=Ye.cameras;for(let re=0,Ce=W.length;re<Ce;re++){const je=W[re];Qt.layers.test(je.layers)&&(Ae.viewport(w.copy(je.viewport)),v.setupLightsView(je),At(Qt,nt,je,Ft,tn,jt))}}else At(Qt,nt,Ye,Ft,tn,jt)}}function At(he,nt,Ye,lt,wt,hn){if(he.onBeforeRender(A,nt,Ye,lt,wt,hn),he.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),he.isImmediateRenderObject){const nn=Xt(Ye,nt,wt,he);Ae.setMaterial(wt),Be.reset(),Nt(he,nn)}else A.renderBufferDirect(Ye,nt,lt,wt,he,hn);he.onAfterRender(A,nt,Ye,lt,wt,hn)}function gt(he,nt,Ye){nt.isScene!==!0&&(nt=Re);const lt=le.get(he),wt=v.state.lights,hn=v.state.shadowsArray,nn=wt.state.version,Qt=Pe.getParameters(he,wt.state,hn,nt,Ye),Ft=Pe.getProgramCacheKey(Qt);let tn=lt.programs;lt.environment=he.isMeshStandardMaterial?nt.environment:null,lt.fog=nt.fog,lt.envMap=be.get(he.envMap||lt.environment),tn===void 0&&(he.addEventListener("dispose",Rt),tn=new Map,lt.programs=tn);let jt=tn.get(Ft);if(jt!==void 0){if(lt.currentProgram===jt&&lt.lightsStateVersion===nn)return Ut(he,Qt),jt}else Qt.uniforms=Pe.getUniforms(he),he.onBuild(Qt,A),he.onBeforeCompile(Qt,A),jt=Pe.acquireProgram(Qt,Ft),tn.set(Ft,jt),lt.uniforms=Qt.uniforms;const W=lt.uniforms;(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(W.clippingPlanes=Se.uniform),Ut(he,Qt),lt.needsLights=Tn(he),lt.lightsStateVersion=nn,lt.needsLights&&(W.ambientLightColor.value=wt.state.ambient,W.lightProbe.value=wt.state.probe,W.directionalLights.value=wt.state.directional,W.directionalLightShadows.value=wt.state.directionalShadow,W.spotLights.value=wt.state.spot,W.spotLightShadows.value=wt.state.spotShadow,W.rectAreaLights.value=wt.state.rectArea,W.ltc_1.value=wt.state.rectAreaLTC1,W.ltc_2.value=wt.state.rectAreaLTC2,W.pointLights.value=wt.state.point,W.pointLightShadows.value=wt.state.pointShadow,W.hemisphereLights.value=wt.state.hemi,W.directionalShadowMap.value=wt.state.directionalShadowMap,W.directionalShadowMatrix.value=wt.state.directionalShadowMatrix,W.spotShadowMap.value=wt.state.spotShadowMap,W.spotShadowMatrix.value=wt.state.spotShadowMatrix,W.pointShadowMap.value=wt.state.pointShadowMap,W.pointShadowMatrix.value=wt.state.pointShadowMatrix);const re=jt.getUniforms(),Ce=uh.seqWithValue(re.seq,W);return lt.currentProgram=jt,lt.uniformsList=Ce,jt}function Ut(he,nt){const Ye=le.get(he);Ye.outputEncoding=nt.outputEncoding,Ye.instancing=nt.instancing,Ye.numClippingPlanes=nt.numClippingPlanes,Ye.numIntersection=nt.numClipIntersection,Ye.vertexAlphas=nt.vertexAlphas}function Xt(he,nt,Ye,lt){nt.isScene!==!0&&(nt=Re),me.resetTextureUnits();const wt=nt.fog,hn=Ye.isMeshStandardMaterial?nt.environment:null,nn=D===null?A.outputEncoding:D.texture.encoding,Qt=be.get(Ye.envMap||hn),Ft=Ye.vertexColors===!0&&lt.geometry&&lt.geometry.attributes.color&&lt.geometry.attributes.color.itemSize===4,tn=le.get(Ye),jt=v.state.lights;if(ne===!0&&(de===!0||he!==U)){const dt=he===U&&Ye.id===B;Se.setState(Ye,he,dt)}let W=!1;Ye.version===tn.__version?(tn.needsLights&&tn.lightsStateVersion!==jt.state.version||tn.outputEncoding!==nn||lt.isInstancedMesh&&tn.instancing===!1||!lt.isInstancedMesh&&tn.instancing===!0||tn.envMap!==Qt||Ye.fog&&tn.fog!==wt||tn.numClippingPlanes!==void 0&&(tn.numClippingPlanes!==Se.numPlanes||tn.numIntersection!==Se.numIntersection)||tn.vertexAlphas!==Ft)&&(W=!0):(W=!0,tn.__version=Ye.version);let re=tn.currentProgram;W===!0&&(re=gt(Ye,nt,lt));let Ce=!1,je=!1,Qe=!1;const tt=re.getUniforms(),Tt=tn.uniforms;if(Ae.useProgram(re.program)&&(Ce=!0,je=!0,Qe=!0),Ye.id!==B&&(B=Ye.id,je=!0),Ce||U!==he){if(tt.setValue(oe,"projectionMatrix",he.projectionMatrix),Ze.logarithmicDepthBuffer&&tt.setValue(oe,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),U!==he&&(U=he,je=!0,Qe=!0),Ye.isShaderMaterial||Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshStandardMaterial||Ye.envMap){const dt=tt.map.cameraPosition;dt!==void 0&&dt.setValue(oe,fe.setFromMatrixPosition(he.matrixWorld))}(Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshLambertMaterial||Ye.isMeshBasicMaterial||Ye.isMeshStandardMaterial||Ye.isShaderMaterial)&&tt.setValue(oe,"isOrthographic",he.isOrthographicCamera===!0),(Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshLambertMaterial||Ye.isMeshBasicMaterial||Ye.isMeshStandardMaterial||Ye.isShaderMaterial||Ye.isShadowMaterial||Ye.skinning)&&tt.setValue(oe,"viewMatrix",he.matrixWorldInverse)}if(Ye.skinning){tt.setOptional(oe,lt,"bindMatrix"),tt.setOptional(oe,lt,"bindMatrixInverse");const dt=lt.skeleton;if(dt){const J=dt.bones;if(Ze.floatVertexTextures){if(dt.boneTexture===null){let pe=Math.sqrt(J.length*4);pe=Vre(pe),pe=Math.max(pe,4);const _e=new Float32Array(pe*pe*4);_e.set(dt.boneMatrices);const we=new yz(_e,pe,pe,Ul,ih);dt.boneMatrices=_e,dt.boneTexture=we,dt.boneTextureSize=pe}tt.setValue(oe,"boneTexture",dt.boneTexture,me),tt.setValue(oe,"boneTextureSize",dt.boneTextureSize)}else tt.setOptional(oe,dt,"boneMatrices")}}return(je||tn.receiveShadow!==lt.receiveShadow)&&(tn.receiveShadow=lt.receiveShadow,tt.setValue(oe,"receiveShadow",lt.receiveShadow)),je&&(tt.setValue(oe,"toneMappingExposure",A.toneMappingExposure),tn.needsLights&&Cn(Tt,Qe),wt&&Ye.fog&&ae.refreshFogUniforms(Tt,wt),ae.refreshMaterialUniforms(Tt,Ye,F,R),uh.upload(oe,tn.uniformsList,Tt,me)),Ye.isShaderMaterial&&Ye.uniformsNeedUpdate===!0&&(uh.upload(oe,tn.uniformsList,Tt,me),Ye.uniformsNeedUpdate=!1),Ye.isSpriteMaterial&&tt.setValue(oe,"center",lt.center),tt.setValue(oe,"modelViewMatrix",lt.modelViewMatrix),tt.setValue(oe,"normalMatrix",lt.normalMatrix),tt.setValue(oe,"modelMatrix",lt.matrixWorld),re}function Cn(he,nt){he.ambientLightColor.needsUpdate=nt,he.lightProbe.needsUpdate=nt,he.directionalLights.needsUpdate=nt,he.directionalLightShadows.needsUpdate=nt,he.pointLights.needsUpdate=nt,he.pointLightShadows.needsUpdate=nt,he.spotLights.needsUpdate=nt,he.spotLightShadows.needsUpdate=nt,he.rectAreaLights.needsUpdate=nt,he.hemisphereLights.needsUpdate=nt}function Tn(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return D},this.setRenderTarget=function(he,nt=0,Ye=0){D=he,x=nt,E=Ye,he&&le.get(he).__webglFramebuffer===void 0&&me.setupRenderTarget(he);let lt=null,wt=!1,hn=!1;if(he){const nn=he.texture;(nn.isDataTexture3D||nn.isDataTexture2DArray)&&(hn=!0);const Qt=le.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(lt=Qt[nt],wt=!0):he.isWebGLMultisampleRenderTarget?lt=le.get(he).__webglMultisampledFramebuffer:lt=Qt,w.copy(he.viewport),O.copy(he.scissor),I=he.scissorTest}else w.copy($).multiplyScalar(F).floor(),O.copy(K).multiplyScalar(F).floor(),I=z;if(Ae.bindFramebuffer(36160,lt),Ae.viewport(w),Ae.scissor(O),Ae.setScissorTest(I),wt){const nn=le.get(he.texture);oe.framebufferTexture2D(36160,36064,34069+nt,nn.__webglTexture,Ye)}else if(hn){const nn=le.get(he.texture),Qt=nt||0;oe.framebufferTextureLayer(36160,36064,nn.__webglTexture,Ye||0,Qt)}},this.readRenderTargetPixels=function(he,nt,Ye,lt,wt,hn,nn){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Qt=le.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&nn!==void 0&&(Qt=Qt[nn]),Qt){Ae.bindFramebuffer(36160,Qt);try{const Ft=he.texture,tn=Ft.format,jt=Ft.type;if(tn!==Ul&&Ee.convert(tn)!==oe.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const W=jt===iM&&(Ge.has("EXT_color_buffer_half_float")||Ze.isWebGL2&&Ge.has("EXT_color_buffer_float"));if(jt!==SR&&Ee.convert(jt)!==oe.getParameter(35738)&&!(jt===ih&&(Ze.isWebGL2||Ge.has("OES_texture_float")||Ge.has("WEBGL_color_buffer_float")))&&!W){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe.checkFramebufferStatus(36160)===36053?nt>=0&&nt<=he.width-lt&&Ye>=0&&Ye<=he.height-wt&&oe.readPixels(nt,Ye,lt,wt,Ee.convert(tn),Ee.convert(jt),hn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Ft=D!==null?le.get(D).__webglFramebuffer:null;Ae.bindFramebuffer(36160,Ft)}}},this.copyFramebufferToTexture=function(he,nt,Ye=0){const lt=Math.pow(2,-Ye),wt=Math.floor(nt.image.width*lt),hn=Math.floor(nt.image.height*lt),nn=Ee.convert(nt.format);me.setTexture2D(nt,0),oe.copyTexImage2D(3553,Ye,nn,he.x,he.y,wt,hn,0),Ae.unbindTexture()},this.copyTextureToTexture=function(he,nt,Ye,lt=0){const wt=nt.image.width,hn=nt.image.height,nn=Ee.convert(Ye.format),Qt=Ee.convert(Ye.type);me.setTexture2D(Ye,0),oe.pixelStorei(37440,Ye.flipY),oe.pixelStorei(37441,Ye.premultiplyAlpha),oe.pixelStorei(3317,Ye.unpackAlignment),nt.isDataTexture?oe.texSubImage2D(3553,lt,he.x,he.y,wt,hn,nn,Qt,nt.image.data):nt.isCompressedTexture?oe.compressedTexSubImage2D(3553,lt,he.x,he.y,nt.mipmaps[0].width,nt.mipmaps[0].height,nn,nt.mipmaps[0].data):oe.texSubImage2D(3553,lt,he.x,he.y,nn,Qt,nt.image),lt===0&&Ye.generateMipmaps&&oe.generateMipmap(3553),Ae.unbindTexture()},this.copyTextureToTexture3D=function(he,nt,Ye,lt,wt=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const{width:hn,height:nn,data:Qt}=Ye.image,Ft=Ee.convert(lt.format),tn=Ee.convert(lt.type);let jt;if(lt.isDataTexture3D)me.setTexture3D(lt,0),jt=32879;else if(lt.isDataTexture2DArray)me.setTexture2DArray(lt,0),jt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}oe.pixelStorei(37440,lt.flipY),oe.pixelStorei(37441,lt.premultiplyAlpha),oe.pixelStorei(3317,lt.unpackAlignment);const W=oe.getParameter(3314),re=oe.getParameter(32878),Ce=oe.getParameter(3316),je=oe.getParameter(3315),Qe=oe.getParameter(32877);oe.pixelStorei(3314,hn),oe.pixelStorei(32878,nn),oe.pixelStorei(3316,he.min.x),oe.pixelStorei(3315,he.min.y),oe.pixelStorei(32877,he.min.z),oe.texSubImage3D(jt,wt,nt.x,nt.y,nt.z,he.max.x-he.min.x+1,he.max.y-he.min.y+1,he.max.z-he.min.z+1,Ft,tn,Qt),oe.pixelStorei(3314,W),oe.pixelStorei(32878,re),oe.pixelStorei(3316,Ce),oe.pixelStorei(3315,je),oe.pixelStorei(32877,Qe),wt===0&&lt.generateMipmaps&&oe.generateMipmap(jt),Ae.unbindTexture()},this.initTexture=function(he){me.setTexture2D(he,0),Ae.unbindTexture()},this.resetState=function(){x=0,E=0,D=null,Ae.reset(),Be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class vce extends Hi{}vce.prototype.isWebGL1Renderer=!0;class Iz extends _i{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Iz.prototype.isScene=!0;class bp{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Qy,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fc(),this.onUploadCallback=function(){}}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new bp(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}bp.prototype.isInterleavedBuffer=!0;const Dr=new ve;class e_{constructor(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Dr.x=this.getX(t),Dr.y=this.getY(t),Dr.z=this.getZ(t),Dr.applyMatrix4(e),this.setXYZ(t,Dr.x,Dr.y,Dr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Dr.x=this.getX(t),Dr.y=this.getY(t),Dr.z=this.getZ(t),Dr.applyNormalMatrix(e),this.setXYZ(t,Dr.x,Dr.y,Dr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Dr.x=this.getX(t),Dr.y=this.getY(t),Dr.z=this.getZ(t),Dr.transformDirection(e),this.setXYZ(t,Dr.x,Dr.y,Dr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new pa(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new e_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}e_.prototype.isInterleavedBufferAttribute=!0;class Pz extends ga{constructor(e){super(),this.type="SpriteMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}Pz.prototype.isSpriteMaterial=!0;let lg;const ny=new ve,cg=new ve,ug=new ve,fg=new It,iy=new It,Nz=new bn,Bb=new ve,ry=new ve,Lb=new ve,XP=new It,Dw=new It,$P=new It;class yce extends _i{constructor(e){if(super(),this.type="Sprite",lg===void 0){lg=new Xi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new bp(t,5);lg.setIndex([0,1,2,0,2,3]),lg.setAttribute("position",new e_(n,3,0,!1)),lg.setAttribute("uv",new e_(n,2,3,!1))}this.geometry=lg,this.material=e!==void 0?e:new Pz,this.center=new It(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cg.setFromMatrixScale(this.matrixWorld),Nz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ug.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&cg.multiplyScalar(-ug.z);const n=this.material.rotation;let r,a;n!==0&&(a=Math.cos(n),r=Math.sin(n));const s=this.center;Ib(Bb.set(-.5,-.5,0),ug,s,cg,r,a),Ib(ry.set(.5,-.5,0),ug,s,cg,r,a),Ib(Lb.set(.5,.5,0),ug,s,cg,r,a),XP.set(0,0),Dw.set(1,0),$P.set(1,1);let o=e.ray.intersectTriangle(Bb,ry,Lb,!1,ny);if(o===null&&(Ib(ry.set(-.5,.5,0),ug,s,cg,r,a),Dw.set(0,1),o=e.ray.intersectTriangle(Bb,Lb,ry,!1,ny),o===null))return;const c=e.ray.origin.distanceTo(ny);c<e.near||c>e.far||t.push({distance:c,point:ny.clone(),uv:Jr.getUV(ny,Bb,ry,Lb,XP,Dw,$P,new It),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}yce.prototype.isSprite=!0;function Ib(i,e,t,n,r,a){fg.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(iy.x=a*fg.x-r*fg.y,iy.y=r*fg.x+a*fg.y):iy.copy(fg),i.copy(e),i.x+=iy.x,i.y+=iy.y,i.applyMatrix4(Nz)}const jP=new ve,qP=new Ni,YP=new Ni,_ce=new ve,KP=new bn;class Oz extends Wl{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new bn,this.bindMatrixInverse=new bn}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ni,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;qP.fromBufferAttribute(r.attributes.skinIndex,e),YP.fromBufferAttribute(r.attributes.skinWeight,e),jP.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=YP.getComponent(a);if(s!==0){const o=qP.getComponent(a);KP.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(_ce.copy(jP).applyMatrix4(KP),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}Oz.prototype.isSkinnedMesh=!0;class xce extends _i{constructor(){super(),this.type="Bone"}}xce.prototype.isBone=!0;const JP=new bn,ZP=new bn,Pb=[],ay=new Wl;class bce extends Wl{constructor(e,t,n){super(e,t),this.instanceMatrix=new pa(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ay.geometry=this.geometry,ay.material=this.material,ay.material!==void 0)for(let a=0;a<r;a++){this.getMatrixAt(a,JP),ZP.multiplyMatrices(n,JP),ay.matrixWorld=ZP,ay.raycast(e,Pb);for(let s=0,o=Pb.length;s<o;s++){const c=Pb[s];c.instanceId=a,c.object=this,t.push(c)}Pb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new pa(new Float32Array(this.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}bce.prototype.isInstancedMesh=!0;class D_ extends ga{constructor(e){super(),this.type="LineBasicMaterial",this.color=new _n(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}D_.prototype.isLineBasicMaterial=!0;const QP=new ve,eN=new ve,tN=new bn,Bw=new uv,Nb=new cv;class CR extends _i{constructor(e=new Xi,t=new D_){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,a=t.count;r<a;r++)QP.fromBufferAttribute(t,r-1),eN.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=QP.distanceTo(eN);e.setAttribute("lineDistance",new ma(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Nb.copy(n.boundingSphere),Nb.applyMatrix4(r),Nb.radius+=a,e.ray.intersectsSphere(Nb)===!1)return;tN.copy(r).invert(),Bw.copy(e.ray).applyMatrix4(tN);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=new ve,d=new ve,m=new ve,v=new ve,y=this.isLineSegments?2:1;if(n.isBufferGeometry){const _=n.index,S=n.attributes.position;if(_!==null){const x=Math.max(0,s.start),E=Math.min(_.count,s.start+s.count);for(let D=x,B=E-1;D<B;D+=y){const U=_.getX(D),w=_.getX(D+1);if(f.fromBufferAttribute(S,U),d.fromBufferAttribute(S,w),Bw.distanceSqToSegment(f,d,v,m)>c)continue;v.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(v);I<e.near||I>e.far||t.push({distance:I,point:m.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,s.start),E=Math.min(S.count,s.start+s.count);for(let D=x,B=E-1;D<B;D+=y){if(f.fromBufferAttribute(S,D),d.fromBufferAttribute(S,D+1),Bw.distanceSqToSegment(f,d,v,m)>c)continue;v.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(v);w<e.near||w>e.far||t.push({distance:w,point:m.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}CR.prototype.isLine=!0;const nN=new ve,iN=new ve;class RR extends CR{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,a=t.count;r<a;r+=2)nN.fromBufferAttribute(t,r),iN.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+nN.distanceTo(iN);e.setAttribute("lineDistance",new ma(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}RR.prototype.isLineSegments=!0;class Sce extends CR{constructor(e,t){super(e,t),this.type="LineLoop"}}Sce.prototype.isLineLoop=!0;class Uz extends ga{constructor(e){super(),this.type="PointsMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}Uz.prototype.isPointsMaterial=!0;const rN=new bn,z2=new uv,Ob=new cv,Ub=new ve;class Mce extends _i{constructor(e=new Xi,t=new Uz){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ob.copy(n.boundingSphere),Ob.applyMatrix4(r),Ob.radius+=a,e.ray.intersectsSphere(Ob)===!1)return;rN.copy(r).invert(),z2.copy(e.ray).applyMatrix4(rN);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o;if(n.isBufferGeometry){const f=n.index,m=n.attributes.position;if(f!==null){const v=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let _=v,A=y;_<A;_++){const S=f.getX(_);Ub.fromBufferAttribute(m,S),aN(Ub,S,c,r,e,t,this)}}else{const v=Math.max(0,s.start),y=Math.min(m.count,s.start+s.count);for(let _=v,A=y;_<A;_++)Ub.fromBufferAttribute(m,_),aN(Ub,_,c,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Mce.prototype.isPoints=!0;function aN(i,e,t,n,r,a,s){const o=z2.distanceSqToPoint(i);if(o<t){const c=new ve;z2.closestPointToPoint(i,c),c.applyMatrix4(n);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,object:s})}}class Ece extends Ia{constructor(e,t,n,r,a,s,o,c,f){super(e,t,n,r,a,s,o,c,f),this.format=o!==void 0?o:ep,this.minFilter=s!==void 0?s:ko,this.magFilter=a!==void 0?a:ko,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Ece.prototype.isVideoTexture=!0;class Ace extends Ia{constructor(e,t,n,r,a,s,o,c,f,d,m,v){super(null,s,o,c,f,d,r,a,m,v),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Ace.prototype.isCompressedTexture=!0;class Tce extends Ia{constructor(e,t,n,r,a,s,o,c,f){super(e,t,n,r,a,s,o,c,f),this.needsUpdate=!0}}Tce.prototype.isCanvasTexture=!0;class wce extends Ia{constructor(e,t,n,r,a,s,o,c,f,d){if(d=d!==void 0?d:Cg,d!==Cg&&d!==Zy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&d===Cg&&(n=nM),n===void 0&&d===Zy&&(n=Ly),super(null,r,a,s,o,c,d,n,f),this.image={width:e,height:t},this.magFilter=o!==void 0?o:_s,this.minFilter=c!==void 0?c:_s,this.flipY=!1,this.generateMipmaps=!1}}wce.prototype.isDepthTexture=!0;const Cce={triangulate:function(i,e,t){t=t||2;const n=e&&e.length,r=n?e[0]*t:i.length;let a=Fz(i,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,f,d,m,v,y;if(n&&(a=Ice(i,e,a,t)),i.length>80*t){o=f=i[0],c=d=i[1];for(let _=t;_<r;_+=t)m=i[_],v=i[_+1],m<o&&(o=m),v<c&&(c=v),m>f&&(f=m),v>d&&(d=v);y=Math.max(f-o,d-c),y=y!==0?1/y:0}return t_(a,s,t,o,c,y),s}};function Fz(i,e,t,n,r){let a,s;if(r===Wce(i,e,t,n)>0)for(a=e;a<t;a+=n)s=sN(a,i[a],i[a+1],s);else for(a=t-n;a>=e;a-=n)s=sN(a,i[a],i[a+1],s);return s&&rE(s,s.next)&&(i_(s),s=s.next),s}function yh(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(rE(t,t.next)||mr(t.prev,t,t.next)===0)){if(i_(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function t_(i,e,t,n,r,a,s){if(!i)return;!s&&a&&Fce(i,n,r,a);let o=i,c,f;for(;i.prev!==i.next;){if(c=i.prev,f=i.next,a?Dce(i,n,r,a):Rce(i)){e.push(c.i/t),e.push(i.i/t),e.push(f.i/t),i_(i),i=f.next,o=f.next;continue}if(i=f,i===o){s?s===1?(i=Bce(yh(i),e,t),t_(i,e,t,n,r,a,2)):s===2&&Lce(i,e,t,n,r,a):t_(yh(i),e,t,n,r,a,1);break}}}function Rce(i){const e=i.prev,t=i,n=i.next;if(mr(e,t,n)>=0)return!1;let r=i.next.next;for(;r!==i.prev;){if(bg(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)&&mr(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Dce(i,e,t,n){const r=i.prev,a=i,s=i.next;if(mr(r,a,s)>=0)return!1;const o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,c=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,f=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,d=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,m=H2(o,c,e,t,n),v=H2(f,d,e,t,n);let y=i.prevZ,_=i.nextZ;for(;y&&y.z>=m&&_&&_.z<=v;){if(y!==i.prev&&y!==i.next&&bg(r.x,r.y,a.x,a.y,s.x,s.y,y.x,y.y)&&mr(y.prev,y,y.next)>=0||(y=y.prevZ,_!==i.prev&&_!==i.next&&bg(r.x,r.y,a.x,a.y,s.x,s.y,_.x,_.y)&&mr(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;y&&y.z>=m;){if(y!==i.prev&&y!==i.next&&bg(r.x,r.y,a.x,a.y,s.x,s.y,y.x,y.y)&&mr(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=v;){if(_!==i.prev&&_!==i.next&&bg(r.x,r.y,a.x,a.y,s.x,s.y,_.x,_.y)&&mr(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Bce(i,e,t){let n=i;do{const r=n.prev,a=n.next.next;!rE(r,a)&&zz(r,n,n.next,a)&&n_(r,a)&&n_(a,r)&&(e.push(r.i/t),e.push(n.i/t),e.push(a.i/t),i_(n),i_(n.next),n=i=a),n=n.next}while(n!==i);return yh(n)}function Lce(i,e,t,n,r,a){let s=i;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&Gce(s,o)){let c=Hz(s,o);s=yh(s,s.next),c=yh(c,c.next),t_(s,e,t,n,r,a),t_(c,e,t,n,r,a);return}o=o.next}s=s.next}while(s!==i)}function Ice(i,e,t,n){const r=[];let a,s,o,c,f;for(a=0,s=e.length;a<s;a++)o=e[a]*n,c=a<s-1?e[a+1]*n:i.length,f=Fz(i,o,c,n,!1),f===f.next&&(f.steiner=!0),r.push(Hce(f));for(r.sort(Pce),a=0;a<r.length;a++)Nce(r[a],t),t=yh(t,t.next);return t}function Pce(i,e){return i.x-e.x}function Nce(i,e){if(e=Oce(i,e),e){const t=Hz(e,i);yh(e,e.next),yh(t,t.next)}}function Oce(i,e){let t=e;const n=i.x,r=i.y;let a=-1/0,s;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const v=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=n&&v>a){if(a=v,v===n){if(r===t.y)return t;if(r===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(n===a)return s;const o=s,c=s.x,f=s.y;let d=1/0,m;t=s;do n>=t.x&&t.x>=c&&n!==t.x&&bg(r<f?n:a,r,c,f,r<f?a:n,r,t.x,t.y)&&(m=Math.abs(r-t.y)/(n-t.x),n_(t,i)&&(m<d||m===d&&(t.x>s.x||t.x===s.x&&Uce(s,t)))&&(s=t,d=m)),t=t.next;while(t!==o);return s}function Uce(i,e){return mr(i.prev,i,e.prev)<0&&mr(e.next,i,i.next)<0}function Fce(i,e,t,n){let r=i;do r.z===null&&(r.z=H2(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,zce(r)}function zce(i){let e,t,n,r,a,s,o,c,f=1;do{for(t=i,i=null,a=null,s=0;t;){for(s++,n=t,o=0,e=0;e<f&&(o++,n=n.nextZ,!!n);e++);for(c=f;o>0||c>0&&n;)o!==0&&(c===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,o--):(r=n,n=n.nextZ,c--),a?a.nextZ=r:i=r,r.prevZ=a,a=r;t=n}a.nextZ=null,f*=2}while(s>1);return i}function H2(i,e,t,n,r){return i=32767*(i-t)*r,e=32767*(e-n)*r,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Hce(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function bg(i,e,t,n,r,a,s,o){return(r-s)*(e-o)-(i-s)*(a-o)>=0&&(i-s)*(n-o)-(t-s)*(e-o)>=0&&(t-s)*(a-o)-(r-s)*(n-o)>=0}function Gce(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Vce(i,e)&&(n_(i,e)&&n_(e,i)&&kce(i,e)&&(mr(i.prev,i,e.prev)||mr(i,e.prev,e))||rE(i,e)&&mr(i.prev,i,i.next)>0&&mr(e.prev,e,e.next)>0)}function mr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function rE(i,e){return i.x===e.x&&i.y===e.y}function zz(i,e,t,n){const r=zb(mr(i,e,t)),a=zb(mr(i,e,n)),s=zb(mr(t,n,i)),o=zb(mr(t,n,e));return!!(r!==a&&s!==o||r===0&&Fb(i,t,e)||a===0&&Fb(i,n,e)||s===0&&Fb(t,i,n)||o===0&&Fb(t,e,n))}function Fb(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function zb(i){return i>0?1:i<0?-1:0}function Vce(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&zz(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function n_(i,e){return mr(i.prev,i,i.next)<0?mr(i,e,i.next)>=0&&mr(i,i.prev,e)>=0:mr(i,e,i.prev)<0||mr(i,i.next,e)<0}function kce(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Hz(i,e){const t=new G2(i.i,i.x,i.y),n=new G2(e.i,e.x,e.y),r=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function sN(i,e,t,n){const r=new G2(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function i_(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function G2(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wce(i,e,t,n){let r=0;for(let a=e,s=t-n;a<t;a+=n)r+=(i[s]-i[a])*(i[a+1]+i[s+1]),s=a;return r}class fh{static area(e){const t=e.length;let n=0;for(let r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return n*.5}static isClockWise(e){return fh.area(e)<0}static triangulateShape(e,t){const n=[],r=[],a=[];oN(e),lN(n,e);let s=e.length;t.forEach(oN);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,lN(n,t[c]);const o=Cce.triangulate(n,r);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}}function oN(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function lN(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class aE extends Xi{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],a=[];for(let o=0,c=e.length;o<c;o++){const f=e[o];s(f)}this.setAttribute("position",new ma(r,3)),this.setAttribute("uv",new ma(a,2)),this.computeVertexNormals();function s(o){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1;let m=t.depth!==void 0?t.depth:100,v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:6,_=t.bevelSize!==void 0?t.bevelSize:y-2,A=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:Xce;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),m=t.amount);let D,B=!1,U,w,O,I;x&&(D=x.getSpacedPoints(d),B=!0,v=!1,U=x.computeFrenetFrames(d,!1),w=new ve,O=new ve,I=new ve),v||(S=0,y=0,_=0,A=0);const L=o.extractPoints(f);let R=L.shape;const F=L.holes;if(!fh.isClockWise(R)){R=R.reverse();for(let be=0,ye=F.length;be<ye;be++){const j=F[be];fh.isClockWise(j)&&(F[be]=j.reverse())}}const V=fh.triangulateShape(R,F),$=R;for(let be=0,ye=F.length;be<ye;be++){const j=F[be];R=R.concat(j)}function K(be,ye,j){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().multiplyScalar(j).add(be)}const z=R.length,ee=V.length;function ne(be,ye,j){let ze,Pe,ae;const Z=be.x-ye.x,Ie=be.y-ye.y,Se=j.x-be.x,We=j.y-be.y,ht=Z*Z+Ie*Ie,te=Z*We-Ie*Se;if(Math.abs(te)>Number.EPSILON){const k=Math.sqrt(ht),ie=Math.sqrt(Se*Se+We*We),Ee=ye.x-Ie/k,Be=ye.y+Z/k,Ue=j.x-We/ie,He=j.y+Se/ie,ft=((Ue-Ee)*We-(He-Be)*Se)/(Z*We-Ie*Se);ze=Ee+Z*ft-be.x,Pe=Be+Ie*ft-be.y;const Et=ze*ze+Pe*Pe;if(Et<=2)return new It(ze,Pe);ae=Math.sqrt(Et/2)}else{let k=!1;Z>Number.EPSILON?Se>Number.EPSILON&&(k=!0):Z<-Number.EPSILON?Se<-Number.EPSILON&&(k=!0):Math.sign(Ie)===Math.sign(We)&&(k=!0),k?(ze=-Ie,Pe=Z,ae=Math.sqrt(ht)):(ze=Z,Pe=Ie,ae=Math.sqrt(ht/2))}return new It(ze/ae,Pe/ae)}const de=[];for(let be=0,ye=$.length,j=ye-1,ze=be+1;be<ye;be++,j++,ze++)j===ye&&(j=0),ze===ye&&(ze=0),de[be]=ne($[be],$[j],$[ze]);const Y=[];let fe,Re=de.concat();for(let be=0,ye=F.length;be<ye;be++){const j=F[be];fe=[];for(let ze=0,Pe=j.length,ae=Pe-1,Z=ze+1;ze<Pe;ze++,ae++,Z++)ae===Pe&&(ae=0),Z===Pe&&(Z=0),fe[ze]=ne(j[ze],j[ae],j[Z]);Y.push(fe),Re=Re.concat(fe)}for(let be=0;be<S;be++){const ye=be/S,j=y*Math.cos(ye*Math.PI/2),ze=_*Math.sin(ye*Math.PI/2)+A;for(let Pe=0,ae=$.length;Pe<ae;Pe++){const Z=K($[Pe],de[Pe],ze);Ze(Z.x,Z.y,-j)}for(let Pe=0,ae=F.length;Pe<ae;Pe++){const Z=F[Pe];fe=Y[Pe];for(let Ie=0,Se=Z.length;Ie<Se;Ie++){const We=K(Z[Ie],fe[Ie],ze);Ze(We.x,We.y,-j)}}}const Le=_+A;for(let be=0;be<z;be++){const ye=v?K(R[be],Re[be],Le):R[be];B?(O.copy(U.normals[0]).multiplyScalar(ye.x),w.copy(U.binormals[0]).multiplyScalar(ye.y),I.copy(D[0]).add(O).add(w),Ze(I.x,I.y,I.z)):Ze(ye.x,ye.y,0)}for(let be=1;be<=d;be++)for(let ye=0;ye<z;ye++){const j=v?K(R[ye],Re[ye],Le):R[ye];B?(O.copy(U.normals[be]).multiplyScalar(j.x),w.copy(U.binormals[be]).multiplyScalar(j.y),I.copy(D[be]).add(O).add(w),Ze(I.x,I.y,I.z)):Ze(j.x,j.y,m/d*be)}for(let be=S-1;be>=0;be--){const ye=be/S,j=y*Math.cos(ye*Math.PI/2),ze=_*Math.sin(ye*Math.PI/2)+A;for(let Pe=0,ae=$.length;Pe<ae;Pe++){const Z=K($[Pe],de[Pe],ze);Ze(Z.x,Z.y,m+j)}for(let Pe=0,ae=F.length;Pe<ae;Pe++){const Z=F[Pe];fe=Y[Pe];for(let Ie=0,Se=Z.length;Ie<Se;Ie++){const We=K(Z[Ie],fe[Ie],ze);B?Ze(We.x,We.y+D[d-1].y,D[d-1].x+j):Ze(We.x,We.y,m+j)}}}oe(),ke();function oe(){const be=r.length/3;if(v){let ye=0,j=z*ye;for(let ze=0;ze<ee;ze++){const Pe=V[ze];Ae(Pe[2]+j,Pe[1]+j,Pe[0]+j)}ye=d+S*2,j=z*ye;for(let ze=0;ze<ee;ze++){const Pe=V[ze];Ae(Pe[0]+j,Pe[1]+j,Pe[2]+j)}}else{for(let ye=0;ye<ee;ye++){const j=V[ye];Ae(j[2],j[1],j[0])}for(let ye=0;ye<ee;ye++){const j=V[ye];Ae(j[0]+z*d,j[1]+z*d,j[2]+z*d)}}n.addGroup(be,r.length/3-be,0)}function ke(){const be=r.length/3;let ye=0;Ge($,ye),ye+=$.length;for(let j=0,ze=F.length;j<ze;j++){const Pe=F[j];Ge(Pe,ye),ye+=Pe.length}n.addGroup(be,r.length/3-be,1)}function Ge(be,ye){let j=be.length;for(;--j>=0;){const ze=j;let Pe=j-1;Pe<0&&(Pe=be.length-1);for(let ae=0,Z=d+S*2;ae<Z;ae++){const Ie=z*ae,Se=z*(ae+1),We=ye+ze+Ie,ht=ye+Pe+Ie,te=ye+Pe+Se,k=ye+ze+Se;Q(We,ht,te,k)}}}function Ze(be,ye,j){c.push(be),c.push(ye),c.push(j)}function Ae(be,ye,j){le(be),le(ye),le(j);const ze=r.length/3,Pe=E.generateTopUV(n,r,ze-3,ze-2,ze-1);me(Pe[0]),me(Pe[1]),me(Pe[2])}function Q(be,ye,j,ze){le(be),le(ye),le(ze),le(ye),le(j),le(ze);const Pe=r.length/3,ae=E.generateSideWallUV(n,r,Pe-6,Pe-3,Pe-2,Pe-1);me(ae[0]),me(ae[1]),me(ae[3]),me(ae[1]),me(ae[2]),me(ae[3])}function le(be){r.push(c[be*3+0]),r.push(c[be*3+1]),r.push(c[be*3+2])}function me(be){a.push(be.x),a.push(be.y)}}}toJSON(){const e=Xi.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return $ce(t,n,e)}}const Xce={generateTopUV:function(i,e,t,n,r){const a=e[t*3],s=e[t*3+1],o=e[n*3],c=e[n*3+1],f=e[r*3],d=e[r*3+1];return[new It(a,s),new It(o,c),new It(f,d)]},generateSideWallUV:function(i,e,t,n,r,a){const s=e[t*3],o=e[t*3+1],c=e[t*3+2],f=e[n*3],d=e[n*3+1],m=e[n*3+2],v=e[r*3],y=e[r*3+1],_=e[r*3+2],A=e[a*3],S=e[a*3+1],x=e[a*3+2];return Math.abs(o-d)<.01?[new It(s,1-c),new It(f,1-m),new It(v,1-_),new It(A,1-x)]:[new It(o,1-c),new It(d,1-m),new It(y,1-_),new It(S,1-x)]}};function $ce(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const a=i[n];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class jce extends Xi{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(o,c,d),o+=c,c=0;this.setIndex(n),this.setAttribute("position",new ma(r,3)),this.setAttribute("normal",new ma(a,3)),this.setAttribute("uv",new ma(s,2));function f(d){const m=r.length/3,v=d.extractPoints(t);let y=v.shape;const _=v.holes;fh.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,x=_.length;S<x;S++){const E=_[S];fh.isClockWise(E)===!0&&(_[S]=E.reverse())}const A=fh.triangulateShape(y,_);for(let S=0,x=_.length;S<x;S++){const E=_[S];y=y.concat(E)}for(let S=0,x=y.length;S<x;S++){const E=y[S];r.push(E.x,E.y,0),a.push(0,0,1),s.push(E.x,E.y)}for(let S=0,x=A.length;S<x;S++){const E=A[S],D=E[0]+m,B=E[1]+m,U=E[2]+m;n.push(D,B,U),c+=3}}}toJSON(){const e=Xi.prototype.toJSON.call(this),t=this.parameters.shapes;return qce(t,e)}}function qce(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Yce extends ga{constructor(e){super(),this.type="ShadowMaterial",this.color=new _n(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Yce.prototype.isShadowMaterial=!0;class Kce extends dp{constructor(e){super(e),this.type="RawShaderMaterial"}}Kce.prototype.isRawShaderMaterial=!0;class Gz extends ga{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _n(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}Gz.prototype.isMeshStandardMaterial=!0;class Jce extends Gz{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=oo(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new _n).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this}}Jce.prototype.isMeshPhysicalMaterial=!0;class Zce extends ga{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new _n(16777215),this.specular=new _n(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}Zce.prototype.isMeshPhongMaterial=!0;class Qce extends ga{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _n(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}Qce.prototype.isMeshToonMaterial=!0;class eue extends ga{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}eue.prototype.isMeshNormalMaterial=!0;class tue extends ga{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}tue.prototype.isMeshLambertMaterial=!0;class nue extends ga{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _n(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}nue.prototype.isMeshMatcapMaterial=!0;class iue extends D_{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}iue.prototype.isLineDashedMaterial=!0;const nr={arraySlice:function(i,e,t){return nr.isTypedArray(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)},convertArray:function(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){function e(r,a){return i[r]-i[a]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n},sortedArray:function(i,e,t){const n=i.length,r=new i.constructor(n);for(let a=0,s=0;s!==n;++a){const o=t[a]*e;for(let c=0;c!==e;++c)r[s++]=i[o+c]}return r},flattenJSON:function(i,e,t,n){let r=1,a=i[0];for(;a!==void 0&&a[n]===void 0;)a=i[r++];if(a===void 0)return;let s=a[n];if(s!==void 0)if(Array.isArray(s))do s=a[n],s!==void 0&&(e.push(a.time),t.push.apply(t,s)),a=i[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[n],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=i[r++];while(a!==void 0);else do s=a[n],s!==void 0&&(e.push(a.time),t.push(s)),a=i[r++];while(a!==void 0)},subclip:function(i,e,t,n,r=30){const a=i.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],d=f.getValueSize(),m=[],v=[];for(let y=0;y<f.times.length;++y){const _=f.times[y]*r;if(!(_<t||_>=n)){m.push(f.times[y]);for(let A=0;A<d;++A)v.push(f.values[y*d+A])}}m.length!==0&&(f.times=nr.convertArray(m,f.times.constructor),f.values=nr.convertArray(v,f.values.constructor),s.push(f))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,a=e/n;for(let s=0;s<r;++s){const o=t.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const f=i.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===c});if(f===void 0)continue;let d=0;const m=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let v=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const _=o.times.length-1;let A;if(a<=o.times[0]){const x=d,E=m-d;A=nr.arraySlice(o.values,x,E)}else if(a>=o.times[_]){const x=_*m+d,E=x+m-d;A=nr.arraySlice(o.values,x,E)}else{const x=o.createInterpolant(),E=d,D=m-d;x.evaluate(a),A=nr.arraySlice(x.resultBuffer,E,D)}c==="quaternion"&&new Ss().fromArray(A).normalize().conjugate().toArray(A);const S=f.times.length;for(let x=0;x<S;++x){const E=x*y+v;if(c==="quaternion")Ss.multiplyQuaternionsFlat(f.values,E,A,0,f.values,E);else{const D=y-v*2;for(let B=0;B<D;++B)f.values[E+B]-=A[B]}}}return i.blendMode=fz,i}};class _h{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===o)break;if(a=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(n=2,a=o);for(let c=n-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===c)break;if(r=a,a=t[--n-1],e>=a)break t}s=n,n=0;break n}break e}for(;n<s;){const o=n+s>>>1;e<t[o]?s=o:n=o+1}if(r=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=n[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}_h.prototype.beforeStart_=_h.prototype.copySampleValue_;_h.prototype.afterEnd_=_h.prototype.copySampleValue_;class rue extends _h{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_g,endingEnd:_g}}intervalChanged_(e,t,n){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],c=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case xg:a=e,o=2*t-n;break;case sM:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=n}if(c===void 0)switch(this.getSettings_().endingEnd){case xg:s=e,c=2*n-t;break;case sM:s=1,c=n+r[1]-r[0];break;default:s=e-1,c=t}const f=(n-t)*.5,d=this.valueSize;this._weightPrev=f/(t-o),this._weightNext=f/(c-n),this._offsetPrev=a*d,this._offsetNext=s*d}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,d=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,_=(n-t)/(r-t),A=_*_,S=A*_,x=-v*S+2*v*A-v*_,E=(1+v)*S+(-1.5-2*v)*A+(-.5+v)*_+1,D=(-1-y)*S+(1.5+y)*A+.5*_,B=y*S-y*A;for(let U=0;U!==o;++U)a[U]=x*s[d+U]+E*s[f+U]+D*s[c+U]+B*s[m+U];return a}}class Vz extends _h{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,d=(n-t)/(r-t),m=1-d;for(let v=0;v!==o;++v)a[v]=s[f+v]*m+s[c+v]*d;return a}}class aue extends _h{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Xc{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nr.convertArray(t,this.TimeBufferType),this.values=nr.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:nr.convertArray(e.times,Array),values:nr.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new aue(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Vz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new rue(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case rM:t=this.InterpolantFactoryMethodDiscrete;break;case aM:t=this.InterpolantFactoryMethodLinear;break;case tw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rM;case this.InterpolantFactoryMethodLinear:return aM;case this.InterpolantFactoryMethodSmooth:return tw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let a=0,s=r-1;for(;a!==r&&n[a]<e;)++a;for(;s!==-1&&n[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=nr.arraySlice(n,a,s),this.values=nr.arraySlice(this.values,a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=n[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(r!==void 0&&nr.isTypedArray(r))for(let o=0,c=r.length;o!==c;++o){const f=r[o];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,f),e=!1;break}}return e}optimize(){const e=nr.arraySlice(this.times),t=nr.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===tw,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const f=e[o],d=e[o+1];if(f!==d&&(o!==1||f!==e[0]))if(r)c=!0;else{const m=o*n,v=m-n,y=m+n;for(let _=0;_!==n;++_){const A=t[m+_];if(A!==t[v+_]||A!==t[y+_]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const m=o*n,v=s*n;for(let y=0;y!==n;++y)t[v+y]=t[m+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*n,c=s*n,f=0;f!==n;++f)t[c+f]=t[o+f];++s}return s!==e.length?(this.times=nr.arraySlice(e,0,s),this.values=nr.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=nr.arraySlice(this.times,0),t=nr.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Xc.prototype.TimeBufferType=Float32Array;Xc.prototype.ValueBufferType=Float32Array;Xc.prototype.DefaultInterpolation=aM;class dv extends Xc{}dv.prototype.ValueTypeName="bool";dv.prototype.ValueBufferType=Array;dv.prototype.DefaultInterpolation=rM;dv.prototype.InterpolantFactoryMethodLinear=void 0;dv.prototype.InterpolantFactoryMethodSmooth=void 0;class kz extends Xc{}kz.prototype.ValueTypeName="color";class lM extends Xc{}lM.prototype.ValueTypeName="number";class sue extends _h{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(n-t)/(r-t);let f=e*o;for(let d=f+o;f!==d;f+=4)Ss.slerpFlat(a,0,s,f-o,s,f,c);return a}}class B_ extends Xc{InterpolantFactoryMethodLinear(e){return new sue(this.times,this.values,this.getValueSize(),e)}}B_.prototype.ValueTypeName="quaternion";B_.prototype.DefaultInterpolation=aM;B_.prototype.InterpolantFactoryMethodSmooth=void 0;class pv extends Xc{}pv.prototype.ValueTypeName="string";pv.prototype.ValueBufferType=Array;pv.prototype.DefaultInterpolation=rM;pv.prototype.InterpolantFactoryMethodLinear=void 0;pv.prototype.InterpolantFactoryMethodSmooth=void 0;class cM extends Xc{}cM.prototype.ValueTypeName="vector";class cN{constructor(e,t=-1,n,r=MR){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Fc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,o=n.length;s!==o;++s)t.push(lue(n[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=n.length;a!==s;++a)t.push(Xc.toJSON(n[a]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const a=t.length,s=[];for(let o=0;o<a;o++){let c=[],f=[];c.push((o+a-1)%a,o,(o+1)%a),f.push(0,1,0);const d=nr.getKeyframeOrder(c);c=nr.sortedArray(c,1,d),f=nr.sortedArray(f,1,d),!r&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new lM(".morphTargetInfluences["+t[o].name+"]",c,f).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const f=e[o],d=f.name.match(a);if(d&&d.length>1){const m=d[1];let v=r[m];v||(r[m]=v=[]),v.push(f)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,v,y,_,A){if(y.length!==0){const S=[],x=[];nr.flattenJSON(y,S,x,_),S.length!==0&&A.push(new m(v,S,x))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let m=0;m<f.length;m++){const v=f[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let _;for(_=0;_<v.length;_++)if(v[_].morphTargets)for(let A=0;A<v[_].morphTargets.length;A++)y[v[_].morphTargets[A]]=-1;for(const A in y){const S=[],x=[];for(let E=0;E!==v[_].morphTargets.length;++E){const D=v[_];S.push(D.time),x.push(D.morphTarget===A?1:0)}r.push(new lM(".morphTargetInfluence["+A+"]",S,x))}c=y.length*s}else{const y=".bones["+t[m].name+"]";n(cM,y+".position",v,"pos",r),n(B_,y+".quaternion",v,"rot",r),n(cM,y+".scale",v,"scl",r)}}return r.length===0?null:new this(a,c,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function oue(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lM;case"vector":case"vector2":case"vector3":case"vector4":return cM;case"color":return kz;case"quaternion":return B_;case"bool":case"boolean":return dv;case"string":return pv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function lue(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oue(i.type);if(i.times===void 0){const t=[],n=[];nr.flattenJSON(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Wg={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class cue{constructor(e,t,n){const r=this;let a=!1,s=0,o=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){o++,a===!1&&r.onStart!==void 0&&r.onStart(d,s,o),a=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,m){return f.push(d,m),this},this.removeHandler=function(d){const m=f.indexOf(d);return m!==-1&&f.splice(m,2),this},this.getHandler=function(d){for(let m=0,v=f.length;m<v;m+=2){const y=f[m],_=f[m+1];if(y.global&&(y.lastIndex=0),y.test(d))return _}return null}}}const uue=new cue;class Ah{constructor(e){this.manager=e!==void 0?e:uue,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,a){n.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Dl={};class fue extends Ah{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Wg.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;if(Dl[e]!==void 0){Dl[e].push({onLoad:t,onProgress:n,onError:r});return}const o=/^data:(.*?)(;base64)?,(.*)$/,c=e.match(o);let f;if(c){const d=c[1],m=!!c[2];let v=c[3];v=decodeURIComponent(v),m&&(v=atob(v));try{let y;const _=(this.responseType||"").toLowerCase();switch(_){case"arraybuffer":case"blob":const A=new Uint8Array(v.length);for(let x=0;x<v.length;x++)A[x]=v.charCodeAt(x);_==="blob"?y=new Blob([A.buffer],{type:d}):y=A.buffer;break;case"document":y=new DOMParser().parseFromString(v,d);break;case"json":y=JSON.parse(v);break;default:y=v;break}setTimeout(function(){t&&t(y),a.manager.itemEnd(e)},0)}catch(y){setTimeout(function(){r&&r(y),a.manager.itemError(e),a.manager.itemEnd(e)},0)}}else{Dl[e]=[],Dl[e].push({onLoad:t,onProgress:n,onError:r}),f=new XMLHttpRequest,f.open("GET",e,!0),f.addEventListener("load",function(d){const m=this.response,v=Dl[e];if(delete Dl[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Wg.add(e,m);for(let y=0,_=v.length;y<_;y++){const A=v[y];A.onLoad&&A.onLoad(m)}a.manager.itemEnd(e)}else{for(let y=0,_=v.length;y<_;y++){const A=v[y];A.onError&&A.onError(d)}a.manager.itemError(e),a.manager.itemEnd(e)}},!1),f.addEventListener("progress",function(d){const m=Dl[e];for(let v=0,y=m.length;v<y;v++){const _=m[v];_.onProgress&&_.onProgress(d)}},!1),f.addEventListener("error",function(d){const m=Dl[e];delete Dl[e];for(let v=0,y=m.length;v<y;v++){const _=m[v];_.onError&&_.onError(d)}a.manager.itemError(e),a.manager.itemEnd(e)},!1),f.addEventListener("abort",function(d){const m=Dl[e];delete Dl[e];for(let v=0,y=m.length;v<y;v++){const _=m[v];_.onError&&_.onError(d)}a.manager.itemError(e),a.manager.itemEnd(e)},!1),this.responseType!==void 0&&(f.responseType=this.responseType),this.withCredentials!==void 0&&(f.withCredentials=this.withCredentials),f.overrideMimeType&&f.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const d in this.requestHeader)f.setRequestHeader(d,this.requestHeader[d]);f.send(null)}return a.manager.itemStart(e),f}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Wz extends Ah{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Wg.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function c(){o.removeEventListener("load",c,!1),o.removeEventListener("error",f,!1),Wg.add(e,this),t&&t(this),a.manager.itemEnd(e)}function f(d){o.removeEventListener("load",c,!1),o.removeEventListener("error",f,!1),r&&r(d),a.manager.itemError(e),a.manager.itemEnd(e)}return o.addEventListener("load",c,!1),o.addEventListener("error",f,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class hue extends Ah{constructor(e){super(e)}load(e,t,n,r){const a=new nE,s=new Wz(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(f){s.load(e[f],function(d){a.images[f]=d,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return a}}class due extends Ah{constructor(e){super(e)}load(e,t,n,r){const a=new Ia,s=new Wz(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o;const c=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;a.format=c?ep:Ul,a.needsUpdate=!0,t!==void 0&&t(a)},n,r),a}}class qo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),a+=n.distanceTo(r),t.push(a),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const a=n.length;let s;t?s=t:s=e*n[a-1];let o=0,c=a-1,f;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),f=n[r]-s,f<0)o=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,n[r]===s)return r/(a-1);const d=n[r],v=n[r+1]-d,y=(s-d)/v;return(r+y)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),c=t||(s.isVector2?new It:new ve);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ve,r=[],a=[],s=[],o=new ve,c=new bn;for(let y=0;y<=e;y++){const _=y/e;r[y]=this.getTangentAt(_,new ve),r[y].normalize()}a[0]=new ve,s[0]=new ve;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),m=Math.abs(r[0].y),v=Math.abs(r[0].z);d<=f&&(f=d,n.set(1,0,0)),m<=f&&(f=m,n.set(0,1,0)),v<=f&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(r[y-1],r[y]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(oo(r[y-1].dot(r[y]),-1,1));a[y].applyMatrix4(c.makeRotationAxis(o,_))}s[y].crossVectors(r[y],a[y])}if(t===!0){let y=Math.acos(oo(a[0].dot(a[e]),-1,1));y/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let _=1;_<=e;_++)a[_].applyMatrix4(c.makeRotationAxis(r[_],y*_)),s[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class sE extends qo{constructor(e=0,t=0,n=1,r=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,t){const n=t||new It,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=c-this.aX,y=f-this.aY;c=v*d-y*m+this.aX,f=v*m+y*d+this.aY}return n.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}sE.prototype.isEllipseCurve=!0;class Xz extends sE{constructor(e,t,n,r,a,s){super(e,t,n,n,r,a,s),this.type="ArcCurve"}}Xz.prototype.isArcCurve=!0;function DR(){let i=0,e=0,t=0,n=0;function r(a,s,o,c){i=a,e=o,t=-3*a+3*s-2*o-c,n=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,f){r(s,o,f*(o-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,f,d,m){let v=(s-a)/f-(o-a)/(f+d)+(o-s)/d,y=(o-s)/d-(c-s)/(d+m)+(c-o)/m;v*=d,y*=d,r(s,o,v,y)},calc:function(a){const s=a*a,o=s*a;return i+e*a+t*s+n*o}}}const Hb=new ve,Lw=new DR,Iw=new DR,Pw=new DR;class $z extends qo{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ve){const n=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let f,d;this.closed||o>0?f=r[(o-1)%a]:(Hb.subVectors(r[0],r[1]).add(r[0]),f=Hb);const m=r[o%a],v=r[(o+1)%a];if(this.closed||o+2<a?d=r[(o+2)%a]:(Hb.subVectors(r[a-1],r[a-2]).add(r[a-1]),d=Hb),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(m),y),A=Math.pow(m.distanceToSquared(v),y),S=Math.pow(v.distanceToSquared(d),y);A<1e-4&&(A=1),_<1e-4&&(_=A),S<1e-4&&(S=A),Lw.initNonuniformCatmullRom(f.x,m.x,v.x,d.x,_,A,S),Iw.initNonuniformCatmullRom(f.y,m.y,v.y,d.y,_,A,S),Pw.initNonuniformCatmullRom(f.z,m.z,v.z,d.z,_,A,S)}else this.curveType==="catmullrom"&&(Lw.initCatmullRom(f.x,m.x,v.x,d.x,this.tension),Iw.initCatmullRom(f.y,m.y,v.y,d.y,this.tension),Pw.initCatmullRom(f.z,m.z,v.z,d.z,this.tension));return n.set(Lw.calc(c),Iw.calc(c),Pw.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ve().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}$z.prototype.isCatmullRomCurve3=!0;function uN(i,e,t,n,r){const a=(n-e)*.5,s=(r-t)*.5,o=i*i,c=i*o;return(2*t-2*n+a+s)*c+(-3*t+3*n-2*a-s)*o+a*i+t}function pue(i,e){const t=1-i;return t*t*e}function mue(i,e){return 2*(1-i)*i*e}function gue(i,e){return i*i*e}function Iy(i,e,t,n){return pue(i,e)+mue(i,t)+gue(i,n)}function vue(i,e){const t=1-i;return t*t*t*e}function yue(i,e){const t=1-i;return 3*t*t*i*e}function _ue(i,e){return 3*(1-i)*i*i*e}function xue(i,e){return i*i*i*e}function Py(i,e,t,n,r){return vue(i,e)+yue(i,t)+_ue(i,n)+xue(i,r)}class BR extends qo{constructor(e=new It,t=new It,n=new It,r=new It){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new It){const n=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return n.set(Py(e,r.x,a.x,s.x,o.x),Py(e,r.y,a.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}BR.prototype.isCubicBezierCurve=!0;class jz extends qo{constructor(e=new ve,t=new ve,n=new ve,r=new ve){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ve){const n=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return n.set(Py(e,r.x,a.x,s.x,o.x),Py(e,r.y,a.y,s.y,o.y),Py(e,r.z,a.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}jz.prototype.isCubicBezierCurve3=!0;class oE extends qo{constructor(e=new It,t=new It){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new It){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new It;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}oE.prototype.isLineCurve=!0;class bue extends qo{constructor(e=new ve,t=new ve){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ve){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LR extends qo{constructor(e=new It,t=new It,n=new It){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new It){const n=t,r=this.v0,a=this.v1,s=this.v2;return n.set(Iy(e,r.x,a.x,s.x),Iy(e,r.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}LR.prototype.isQuadraticBezierCurve=!0;class qz extends qo{constructor(e=new ve,t=new ve,n=new ve){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ve){const n=t,r=this.v0,a=this.v1,s=this.v2;return n.set(Iy(e,r.x,a.x,s.x),Iy(e,r.y,a.y,s.y),Iy(e,r.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}qz.prototype.isQuadraticBezierCurve3=!0;class IR extends qo{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new It){const n=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,c=r[s===0?s:s-1],f=r[s],d=r[s>r.length-2?r.length-1:s+1],m=r[s>r.length-3?r.length-1:s+2];return n.set(uN(o,c.x,f.x,d.x,m.x),uN(o,c.y,f.y,d.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new It().fromArray(r))}return this}}IR.prototype.isSplineCurve=!0;var Sue=Object.freeze({__proto__:null,ArcCurve:Xz,CatmullRomCurve3:$z,CubicBezierCurve:BR,CubicBezierCurve3:jz,EllipseCurve:sE,LineCurve:oE,LineCurve3:bue,QuadraticBezierCurve:LR,QuadraticBezierCurve3:qz,SplineCurve:IR});class Mue extends qo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new oE(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const a=n[r]-t,s=this.curves[r],o=s.getLength(),c=o===0?0:1-a/o;return s.getPointAt(c)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s&&s.isEllipseCurve?e*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let f=0;f<c.length;f++){const d=c[f];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Sue[r.type]().fromJSON(r))}return this}}class V2 extends Mue{constructor(e){super(),this.type="Path",this.currentPoint=new It,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new oE(this.currentPoint.clone(),new It(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const a=new LR(this.currentPoint.clone(),new It(e,t),new It(n,r));return this.curves.push(a),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,a,s){const o=new BR(this.currentPoint.clone(),new It(e,t),new It(n,r),new It(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new IR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,n,r,a,s),this}absarc(e,t,n,r,a,s){return this.absellipse(e,t,n,n,r,a,s),this}ellipse(e,t,n,r,a,s,o,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,n,r,a,s,o,c),this}absellipse(e,t,n,r,a,s,o,c){const f=new sE(e,t,n,r,a,s,o,c);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class PR extends V2{constructor(e){super(e),this.uuid=Fc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new V2().fromJSON(r))}return this}}class Gc extends _i{constructor(e,t=1){super(),this.type="Light",this.color=new _n(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Gc.prototype.isLight=!0;class Eue extends Gc{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(_i.DefaultUp),this.updateMatrix(),this.groundColor=new _n(t)}copy(e){return Gc.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Eue.prototype.isHemisphereLight=!0;const fN=new bn,hN=new ve,dN=new ve;class NR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new It(512,512),this.map=null,this.mapPass=null,this.matrix=new bn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iE,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new Ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;hN.setFromMatrixPosition(e.matrixWorld),t.position.copy(hN),dN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dN),t.updateMatrixWorld(),fN.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fN),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yz extends NR{constructor(){super(new lo(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=U2*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Yz.prototype.isSpotLightShadow=!0;class Aue extends Gc{constructor(e,t,n=0,r=Math.PI/3,a=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(_i.DefaultUp),this.updateMatrix(),this.target=new _i,this.distance=n,this.angle=r,this.penumbra=a,this.decay=s,this.shadow=new Yz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Aue.prototype.isSpotLight=!0;const pN=new bn,sy=new ve,Nw=new ve;class Kz extends NR{constructor(){super(new lo(90,1,.5,500)),this._frameExtents=new It(4,2),this._viewportCount=6,this._viewports=[new Ni(2,1,1,1),new Ni(0,1,1,1),new Ni(3,1,1,1),new Ni(1,1,1,1),new Ni(3,0,1,1),new Ni(1,0,1,1)],this._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],this._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),sy.setFromMatrixPosition(e.matrixWorld),n.position.copy(sy),Nw.copy(n.position),Nw.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Nw),n.updateMatrixWorld(),r.makeTranslation(-sy.x,-sy.y,-sy.z),pN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pN)}}Kz.prototype.isPointLightShadow=!0;class Tue extends Gc{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Kz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Tue.prototype.isPointLight=!0;class Jz extends TR{constructor(e=-1,t=1,n=1,r=-1,a=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=n-e,s=n+e,o=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Jz.prototype.isOrthographicCamera=!0;class Zz extends NR{constructor(){super(new Jz(-5,5,5,-5,.5,500))}}Zz.prototype.isDirectionalLightShadow=!0;class wue extends Gc{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(_i.DefaultUp),this.updateMatrix(),this.target=new _i,this.shadow=new Zz}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}wue.prototype.isDirectionalLight=!0;class Cue extends Gc{constructor(e,t){super(e,t),this.type="AmbientLight"}}Cue.prototype.isAmbientLight=!0;class Rue extends Gc{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Rue.prototype.isRectAreaLight=!0;class Qz{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ve)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],1.092548*(n*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(n*a)),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*n),t.addScaledVector(s[4],2*.429043*n*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*n*a),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-r*r)}}Qz.prototype.isSphericalHarmonics3=!0;class OR extends Gc{constructor(e=new Qz,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}OR.prototype.isLightProbe=!0;class Due{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}}class Bue extends Xi{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Bue.prototype.isInstancedBufferGeometry=!0;class Lue extends pa{constructor(e,t,n,r){typeof n=="number"&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r||1}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Lue.prototype.isInstancedBufferAttribute=!0;class Iue extends Ah{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Wg.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){Wg.add(e,c),t&&t(c),a.manager.itemEnd(e)}).catch(function(c){r&&r(c),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}Iue.prototype.isImageBitmapLoader=!0;let Gb;const Pue={getContext:function(){return Gb===void 0&&(Gb=new(window.AudioContext||window.webkitAudioContext)),Gb},setContext:function(i){Gb=i}};class Nue extends Ah{constructor(e){super(e)}load(e,t,n,r){const a=this,s=new fue(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{const c=o.slice(0);Pue.getContext().decodeAudioData(c,function(d){t(d)})}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},n,r)}}class Oue extends OR{constructor(e,t,n=1){super(void 0,n);const r=new _n().set(e),a=new _n().set(t),s=new ve(r.r,r.g,r.b),o=new ve(a.r,a.g,a.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(c),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(f)}}Oue.prototype.isHemisphereLightProbe=!0;class Uue extends OR{constructor(e,t=1){super(void 0,t);const n=new _n().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Uue.prototype.isAmbientLightProbe=!0;class Fue extends _i{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class zue{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)n[a+o]=n[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(n,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(n,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(n[c]!==n[c+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let a=n,s=r;a!==s;++a)t[a]=t[r+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){Ss.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,a){const s=this._workIndex*a;Ss.multiplyQuaternionsFlat(e,s,e,t,e,n),Ss.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,a){const s=1-r;for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[n+s]*r}}}const UR="\\[\\]\\.:\\/",Hue=new RegExp("["+UR+"]","g"),FR="[^"+UR+"]",Gue="[^"+UR.replace("\\.","")+"]",Vue=/((?:WC+[\/:])*)/.source.replace("WC",FR),kue=/(WCOD+)?/.source.replace("WCOD",Gue),Wue=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",FR),Xue=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",FR),$ue=new RegExp("^"+Vue+kue+Wue+Xue+"$"),jue=["material","materials","bones"];class que{constructor(e,t,n){const r=n||wi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class wi{constructor(e,t,n){this.path=t,this.parsedPath=n||wi.parseTrackName(t),this.node=wi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new wi.Composite(e,t,n):new wi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Hue,"")}static parseTrackName(e){const t=$ue.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=n.nodeName.substring(r+1);jue.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const c=n(o.children);if(c)return c}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=wi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let f=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}wi.Composite=que;wi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};wi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};wi.prototype.GetterByBindingType=[wi.prototype._getValue_direct,wi.prototype._getValue_array,wi.prototype._getValue_arrayElement,wi.prototype._getValue_toArray];wi.prototype.SetterByBindingTypeAndVersioning=[[wi.prototype._setValue_direct,wi.prototype._setValue_direct_setNeedsUpdate,wi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wi.prototype._setValue_array,wi.prototype._setValue_array_setNeedsUpdate,wi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wi.prototype._setValue_arrayElement,wi.prototype._setValue_arrayElement_setNeedsUpdate,wi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wi.prototype._setValue_fromArray,wi.prototype._setValue_fromArray_setNeedsUpdate,wi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Yue{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const a=t.tracks,s=a.length,o=new Array(s),c={endingStart:_g,endingEnd:_g};for(let f=0;f!==s;++f){const d=a[f].createInterpolant(null);o[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Cre,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=a,c[1]=a+n,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*n;if(c<0||n===0)return;this._startTime=null,t=n*c}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case fz:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(s),f[d].accumulateAdditive(o);break;case MR:default:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(s),f[d].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,a=this._loopCount;const s=n===Rre;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(n===wre){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=xg,r.endingEnd=xg):(e?r.endingStart=this.zeroSlopeAtStart?xg:_g:r.endingStart=sM,t?r.endingEnd=this.zeroSlopeAtEnd?xg:_g:r.endingEnd=sM)}_scheduleFading(e,t,n){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=t,o[1]=a+e,c[1]=n,this}}class Kue extends xp{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,c=n.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let m=0;m!==a;++m){const v=r[m],y=v.name;let _=d[y];if(_!==void 0)s[m]=_;else{if(_=s[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,y));continue}const A=t&&t._propertyBindings[m].binding.parsedPath;_=new zue(wi.create(n,y,A),v.ValueTypeName,v.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,y),s[m]=_}o[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;const m=o.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,s=this._bindingsByRootAndName,o=s[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Vz(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?cN.findByName(r,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let f=null;if(n===void 0&&(s!==null?n=s.blendMode:n=MR),c!==void 0){const m=c.actionByRoot[a];if(m!==void 0&&m.blendMode===n)return m;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const d=new Yue(this,s,t,n);return this._bindAction(d,f),this._addInactiveAction(d,o,a),d}existingAction(e,t){const n=t||this._root,r=n.uuid,a=typeof e=="string"?cN.findByName(n,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==n;++f)t[f]._update(r,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)o[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const f=s[o];this._deactivateAction(f);const d=f._cacheIndex,m=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=d,t[d]=m,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const o=n[s].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Kue.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Jue extends bp{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n||1}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Jue.prototype.isInstancedInterleavedBuffer=!0;class Zue extends _i{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}Zue.prototype.isImmediateRenderObject=!0;const eh=new ve,Vb=new bn,Ow=new bn;class Que extends RR{constructor(e){const t=eH(e),n=new Xi,r=[],a=[],s=new _n(0,0,1),o=new _n(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}n.setAttribute("position",new ma(r,3)),n.setAttribute("color",new ma(a,3));const c=new D_({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ow.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(Vb.multiplyMatrices(Ow,o.matrixWorld),eh.setFromMatrixPosition(Vb),r.setXYZ(s,eh.x,eh.y,eh.z),Vb.multiplyMatrices(Ow,o.parent.matrixWorld),eh.setFromMatrixPosition(Vb),r.setXYZ(s+1,eh.x,eh.y,eh.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function eH(i){const e=[];i&&i.isBone&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,eH(i.children[t]));return e}class efe extends RR{constructor(e=10,t=10,n=4473924,r=8947848){n=new _n(n),r=new _n(r);const a=t/2,s=e/t,o=e/2,c=[],f=[];for(let v=0,y=0,_=-o;v<=t;v++,_+=s){c.push(-o,0,_,o,0,_),c.push(_,0,-o,_,0,o);const A=v===a?n:r;A.toArray(f,y),y+=3,A.toArray(f,y),y+=3,A.toArray(f,y),y+=3,A.toArray(f,y),y+=3}const d=new Xi;d.setAttribute("position",new ma(c,3)),d.setAttribute("color",new ma(f,3));const m=new D_({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}}const tfe=new Float32Array(1);new Int32Array(tfe.buffer);const nfe=new ER({side:ca,depthWrite:!1,depthTest:!1});new Wl(new AR,nfe);qo.create=function(i,e){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(qo.prototype),i.prototype.constructor=i,i.prototype.getPoint=e,i};V2.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)};efe.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Que.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Ah.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Due.extractUrlBase(i)};Ah.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Jo.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)};Jo.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Jo.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};Jo.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)};Jo.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)};cv.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};iE.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)};Da.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)};Da.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)};Da.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Da.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)};Da.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Da.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()};bn.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)};bn.prototype.flattenToArrayOffset=function(i,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,e)};bn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new ve().setFromMatrixColumn(this,3)};bn.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)};bn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};bn.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};bn.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};bn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};bn.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)};bn.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};bn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};bn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};bn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};bn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};bn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};bn.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)};bn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};bn.prototype.makeFrustum=function(i,e,t,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,e,n,t,r,a)};bn.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()};Pc.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)};Ss.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)};Ss.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};uv.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)};uv.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)};uv.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)};Jr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Jr.prototype.barycoordFromPoint=function(i,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,e)};Jr.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)};Jr.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)};Jr.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)};Jr.barycoordFromPoint=function(i,e,t,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Jr.getBarycoord(i,e,t,n,r)};Jr.normal=function(i,e,t,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Jr.getNormal(i,e,t,n)};PR.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)};PR.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new aE(this,i)};PR.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new jce(this,i)};It.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};It.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)};It.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};ve.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};ve.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};ve.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)};ve.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)};ve.prototype.getColumnFromMatrix=function(i,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,i)};ve.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)};ve.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};ve.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)};ve.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ni.prototype.fromAttribute=function(i,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,e,t)};Ni.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};_i.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)};_i.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};_i.prototype.translate=function(i,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,i)};_i.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};_i.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)};Object.defineProperties(_i.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Wl.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Wl.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Dre},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Oz.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};lo.prototype.setLens=function(i,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(i)};Object.defineProperties(Gc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}});Object.defineProperties(pa.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===oM},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(oM)}}});pa.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(i===!0?oM:Qy),this};pa.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},pa.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Xi.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)};Xi.prototype.addAttribute=function(i,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new pa(arguments[1],arguments[2]))):i==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(i,e)};Xi.prototype.addDrawCall=function(i,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,e)};Xi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Xi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Xi.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)};Xi.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)};Object.defineProperties(Xi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});bp.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(i===!0?oM:Qy),this};bp.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};aE.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};aE.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};aE.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Iz.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(ga.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _n}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===oz}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}}});Object.defineProperties(dp.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}});Hi.prototype.clearTarget=function(i,e,t,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(e,t,n)};Hi.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)};Hi.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Hi.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Hi.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Hi.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Hi.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Hi.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Hi.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Hi.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Hi.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Hi.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Hi.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Hi.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Hi.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)};Hi.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Hi.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Hi.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Hi.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Hi.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Hi.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Hi.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Hi.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Hi.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Hi.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Hi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=i===!0?hz:R_}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Bz.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(tp.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}});Fue.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new Nue().load(i,function(n){e.setBuffer(n)}),this};wR.prototype.updateCubeMap=function(i,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,e)};wR.prototype.clear=function(i,e,t,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,e,t,n)};lv.crossOrigin=void 0;lv.loadTexture=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new due;r.setCrossOrigin(this.crossOrigin);const a=r.load(i,t,void 0,n);return e&&(a.mapping=e),a};lv.loadTextureCube=function(i,e,t,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new hue;r.setCrossOrigin(this.crossOrigin);const a=r.load(i,t,void 0,n);return e&&(a.mapping=e),a};lv.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};lv.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:az}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=az);var ife=`#define GLSLIFY 1
// From https://github.com/hughsk/glsl-noise/blob/master/periodic/2d.glsl

//
// GLSL textureless classic 2D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-08-22
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }

vec4 permute(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }

vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

vec2 fade(vec2 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }

float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

// Classic Perlin noise, periodic variant
float perlin(vec2 P) {

  vec2 rep = vec2(255.0, 255.0);

  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
  Pi = mod(Pi, rep.xyxy); // To create noise with explicit period
  Pi = mod289(Pi);        // To avoid truncation effects in permutation
  vec4 ix = Pi.xzxz;
  vec4 iy = Pi.yyww;
  vec4 fx = Pf.xzxz;
  vec4 fy = Pf.yyww;

  vec4 i = permute(permute(ix) + iy);

  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0;
  vec4 gy = abs(gx) - 0.5;
  vec4 tx = floor(gx + 0.5);
  gx = gx - tx;

  vec2 g00 = vec2(gx.x, gy.x);
  vec2 g10 = vec2(gx.y, gy.y);
  vec2 g01 = vec2(gx.z, gy.z);
  vec2 g11 = vec2(gx.w, gy.w);

  vec4 norm = taylorInvSqrt(
      vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
  g00 *= norm.x;
  g01 *= norm.y;
  g10 *= norm.z;
  g11 *= norm.w;

  float n00 = dot(g00, vec2(fx.x, fy.x));
  float n10 = dot(g10, vec2(fx.y, fy.y));
  float n01 = dot(g01, vec2(fx.z, fy.z));
  float n11 = dot(g11, vec2(fx.w, fy.w));

  vec2 fade_xy = fade(Pf.xy);
  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
  return map(2.3 * n_xy, -1.0, 1.0, 0.0, 1.0);
}

float fbm(vec2 pos, vec4 props) {
  float persistance = props.x;
  float lacunarity = props.y;
  float redistribution = props.z;
  int octaves = int(props.w);

  float result = 0.0;
  float amplitude = 1.0;
  float frequency = 1.0;
  float maximum = amplitude;

  for (int i = 0; i < 2; i++) {

    vec2 p = pos.xy * frequency;

    float noiseVal = perlin(p);
    result += noiseVal * amplitude;

    frequency *= lacunarity;
    amplitude *= persistance;
    maximum += amplitude;
  }

  float redistributed = pow(result, redistribution);
  return redistributed / maximum;
}
`,mN=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];class rfe{constructor(e){const t=[new ve(1,1,0),new ve(-1,1,0),new ve(1,-1,0),new ve(-1,-1,0),new ve(1,0,1),new ve(-1,0,1),new ve(1,0,-1),new ve(-1,0,-1),new ve(0,1,1),new ve(0,-1,1),new ve(0,1,-1),new ve(0,-1,-1)];var n=new Array(512),r=new Array(512);e||(e=1),e*=65536,e=Math.floor(e),e<256&&(e|=e<<8);for(var a=0;a<256;a++){var s;a&1?s=mN[a]^e&255:s=mN[a]^e>>8&255,n[a]=n[a+256]=s,r[a]=r[a+256]=t[s%12]}this._seed=e,this._offsetMatrix=[new ve(0,0,0),new ve(0,0,1),new ve(0,1,0),new ve(0,1,1),new ve(1,0,0),new ve(1,0,1),new ve(1,1,0),new ve(1,1,1)],this.shaderChunk={defines:"",header:ife,main:"",uniforms:[{three_noise_seed:this._seed}]},this.perm=n,this.gradP=r}_fade(e){return e*e*e*(e*(e*6-15)+10)}_lerp(e,t,n){return(1-n)*e+n*t}_gradient(e){return e instanceof ve?e.x+this.perm[e.y+this.perm[e.z]]:e.x+this.perm[e.y]}static map(e,t,n,r,a){return(e-t)*(a-r)/(n-t)+r}get2(e){e.z!==void 0&&(e=new It(e.x,e.y));const t=new It(Math.floor(e.x),Math.floor(e.y));e.sub(t),t.x&=255,t.y&=255;const n=[];for(let o=0;o<4;o++){const c=this._offsetMatrix[o*2],f=new It(c.x,c.y),d=this.gradP[this._gradient(new It().addVectors(t,f))],m=new It(d.x,d.y),v=new It().subVectors(e,f);n.push(m.dot(v))}const r=this._fade(e.x),a=this._fade(e.y);return this._lerp(this._lerp(n[0],n[2],r),this._lerp(n[1],n[3],r),a)}get3(e){if(e.z===void 0)throw"Input to Perlin::get3() must be of type THREE.Vector3";const t=new ve(Math.floor(e.x),Math.floor(e.y),Math.floor(e.z));e.sub(t),t.x&=255,t.y&=255,t.z&=255;const n=[];for(let c=0;c<8;c++){const f=this._offsetMatrix[c],d=this.gradP[this._gradient(new ve().addVectors(t,f))],m=new ve().subVectors(e,f);n.push(d.dot(m))}const r=this._fade(e.x),a=this._fade(e.y),s=this._fade(e.z);return this._lerp(this._lerp(this._lerp(n[0],n[4],r),this._lerp(n[1],n[5],r),s),this._lerp(this._lerp(n[2],n[6],r),this._lerp(n[3],n[7],r),s),a)}}class afe{constructor(e){const{seed:t,scale:n,persistance:r,lacunarity:a,octaves:s,redistribution:o}=e;this._noise=new rfe(t),this._scale=n||1,this._persistance=r||.5,this._lacunarity=a||2,this._octaves=s||6,this._redistribution=o||1}get2(e){let t=0,n=1,r=1,a=n,s=this._noise.get2.bind(this._noise);for(let c=0;c<this._octaves;c++){const f=new It(e.x*this._scale*r,e.y*this._scale*r),d=s(f);t+=d*n,r*=this._lacunarity,n*=this._persistance,a+=n}return Math.pow(t,this._redistribution)/a}get3(e){let t=0,n=1,r=1,a=n,s=this._noise.get3.bind(this._noise);for(let c=0;c<this._octaves;c++){const f=new ve(e.x*this._scale*r,e.y*this._scale*r,e.z*this._scale*r),d=s(f);t+=d*n,r*=this._lacunarity,n*=this._persistance,a+=n}return Math.pow(t,this._redistribution)/a}}const gN=new ot,sfe=X.forwardRef((i,e)=>{const{scene:t,animations:n}=Qg("/demo-2022-photorealistic-meadow/Bee.glb"),r=X.useMemo(()=>WF(t),[t]),{actions:a}=G$(n,r);X.useEffect(()=>{r.traverse(f=>{f.castShadow=f.receiveShadow=!0,f.material&&(f.material.envMapIntensity=.2)})},[r]);const s=X.useMemo(()=>new afe({seed:Math.random()}),[]);X.useMemo(()=>Math.random()*100,[]);const o=X.useRef(),c=X.useRef(!1);return X.useEffect(()=>(setTimeout(()=>{a!=null&&a._bee_hover&&(c.current=!0,a._bee_hover.timeScale=10,a._bee_hover.play())},Sr.randInt(0,2e4)),()=>{var f;(f=a==null?void 0:a._bee_hover)==null||f.stop().reset()}),[a]),Eh(({clock:f},d)=>{c.current?(gN.set(f.elapsedTime,f.elapsedTime),o.current.position.y+=s.get2(gN)*.1,o.current.position.y<2&&(o.current.position.y=2),o.current.position.z+=.1,o.current.position.z>20&&(o.current.position.z=Sr.randFloat(-20,-40),o.current.position.x=Sr.randFloat(-5,-5))):o.current.position.z=100}),Ct.jsx("group",{ref:jF([o,e]),children:Ct.jsx("primitive",{scale:.02,...i,object:r})})});function ofe(i){const e=X.useRef([]);return X.useEffect(()=>{e.current.forEach(t=>{t.position.set(Sr.randFloat(-5,5),Sr.randFloat(-5,5),Sr.randFloat(-5,5))})},[]),Ct.jsx("group",{...i,children:Array.from({length:2},(t,n)=>Ct.jsx(sfe,{position:[2,0,2],ref:r=>void(r&&e.current.push(r))},`bee${n}`))})}var tH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vN=xe.createContext&&xe.createContext(tH),hh=function(){return hh=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},hh.apply(this,arguments)},lfe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function nH(i){return i&&i.map(function(e,t){return xe.createElement(e.tag,hh({key:t},e.attr),nH(e.child))})}function iH(i){return function(e){return xe.createElement(cfe,hh({attr:hh({},i.attr)},e),nH(i.child))}}function cfe(i){var e=function(t){var n=i.attr,r=i.size,a=i.title,s=lfe(i,["attr","size","title"]),o=r||t.size||"1em",c;return t.className&&(c=t.className),i.className&&(c=(c?c+" ":"")+i.className),xe.createElement("svg",hh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,s,{className:c,style:hh(hh({color:i.color||t.color},t.style),i.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&xe.createElement("title",null,a),i.children)};return vN!==void 0?xe.createElement(vN.Consumer,null,function(t){return e(t)}):e(tH)}function ufe(i){return iH({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(i)}function ffe(i){return iH({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(i)}function hfe(){return Ct.jsxs("div",{className:"copy",children:[Ct.jsx("span",{children:Ct.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://twitter.com/CantBeFaraz",children:Ct.jsx(ffe,{size:40})})}),Ct.jsxs("span",{children:["Made with  by"," ",Ct.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://twitter.com/CantBeFaraz",children:"Faraz Shaikh"})]}),Ct.jsx("span",{children:Ct.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/FarazzShaikh",children:Ct.jsx(ufe,{size:40})})})]})}const Ca={boulder1:"/demo-2022-photorealistic-meadow/models/Tundra Boulder_viztbccdw/Tundra Boulder_LOD1__viztbccdw.glb",boulder4:"/demo-2022-photorealistic-meadow/models/Tundra Rocky Ground_vjdraaqmw/Tundra Rocky Ground_LOD1__vjdraaqmw.glb",ground4:"/demo-2022-photorealistic-meadow/models/Tundra Rocky Ground_vjdragpmw/Tundra Rocky Ground_LOD1__vjdragpmw.glb",ground5:"/demo-2022-photorealistic-meadow/models/Tundra Rocky Ground_vjbodahmw/Tundra Rocky Ground_LOD1__vjbodahmw.glb",grass1:"/demo-2022-photorealistic-meadow/models/Wild Grass_vlkhcbxia/Wild Grass_LOD1_Var1_vlkhcbxia.glb",grass3:"/demo-2022-photorealistic-meadow/models/Thatching Grass_uddmcgbia/Thatching Grass_LOD1_Var1_uddmcgbia.glb",grass4:"/demo-2022-photorealistic-meadow/models/White Everlasting_ucvobbbia/White Everlasting_LOD1_Var1_ucvobbbia.glb",rockCluster:"/demo-2022-photorealistic-meadow/models/Mossy Rock Cluster_regsH/Mossy Rock Cluster_LOD1__regsH.glb"};function dfe(){const i=dr(e=>e.gl);return kF({Screenshot:Tte(()=>{const e=document.createElement("a");e.setAttribute("download","canvas.png"),e.setAttribute("href",i.domElement.toDataURL("image/png").replace("image/png","image/octet-stream")),e.click()})}),null}function pfe(){return Ct.jsx(Ct.Fragment,{children:Ct.jsxs("group",{children:[Ct.jsx(Lc,{url:Ca.ground4}),Ct.jsx(Lc,{url:Ca.ground5,position:[0,-.2,0]}),Ct.jsx(Lc,{url:Ca.ground5,position:[0,0,-20],rotation:[0,Sr.degToRad(180),0]}),Ct.jsx(Lc,{url:Ca.ground5,position:[0,0,20],rotation:[0,Sr.degToRad(180),0]}),Ct.jsxs("group",{position:[35,0,0],children:[Ct.jsx(Lc,{url:Ca.ground5}),Ct.jsx(Lc,{url:Ca.ground5,position:[0,0,-20],rotation:[0,Sr.degToRad(180),0]}),Ct.jsx(Lc,{url:Ca.ground5,position:[0,0,20],rotation:[0,Sr.degToRad(180),0]})]}),Ct.jsxs("group",{position:[35/2,0,0],children:[Ct.jsx(Ld,{url:Ca.grass3,radius:3,variation:1,scale:10,count:1e4}),Ct.jsx(Ld,{url:Ca.grass1,radius:3,variation:4,scale:13,count:1e4}),Ct.jsx(Ld,{url:Ca.grass1,radius:3,variation:3,scale:13,count:1e4}),Ct.jsx(Ld,{url:Ca.grass4,radius:3,variation:1,scale:15,count:100,noCol:!0}),Ct.jsx(Ld,{url:Ca.grass4,radius:3,variation:2,scale:15,count:50,noCol:!0}),Ct.jsx(Ld,{url:Ca.grass4,radius:3,variation:12,scale:15,count:50,noCol:!0}),Ct.jsx(Ld,{url:Ca.grass3,radius:3,variation:2,scale:15,count:200,noCol:!0}),Ct.jsx(Lc,{url:Ca.boulder1,scale:10,position:[0,0,0]}),Ct.jsx(Lc,{url:Ca.rockCluster,scale:10,position:[10,0,-15]}),Ct.jsx(Lc,{url:Ca.boulder4,scale:10,position:[-4,0,45]}),Ct.jsx(lj,{scale:[50,10,50],size:6,count:200,speed:2,noise:10,color:"yellow",position:[0,2,0]}),Ct.jsx(ofe,{position:[0,2,0]})]})]})})}function mfe(){const{DOF:i}=kF({DOF:{value:!1}});return Ct.jsxs(Gq,{children:[Ct.jsx(jq,{eskil:!1,offset:.1,darkness:.6}),Ct.jsx(Xq,{contrast:.001}),Ct.jsx($q,{saturation:.4}),Ct.jsx(Wq,{intensity:.2,luminanceThreshold:0}),i&&Ct.jsx(kq,{worldFocusDistance:new ue(25,15,25).distanceTo(new ue(35/2,0,0)),focalLength:.009,bokehScale:3})]})}function gfe(){return Ct.jsxs(Ct.Fragment,{children:[Ct.jsxs(vX,{dpr:devicePixelRatio,shadows:!0,gl:{toneMappingExposure:.8,preserveDrawingBuffer:!0},children:[Ct.jsx(dfe,{}),Ct.jsx("fog",{attach:"fog",args:[new Bt("#cee4ed").convertLinearToSRGB(),30,50]}),Ct.jsx("color",{attach:"background",args:[new Bt("#cee4ed").convertLinearToSRGB()]}),Ct.jsx(H$,{target:[35/2,0,0],autoRotate:!0,autoRotateSpeed:2,makeDefault:!0,enablePan:!1}),Ct.jsx(z$,{fov:40,position:[25,15,25],makeDefault:!0}),Ct.jsxs(X.Suspense,{children:[Ct.jsx(aj,{files:"https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/kloppenheim_04_1k.hdr"}),Ct.jsx(pfe,{})]}),Ct.jsx(sne,{}),Ct.jsx(mfe,{})]}),Ct.jsx(MX,{}),Ct.jsx(VF,{collapsed:!0,titleBar:{title:"Controls"}}),Ct.jsx(hfe,{})]})}const vfe=document.getElementById("root"),yfe=e5.createRoot(vfe);yfe.render(Ct.jsx(gfe,{}));
